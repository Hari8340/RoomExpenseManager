"use strict";(self.webpackChunkreportEmbed=self.webpackChunkreportEmbed||[]).push([[2],{73140:function(Le,oe,t){t.d(oe,{L:function(){return P}});var e=t(7005),n=t(59214),m=t(54772),i=t(67641),O=t(6067),I=t(45647),T=t(66291),f=t(6093),M=t(49943),A=t(67455),b=function(C){return{"accessibility-info-collapsed":C}},P=function(){function y(C,d){this.hotkeyDialogService=C,this.highContrastCssGenerationService=d,this.onClose=new n.EventEmitter,this.isCollapsed=!0,this.initializeHighContrastRules()}return y.prototype.onFocusIn=function(){this.show()},y.prototype.onFocusOut=function(){this.hide()},y.prototype.showKeyboardShortcuts=function(C){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(g){switch(g.label){case 0:return[4,this.hotkeyDialogService.show()];case 1:return g.sent().afterClosed().subscribe(function(){C.target.focus()}),[2]}})})},y.prototype.skipToContent=function(){this.hide(),this.onClose.emit()},y.prototype.hide=function(){this.isCollapsed=!0},y.prototype.show=function(){this.isCollapsed=!1},y.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".accessibility-info.themeableElement","{background-color: @backgroundColor !important; outline: 1px solid @foregroundColor}"),this.highContrastCssGenerationService.addRule(".accessibility-info.themeableElement a","{color: @foregroundColor !important;}"),this.highContrastCssGenerationService.addRule(".accessibility-info.themeableElement pbi-office-icon.pbi-office-icon svg > path.OfficeIconColors_HighContrast, svg","{fill: @foregroundColor !important;}")},y.\u0275fac=function(d){return new(d||y)(n.\u0275\u0275directiveInject(m.g),n.\u0275\u0275directiveInject(i.g))},y.\u0275cmp=n.\u0275\u0275defineComponent({type:y,selectors:[["accessibility-info"]],hostBindings:function(d,g){1&d&&n.\u0275\u0275listener("focusin",function(){return g.onFocusIn()})("focusout",function(){return g.onFocusOut()})},outputs:{onClose:"onClose"},decls:12,vars:12,consts:[["keyboard-shortcuts","ctrl-Enter","focus-nav-mode","Browser",1,"accessibility-info","themeableElement",3,"ngClass"],[1,"accessibility-info-items"],["tabindex","0","role","button","localize","HotkeyDialog_Help_Desc",1,"link",3,"accessible-click"],["localize","AccessibilityInfo_ShowScreenReaderTips","target","_blank","href","https://go.microsoft.com/fwlink/?linkid=852575"],["name","open_16_regular"],["tabindex","0","role","button","localize","AccessibilityInfo_SkipToContent",1,"link",3,"accessible-click"]],template:function(d,g){1&d&&(n.\u0275\u0275elementStart(0,"div",0)(1,"ul",1)(2,"li")(3,"span",2),n.\u0275\u0275listener("accessible-click",function(B){return g.showKeyboardShortcuts(B)}),n.\u0275\u0275pipe(4,"localize"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"li"),n.\u0275\u0275element(6,"a",3),n.\u0275\u0275pipe(7,"localize"),n.\u0275\u0275element(8,"tri-svg-icon",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"li")(10,"span",5),n.\u0275\u0275listener("accessible-click",function(){return g.skipToContent()}),n.\u0275\u0275pipe(11,"localize"),n.\u0275\u0275elementEnd()()()()),2&d&&(n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(10,b,g.isCollapsed)),n.\u0275\u0275advance(3),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(4,4,"HotkeyDialog_Help_Desc")),n.\u0275\u0275advance(3),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(7,6,"AccessibilityInfo_ShowScreenReaderTips_OpenInNewTab")),n.\u0275\u0275advance(4),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(11,8,"AccessibilityInfo_SkipToContent")))},dependencies:[O.NgClass,I.X,T.t,f.q,M.M,A.F],styles:["[_nghost-%COMP%]{position:absolute;z-index:10000003}@media print{[_nghost-%COMP%]{display:none}}.accessibility-info[_ngcontent-%COMP%]{position:absolute;left:0;top:0;margin:10px;padding:16px;background:white;border-radius:2px;box-shadow:0 6.4px 14.4px rgba(0,0,0,.133),0 1.2px 3.6px rgba(0,0,0,.11);outline:none;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;white-space:nowrap}.accessibility-info-items[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accessibility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.accessibility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:unset}.accessibility-info-collapsed[_ngcontent-%COMP%]{width:1px;height:1px;margin:-1px;border:0px;overflow:hidden;padding:0;opacity:0}.accessibility-info[_ngcontent-%COMP%]   tri-svg-icon[_ngcontent-%COMP%]{fill:var(--default-link-color, #1F3A93);height:16px;width:16px;margin-left:5px}.accessibility-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .accessibility-info[_ngcontent-%COMP%]   span.link[_ngcontent-%COMP%]{color:var(--default-link-color, #1F3A93);text-decoration:unset;font-size:14px;outline:none;padding:1px}.accessibility-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus, .accessibility-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{border:1px solid var(--neutral-primary-color, #333333)}.accessibility-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:var(--default-visited-link-color, #551A8B)}.accessibility-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--neutral-dark-color, #212121);cursor:pointer}"]}),y}()},73555:function(Le,oe,t){t.d(oe,{z:function(){return Ie}});var e=t(7005),n=t(59214),m=t(64450),i=t(32531),O=t(32584),I=t(5373),T=t(13057),f=t(22422),M=t(64857),A=t(81602),b=t(89515),P=t(26231),y=t(49909),C=t(6067),d=t(55858),g=t(51186),S=t(66291),B=t(92869),w=t(31820),V=t(45399),v=t(67455),c=powerbi.explore.contracts.BookmarkExtensions,u=jsCommon.DropPosition,r=jsCommon.BrowserUtils,h=["bookmarkElement"];function p(fe,re){if(1&fe&&n.\u0275\u0275element(0,"i",8),2&fe){var pe=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",pe.getExpandCollapseIconClasses())}}function D(fe,re){1&fe&&n.\u0275\u0275element(0,"i",9)}function x(fe,re){if(1&fe){var pe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"input",10),n.\u0275\u0275listener("keydown",function(ae){n.\u0275\u0275restoreView(pe);var X=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(X.handleKeyDown(ae))})("blur",function(){n.\u0275\u0275restoreView(pe);var ae=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(ae.renameBookmark())})("ngModelChange",function(ae){n.\u0275\u0275restoreView(pe);var X=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(X.bookmark.displayName=ae)}),n.\u0275\u0275elementEnd()}if(2&fe){var ge=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngModel",ge.bookmark.displayName)}}function z(fe,re){if(1&fe){var pe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"i",11)(1,"button",12),n.\u0275\u0275listener("accessible-click",function(be){n.\u0275\u0275restoreView(pe);var ae=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(ae.showContextMenu(be))}),n.\u0275\u0275pipe(2,"localize"),n.\u0275\u0275element(3,"span",13),n.\u0275\u0275elementEnd()()}2&fe&&(n.\u0275\u0275advance(1),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(2,1,"Options_Menu")))}function Q(fe,re){if(1&fe){var pe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"bookmark-node",15),n.\u0275\u0275listener("onGroupBookmarks",function(){n.\u0275\u0275restoreView(pe);var X=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(X.groupBookmarks())})("onUngroupBookmarks",function(){n.\u0275\u0275restoreView(pe);var X=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(X.ungroupBookmarks())})("onMultiSelectBookmarks",function(X){n.\u0275\u0275restoreView(pe);var le=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(le.multiSelectBookmark(X))}),n.\u0275\u0275elementEnd()}if(2&fe){var ge=re.$implicit,be=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("bookmark",ge)("selectedBookmarks",be.selectedBookmarks)("parentBookmark",be.bookmark)("isEditable",be.isEditable)}}function q(fe,re){if(1&fe&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Q,1,4,"bookmark-node",14),n.\u0275\u0275elementContainerEnd()),2&fe){var pe=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",pe.bookmark.children)}}var de=function(re,pe,ge,be){return{"bookmark-selected":re,"child-bookmark":pe,disabled:ge,"default-bookmark":be}},se=function(){return["trimmedTextWithEllipsis"]},Ie=function(){function fe(re,pe,ge,be,ae,X,le,ee,N){var F=this;this.promiseFactory=re,this.bookmarkService=pe,this.dragDataService=ge,this.explorationCapabilities=be,this.featureSwitchService=ae,this.lazyScoped=X,this.localizationService=le,this.pbiMenuService=ee,this.screenReaderService=N,this.onGroupBookmarks=new n.EventEmitter,this.onUngroupBookmarks=new n.EventEmitter,this.onMultiSelectBookmarks=new n.EventEmitter,this.Bookmark=powerbi.explore.contracts.BookmarkExtensions,this.dropConfig={accept:"bookmark"},this.getDragContext=function(){return{data:{bookmark:F.bookmark,parent:F.parentBookmark}}},this.dropActionHandler=function(E){return F.getDropAction(E)},this.bookmarkAuthoringPromise=this.lazyScoped.get("bookmarkAuthoringService")}return fe.prototype.ngOnInit=function(){var re=this;this.isEditing=!1,this.isDefaultBookmark=this.bookmark.isDefault,this.pbiEditableLabelOptions={disableClick:!0,customTooltip:!1,inputMatchLabelWidth:!1,onEdit:function(){return re.startEditName()},onBlur:function(){return re.cancelEditName()}}},fe.prototype.ngOnChanges=function(re){re.parentBookmark&&(this.isChildBookmark=!!this.parentBookmark),re.bookmark&&(this.hasChildren=c.isBookmarkGroup(this.bookmark))},fe.prototype.ngAfterViewInit=function(){var re=this;this.bookmarkElement.nativeElement.addEventListener(jsCommon.DOMConstants.contextmenuEventName,function(pe){re.isEditable&&(pe.preventDefault(),re.showContextMenu(pe))})},fe.prototype.dragDisabled=function(){return!(!this.capabilities||!this.capabilities.disallowDrag)},fe.prototype.isDisabled=function(){if(c.isBookmarkGroup(this.bookmark))return!1;var re=this.bookmark.options;return re&&re.suppressActiveSection&&re.suppressData&&re.suppressDisplay},fe.prototype.isSelected=function(){var re=this;return this.selectedBookmarks&&_.some(this.selectedBookmarks,function(pe){return pe.name===re.bookmark.name})},fe.prototype.getExpandCollapseIconClasses=function(){if(c.isBookmarkGroup(this.bookmark))return this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign?this.bookmark.isExpanded?"pbi-glyph-chevrondownmedium":"pbi-glyph-arrowright":"".concat(this.bookmark.isExpanded?"expanded":""," pbi-glyph-caretright")},fe.prototype.getExpandCollapseState=function(){if(c.isBookmarkGroup(this.bookmark))return this.bookmark.isExpanded},fe.prototype.handleKeydown=function(re){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(pe){switch(pe.label){case 0:return document.activeElement.id!==this.bookmarkElement.nativeElement.id?[2]:13!==re.keyCode?[3,2]:[4,this.selectBookmark(void 0,!1)];case 1:return pe.sent(),[3,4];case 2:return 32!==re.keyCode?[3,4]:[4,this.selectBookmark(void 0,re.ctrlKey||re.shiftKey)];case 3:pe.sent(),pe.label=4;case 4:return[2]}})})},fe.prototype.selectBookmark=function(re,pe){var ge;return void 0===pe&&(pe=!1),(0,e.mG)(this,void 0,powerbi.Promise,function(){var be,X,le,ee;return(0,e.Jh)(this,function(N){switch(N.label){case 0:return this.isDisabled()?[2]:(be=re?re.ctrlKey||re.shiftKey:pe,this.isEditable&&be?(!c.isBookmarkGroup(this.bookmark)&&!this.isChildBookmark&&this.multiSelectBookmark(this.bookmark),[3,6]):[3,1]);case 1:return c.isBookmarkGroup(this.bookmark)?(this.bookmark.isExpanded=!this.bookmark.isExpanded,[3,6]):[3,2];case 2:return c.isWebBookmark(this.bookmark)?[4,this.lazyScoped.get("personalBookmarks")]:[3,4];case 3:return X=N.sent(),[3,5];case 4:X=this.bookmarkService,N.label=5;case 5:X.apply(this.bookmark),(le=null===(ge=this.bookmark)||void 0===ge?void 0:ge.displayName)&&(ee=this.localizationService.format("Selected",le),this.screenReaderService.alert(ee)),N.label=6;case 6:return[2]}})})},fe.prototype.multiSelectBookmark=function(re){this.onMultiSelectBookmarks.emit(re)},fe.prototype.dropOntoSibling=function(re){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var pe,ge,be,ae,X;return(0,e.Jh)(this,function(le){switch(le.label){case 0:return(pe=this.dragDataService.getDragContext())&&pe.data?(ge=pe.data.bookmark,be=this.parentBookmark,ae=this.bookmark,X=3===re,c.isBookmarkGroup(this.bookmark)&&c.isStateBookmark(ge)&&X&&this.bookmark.isExpanded&&(be=this.bookmark,ae=this.bookmark.children[0],X=!1),c.isBookmarkGroup(ge)&&this.isLastChildBookmark()&&X&&(be=null,ae=this.parentBookmark),[4,this.bookmarkAuthoringPromise]):[2];case 1:return le.sent().move(ge,ae,X,be),[2]}})})},fe.prototype.startEditName=function(){!this.isEditable||(this.isEditing=!0)},fe.prototype.cancelEditName=function(){this.isEditing=!1},fe.prototype.handleKeyDown=function(re){"Enter"===re.key&&r.noModifierPressed(re)?this.renameBookmark():"Escape"===re.key&&r.noModifierPressed(re)&&this.cancelEditName(),re.stopPropagation()},fe.prototype.renameBookmark=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var pe;return(0,e.Jh)(this,function(ge){switch(ge.label){case 0:return jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(this.bookmark.displayName)?[2]:(this.cancelEditName(),c.isWebBookmark(this.bookmark)?[4,this.lazyScoped.get("personalBookmarks")]:[3,2]);case 1:return pe=ge.sent(),[3,4];case 2:return[4,this.bookmarkAuthoringPromise];case 3:pe=ge.sent(),ge.label=4;case 4:return pe.rename(this.bookmark,this.bookmark.displayName),[2]}})})},fe.prototype.showContextMenu=function(re){var pe=this;if(re.stopPropagation(),this.contextMenuOperations)this.contextMenuOperations.handleContextMenu(this,this.bookmarkElement.nativeElement);else{var ge=this.getMenuItemCollection(),ae=(0,e.pi)((0,e.pi)({},{x:re.pageX,y:re.pageY}),{element:re.target}),X=O.p.getPbiMenuConfig(ge,ae);this.pbiMenuService.open(X).onButtonClick$.pipe((0,i.q)(1)).subscribe(function(ee){pe.selectMenuItem(ee.id)})}},fe.prototype.selectMenuItem=function(re){switch(re){case 0:this.groupBookmarks();break;case 1:this.ungroupBookmarks();break;case 2:this.editBookmark();break;case 3:this.deleteBookmark();break;case 4:this.updateBookmark();break;case 5:this.toggleApplyDataOption();break;case 7:this.toggleApplyDisplayOption();break;case 6:this.toggleApplyActiveSectionOption();break;case 8:this.toggleApplyOnlyToSelectedVisuals()}},fe.prototype.getBookmarkRole=function(){return c.isWebBookmark(this.bookmark)?"option":"treeitem"},fe.prototype.getAriaLevel=function(){return c.isWebBookmark(this.bookmark)?null:this.isChildBookmark?2:1},fe.prototype.deleteBookmark=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(re){switch(re.label){case 0:return[4,this.bookmarkAuthoringPromise];case 1:return re.sent().remove(this.bookmark),[2]}})})},fe.prototype.updateBookmark=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(re){switch(re.label){case 0:return c.isStateBookmark(this.bookmark)?[4,this.bookmarkAuthoringPromise]:[2];case 1:return re.sent().update(this.bookmark),[2]}})})},fe.prototype.groupBookmarks=function(){this.onGroupBookmarks.emit()},fe.prototype.ungroupBookmarks=function(){this.onUngroupBookmarks.emit(this.bookmark)},fe.prototype.editBookmark=function(){this.isEditing=!0},fe.prototype.toggleApplyDataOption=function(){this.toggleBookmarkOption("suppressData")},fe.prototype.toggleApplyDisplayOption=function(){this.toggleBookmarkOption("suppressDisplay")},fe.prototype.toggleApplyActiveSectionOption=function(){this.toggleBookmarkOption("suppressActiveSection")},fe.prototype.toggleApplyOnlyToSelectedVisuals=function(){this.toggleBookmarkOption("applyOnlyToTargetVisuals")},fe.prototype.toggleBookmarkOption=function(re){c.isStateBookmark(this.bookmark)&&(this.bookmark.options||(this.bookmark.options={}),this.bookmark.options[re]=!this.bookmark.options[re])},fe.prototype.getDropAction=function(re){var pe=this.promiseFactory.defer(),ge=this.dragDataService.getDragContext();if(ge&&ge.data&&this.isEditable)if(c.isBookmarkGroup(ge.data.bookmark)){var ae=c.isBookmarkGroup(this.bookmark)&&!this.bookmark.isExpanded||c.isStateBookmark(this.bookmark)&&!this.isChildBookmark||this.isLastChildBookmark();u.isAbove(re)&&!this.isChildBookmark?pe.resolve(2):!u.isAbove(re)&&ae?pe.resolve(3):pe.resolve(0)}else u.isAbove(re)?pe.resolve(2):pe.resolve(3);else pe.resolve(0);return pe.promise},fe.prototype.isLastChildBookmark=function(){if(this.parentBookmark){var re=this.parentBookmark.children;return re.indexOf(this.bookmark)===re.length-1}return!1},fe.prototype.getMenuItemCollection=function(){return c.isBookmarkGroup(this.bookmark)?this.getMenuItemCollectionForBookmarkGroup(this.bookmark):this.getMenuItemCollectionForStateBookmark(this.bookmark)},fe.prototype.getMenuItemCollectionForBookmarkGroup=function(re){var pe={items:[]};return pe.items.push({key:2,type:0,text:this.localizationService.get("ItemAction_Rename")}),pe.items.push({key:1,type:0,text:this.localizationService.get("Ungroup")}),pe},fe.prototype.getMenuItemCollectionForStateBookmark=function(re){var pe={items:[]},ge=re.options;pe.items.push({key:4,type:0,text:this.localizationService.get("PBI_Button_Label_Update")}),pe.items.push({key:2,type:0,text:this.localizationService.get("ItemAction_Rename")}),pe.items.push({key:3,type:0,text:this.localizationService.get("Delete")}),pe.items.push(this.isChildBookmark?{key:1,type:0,text:this.localizationService.get("Ungroup")}:{key:0,type:0,text:this.localizationService.get("Group_Action"),disabled:!this.isSelected()}),pe.items.push({type:1}),pe.items.push({key:5,type:0,text:this.localizationService.get("ExplorationBookmarks_Data"),tooltip:this.localizationService.get("ExplorationBookmarks_Data_Tooltip"),checked:!(ge&&ge.suppressData)}),pe.items.push({key:7,type:0,text:this.localizationService.get("ExplorationBookmarks_Display"),tooltip:this.localizationService.get("ExplorationBookmarks_Display_Tooltip"),checked:!(ge&&ge.suppressDisplay)}),pe.items.push({key:6,type:0,text:this.localizationService.get("ExplorationBookmarks_ActiveSection"),tooltip:this.localizationService.get("ExplorationBookmarks_ActiveSection_Tooltip"),checked:!(ge&&ge.suppressActiveSection)}),pe.items.push({type:1});var be=ge&&ge.applyOnlyToTargetVisuals;return pe.items.push({key:8,type:0,text:this.localizationService.get("AllVisuals"),tooltip:this.localizationService.get("ExplorationBookmarks_AllVisuals_Tooltip"),checked:!be}),pe.items.push({key:8,type:0,text:this.localizationService.get("ExplorationBookmarks_SelectedVisuals"),tooltip:this.localizationService.get("ExplorationBookmarks_SelectedVisuals_Tooltip"),checked:be}),pe},fe.\u0275fac=function(pe){return new(pe||fe)(n.\u0275\u0275directiveInject(m.t),n.\u0275\u0275directiveInject(I.F),n.\u0275\u0275directiveInject(T.x),n.\u0275\u0275directiveInject(f.U),n.\u0275\u0275directiveInject(M.vZ),n.\u0275\u0275directiveInject(A.H),n.\u0275\u0275directiveInject(b.o),n.\u0275\u0275directiveInject(P.o),n.\u0275\u0275directiveInject(y.g))},fe.\u0275cmp=n.\u0275\u0275defineComponent({type:fe,selectors:[["bookmark-node"]],viewQuery:function(pe,ge){var be;(1&pe&&n.\u0275\u0275viewQuery(h,5),2&pe)&&(n.\u0275\u0275queryRefresh(be=n.\u0275\u0275loadQuery())&&(ge.bookmarkElement=be.first))},inputs:{bookmark:"bookmark",selectedBookmarks:"selectedBookmarks",isEditable:"isEditable",parentBookmark:"parentBookmark",contextMenuOperations:"contextMenuOperations",capabilities:"capabilities"},outputs:{onGroupBookmarks:"onGroupBookmarks",onUngroupBookmarks:"onUngroupBookmarks",onMultiSelectBookmarks:"onMultiSelectBookmarks"},features:[n.\u0275\u0275NgOnChangesFeature],decls:8,vars:27,consts:[["tabindex","0",1,"ui-droppable","dropzone","bookmark","themeableElement",3,"id","ngClass","drag","getDragContext","dragDisabled","drop","dropAction","click","keydown","dropHandler"],["bookmarkElement",""],["aria-hidden","true","class","caret glyphicon glyph-mini smallFontSize item-auto",3,"ngClass",4,"ngIf"],["localizeTooltip","DefaultBookmarkTooltip","class","caret glyphicon pbi-glyph-bookmark-default glyph-mini smallFontSize item-auto",4,"ngIf"],[1,"unselectable","title"],[3,"ngModel","keydown","blur","ngModelChange",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable","pbiEditableLabelClasses"],["class","menuContainer item-auto",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",1,"caret","glyphicon","glyph-mini","smallFontSize","item-auto",3,"ngClass"],["localizeTooltip","DefaultBookmarkTooltip",1,"caret","glyphicon","pbi-glyph-bookmark-default","glyph-mini","smallFontSize","item-auto"],[3,"ngModel","keydown","blur","ngModelChange"],[1,"menuContainer","item-auto"],["localizeTooltip","Options_Menu",1,"optionsMenu",3,"accessible-click"],[1,"glyphicon","pbi-glyph-more"],[3,"bookmark","selectedBookmarks","parentBookmark","isEditable","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks",4,"ngFor","ngForOf"],[3,"bookmark","selectedBookmarks","parentBookmark","isEditable","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks"]],template:function(pe,ge){1&pe&&(n.\u0275\u0275elementStart(0,"div",0,1),n.\u0275\u0275listener("click",function(ae){return ge.selectBookmark(ae)})("keydown",function(ae){return ge.handleKeydown(ae)})("dropHandler",function(ae){return ge.dropOntoSibling(ae.dropAction)}),n.\u0275\u0275template(2,p,1,1,"i",2),n.\u0275\u0275template(3,D,1,0,"i",3),n.\u0275\u0275elementStart(4,"div",4),n.\u0275\u0275template(5,x,1,1,"input",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,z,4,3,"i",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,q,2,1,"ng-container",7)),2&pe&&(n.\u0275\u0275propertyInterpolate("id",ge.bookmark.name),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction4(21,de,ge.isSelected(),ge.isChildBookmark,ge.isDisabled(),ge.isDefaultBookmark))("drag","bookmark")("getDragContext",ge.getDragContext)("dragDisabled",ge.dragDisabled())("drop",ge.dropConfig)("dropAction",ge.dropActionHandler),n.\u0275\u0275attribute("role",ge.getBookmarkRole())("aria-level",ge.getAriaLevel())("aria-label",ge.bookmark.displayName)("aria-selected",ge.isSelected())("aria-expanded",ge.getExpandCollapseState()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",ge.hasChildren),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ge.isDefaultBookmark),n.\u0275\u0275advance(2),n.\u0275\u0275property("pbiEditableLabel",ge.pbiEditableLabelOptions)("pbiEditableLabelValue",ge.bookmark.displayName)("pbiEditableLabelMode",!0)("pbiEditableLabelEditable",ge.isEditing)("pbiEditableLabelClasses",n.\u0275\u0275pureFunction0(26,se)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ge.isEditable),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ge.Bookmark.isBookmarkGroup(ge.bookmark)&&ge.bookmark.isExpanded))},dependencies:[C.NgClass,C.NgForOf,C.NgIf,d.Fj,d.JJ,d.On,g.r,S.t,B.w,w.W,V.D,fe,v.F],styles:["i.caret[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;padding:0;color:var(--neutral-tertiary-color, #A6A6A6);transform-origin:50% 50%;transition:transform .25s}i.caret.expanded[_ngcontent-%COMP%]{transform:rotate(0)}i.caret.glyphicon[_ngcontent-%COMP%]{margin:0 4px 0 0}.newPaneColors[_nghost-%COMP%]   i.caret[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   i.caret[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}"]}),fe}()},82344:function(Le,oe,t){t.d(oe,{d:function(){return b}});var e=t(7005),n=t(59214),m=t(5373),i=t(87714),O=t(11719),I=t(81602),T=t(45647),f=t(51186),M=t(67455),A=powerbi.explore.services.events,b=function(){function P(y,C,d,g){this.bookmarkService=y,this.eventBridge=C,this.viewModeState=d,this.lazyScopedProviderModern=g}return P.prototype.ngOnInit=function(){return(0,e.mG)(this,void 0,void 0,function(){var y=this;return(0,e.Jh)(this,function(C){switch(C.label){case 0:return this.eventsChannel=this.eventBridge.createChannelSubscriptionManager().subscribe(A.bookmarkViewStateChanged,function(){return y.init()}).subscribe(A.bookmarkApplied,function(d,g){!y.inPersonalBookmarksViewState()||(y.currentBookmark=_.find(y.bookmarksToPlay,function(S){return S.name===g.bookmarkName}))}),[4,this.init()];case 1:return C.sent(),[2]}})})},P.prototype.ngOnDestroy=function(){this.eventsChannel&&this.eventsChannel.unsubscribeAll()},P.prototype.ngOnChanges=function(y){return(0,e.mG)(this,void 0,void 0,function(){var C;return(0,e.Jh)(this,function(d){switch(d.label){case 0:return(y.selectedBookmark.isFirstChange()||this.selectedBookmark)&&(this.currentBookmark=this.selectedBookmark),this.currentBookmarkIndex<0?(C=this,[4,this.getBookmarkService()]):[3,2];case 1:C.bookmarksToPlay=d.sent().getBookmarkListToPlay(this.currentBookmark),d.label=2;case 2:return[2]}})})},Object.defineProperty(P.prototype,"currentBookmarkIndex",{get:function(){var C=this;return this.currentBookmark?_.findIndex(this.bookmarksToPlay,function(d){return d.name===C.currentBookmark.name}):0},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentBookmarkName",{get:function(){return this.currentBookmark?this.currentBookmark.displayName:""},enumerable:!1,configurable:!0}),P.prototype.switchTo=function(y){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(d){switch(d.label){case 0:return[4,this.getBookmarkService()];case 1:return d.sent().apply(this.bookmarksToPlay[y]),[2]}})})},P.prototype.exit=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(C){switch(C.label){case 0:return[4,this.getBookmarkService()];case 1:return C.sent().setPlayMode(!1),[2]}})})},P.prototype.init=function(){return(0,e.mG)(this,void 0,void 0,function(){var y,C,d;return(0,e.Jh)(this,function(g){switch(g.label){case 0:return null==this.viewModeState.getViewState().bookmarkView?[2]:[4,this.getBookmarkService()];case 1:return y=g.sent(),C=this.getSelectedBookmark(),this.bookmarksToPlay=y.getBookmarkListToPlay(C),d=C&&C.name,!_.isEmpty(this.bookmarksToPlay)&&this.bookmarksToPlay[0].name!==d&&y.apply(this.bookmarksToPlay[0]),[2]}})})},P.prototype.getBookmarkService=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(y){return this.inPersonalBookmarksViewState()?[2,this.lazyScopedProviderModern.get("personalBookmarks")]:[2,this.bookmarkService]})})},P.prototype.getSelectedBookmark=function(){if(!this.inPersonalBookmarksViewState())return this.selectedBookmark},P.prototype.inPersonalBookmarksViewState=function(){return 1===this.viewModeState.getViewState().bookmarkView},P.\u0275fac=function(C){return new(C||P)(n.\u0275\u0275directiveInject(m.F),n.\u0275\u0275directiveInject(i.J),n.\u0275\u0275directiveInject(O.kc),n.\u0275\u0275directiveInject(I.H))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["bookmark-play"]],inputs:{selectedBookmark:"selectedBookmark"},features:[n.\u0275\u0275NgOnChangesFeature],decls:17,vars:14,consts:[["localize","ExplorationBookmarks_PlayPosition","localize-fragments","",1,"bookmark-position"],["fragment-index","0","localize","Generic_Bookmark"],["fragment-index","1"],["fragment-index","2"],[1,"bookmark-title"],["localizeTooltip","Previous_ButtonText",1,"bookmark-icon",3,"disabled","click"],[1,"glyphicon","pbi-glyph-arrowleft","glyph-small"],["localizeTooltip","Next_ButtonText",1,"bookmark-icon",3,"disabled","click"],[1,"glyphicon","pbi-glyph-arrowright","glyph-small"],["localizeTooltip","Close",1,"bookmark-icon",3,"click"],[1,"glyphicon","pbi-glyph-close","glyph-small"]],template:function(C,d){1&C&&(n.\u0275\u0275elementStart(0,"span",0),n.\u0275\u0275element(1,"span",1),n.\u0275\u0275elementStart(2,"span",2),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"span",3),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"span",4),n.\u0275\u0275text(7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"button",5),n.\u0275\u0275listener("click",function(){return d.switchTo(d.currentBookmarkIndex-1)}),n.\u0275\u0275pipe(9,"localize"),n.\u0275\u0275element(10,"i",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"button",7),n.\u0275\u0275listener("click",function(){return d.switchTo(d.currentBookmarkIndex+1)}),n.\u0275\u0275pipe(12,"localize"),n.\u0275\u0275element(13,"i",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"button",9),n.\u0275\u0275listener("click",function(){return d.exit()}),n.\u0275\u0275pipe(15,"localize"),n.\u0275\u0275element(16,"i",10),n.\u0275\u0275elementEnd()),2&C&&(n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(d.currentBookmarkIndex+1),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(null==d.bookmarksToPlay?null:d.bookmarksToPlay.length),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(d.currentBookmarkName),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",d.currentBookmarkIndex<=0),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(9,8,"Previous_ButtonText")),n.\u0275\u0275advance(3),n.\u0275\u0275property("disabled",d.currentBookmarkIndex>=(null==d.bookmarksToPlay?null:d.bookmarksToPlay.length)-1),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(12,10,"Next_ButtonText")),n.\u0275\u0275advance(3),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(15,12,"Close")))},dependencies:[T.X,f.r,M.F],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:row;height:100%;background-color:var(--neutral-tertiary-alt-color, #C8C8C8);font-size:17px;color:var(--neutral-primary-color, #333333);align-items:center}[_nghost-%COMP%]   .hideOverflowText[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .bookmark-position[_ngcontent-%COMP%]{margin-left:20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .bookmark-title[_ngcontent-%COMP%]{flex-grow:1;text-align:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]{height:21px;margin-right:16px;display:flex;flex-direction:row;align-items:center;background-color:transparent}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--neutral-primary-color, #333333)}[_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%], [_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:var(--neutral-tertiary-color, #A6A6A6);background-color:transparent;pointer-events:none}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]:active:hover{background-color:transparent}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]   i.glyphicon[_ngcontent-%COMP%]{margin:0}"]}),P}()},36009:function(Le,oe,t){t.d(oe,{m:function(){return f}});var e=t(7005),n=t(59214),m=t(81602),i=t(11719),O=t(6067),I=t(73555);function T(M,A){if(1&M){var b=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"bookmark-node",1),n.\u0275\u0275listener("onGroupBookmarks",function(){n.\u0275\u0275restoreView(b);var d=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(d.groupBookmarks())})("onUngroupBookmarks",function(d){n.\u0275\u0275restoreView(b);var g=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(g.ungroupBookmarks(d))})("onMultiSelectBookmarks",function(d){n.\u0275\u0275restoreView(b);var g=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(g.multiSelectBookmark(d))}),n.\u0275\u0275elementEnd()}if(2&M){var P=A.$implicit,y=n.\u0275\u0275nextContext();n.\u0275\u0275property("bookmark",P)("selectedBookmarks",y.multiSelectedBookmarks)("isEditable",y.isEditable())("capabilities",y.capabilities)("contextMenuOperations",y.contextMenuOperations)}}var f=function(){function M(A,b){this.lazyScoped=A,this.viewModeState=b,this.bookmarkAuthoringPromise=this.lazyScoped.get("bookmarkAuthoringService")}return M.prototype.ngOnChanges=function(A){A.selectedBookmark&&this.resetMultiSelectedBookmarks()},M.prototype.isEditable=function(){return!this.isPlayMode()&&(this.capabilities&&this.capabilities.editableInAllViewModes||1===this.viewModeState.getMode())},M.prototype.groupBookmarks=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(A){switch(A.label){case 0:return[4,this.bookmarkAuthoringPromise];case 1:return A.sent().group(this.multiSelectedBookmarks),this.resetMultiSelectedBookmarks(),[2]}})})},M.prototype.ungroupBookmarks=function(A){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(b){switch(b.label){case 0:return powerbi.explore.contracts.BookmarkExtensions.isStateBookmark(A)?[2]:[4,this.bookmarkAuthoringPromise];case 1:return b.sent().ungroup(A),[2]}})})},M.prototype.multiSelectBookmark=function(A){if(this.isMultiSelectAllowed()){var b=_.findIndex(this.multiSelectedBookmarks,function(P){return P.name===A.name});b>-1?this.multiSelectedBookmarks.splice(b,1):this.multiSelectedBookmarks.push(A)}},M.prototype.resetMultiSelectedBookmarks=function(){if(this.selectedBookmark){if(powerbi.explore.contracts.BookmarkExtensions.isBookmarkGroup(this.selectedBookmark))return;this.multiSelectedBookmarks=[this.selectedBookmark]}else this.multiSelectedBookmarks=[]},M.prototype.isMultiSelectAllowed=function(){var A=this;return(!this.capabilities||!this.capabilities.disallowMultiSelect)&&this.isEditable()&&(!this.selectedBookmark||_.some(this.bookmarks,function(b){return b.name===A.selectedBookmark.name}))},M.prototype.isPlayMode=function(){return null!=this.viewModeState.getViewState().bookmarkView},M.\u0275fac=function(b){return new(b||M)(n.\u0275\u0275directiveInject(m.H),n.\u0275\u0275directiveInject(i.kc))},M.\u0275cmp=n.\u0275\u0275defineComponent({type:M,selectors:[["bookmark-tree"]],inputs:{bookmarks:"bookmarks",selectedBookmark:"selectedBookmark",capabilities:"capabilities",contextMenuOperations:"contextMenuOperations"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"bookmark","selectedBookmarks","isEditable","capabilities","contextMenuOperations","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks",4,"ngFor","ngForOf"],[3,"bookmark","selectedBookmarks","isEditable","capabilities","contextMenuOperations","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks"]],template:function(b,P){1&b&&n.\u0275\u0275template(0,T,1,5,"bookmark-node",0),2&b&&n.\u0275\u0275property("ngForOf",P.bookmarks)},dependencies:[O.NgForOf,I.z],styles:[".bookmark-list[_ngcontent-%COMP%]{display:block;flex:1 1 0px;overflow-y:auto;box-sizing:border-box;align-items:stretch;padding:0 4px}.bookmark-list[_ngcontent-%COMP%]   .scroll-content.scroll-scrolly_visible[_ngcontent-%COMP%]{padding-right:10px}"]}),M}()},10778:function(Le,oe,t){t.d(oe,{P:function(){return B}});var e=t(59214),n=t(22422),m=t(64857),i=t(11719),O=t(6067),I=t(26904),T=t(45647),f=t(51186),M=t(3044),A=t(67455),b=function(){function w(V){this.explorationCapabilities=V}return w.prototype.transform=function(V){return V&&!!this.explorationCapabilities.getCapabilities().showPersonalBookmarksInPane},w.\u0275fac=function(v){return new(v||w)(e.\u0275\u0275directiveInject(n.U,16))},w.\u0275pipe=e.\u0275\u0275definePipe({name:"computeIsReportPanelToggleEnabled",type:w,pure:!0}),w}(),P=function(V,v){return{bookmarks:V,selectedBookmark:v}};function y(w,V){if(1&w&&e.\u0275\u0275element(0,"pbi-lazy-load",3),2&w){var v=e.\u0275\u0275nextContext();e.\u0275\u0275property("modulePath",v.bookmarksPaneModulePath)("componentId","BookmarkListComponentId")("inputArgs",e.\u0275\u0275pureFunction2(3,P,v.bookmarks,v.selectedBookmark))}}function C(w,V){if(1&w&&e.\u0275\u0275element(0,"pbi-lazy-load",15),2&w){var v=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("modulePath",v.personalBookmarksModulePath)("componentId",v.personalBookmarksComponentId)}}function d(w,V){if(1&w){var v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-expansion-panel",11),e.\u0275\u0275listener("opened",function(){e.\u0275\u0275restoreView(v);var r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onExpansionPanelOpened(r.bookmarksViewStatePersonal))}),e.\u0275\u0275elementStart(1,"mat-expansion-panel-header",7),e.\u0275\u0275element(2,"i",12)(3,"mat-panel-title",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,C,1,2,"pbi-lazy-load",14),e.\u0275\u0275elementEnd()}if(2&w){var c=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("@.disabled",!0)("hideToggle",c.newPaneColorsEnabled),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",c.currentBookmarksView===c.bookmarksViewStatePersonal)}}function g(w,V){if(1&w&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"pbi-lazy-load",3),e.\u0275\u0275elementContainerEnd()),2&w){var v=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("modulePath",v.bookmarksPaneModulePath)("componentId","BookmarkListComponentId")("inputArgs",e.\u0275\u0275pureFunction2(3,P,v.bookmarks,v.selectedBookmark))}}function S(w,V){if(1&w){var v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",4)(1,"mat-accordion",4),e.\u0275\u0275template(2,d,5,3,"mat-expansion-panel",5),e.\u0275\u0275pipe(3,"computeIsReportPanelToggleEnabled"),e.\u0275\u0275elementStart(4,"mat-expansion-panel",6),e.\u0275\u0275listener("opened",function(){e.\u0275\u0275restoreView(v);var r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.onExpansionPanelOpened(r.bookmarksViewStateReport))}),e.\u0275\u0275pipe(5,"computeIsReportPanelToggleEnabled"),e.\u0275\u0275pipe(6,"computeIsReportPanelToggleEnabled"),e.\u0275\u0275elementStart(7,"mat-expansion-panel-header",7),e.\u0275\u0275element(8,"i",8)(9,"mat-panel-title",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,g,2,6,"ng-container",10),e.\u0275\u0275elementEnd()()()}if(2&w){var c=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,6,c.supportExpandablePanels)),e.\u0275\u0275advance(2),e.\u0275\u0275property("@.disabled",!0)("expanded",!0)("disabled",!e.\u0275\u0275pipeBind1(5,8,c.supportExpandablePanels))("hideToggle",c.newPaneColorsEnabled||!e.\u0275\u0275pipeBind1(6,10,c.supportExpandablePanels)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",c.currentBookmarksView===c.bookmarksViewStateReport)}}var B=function(){function w(V,v,c){this.explorationCapabilities=V,this.featureSwitchService=v,this.viewModeState=c,this.personalBookmarksModulePath="@powerbi/WebBookmarksUI/web-bookmarks-ui.module#WebBookmarksUIModule",this.personalBookmarksComponentId="PersonalBookmarksComponentId",this.bookmarksViewStatePersonal=1,this.bookmarksViewStateReport=0,this.newPaneColorsEnabled=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign}return w.prototype.onExpansionPanelOpened=function(V){this.currentBookmarksView=V,this.viewModeState.setBookmarkViewState(void 0)},Object.defineProperty(w.prototype,"bookmarksPaneModulePath",{get:function(){return"@powerbi/ExploreUI/lazy-modules/bookmarks-pane/bookmarks-pane.module#BookmarksPaneModule"},enumerable:!1,configurable:!0}),w.\u0275fac=function(v){return new(v||w)(e.\u0275\u0275directiveInject(n.U),e.\u0275\u0275directiveInject(m.vZ),e.\u0275\u0275directiveInject(i.kc))},w.\u0275cmp=e.\u0275\u0275defineComponent({type:w,selectors:[["bookmarks-pane-content"]],inputs:{bookmarks:"bookmarks",selectedBookmark:"selectedBookmark",supportExpandablePanels:"supportExpandablePanels"},decls:4,vars:5,consts:[[3,"modulePath","componentId","inputArgs",4,"ngIf"],["class","flexStretchItem",4,"ngIf"],["href","https://go.microsoft.com/fwlink/?linkid=856391","target","_blank","localize","ExplorationBookmarks_HelpLink",1,"bookmark-help"],[3,"modulePath","componentId","inputArgs"],[1,"flexStretchItem"],[3,"hideToggle","opened",4,"ngIf"],[3,"expanded","disabled","hideToggle","opened"],["localizeTooltip","Pane_Toggle"],["ng-if","newPaneColorsEnabled && supportExpandablePanels | computeIsReportPanelToggleEnabled",1,"expansionIndicator","glyphicon","glyph-mini"],["localize","ReportBookmarks"],[4,"ngIf"],[3,"hideToggle","opened"],["ng-if","newPaneColorsEnabled",1,"expansionIndicator","glyphicon","glyph-mini"],["localize","PersonalBookmarks"],[3,"modulePath","componentId",4,"ngIf"],[3,"modulePath","componentId"]],template:function(v,c){1&v&&(e.\u0275\u0275template(0,y,1,6,"pbi-lazy-load",0),e.\u0275\u0275template(1,S,11,12,"section",1),e.\u0275\u0275element(2,"a",2),e.\u0275\u0275pipe(3,"localize")),2&v&&(e.\u0275\u0275property("ngIf",!c.supportExpandablePanels),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!c.supportExpandablePanels),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,3,"ExplorationBookmarks_HelpLink")))},dependencies:[O.NgIf,I.R,T.X,f.r,M.pp,M.ib,M.yz,M.yK,A.F,b],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto}.flexStretchItem[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;align-self:stretch}.mat-expansion-panel[_ngcontent-%COMP%]:not(:first-of-type) > .mat-expansion-panel-header[_ngcontent-%COMP%]{border-top:none}.mat-expansion-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:0 0 40px;border-radius:0!important}.mat-expansion-panel.mat-expanded[_ngcontent-%COMP%]{flex:1 1 auto;align-self:stretch}.bookmark-help[_ngcontent-%COMP%]{flex:none;padding:6px 10px 12px;border-top:1px solid var(--neutral-primary-color, #333333);color:var(--neutral-lighter-color, #F4F4F4)}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:none!important}  .mat-expansion-panel-spacing{margin:0!important}  .mat-expansion-panel{background-color:var(--neutral-primary-color-alt, #444444)}  .mat-expansion-panel .mat-expansion-panel-header{height:40px!important;padding:0 16px;font-size:14px;border-bottom:1px solid var(--black-color, #000);border-top:1px solid var(--black-color, #000)}  .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title{color:var(--white-color, #FFF);margin:0}  .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-indicator:after{color:var(--white-color, #FFF)}  .mat-expansion-panel .mat-expansion-panel-content{display:flex;flex:1 1 auto;flex-direction:column}  .mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{display:flex;flex-direction:column;flex:1 1 auto;padding:0}  .mat-expansion-panel .mat-expansion-panel-content bookmark-list .bookmark-content.bookmark-empty .bookmark-info{line-height:normal;font-size:12px;color:var(--white-color, #FFF)}.newPaneColors[_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%]{border-color:var(--gray-40, #E1DFDD);color:var(--fluent-theme-link-darker-color, #005A9E)}.newPaneColors[_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=true][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before, .newPaneColors   [_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=true][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before{content:"\\e70e"}.newPaneColors[_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=false][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before, .newPaneColors   [_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=false][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before{content:"\\e70d"}.newPaneColors[_nghost-%COMP%]   .expansionIndicator[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]{color:var(--gray-180, #252423);margin-top:4px}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel{background-color:var(--gray-20, #F3F2F1)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header{border-color:var(--gray-40, #E1DFDD)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title{color:var(--gray-180, #252423)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-indicator:after, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-indicator:after{color:var(--gray-180, #252423)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-content bookmark-list .bookmark-content.bookmark-empty .bookmark-info, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-content bookmark-list .bookmark-content.bookmark-empty .bookmark-info{color:var(--gray-180, #252423)}html[data-focus-source="key"]   .newPaneColors[_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   .newPaneColors   [_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   .newPaneColors[_nghost-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   .newPaneColors   [_nghost-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px;background:unset}']}),w}()},39706:function(Le,oe,t){t.d(oe,{f:function(){return B}});var e=t(59214),n=t(6067),m=t(45647),i=t(51186),O=t(6093);function I(w,V){1&w&&e.\u0275\u0275element(0,"div",13)}function T(w,V){1&w&&e.\u0275\u0275element(0,"div",14)}function f(w,V){if(1&w){var v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",16),e.\u0275\u0275listener("click",function(u){e.\u0275\u0275restoreView(v);var r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.onShowErrorDetails(u))}),e.\u0275\u0275elementEnd()}}function M(w,V){if(1&w&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,f,1,0,"a",15),e.\u0275\u0275elementContainerEnd()),2&w){var v=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(v.errorInfo&&v.errorInfo.hideSeeDetails))}}function A(w,V){if(1&w&&e.\u0275\u0275element(0,"a",17),2&w){var v=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("href",v.errorInfo.details.helpLink,e.\u0275\u0275sanitizeUrl)}}function b(w,V){1&w&&e.\u0275\u0275element(0,"span",18)}function P(w,V){1&w&&e.\u0275\u0275element(0,"span",19)}function y(w,V){1&w&&e.\u0275\u0275element(0,"span",18)}function C(w,V){1&w&&e.\u0275\u0275element(0,"span",20)}function d(w,V){1&w&&e.\u0275\u0275element(0,"span",20)}function g(w,V){1&w&&e.\u0275\u0275element(0,"span",21)}var B=function(){function w(){this.fixErrors=new e.EventEmitter,this.showErrorDetails=new e.EventEmitter}return w.prototype.ngOnInit=function(){this.updateErrorOverlayVisibility(this.viewport)},w.prototype.ngOnChanges=function(V){V.viewport&&this.updateErrorOverlayVisibility(this.viewport),(V.errorInfo||V.viewMode)&&(this.isFixButtonVisible=this.errorInfo&&(1===this.viewMode&&0!==this.errorInfo.fixableError||0===this.viewMode&&3===this.errorInfo.fixableError))},w.prototype.updateErrorOverlayVisibility=function(V){!V||(this.showErrorMessage=V.width>=270)},w.prototype.onShowErrorDetails=function(V){V.preventDefault(),this.showErrorDetails.emit()},w.\u0275fac=function(v){return new(v||w)},w.\u0275cmp=e.\u0275\u0275defineComponent({type:w,selectors:[["canvas-visual-error-overlay"]],inputs:{errorInfo:"errorInfo",viewMode:"viewMode",viewport:"viewport"},outputs:{fixErrors:"fixErrors",showErrorDetails:"showErrorDetails"},features:[e.\u0275\u0275NgOnChangesFeature],decls:19,vars:14,consts:[["focus-nav-mode","Group","keyboard-shortcuts","ctrl-ArrowRight scoped",1,"errorMessage","themableBackgroundColorSolid"],[3,"ngSwitch"],["class","glyphicon pbi-glyph-error glyph-med",4,"ngSwitchDefault"],["class","glyphicon pbi-glyph-blockedsite glyph-med",4,"ngSwitchCase"],[1,"errorSpan",3,"hidden"],[4,"ngSwitchDefault"],["localize","LearnMore","localizeTooltip","LearnMore","class","errorSeeMore","target","_blank",4,"ngSwitchCase"],[1,"fixThisContainer"],[1,"btn","primary",3,"hidden","click"],["localize","Fix_This","localizeTooltip","FixReferences_ToolTip",4,"ngSwitchCase"],["localize","Fix_This","localizeTooltip","RelationshipDetection_Tooltip",4,"ngSwitchCase"],["localize","VisualContainer_EnableScriptVisuals",4,"ngSwitchCase"],["localize","Fix_This","localizeTooltip","FixDataSourceSettings_ToolTip",4,"ngSwitchCase"],[1,"glyphicon","pbi-glyph-error","glyph-med"],[1,"glyphicon","pbi-glyph-blockedsite","glyph-med"],["localize","VisualContainer_ShowErrorDetails","localizeTooltip","VisualContainer_ShowErrorDetails","class","errorSeeMore","href","",3,"click",4,"ngIf"],["localize","VisualContainer_ShowErrorDetails","localizeTooltip","VisualContainer_ShowErrorDetails","href","",1,"errorSeeMore",3,"click"],["localize","LearnMore","localizeTooltip","LearnMore","target","_blank",1,"errorSeeMore"],["localize","Fix_This","localizeTooltip","FixReferences_ToolTip"],["localize","Fix_This","localizeTooltip","RelationshipDetection_Tooltip"],["localize","VisualContainer_EnableScriptVisuals"],["localize","Fix_This","localizeTooltip","FixDataSourceSettings_ToolTip"]],template:function(v,c){1&v&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,I,1,0,"div",2),e.\u0275\u0275template(3,T,1,0,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div")(5,"span",4),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(7,1),e.\u0275\u0275template(8,M,2,1,"ng-container",5),e.\u0275\u0275template(9,A,1,1,"a",6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",7)(11,"button",8),e.\u0275\u0275listener("click",function(){return c.fixErrors.emit()}),e.\u0275\u0275elementContainerStart(12,1),e.\u0275\u0275template(13,b,1,0,"span",9),e.\u0275\u0275template(14,P,1,0,"span",10),e.\u0275\u0275template(15,y,1,0,"span",9),e.\u0275\u0275template(16,C,1,0,"span",11),e.\u0275\u0275template(17,d,1,0,"span",11),e.\u0275\u0275template(18,g,1,0,"span",12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()),2&v&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",c.errorInfo&&c.errorInfo.overlayType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!c.showErrorMessage),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(c.errorInfo&&c.errorInfo.details&&c.errorInfo.details.message),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",c.errorInfo&&c.errorInfo.details&&c.errorInfo.details.errorType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!c.isFixButtonVisible),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",c.errorInfo&&c.errorInfo.fixableError),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",3),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",4),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",5),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",6))},dependencies:[n.NgIf,n.NgSwitch,n.NgSwitchCase,n.NgSwitchDefault,m.X,i.r,O.q],styles:["[_nghost-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:14px;display:table;background-color:var(--neutral-lighter-color, #F4F4F4);width:100%;height:100%;color:var(--black-color, #000)}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]{display:table-cell;line-height:normal;vertical-align:middle;padding:0 20px;margin:4px;text-align:center}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%]{margin-right:4px}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   .fixThisContainer[_ngcontent-%COMP%]{margin-top:12px}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   a.errorSeeMore[_ngcontent-%COMP%]{text-decoration:underline}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{outline:1px solid #000000}"]}),w}()},91656:function(Le,oe,t){t.d(oe,{f:function(){return A}});var e=t(59214),n=t(22422),m=t(89515),i=t(6067),O=t(80268),I=t(67455);function T(b,P){if(1&b&&e.\u0275\u0275element(0,"i"),2&b){var y=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("infoIcon glyphicon ",y.useStylableHeader()?"pbi-glyph-info-nocircle":"pbi-glyph-info","")}}function f(b,P){1&b&&e.\u0275\u0275element(0,"i",4)}function M(b,P){1&b&&e.\u0275\u0275element(0,"i",5)}var A=function(){function b(P,y){this.explorationCapabilities=P,this.localizationService=y}return b.prototype.getTooltipConfig=function(){return{tooltipArrowPosition:powerbi.common.ArrowPosition.arrowTopLeft,tooltipDelay:100,tooltipDescription:this.getWarningMessage()}},b.prototype.getWarningMessage=function(){var P=this.details;return P?this.hasAdditionalErrorInfo(P)?P.message+" "+this.localizationService.get("VisualContainer_ClickToSeeMore"):P.message:""},b.prototype.useStylableHeader=function(){return this.explorationCapabilities&&this.explorationCapabilities.getCapabilities().visualContainerOptions.useStylableHeader},b.prototype.isClickable=function(){var P=this.details;return!!P&&(!_.isEmpty(P.message)||this.hasAdditionalErrorInfo(P))},b.prototype.hasAdditionalErrorInfo=function(P){return powerbi.explore.util.ErrorDetailsUtility.hasAdditionalErrorInfo(P)},b.\u0275fac=function(y){return new(y||b)(e.\u0275\u0275directiveInject(n.U),e.\u0275\u0275directiveInject(m.o))},b.\u0275cmp=e.\u0275\u0275defineComponent({type:b,selectors:[["canvas-visual-header-icon"]],inputs:{details:"details",iconType:"iconType"},decls:5,vars:9,consts:[[3,"pbi-tooltip","disabled","ngSwitch"],[3,"class",4,"ngSwitchCase"],["class","warningIcon pbi-glyph-warning glyphicon",4,"ngSwitchCase"],["class","errorIcon pbi-glyph-error glyphicon",4,"ngSwitchCase"],[1,"warningIcon","pbi-glyph-warning","glyphicon"],[1,"errorIcon","pbi-glyph-error","glyphicon"]],template:function(y,C){1&y&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275template(2,T,1,3,"i",1),e.\u0275\u0275template(3,f,1,0,"i",2),e.\u0275\u0275template(4,M,1,0,"i",3),e.\u0275\u0275elementEnd()),2&y&&(e.\u0275\u0275property("pbi-tooltip",C.getTooltipConfig())("disabled",!C.isClickable())("ngSwitch",C.iconType),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,7,"VisualContainer_ClickToSeeMore")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitchCase","info"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","warning"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","error"))},dependencies:[i.NgSwitch,i.NgSwitchCase,O.i,I.F],styles:[".warningIcon[_ngcontent-%COMP%], .infoIcon[_ngcontent-%COMP%], .errorIcon[_ngcontent-%COMP%]{font-size:16px}.warningIcon[_ngcontent-%COMP%]{color:var(--theme-primary-color, #F2C811)}.infoIcon[_ngcontent-%COMP%]{color:var(--info-dark-color, #33669A)}.errorIcon[_ngcontent-%COMP%]{color:var(--warning-color, #A4262C)}"]}),b}()},77235:function(Le,oe,t){t.d(oe,{Fy:function(){return S}});var e=t(59214),n=t(87714),m=t(94312),i=t(80049),O=t(51186),I=t(33710),T=powerbi.explore.services.events,f=["carouselScrollPane"],M=["previousPageButton"],A=["nextPageButton"],b=function(){return{"aria-label":"Carousel_PreviousPages"}},P=function(){return{"aria-label":"Carousel_NextPages"}},y=["*"],S=function(){function B(w,V,v,c){this.eventBridge=w,this.rtlService=V,this.element=v,this.renderer=c,this.onSeeAll=new e.EventEmitter,this.previousWidth=0,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager()}return Object.defineProperty(B.prototype,"isRtl",{get:function(){return this.rtlService.isRtlLayout},enumerable:!1,configurable:!0}),B.prototype.carouselResized=function(){if(this.autoResize){var w=this.element.nativeElement.parentElement.offsetWidth;w!==this.previousWidth&&(this.previousWidth=w,this.updateCarouselWidth(),this.scrollActiveItemIntoView())}},B.prototype.ngOnInit=function(){var w=this;if(this.isScrollingActiveItemIntoView=!1,this.autoResize){this.subscriptionManager.subscribe(T.sectionNameChanged,function(){return w.updateCarouselWidth()});var V=0;new MutationObserver(function(u){w.updateCarouselWidth();var r=w.getScrollChildren().length;V===r-1?w.scrollToLast():0===V&&w.scrollActiveItemIntoView(),V=r}).observe(this.scrollPane.nativeElement,{childList:!0,characterData:!0,attributes:!0})}},B.prototype.ngOnDestroy=function(){this.subscriptionManager&&this.subscriptionManager.unsubscribeAll()},B.prototype.ngOnChanges=function(){this.updateCarouselWidth(),this.scrollActiveItemIntoView()},B.prototype.ngAfterViewInit=function(){var w=this;this.subscriptionManager.subscribe(T.updateNavButtonEvent,function(){return w.updateNavButtonVisibility()})},B.prototype.getScrollChildren=function(){var w=this.scrollPane.nativeElement.children;return this.isReadingMode&&(w=$(w).not(".hidden-in-view-mode")),w},B.prototype.onNavButtonContainerRightClick=function(w){w.preventDefault(),this.onSeeAll&&this.onSeeAll.emit(w)},B.prototype.scrollToNext=function(){for(var w=this.getScrollChildren(),V=this.scrollPane.nativeElement.offsetWidth,v=this.isRtl?w.length-1:0;this.isRtl?v>=0:v<w.length;this.isRtl?v--:v++){var c=$(w[v]);if(c.position().left+c.width()>V){this.scrollToChild(c);break}}},B.prototype.scrollToPrevious=function(){for(var v,w=this.scrollPane,V=this.getScrollChildren(),c=-w.nativeElement.offsetWidth,u=this.isRtl?V.length-1:0;this.isRtl?u>=0:u<V.length;this.isRtl?u--:u++)if((v=$(V[u])).position().left>=c){this.scrollToChild(v);break}},B.prototype.scrollToChild=function(w){var V=this;if(w&&w.length>0){this.isScrollingActiveItemIntoView=!0;var v=$(this.scrollPane.nativeElement),c=v.scrollLeft()+w.position().left-v.position().left;v.animate({scrollLeft:c},250,function(){V.updateNavButtonVisibility(),V.isScrollingActiveItemIntoView=!1})}},B.prototype.scrollToLast=function(){var w=_.last(this.getScrollChildren());this.scrollToChild($(w))},B.prototype.scrollActiveItemIntoView=function(){if(!this.isScrollingActiveItemIntoView){var w=this.element.nativeElement.getElementsByClassName("selected");this.scrollToChild($(w[0]))}},B.prototype.updateCarouselWidth=function(){if(null!==this.scrollPane.nativeElement.offsetParent){for(var w=this.element.nativeElement.parentElement.offsetWidth,V=this.getScrollChildren(),v=0,c=0,u=V.length;c<u;c++)v+=$(V[c]).outerWidth(!0);var r=v+40;w>39&&(r=Math.min(w-(this.isReadingMode?0:39),r)),$(this.element.nativeElement).width(r)}this.updateNavButtonVisibility()},B.prototype.updateNavButtonVisibility=function(){this.renderer.setProperty(this.previousNavButton.nativeElement,"disabled",!1),this.renderer.setProperty(this.nextNavButton.nativeElement,"disabled",!1);var w=this.isRtl?-1:1;w*this.scrollPane.nativeElement.scrollLeft<=0&&this.renderer.setProperty(this.previousNavButton.nativeElement,"disabled",!0),Math.abs(w*this.scrollPane.nativeElement.scrollLeft+(this.scrollPane.nativeElement.offsetWidth-this.scrollPane.nativeElement.scrollWidth))<=2&&this.renderer.setProperty(this.nextNavButton.nativeElement,"disabled",!0)},B.\u0275fac=function(V){return new(V||B)(e.\u0275\u0275directiveInject(n.J),e.\u0275\u0275directiveInject(m.q),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Renderer2))},B.\u0275cmp=e.\u0275\u0275defineComponent({type:B,selectors:[["carousel"]],viewQuery:function(V,v){if(1&V&&(e.\u0275\u0275viewQuery(f,7),e.\u0275\u0275viewQuery(M,7),e.\u0275\u0275viewQuery(A,7)),2&V){var c=void 0;e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(v.scrollPane=c.first),e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(v.previousNavButton=c.first),e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(v.nextNavButton=c.first)}},inputs:{autoResize:"autoResize",isReadingMode:"isReadingMode"},outputs:{onSeeAll:"onSeeAll"},features:[e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:y,decls:11,vars:4,consts:[["role","presentation","data-automation-id","carousel",1,"carouselControl",3,"mouseenter","on-resize"],["data-automation-id","carousel_navButtonContainer",1,"navButtonContainer",3,"contextmenu"],["tabindex","-1","localize-tooltip","Carousel_PreviousPages","data-automation-id","carousel_previousPage",1,"carouselNavButton","previousPage",3,"localizeAttr","click"],["previousPageButton",""],[1,"glyphicon","pbi-glyph-caretleft","glyph-mini"],["tabindex","-1","localize-tooltip","Carousel_NextPages","data-automation-id","carousel_nextPage",1,"carouselNavButton","nextPage",3,"localizeAttr","click"],["nextPageButton",""],[1,"glyphicon","pbi-glyph-caretright","glyph-mini"],["role","presentation","data-automation-id","carousel_carouselScrollPane",1,"carouselScrollPane"],["carouselScrollPane",""]],template:function(V,v){1&V&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("mouseenter",function(){return v.updateNavButtonVisibility()})("on-resize",function(){return v.carouselResized()}),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275listener("contextmenu",function(u){return v.onNavButtonContainerRightClick(u)}),e.\u0275\u0275elementStart(2,"button",2,3),e.\u0275\u0275listener("click",function(){return v.isRtl?v.scrollToNext():v.scrollToPrevious()}),e.\u0275\u0275element(4,"i",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",5,6),e.\u0275\u0275listener("click",function(){return v.isRtl?v.scrollToPrevious():v.scrollToNext()}),e.\u0275\u0275element(7,"i",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",8,9),e.\u0275\u0275projection(10),e.\u0275\u0275elementEnd()()),2&V&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(2,b)),e.\u0275\u0275advance(3),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(3,P)))},dependencies:[i.b,O.r,I.O],styles:[".carouselControl[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;height:100%}.carouselControl[_ngcontent-%COMP%]:hover   .carouselNavButton[_ngcontent-%COMP%]{opacity:1}.carouselControl[_ngcontent-%COMP%]   .navButtonContainer[_ngcontent-%COMP%]{display:flex}.carouselControl[_ngcontent-%COMP%]   .carouselNavButton[_ngcontent-%COMP%]{width:20px;padding:0;margin:0;border:none;background:transparent;line-height:1em;font-size:1em;outline:none;opacity:0;transition:opacity .5s}.carouselControl[_ngcontent-%COMP%]   .carouselNavButton.previousPage[_ngcontent-%COMP%]{left:0}.carouselControl[_ngcontent-%COMP%]   .carouselNavButton.nextPage[_ngcontent-%COMP%]{right:0}.carouselControl[_ngcontent-%COMP%]   .carouselScrollPane[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden}",".exploreHost.landingController[_nghost-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]{width:inherit!important}.exploreHost.landingController[_nghost-%COMP%]   .carouselControl[_ngcontent-%COMP%]   .navButtonContainer[_ngcontent-%COMP%]   .carouselNavButton.nextPage[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .carouselControl[_ngcontent-%COMP%]   .navButtonContainer[_ngcontent-%COMP%]   .carouselNavButton.nextPage[_ngcontent-%COMP%]{border-right:none}.exploreHost.landingController[_nghost-%COMP%]   .carouselScrollPane[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .carouselScrollPane[_ngcontent-%COMP%]{left:88px!important}"]}),B}()},8062:function(Le,oe,t){t.d(oe,{D:function(){return g}});var e=t(59214),n=t(22422),m=t(64857),i=t(93667),O=t(79382),I=t(44302),T=t(11719),f=t(6067),M=t(26904),A=t(6093),b=t(64700),P=t(43533),y=powerbi.telemetry,C=powerbi.explore.util;function d(S,B){if(1&S&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275element(1,"pbi-lazy-load",5),e.\u0275\u0275elementEnd()),2&S){var w=e.\u0275\u0275nextContext();e.\u0275\u0275property("hidden",!w.viewModel.isPaneExpanded),e.\u0275\u0275advance(1),e.\u0275\u0275property("modulePath",w.fieldListModulePath)("componentId","FieldListContainerComponentId")}}var g=function(){function S(B,w,V,v,c,u){this.explorationCapabilities=B,this.featureSwitchService=w,this.gettingStarted=V,this.panesVisibility=v,this.telemetryService=c,this.viewModeState=u,this.exploreUIShellConfig=powerbi.explore.modules.ExploreUIShellModule}return S.prototype.ngOnInit=function(){var B=this;this.visibilitySubscription=this.gettingStarted.fieldsPaneVisibility$.subscribe(function(w){var V=B.explorationCapabilities.getCapabilities();B.viewModel.isPaneExpanded!==w&&!V.forceCollapseTaskPane&&B.panesVisibility.togglePaneExpansion(2)}),this.paneTitleKey=this.featureSwitchService.featureSwitches.onObject?this.viewModel.title:"TaskPane_Fields"},S.prototype.ngOnDestroy=function(){this.visibilitySubscription.unsubscribe()},S.prototype.toggleDataPane=function(){var B=this.panesVisibility.togglePaneExpansion(2);this.telemetryService.logEvent(y.EXTogglePaneExpanded,{paneType:"Task",expanded:B,viewMode:C.getTelemetryViewMode(this.viewModeState.getMode())})},Object.defineProperty(S.prototype,"fieldListModulePath",{get:function(){return"./lazy-modules/field-list/field-list.module#FieldListModule"},enumerable:!1,configurable:!0}),S.prototype.close=function(){this.panesVisibility.closePane(2)},S.\u0275fac=function(w){return new(w||S)(e.\u0275\u0275directiveInject(n.U),e.\u0275\u0275directiveInject(m.vZ),e.\u0275\u0275directiveInject(i.c),e.\u0275\u0275directiveInject(O.r),e.\u0275\u0275directiveInject(I.y0),e.\u0275\u0275directiveInject(T.kc))},S.\u0275cmp=e.\u0275\u0275defineComponent({type:S,selectors:[["data-pane"]],inputs:{viewModel:"viewModel"},decls:4,vars:5,consts:[["disableScroll","","modeling-context-changer","","data-automation-type","taskPaneGroup","keyboard-shortcuts","ctrl-F6","focus-nav-mode","Group","focus-priority","12",3,"expanded","title","allowToggle","showClose","onClose","onToggle"],["noPadding","",1,"paneSection"],["class","paneContents","pbiLazyLoadContents","exploreUIShellConfig",3,"hidden",4,"ngIf"],["tabindex","0",1,"paneStopBottom"],["pbiLazyLoadContents","exploreUIShellConfig",1,"paneContents",3,"hidden"],[3,"modulePath","componentId"]],template:function(w,V){1&w&&(e.\u0275\u0275elementStart(0,"pbi-pane",0),e.\u0275\u0275listener("onClose",function(){return V.close()})("onToggle",function(){return V.toggleDataPane()}),e.\u0275\u0275elementStart(1,"pbi-pane-section",1),e.\u0275\u0275template(2,d,2,3,"div",2),e.\u0275\u0275element(3,"div",3),e.\u0275\u0275elementEnd()()),2&w&&(e.\u0275\u0275property("expanded",V.viewModel.isPaneExpanded)("title",V.paneTitleKey)("allowToggle",!V.viewModel.disallowExpandCollapse)("showClose",V.viewModel.allowClosingPane),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",V.viewModel.isPaneVisible))},dependencies:[f.NgIf,M.R,A.q,b.V,P.i],encapsulation:2,changeDetection:0}),S}()},87311:function(Le,oe,t){t.d(oe,{X:function(){return k}});var e=t(7005),n=t(64450),m=t(59214),i=t(78099),O=t(64875),I=t(89718),T=t(76115),f=t(87714),M=t(20019),A=t(42645),b=t(537),P=t(48568),y=t(64857),C=t(98467),d=t(92119),g=t(89515),S=t(82372),B=t(49909),w=t(44302),V=t(41844),v=t(57644),c=t(96818),u=t(26963),r=t(6067),h=t(45647),p=t(49943),D=t(27316),x=powerbi.explore,z=x.contracts,Q=powerbi.data,de=x.services.events,se=x.util,Ie=x.viewModels,fe=powerbi.visuals,re=Q.DataViewObjectDefinitions,pe=se.DetailVisualUtils,ge=powerbi.Prototype,be=Q.SQConstantExpr,ae=Q.SQExprBuilder,X=x.util.SparklinesUtil,le=fe.TablixProperties,ee=x.util.VisualContainerUtils;function N(R,W){if(1&R&&m.\u0275\u0275element(0,"visual-modern",3),2&R){var Z=m.\u0275\u0275nextContext();m.\u0275\u0275property("viewModel",Z.viewModel.visual)("supportsScreenReader",!0)}}function F(R,W){if(1&R&&(m.\u0275\u0275elementStart(0,"div",6),m.\u0275\u0275element(1,"tri-svg-icon",7),m.\u0275\u0275elementStart(2,"div",8),m.\u0275\u0275element(3,"span",9),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(4,"div",10)(5,"span",11),m.\u0275\u0275text(6),m.\u0275\u0275elementEnd()()()),2&R){var Z=m.\u0275\u0275nextContext(2);m.\u0275\u0275advance(6),m.\u0275\u0275textInterpolate(Z.errorMessage)}}function E(R,W){if(1&R&&(m.\u0275\u0275elementStart(0,"div",4),m.\u0275\u0275template(1,F,7,1,"div",5),m.\u0275\u0275elementEnd()),2&R){var Z=m.\u0275\u0275nextContext();m.\u0275\u0275styleProp("width",Z.viewModel.visual.viewport.width,"px")("height",Z.viewModel.visual.viewport.height,"px"),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",Z.inVisualCalcMode&&Z.isInitialized)}}var k=function(){function R(W,Z,me,_e,he,G,ce,Fe,je,Oe,J,ue,Me,Se,Ge,nt,st,yt,Ae,Ve,xe){this.conceptualSchemaProxy=W,this.dataSourcesService=Z,this.drillService=me,this.eventBridge=_e,this.explorationNavigation=he,this.featureSwitchService=G,this.filterGenerator=ce,this.geocoder=Fe,this.geolocationService=je,this.localizationService=Oe,this.modulLoader=J,this.promiseFactory=ue,this.screenReaderService=Me,this.singleExecutableDataProxyFactory=Se,this.telemetryService=Ge,this.visibility=nt,this.visualAuthoring=st,this.visualAuthoringOperations=yt,this.visualHostTooltipServiceFactory=Ae,this.visualPlugin=Ve,this.visualQueryGenerator=xe,this.inVisualCalcMode=!1}return R.prototype.ngOnChanges=function(W){null!=this.viewModel&&(W.themeCollection&&(this.viewModel.visual.themeCollection=W.themeCollection.currentValue),W.viewport&&(this.viewModel.visual.viewport=pe.adjustViewport(this.viewModel.parentContract.detailVisualLayout,W.viewport.currentValue,this.inVisualCalcMode)),W.visualContainer&&(this.viewModel.parentContract=W.visualContainer.currentValue),void 0===this.isInitialized&&this.initializeVisual())},R.prototype.ngOnInit=function(){this.viewModel=Ie.DetailVisualViewModelUtils.convertDetailVisual(this.visualContainer,this.themeCollection,this.viewport,this.inVisualCalcMode,this.detailVisualSpinnerActionCallback),this.inVisualCalcMode=this.inVisualCalcMode,this.detailVisualSpinnerActionCallback=this.detailVisualSpinnerActionCallback,this.dataProxy=this.singleExecutableDataProxyFactory.create(),this.visualDataProxyService=x.services.createExploreVisualDataProxyService(this.dataProxy,this.filterGenerator,this.promiseFactory,this.visualPlugin),this.queryVisualHostServices=this.createQueryVisualHostServices(),this.initializeVisual()},R.prototype.ngOnDestroy=function(){this.subscriptionManager&&this.subscriptionManager.unsubscribeAll()},R.prototype.initializeVisual=function(){var W=this;if(this.viewModel&&this.viewModel.parentContract){var Z=this.viewModel.parentContract,me=this.viewModel.visual;me.visualPlugin=this.visualPlugin,me.interactivityOptions={isInteractiveLegend:!1,selection:!1},me.type=18&Z.visibility?fe.plugins.pivotTable.name:fe.plugins.accessibleTable.name;var he={conceptualSchemaProxy:this.conceptualSchemaProxy,dataSources:this.dataSourcesService,drill:this.drillService,eventBridge:this.eventBridge,explorationNavigation:this.explorationNavigation,featureSwitchService:this.featureSwitchService,filterGenerator:this.filterGenerator,geocoder:this.geocoder,geolocationService:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.modulLoader,promiseFactory:this.promiseFactory,screenReaderService:this.screenReaderService,singleExecutableDataProxyFactory:this.singleExecutableDataProxyFactory,telemetryService:this.telemetryService,visibility:this.visibility,visualAuthoring:this.visualAuthoring,visualHostTooltipServiceFactory:this.visualHostTooltipServiceFactory,visualPlugin:this.visualPlugin,visualAuthoringOperations:this.visualAuthoringOperations,visualQueryGenerator:this.visualQueryGenerator,geolocation:this.geolocationService,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(me)};me.hostServices=ge.inherit(x.services.createVisualHostServices(he),function(G){G.persistProperties=function(ce){return W.persistProperties(ce)},G.getLocalizedString=function(ce){for(var Fe,je=[],Oe=1;Oe<arguments.length;Oe++)je[Oe-1]=arguments[Oe];return(Fe=W.localizationService).format.apply(Fe,(0,e.ev)([ce],je||[],!1))},G.getViewMode=function(){return 1},G.loadMoreData=function(){W.runQuery(!1,!1,!0)},G.alertScreenReader=function(ce){return W.screenReaderService.alertPolite(ce)}}),this.initializeDetailVisualContract(me.type),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(de.visualContainerChanged,function(G,ce){ce&&W.viewModel.parentContract&&ce.affectContainer(W.viewModel.parentContract)&&W.runQuery(!1)}).subscribe(de.filterContainerChanged,function(G,ce){(0!==ce.scope.scopeType||ce.scope.container===W.viewModel.parentContract)&&W.runQuery(!1)}).subscribe(de.parentExpandCollapseAction,function(G,ce){ce.visualContainer===W.viewModel.parentContract&&W.runQuery(!1)}),this.isInitialized=!1,this.runQuery(!0)}},R.prototype.initializeDetailVisualContract=function(W){this.detailVisualContract={name:this.viewModel.parentContract.name,config:{singleVisual:{visualType:W}},layouts:jsCommon.ArrayExtensions.extendWithId([{id:0,position:{x:0,y:0,width:0,height:0}}])}},R.prototype.updateSubtotalState=function(){var W=this.viewModel.parentContract,Z=!1,me=!1;if(W.config&&W.config.singleVisual&&!this.inVisualCalcMode)if("pivotTable"===W.config.singleVisual.visualType){if(Z=!0,me=!0,W.config.singleVisual.objects){var _e=re.getValue(W.config.singleVisual.objects,le.PropSubTotalsPivotTableColumnSubtotals,void 0);_e&&_e.value&&(me=be.getBooleanValue(_e)),(_e=re.getValue(W.config.singleVisual.objects,le.PropSubTotalsPivotTableRowSubtotals,void 0))&&_e.value&&(Z=be.getBooleanValue(_e))}}else"tableEx"===W.config.singleVisual.visualType?Z=!0:W.config.singleVisual.visualType===powerbi.visuals.plugins.waterfallChart.name&&(me=!0);else this.inVisualCalcMode&&(Z=!0,me=!0);var he=this.detailVisualContract.config.singleVisual.objects||{};re.setValue(he,le.PropSubTotalsPivotTableRowSubtotals,null,ae.boolean(Z)),re.setValue(he,le.PropSubTotalsPivotTableColumnSubtotals,null,ae.boolean(me)),this.inVisualCalcMode&&(re.setValue(he,le.PropRowsSteppedLayout,null,ae.boolean(!1)),re.setValue(he,le.PropRowsExpandCompositeHierarchy,null,ae.boolean(!0)),re.setValue(he,le.PropSubTotalsPivotTableRowSubtotalsPerLevel,null,ae.boolean(!0)),re.setValue(he,le.PropSubTotalsPivotTableColumnSubtotalsPerLevel,null,ae.boolean(!0)),re.setValue(he,le.PropSubTotalsPivotTableLevelSubtotalEnabled,null,ae.boolean(!0)),re.setValue(he,le.PropSubTotalsPivotTableRowSubtotalsPosition,null,ae.text(powerbi.visuals.rowSubtotalPosition.bottom))),this.detailVisualContract.config.singleVisual.objects=he},R.prototype.persistProperties=function(W){var Z=this.detailVisualContract,me=_.isArray(W)?{replace:W}:W;this.visualAuthoring.persistProperties(me,Z,!0)&&this.runQuery(!1,!0)},R.prototype.runQuery=function(W,Z,me){var _e=this;if(void 0===me&&(me=!1),this.viewModel&&this.viewModel.parentContract){this.updateSubtotalState();var he=this.viewModel.parentContract,G=this.dataSourcesService.get();if(G&&he.config&&he.config.singleVisual){if(null==he.config.singleVisual.query)return this.clearData(),this.errorMessage=this.localizationService.get("Please_Add_Field_Or_VisualCalc"),void(this.isInitialized=!0);me&&!this.visualDataProxyService.canLoadMore()||(this.startSpinner(),this.conceptualSchemaProxy.get(G).then(function(ce){var Fe=_e.viewModel.parentContract,je=z.SingleVisualConfig.clone(Fe.config.singleVisual),Oe={name:Fe.name,config:{singleVisual:je}};return X.replaceSparklineDataWithMeasure(ce,Oe,_e.visualAuthoringOperations),_e.inVisualCalcMode&&null!=je.query&&(_e.drillService.drillToLastLevel(Oe),je.query.expansionStates=[]),_e.visualDataProxyService.runQuery({dataSources:G,schema:ce,config:Oe.config.singleVisual,hostServices:_e.queryVisualHostServices,visualQueryGenerator:_e.visualQueryGenerator,executionType:me?1:2,preferCurrentData:Z,additionalDataViewKinds:2,useNativeReferenceNameAsDisplayNames:_e.inVisualCalcMode,disableHidden:_e.inVisualCalcMode,enableAllSubtotal:_e.inVisualCalcMode}).then(function(ue){return _e.onDataChanged(ue,W,me)},function(ue){return _e.clearData(ue)})},function(ce){return _e.clearData(ce)}).finally(function(){_e.stopSpinner(),_e.isInitialized=!0}))}}},R.prototype.clearData=function(W){var Z=this.viewModel;Z.visual.dataTransforms={},Z.visual.data={dataView:{metadata:{columns:[]},matrix:{rows:{root:{children:[],childIdentityFields:[]},levels:[]},columns:{root:{children:[]},levels:[]},valueSources:[]}},dataViewSource:null},Z.hasData=!1,this.errorMessage=this.getErrorDetails(W)},R.prototype.getErrorDetails=function(W){if(null!=W&&W.getDetails){var Z=W.getDetails(this.localizationService),me=_.first(null==Z?void 0:Z.displayableErrorInfo);if(null!=me&&me.errorInfoValue)return me.errorInfoValue}return this.defaultNoDataErrorMessage||(this.defaultNoDataErrorMessage=this.localizationService.get("DetailVisual_No_Data_Detail")),this.defaultNoDataErrorMessage},R.prototype.onDataChanged=function(W,Z,me){var _e;if(_e=W?{dataView:W&&W.dataReaderResult?W.dataReaderResult.dataView:null,dataViewSource:W&&W.dataViewSource?W.dataViewSource:null}:this.viewModel.visual.data){var he=_e.dataView;if(he&&!he.matrix)return void this.clearData();var ce,G=ee.isSegment(_e.dataView);if(G&&(_e.isFirstSegment=G),null!=he){var Fe=this.visualDataProxyService.lastExecutedQuery(),je=ee.getDataRolesForVisual(this.viewModel.parentContract,this.visualPlugin),Oe=_.map(je,function(ue){return ue.name}),J=se.MatrixVisualDataViewConverter.generate(he,Fe.transforms.selects,Fe.transforms.splits,Oe,Fe.transforms.roles&&Fe.transforms.roles.ordering,this.featureSwitchService);if(ce=J?J.transformActions:void 0,_e.dataView=J&&J.dataView?J.dataView:_e.dataView,!ce)return void this.clearData();ce.objects=this.detailVisualContract.config.singleVisual.objects}me&&(Q.segmentation.DataViewMerger.mergeDataViews(he=this.viewModel.visual.data.dataView,_e.dataView),_e.dataView=he),this.viewModel.visual.dataTransforms=ce,this.viewModel.visual.data=_e,this.viewModel.hasData=!0,this.errorMessage=void 0}},R.prototype.createQueryVisualHostServices=function(){var W=this;return ge.inherit(x.util.VisualHostServicesUtil.createQueryVisualHostServices(),function(Z){Z.getFilters=function(me,_e){var he=W.explorationNavigation;return me.calculateDetailVisualFilter(he.getCurrentExploration(),he.getCurrentSection(),W.viewModel.parentContract,_e,1)},Z.getDataSourceVariables=function(){var me=W.explorationNavigation.getCurrentExploration();return void 0!==me?me.dataSourceVariables:void 0}})},R.prototype.startSpinner=function(){this.detailVisualSpinnerActionCallback(0)},R.prototype.stopSpinner=function(){this.detailVisualSpinnerActionCallback(1)},R.\u0275fac=function(Z){return new(Z||R)(m.\u0275\u0275directiveInject(i.i),m.\u0275\u0275directiveInject(I.D),m.\u0275\u0275directiveInject(T.s),m.\u0275\u0275directiveInject(f.J),m.\u0275\u0275directiveInject(M.z),m.\u0275\u0275directiveInject(y.vZ),m.\u0275\u0275directiveInject(A.r),m.\u0275\u0275directiveInject(C.iS),m.\u0275\u0275directiveInject(d._1),m.\u0275\u0275directiveInject(g.o),m.\u0275\u0275directiveInject(S.m),m.\u0275\u0275directiveInject(n.t),m.\u0275\u0275directiveInject(B.g),m.\u0275\u0275directiveInject(O.U),m.\u0275\u0275directiveInject(w.y0),m.\u0275\u0275directiveInject(b.w),m.\u0275\u0275directiveInject(V.$),m.\u0275\u0275directiveInject(v.Q),m.\u0275\u0275directiveInject(c.q),m.\u0275\u0275directiveInject(u.D),m.\u0275\u0275directiveInject(P.S))},R.\u0275cmp=m.\u0275\u0275defineComponent({type:R,selectors:[["detail-visual"]],inputs:{visualContainer:"visualContainer",themeCollection:"themeCollection",viewport:"viewport",inVisualCalcMode:"inVisualCalcMode",detailVisualSpinnerActionCallback:"detailVisualSpinnerActionCallback"},features:[m.\u0275\u0275NgOnChangesFeature],decls:3,vars:5,consts:[["role","document",1,"detailVisual",3,"ngSwitch"],[3,"viewModel","supportsScreenReader",4,"ngSwitchCase"],["class","noDataOverlay",3,"width","height",4,"ngSwitchCase"],[3,"viewModel","supportsScreenReader"],[1,"noDataOverlay"],["class","errorMessage",4,"ngIf"],[1,"errorMessage"],["name","table_triangle_20_regular","sprite","visual-calc-icons",1,"errorSvgIcon"],[1,"messageTitle"],["localize","DetailVisual_No_Data_Title",1,"errorSpan"],[1,"messageDetail"],[1,"errorSpan"]],template:function(Z,me){1&Z&&(m.\u0275\u0275elementStart(0,"div",0),m.\u0275\u0275template(1,N,1,2,"visual-modern",1),m.\u0275\u0275template(2,E,2,5,"div",2),m.\u0275\u0275elementEnd()),2&Z&&(m.\u0275\u0275classProp("noBorder",me.inVisualCalcMode),m.\u0275\u0275property("ngSwitch",me.viewModel&&me.viewModel.hasData),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngSwitchCase",!0),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngSwitchCase",!1))},dependencies:[r.NgIf,r.NgSwitch,r.NgSwitchCase,h.X,p.M,D.y],styles:['[_nghost-%COMP%]{font-family:Segoe UI,"Segoe UI Web (West European)",-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif;font-size:14px;display:flex;width:100%;height:100%;flex:1}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;line-height:normal;margin:4px;gap:10px;text-align:center;background-color:transparent}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]   .errorSvgIcon[_ngcontent-%COMP%]{color:var(--globalColorDarkOrangeShade10)}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]   .messageTitle[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:600;font-size:18px;color:#323130}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]   .messageDetail[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:20px;color:#484644;white-space:pre-wrap;overflow-y:auto;max-height:200px;margin-right:10px}[_nghost-%COMP%]   .hide[_ngcontent-%COMP%]{display:none}',".exploreHost.landingController   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF);-webkit-user-select:text;user-select:text}.exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.tabletPortraitLayout   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.tabletPortraitLayout   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%]{border-style:none}.exploreHost.landingController.phoneLayouts[_nghost-%COMP%]   .visualContainer.popOut.seeData[_nghost-%COMP%], .exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData   [_nghost-%COMP%]{height:100%}.exploreHost.landingController.phoneLayouts[_nghost-%COMP%]   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%]{height:100%}"]}),R}()},57115:function(Le,oe,t){t.d(oe,{L:function(){return n}});var e=t(59214),n=function(){function i(){}return i.prototype.ngOnChanges=function(O){O.viewModel&&this.onViewModelChange()},i.prototype.onViewModelChange=function(){var O=function(i,O,I){var T=$("<canvas></canvas>").attr({width:i.UnitLength,height:O.UnitLength}).get(0),f=T.getContext("2d");f.fillStyle=I;for(var M=0;M<i.UnitDivisions;++M){var A=Math.round(M*i.UnitLength/i.UnitDivisions);f.fillRect(A,0,1,1)}for(M=1;M<O.UnitDivisions;++M){var b=Math.round(M*O.UnitLength/O.UnitDivisions);f.fillRect(0,b,1,1)}return T}(this.viewModel.layoutX,this.viewModel.layoutY,this.viewModel.color);this.unitImageUrl=O.toDataURL("image/png")},i.\u0275fac=function(I){return new(I||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["dot-grid"]],inputs:{viewModel:"viewModel"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[[1,"container"],[1,"hideEdgeDots"],[1,"background"]],template:function(I,T){1&I&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275element(2,"div",2),e.\u0275\u0275elementEnd()()),2&I&&(e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("background-image","url("+T.unitImageUrl+")"))},styles:[".container[_ngcontent-%COMP%], .hideEdgeDots[_ngcontent-%COMP%], .background[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;pointer-events:none;display:inline-block}.container[_ngcontent-%COMP%]{top:0}.hideEdgeDots[_ngcontent-%COMP%]{overflow:hidden;padding-left:1px;padding-top:20px;box-sizing:border-box}.background[_ngcontent-%COMP%]{background-repeat:repeat;background-position-x:-1px}.stylableVisualContainerHeader[_nghost-%COMP%]   .hideEdgeDots[_ngcontent-%COMP%], .stylableVisualContainerHeader   [_nghost-%COMP%]   .hideEdgeDots[_ngcontent-%COMP%]{padding-top:1px}.stylableVisualContainerHeader[_nghost-%COMP%]   .background[_ngcontent-%COMP%], .stylableVisualContainerHeader   [_nghost-%COMP%]   .background[_ngcontent-%COMP%]{background-position-y:-1px}@media print{.container[_ngcontent-%COMP%]{display:none}}"]}),i}()},42165:function(Le,oe,t){t.d(oe,{w:function(){return fe}});var e=t(7005),n=t(59214),m=t(55858),i=t(98822),O=t(90289),I=t(93721),T=t(44243),f=t(37946),M=t(89027),A=t(51166),b=t(22422),P=t(64857),y=t(89515),C=t(57111),d=t(49909),g=t(6067),S=t(45647),B=t(80041),w=t(72227),V=t(92934),v=t(80268),c=powerbi.explore.util.DurationDisplayHelper,u=powerbi.explore.util.DurationParser,r=jsCommon.NumberExtensions,h=jsCommon.StringExtensions,p=function(pe){return{invalid:pe}};function D(re,pe){if(1&re&&(n.\u0275\u0275elementStart(0,"form",6)(1,"div",7)(2,"div",8),n.\u0275\u0275element(3,"num-up-down",9),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-select",10),n.\u0275\u0275element(6,"mat-option",11)(7,"mat-option",12)(8,"mat-option",13)(9,"mat-option",14),n.\u0275\u0275elementEnd()()()),2&re){var ge=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroup",ge.durationPickerGroup),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(9,p,ge.durationPickerGroup.invalid)),n.\u0275\u0275advance(1),n.\u0275\u0275property("pbi-tooltip",n.\u0275\u0275pipeBind1(4,7,ge.tooltipConfig$))("labelId",ge.labelId)("ariaDescribedby",ge.ariaDescribedby),n.\u0275\u0275advance(2),n.\u0275\u0275property("panelClass",ge.newPaneColors),n.\u0275\u0275attribute("aria-labelledby",ge.labelId)}}function x(re,pe){1&re&&n.\u0275\u0275element(0,"span",15)}function z(re,pe){1&re&&n.\u0275\u0275element(0,"span",16)}function Q(re,pe){1&re&&n.\u0275\u0275element(0,"b",25)}function q(re,pe){1&re&&n.\u0275\u0275element(0,"b",26)}function de(re,pe){if(1&re&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",19),n.\u0275\u0275template(2,Q,1,0,"b",20),n.\u0275\u0275template(3,q,1,0,"ng-template",null,21,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",19),n.\u0275\u0275element(6,"span",22),n.\u0275\u0275elementStart(7,"b"),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",19),n.\u0275\u0275element(10,"span",23),n.\u0275\u0275elementStart(11,"b"),n.\u0275\u0275text(12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(13,"div",19),n.\u0275\u0275element(14,"span",24),n.\u0275\u0275elementStart(15,"b"),n.\u0275\u0275text(16),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&re){var ge=pe.ngIf,be=n.\u0275\u0275reference(4);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",ge.adminConfig.autoRefreshEnabled)("ngIfElse",be),n.\u0275\u0275advance(6),n.\u0275\u0275textInterpolate1(" ",ge.adminTimeString,""),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1(" ",ge.effectiveRefreshInterval,""),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1(" ",ge.lastRefreshTimestamp,"")}}function se(re,pe){1&re&&n.\u0275\u0275element(0,"div",27)}function Ie(re,pe){if(1&re&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,de,17,5,"ng-container",17),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275template(3,se,1,0,"ng-template",null,18,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&re){var ge=n.\u0275\u0275reference(4),be=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,2,be.refreshStatistics$))("ngIfElse",ge)}}var fe=function(re){function pe(ge,be,ae,X,le){var ee=re.call(this)||this;return ee.explorationCapabilities=ge,ee.featureSwitchService=be,ee.localizationService=ae,ee.reportRefreshService=X,ee.screenReaderService=le,ee.modelValueChange=new n.EventEmitter,ee.showDetails=!1,ee.milliSecondsinOneSecond=1e3,ee.refreshStatistics$=(0,i.F)(ee.milliSecondsinOneSecond/2).pipe((0,O.U)(function(N){return ee.reportRefreshService.getRefreshStats()}),(0,I.h)(function(N){return!!N}),(0,I.h)(function(N){return void 0!==N.adminConfig}),(0,O.U)(function(N){return(0,e.pi)((0,e.pi)({},N),{lastRefreshTimestamp:N.lastRefreshTimestamp||ee.localizationService.get("TwoDashes"),effectiveRefreshInterval:c.convertSecondsToTimeString(N.effectiveRefreshInterval/ee.milliSecondsinOneSecond,ee.localizationService),adminTimeString:c.convertSecondsToTimeString(N.adminConfig.refreshIntervalSeconds,ee.localizationService)})})),ee.validateFormGroup=function(N){var F=N.get("value").value,E=N.get("unit").value,k=null==F||h.isNullOrUndefinedOrWhiteSpaceString(E),R=ee.validators.integer&&r.isDecimal(F);return k||R?{integer:!0}:c.isBelowMinimumValue(F,E,ee.validators.min)?{min:!0}:c.isAboveMaximumValue(F,E,ee.validators.max)?{max:!0}:null},ee.newPaneColors=ee.featureSwitchService.featureSwitches.paneColorRefresh||ee.explorationCapabilities.getCapabilities().showFluentDesign?"pbi-modern-select-panel themeableElement":"pbi-modern-select-old-panel themeableElement",ee}return(0,e.ZT)(pe,re),pe.prototype.ngOnInit=function(){this.createFormGroup(),this.setModel()},pe.prototype.setModel=function(){var ge=this;this.mergePropertyInputsAndFormControl(this.changes$("modelValue"),this.value$.pipe((0,I.h)(function(be){return!_.isNull(be)})),"modelValue",this.onDestroy$).subscribe(function(be){var ae=u.parseISODurationdString(be),X=u.durationParseResultToArray(ae);X.length>0?ge.durationPickerGroup.setValue({value:X[0].value,unit:X[0].unit},{emitEvent:!1}):"Unable to parse the following time string: ".concat(be)})},pe.prototype.createFormGroup=function(){var ge=this;this.durationPickerGroup=new m.nJ({value:new m.p4,unit:new m.p4},{validators:this.validateFormGroup});var be=this.durationPickerGroup.statusChanges.pipe((0,O.U)(function(le){return"INVALID"!==le}),(0,T.O)(!0),(0,f.R)(this.onDestroy$)),ae=this.changes$("validators").pipe((0,O.U)(function(le){return ge.getErrorMessages(le)}));this.tooltipConfig$=be.pipe((0,M.M)(ae),(0,O.U)(function(le){var N=le[1];if(ge.durationPickerGroup.errors){var F=Object.keys(ge.durationPickerGroup.errors)[0];return ge.getTooltipConfig(N[F])}})),this.durationPickerGroup.valueChanges.pipe((0,f.R)(this.onDestroy$)).subscribe(function(le){return ge.onUpdate(le,"VALID"===ge.durationPickerGroup.status)}),this.mergePropertyInputsAndFormControl(this.changes$("isDisabled"),this.disabled$,"isDisabled",this.onDestroy$).subscribe(function(le){le&&!ge.durationPickerGroup.disabled?ge.durationPickerGroup.disable({emitEvent:!1}):!le&&!ge.durationPickerGroup.enabled&&ge.durationPickerGroup.enable({emitEvent:!1})})},pe.prototype.onUpdate=function(ge,be){if(be){var ae=[{value:ge.value,unit:ge.unit,isTimeUnit:c.isTimeUnit(ge.unit)}],X=u.durationParseResultItemsToDurationParseResult(ae),le=u.durationParseResultToISODurationString(X);this.modelValueChange.emit(le),this.onValueChange(le),this.onTouched();var ee=c.getTimeString(ae[0],this.localizationService);this.screenReaderService.alert(ee)}},pe.prototype.getErrorMessages=function(ge){return{integer:this.localizationService.get("No_Decimal_Input"),min:this.localizationService.format("DurationPicker_Error_Below_Minimum",[c.getReadableTimeString(ge.min,this.localizationService)]),max:this.localizationService.format("DurationPicker_Error_Above_Maximum",[c.getReadableTimeString(ge.max,this.localizationService)])}},pe.prototype.getTooltipConfig=function(ge){if(ge)return{tooltipDescription:ge,tooltipShowOnFocus:!0}},pe.\u0275fac=function(be){return new(be||pe)(n.\u0275\u0275directiveInject(b.U),n.\u0275\u0275directiveInject(P.vZ),n.\u0275\u0275directiveInject(y.o),n.\u0275\u0275directiveInject(C.F),n.\u0275\u0275directiveInject(d.g))},pe.\u0275cmp=n.\u0275\u0275defineComponent({type:pe,selectors:[["duration-picker"]],inputs:{modelValue:"modelValue",validators:"validators",isDisabled:"isDisabled",labelId:"labelId",ariaDescribedby:"ariaDescribedby",tooltipConfig:"tooltipConfig"},outputs:{modelValueChange:"modelValueChange"},features:[n.\u0275\u0275ProvidersFeature([{provide:m.JU,useExisting:(0,n.forwardRef)(function(){return pe}),multi:!0}]),n.\u0275\u0275InheritDefinitionFeature],decls:7,vars:7,consts:[[3,"formGroup",4,"ngIf"],[1,"info-container"],["type","button",1,"info-button",3,"disabled","click"],["localize","Generic_HideDetails",4,"ngIf","ngIfElse"],["showDetailsView",""],[4,"ngIf"],[3,"formGroup"],[1,"controls-container"],[1,"num-up-down",3,"ngClass"],["formControlName","value",3,"pbi-tooltip","labelId","ariaDescribedby"],["formControlName","unit","disableOptionCentering","true",1,"themeableElement","pbi-modern-select",3,"panelClass"],["value","S","localize","TimeUnit_Seconds_Lowercase"],["value","M","localize","TimeUnit_Minutes_Lowercase"],["value","H","localize","TimeUnit_Hours_Lowercase"],["value","D","localize","TimeUnit_Days_Lowercase"],["localize","Generic_HideDetails"],["localize","Generic_ShowDetails"],[4,"ngIf","ngIfElse"],["calculating",""],[1,"info-label"],["localize","DurationPicker_Admin_Enabled_True",4,"ngIf","ngIfElse"],["notEnabled",""],["localize","DurationPicker_Admin_Interval"],["localize","DurationPicker_Actual_Rate"],["localize","DurationPicker_Last_Refresh"],["localize","DurationPicker_Admin_Enabled_True"],["localize","DurationPicker_Admin_Enabled_False"],["localize","DurationPicker_Calculating_Refresh_Stats"]],template:function(be,ae){if(1&be&&(n.\u0275\u0275template(0,D,10,11,"form",0),n.\u0275\u0275elementStart(1,"div",1)(2,"button",2),n.\u0275\u0275listener("click",function(){return ae.showDetails=!ae.showDetails}),n.\u0275\u0275template(3,x,1,0,"span",3),n.\u0275\u0275template(4,z,1,0,"ng-template",null,4,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,Ie,5,4,"ng-container",5),n.\u0275\u0275elementEnd()),2&be){var X=n.\u0275\u0275reference(5);n.\u0275\u0275property("ngIf",ae.durationPickerGroup),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("disabled",ae.durationPickerGroup.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",ae.durationPickerGroup.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ae.showDetails)("ngIfElse",X),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",ae.showDetails)}},dependencies:[g.NgClass,g.NgIf,m._Y,m.JJ,m.JL,S.X,B.gD,w.ey,V.x4,v.i,m.sg,m.u,g.AsyncPipe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;width:100%}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]{display:flex;flex-grow:1}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   .num-up-down[_ngcontent-%COMP%]{margin-right:4px}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   .num-up-down[_ngcontent-%COMP%]   num-up-down[_ngcontent-%COMP%]{width:70px}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   .num-up-down.invalid[_ngcontent-%COMP%]   num-up-down[_ngcontent-%COMP%]{border-color:var(--fluent-theme-error-dark-color, #A80000)}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{height:24px}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-select.mat-select-disabled[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1);border-color:var(--gray-60, #C8C6C4);color:var(--gray-90, #A19F9D)}.info-container.disabled[_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}.info-container[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;color:var(--fluent-theme-link-color, #0078D4);background:none;border:none;padding:1px;cursor:pointer}html[data-focus-source="key"][_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.info-container[_ngcontent-%COMP%]   .info-button[disabled][_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}.info-container[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:1px 0}'],changeDetection:0}),pe}(A.N)},78145:function(Le,oe,t){t.d(oe,{H:function(){return u}});var e=t(7005),n=t(59214),m=t(78381),i=t(11719),O=t(75216),I=t(87714),T=t(81602),f=t(6067),M=t(51186),A=t(66291),b=t(6093),P=t(82344),y=t(77235),C=t(24854),d=t(52393),g=powerbi.explore.services.events,S=function(h,p){return{selected:h,"hidden-in-view-mode":p}};function B(r,h){if(1&r&&(n.\u0275\u0275elementStart(0,"li",9),n.\u0275\u0275element(1,"exploration-navigation-tab",10),n.\u0275\u0275elementEnd()),2&r){var p=h.$implicit,D=h.index,x=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(6,S,p.selected,x.isHiddenInViewMode(p))),n.\u0275\u0275advance(1),n.\u0275\u0275property("viewModel",p)("isEditing",x.isEditMode())("tabIndex",D)("isOnlyVisibleTab",x.isOnlySectionVisibleInViewMode(p))("isHiddenInViewMode",x.isHiddenInViewMode(p))}}function w(r,h){if(1&r&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,B,2,9,"li",8),n.\u0275\u0275elementContainerEnd()),2&r){var p=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",p.viewModel.exploration.sections)}}function V(r,h){if(1&r){var p=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",11),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(p);var x=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(x.createSection())}),n.\u0275\u0275elementStart(1,"div",12)(2,"div",13),n.\u0275\u0275element(3,"svg-use-symbol",14),n.\u0275\u0275elementEnd()()()}}function v(r,h){if(1&r){var p=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ul",4)(1,"carousel",5),n.\u0275\u0275listener("onSeeAll",function(z){n.\u0275\u0275restoreView(p);var Q=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(Q.seeAllSections(z))}),n.\u0275\u0275template(2,w,2,1,"ng-container",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,V,4,0,"li",7),n.\u0275\u0275elementEnd()}if(2&r){var D=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("isReadingMode",D.isReadingMode()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",D.viewModel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",D.isEditMode())}}function c(r,h){if(1&r&&(n.\u0275\u0275elementStart(0,"ul",15),n.\u0275\u0275element(1,"bookmark-play",16),n.\u0275\u0275elementEnd()),2&r){var p=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("selectedBookmark",p.viewModel.exploration.contract.activeBookmark)}}var u=function(){function r(h,p,D,x,z){var Q=this;this.formFactor=h,this.viewModeState=p,this.dropdown=D,this.eventBridge=x,this.lazyScoped=z,this.eventBridge.createChannelSubscriptionManager().subscribe(g.renameSection,function(q,de){return Q.renameSection(de)})}return r.prototype.isBookmarkView=function(){return null!=this.viewModeState.getViewState().bookmarkView},r.prototype.createSection=function(){this.eventBridge.publishToChannel(g.createSection)},r.prototype.seeAllSections=function(h){var p=this,D={items:[]},x=this.isReadingMode();_.forEach(this.viewModel.exploration.sections,function(z,Q){(!x||!p.isHiddenInViewMode(z))&&D.items.push({key:Q,text:z.displayName,type:0,selected:z.selected})}),this.dropdown.showContextMenu(D,{x:h.pageX,y:h.pageY},function(z){return p.eventBridge.publishToChannel(g.switchSection,{index:z})},!0,void 0,!0,!0)},r.prototype.isEditMode=function(){return this.formFactor.getCurrentLayoutCapabilities().canAddRemoveSections()},r.prototype.isReadingMode=function(){return 0===this.viewModeState.getMode()},r.prototype.getModeString=function(){return this.isEditMode()?"editing":this.isReadingMode()||1===this.viewModeState.getMode()&&1===this.formFactor.getCurrentLayout()?"reading":void 0},r.prototype.isHiddenInViewMode=function(h){return!!(1&h.contract.visibility)},r.prototype.isOnlySectionVisibleInViewMode=function(h){if(this.isHiddenInViewMode(h))return!1;for(var p=0,D=this.viewModel.exploration.sections;p<D.length;p++){var x=D[p];if(x!==h&&!this.isHiddenInViewMode(x))return!1}return!0},r.prototype.renameSection=function(h){return(0,e.mG)(this,void 0,void 0,function(){var p=this;return(0,e.Jh)(this,function(D){return this.lazyScoped.get("explorationAuthoring").then(function(x){x.renameSection(p.viewModel,h.sectionNewName,h.sectionIndex)}),[2]})})},r.\u0275fac=function(p){return new(p||r)(n.\u0275\u0275directiveInject(m.F),n.\u0275\u0275directiveInject(i.kc),n.\u0275\u0275directiveInject(O.V),n.\u0275\u0275directiveInject(I.J),n.\u0275\u0275directiveInject(T.H))},r.\u0275cmp=n.\u0275\u0275defineComponent({type:r,selectors:[["exploration-footer-modern"]],inputs:{viewModel:"viewModel"},decls:4,vars:5,consts:[["keyboard-shortcuts","ctrl-F6","data-automation-type","explorationNavigationContent","tabindex","0","focus-nav-mode","Group","focus-priority","14"],[1,"background"],["class","pane sections","role","presentation",4,"ngIf"],["class","pane sections","pbiLazyLoadContents","exploreUIShellConfig",4,"ngIf"],["role","presentation",1,"pane","sections"],["autoResize","true","role","tablist",3,"isReadingMode","onSeeAll"],[4,"ngIf"],["class","section static create","localizeTooltip","Carousel_NewPage","tabindex","0","focusElement","","role","button","data-automation-id","carousel_NewPage",3,"accessible-click",4,"ngIf"],["class","section static","role","presentation","data-automation-id","carousel_section",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation","data-automation-id","carousel_section",1,"section","static",3,"ngClass"],["data-automation-type","explorationNavigationTab",3,"viewModel","isEditing","tabIndex","isOnlyVisibleTab","isHiddenInViewMode"],["localizeTooltip","Carousel_NewPage","tabindex","0","focusElement","","role","button","data-automation-id","carousel_NewPage",1,"section","static","create",3,"accessible-click"],[1,"thumbnail-container"],[1,"thumbnail"],["sheet","exploreCanvasIcons","symbolId","slidethumb_addnew"],["pbiLazyLoadContents","exploreUIShellConfig",1,"pane","sections"],[3,"selectedBookmark"]],template:function(p,D){1&p&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"div",1),n.\u0275\u0275template(2,v,4,3,"ul",2),n.\u0275\u0275template(3,c,2,1,"ul",3),n.\u0275\u0275elementEnd()),2&p&&(n.\u0275\u0275classMapInterpolate1("explorationNavigationContent unselectable ",D.getModeString(),""),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!D.isBookmarkView()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",D.isBookmarkView()))},dependencies:[f.NgClass,f.NgForOf,f.NgIf,M.r,A.t,b.q,P.d,y.Fy,C.j,d.k],styles:["[_nghost-%COMP%]     .explorationNavigationContent{position:absolute;left:0;z-index:2;overflow:hidden;height:35px;background-color:var(--white-color, #FFF);width:100%;outline:0}[_nghost-%COMP%]     .editing, [_nghost-%COMP%]     .reading, [_nghost-%COMP%]     .pane{bottom:0}[_nghost-%COMP%]     .reading{background:var(--neutral-primary-color, #333333)}[_nghost-%COMP%]     .reading .pane.sections .carouselControl .carouselScrollPane{right:0}[_nghost-%COMP%]     .pane{display:flex;justify-content:flex-start;align-items:center;left:0;color:var(--neutral-secondary-alt-color, #777777)}[_nghost-%COMP%]     .pane.sections{width:100%;background-color:var(--gray-20, #F3F2F1);height:100%}[_nghost-%COMP%]     .pane.sections .carouselControl{display:flex}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselScrollPane{display:flex}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton{opacity:1;color:var(--theme-secondary-color, #000000)}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton i{padding-left:0;margin-left:2px;margin-right:6px}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton:disabled{color:var(--neutral-tertiary-alt-color, #C8C8C8)}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton:disabled:hover{background-color:var(--neutral-light-color, #EAEAEA)}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.previousPage{padding:1px 0 0 2px}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.nextPage{border-style:solid;border-color:var(--neutral-tertiary-color, #A6A6A6);border-width:0 1px 0 0;padding:1px 2px 0 0;right:0;left:15px}html[dir=rtl]   [_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton i{margin-left:6px;margin-right:2px}html[dir=rtl]   [_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.previousPage{padding:1px 2px 0 0}html[dir=rtl]   [_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.nextPage{border-width:0 0 0 1px;padding:1px 0 0 2px;left:0;right:15px}[_nghost-%COMP%]     .pane.sections.dragover li:nth-last-child(1){border-bottom:2px solid var(--black-color, #000)}  carousel{display:flex;height:100%;overflow-x:hidden}  .explorationContainer .section{height:35px;font-size:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;color:var(--gray-180, #252423);margin:0 auto;line-height:normal;border-right:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);bottom:0}  .explorationContainer .section .section-index{display:none}  .explorationContainer .section.static{box-sizing:border-box}  .explorationContainer .section.static .sectionDeleteIcon{display:none}  .explorationContainer .section.static:hover,   .explorationContainer .section.static .thumbnail-container:focus{outline:none}  .explorationContainer .section.static:hover .sectionDeleteIcon,   .explorationContainer .section.static .thumbnail-container:focus .sectionDeleteIcon{display:inline;position:absolute;top:0;right:4px;z-index:2;background-color:transparent;cursor:pointer}  .explorationContainer .section.static:hover .section-index,   .explorationContainer .section.static .thumbnail-container:focus .section-index{color:var(--neutral-dark-color, #212121)}  .explorationContainer .section.static.create{margin:0;border-right:none;width:39px}  .explorationContainer .section.selected{background-color:var(--white-color, #FFF);border-bottom:4px solid var(--theme-primary-color, #F2C811);font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif}  .explorationContainer .section.dynamic{background-color:transparent;left:0;padding:3px 20px}  .explorationContainer .section.dynamic .section-index{display:inline-block;position:relative;left:1px;height:100%;text-align:center;font-size:12px;font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;color:var(--neutral-primary-color-alt3, #515151);bottom:2px;border:none;padding:0;box-sizing:content-box}  .explorationContainer .section.dynamic .section-index::selection{background:var(--theme-primary-color, #F2C811);color:var(--text-primary-content-color, #515151)}  .explorationContainer .section.dynamic .section-index:hover{color:var(--neutral-dark-color, #212121)}  .explorationContainer .section.dynamic .textLabel{max-width:240px;overflow:hidden;text-overflow:ellipsis;cursor:default;line-height:35px}  .explorationContainer .section.dynamic input{margin-top:3px;line-height:29px;height:29px}  .explorationContainer .section .thumbnail-container{position:relative;box-sizing:border-box;border:none;display:flex;align-items:center}  html[data-focus-source=key]   .explorationContainer .section .thumbnail-container:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}  .explorationContainer .section .hidden-tab{padding-left:28px;padding-right:12px}  .explorationContainer .section .sectionHiddenIcon{position:absolute;top:15px;left:12px;color:var(--neutral-primary-color-alt3, #515151)}  .explorationContainer .section.ui-draggable-dragging{border-right:none}  .explorationContainer .section.ui-draggable-dragging .sectionDeleteIcon{display:none}  .explorationContainer .section.ui-draggable-dragging .sectionHiddenIcon{position:absolute;top:15px;left:6px;color:var(--neutral-primary-color-alt3, #515151)}  .explorationContainer .section.dragover{border-top:2px solid var(--black-color, #000)}  .explorationContainer .section.create{left:3px;outline:none}html[data-focus-source=key][_ngcontent-%COMP%]     .explorationContainer .section.create:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}  .explorationContainer .section.create .thumbnail-container{padding-top:5px;background-color:var(--theme-primary-color, #F2C811);height:inherit;position:initial}  .explorationContainer .section.create .thumbnail-container .thumbnail svg-use-symbol svg{height:24px;width:39px}  .explorationContainer .section.hidden-in-view-mode{display:none}  .explorationContainer.editing .section.hidden-in-view-mode{display:inline-block}",".exploreHost.landingController[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]{height:44px}.exploreHost.landingController[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]{height:44px;background-color:var(--fluentThemeNeutralLighterAltColor)}.exploreHost.landingController[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]   .section.static[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]   .section.static[_ngcontent-%COMP%]{height:initial;background-color:transparent;padding:4px;border:none}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton{width:44px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon{margin-top:5px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini{font-size:20px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini{color:var(--fluentThemeLightGrayColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini{color:var(--fluentThemeErrorTextColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover{background-color:var(--fluentThemeNeutralLighterAltColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon{margin-top:5px;color:var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage{left:39px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselScrollPane, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselScrollPane, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselScrollPane, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselScrollPane{left:84px}.exploreHost.landingController.coverNativeNotch[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]{height:calc(44px + env(safe-area-inset-bottom))}.exploreHost.landingController.coverNativeNotch[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]{height:calc(44px + env(safe-area-inset-bottom));padding-bottom:env(safe-area-inset-bottom)}"]}),r}()},24854:function(Le,oe,t){t.d(oe,{j:function(){return r}});var e=t(37325),n=t(20658),m=t(59214),i=t(87714),O=t(75216),I=t(81602),T=t(11719),f=t(6067),M=t(55858),A=t(51186),b=t(66291),P=t(92869),y=t(31820),C=t(45399),d=powerbi.explore.services.events,g=["sectionElement"];function S(h,p){1&h&&m.\u0275\u0275element(0,"div",5)}function B(h,p){if(1&h){var D=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"input",6),m.\u0275\u0275listener("ngModelChange",function(Q){m.\u0275\u0275restoreView(D);var q=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(q.viewModel.displayName=Q)})("blur",function(){m.\u0275\u0275restoreView(D);var Q=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(Q.renameSection(Q.viewModel.displayName))}),m.\u0275\u0275elementEnd()}if(2&h){var x=m.\u0275\u0275nextContext();m.\u0275\u0275property("ngModel",x.viewModel.displayName)}}function w(h,p){if(1&h){var D=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",7),m.\u0275\u0275listener("click",function(z){m.\u0275\u0275restoreView(D);var Q=m.\u0275\u0275nextContext();return m.\u0275\u0275resetView(Q.deleteSection(z))}),m.\u0275\u0275text(1,"x"),m.\u0275\u0275elementEnd()}2&h&&m.\u0275\u0275attribute("aria-hidden",!0)}var V=function(p,D){return{"hidden-tab":p,selected:D}},v=function(){return{accept:"sections"}},r=function(){function h(p,D,x,z,Q){var q=this;this.eventBridge=p,this.platformCapabilities=D,this.dropdown=x,this.lazyScoped=z,this.viewModeState=Q,this.editableLabelOptions={disableClick:!0,inputMatchLabelWidth:!0,onEdit:function(){return q.beginEditSection()},onBlur:function(){return q.endEditSection()}},this.supportsMinervaDialog=this.platformCapabilities.supportsMinervaDialog}return h.prototype.ngOnInit=function(){this.viewModel.isTabEditable=!1},h.prototype.drop=function(p,D){if(1===this.viewModeState.getMode()){var x=this.getSections(),z=x.index(p.target),Q=x.index(D.draggable);this.eventBridge.publishToChannel(d.reorderSection,{originalIndex:Q,targetIndex:z})}},h.prototype.getSections=function(){return $(".pane.sections").find(".section.dynamic")},h.prototype.deleteSection=function(p,D){void 0===D&&(D=this.tabIndex),this.eventBridge.publishToChannel(d.deleteSectionInitiated,{sectionIndex:D,supportMinervaDialog:this.supportsMinervaDialog}),p&&p.stopPropagation&&p.stopPropagation()},h.prototype.beginEditSection=function(){this.viewModel.isTabEditable=!0},h.prototype.endEditSection=function(){this.viewModel.isTabEditable=!1,this.renameSection(this.viewModel.displayName),this.updateWidth()},h.prototype.updateWidth=function(){this.eventBridge.publishToChannel(d.sectionNameChanged)},h.prototype.changeSection=function(p){void 0===p&&(p=this.tabIndex),!this.viewModel.selected&&(this.eventBridge.publishToChannel(d.switchSection,{index:p}),event&&event.stopPropagation&&event.stopPropagation(),this.sectionElement.nativeElement.focus())},h.prototype.renameSection=function(p,D){void 0===D&&(D=this.tabIndex),this.viewModel.isTabEditable=!1,jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(p)||this.viewModel.contract.displayName===p?this.viewModel.displayName=this.viewModel.contract.displayName:this.eventBridge.publishToChannel(d.renameSection,{sectionNewName:p,sectionIndex:D})},h.prototype.showContextMenu=function(p){var D=this;if(p.preventDefault(),this.isEditing){var x=this.getMenuItemsCollection();this.dropdown.showContextMenu(x,{x:p.pageX,y:p.pageY},function(z){return D.selectMenuItem(z)},!1)}},h.prototype.onKeyDown=function(p){if(this.isEditing)switch(p.keyCode){case e.yY:this.isOnlyVisibleTab||this.deleteSection(p,this.tabIndex);break;case e.oh:case e.SV:case e.Sd:case e.uR:jsCommon.BrowserUtils.isCtrlOrMeta(p)&&this.reorderSection(p)}},h.prototype.reorderSection=function(p){var D=this.getSections(),x=D.index(p.target),z=0,Q=!0;switch(p.keyCode){case p.shiftKey&&e.oh:z=0===x?x:x-1;break;case p.shiftKey&&e.SV:z=x===D.length-1?x:x+1;break;case e.Sd:z=0;break;case e.uR:z=D.length-1;break;default:Q=!1}Q&&(this.eventBridge.publishToChannel(d.reorderSection,{originalIndex:x,targetIndex:z}),p.stopPropagation())},h.prototype.getMenuItemsCollection=function(){for(var p={items:[]},D=0,x=this.viewModel.menuItems.items;D<x.length;D++){var z=x[D],Q=z.key,q=!1;this.isOnlyVisibleTab&&(2===Q||3===Q)||(3===Q&&(q=!!this.isHiddenInViewMode),p.items.push({key:Q,type:0,text:z.text,checked:q}))}return p},h.prototype.toggleSectionVisibility=function(){var p=this,D=this.isHiddenInViewMode?0:1;this.lazyScoped.get("explorationAuthoring").then(function(x){x.setSectionVisibility(p.viewModel.contract,D)})},h.prototype.selectMenuItem=function(p){switch(p){case 0:this.eventBridge.publishToChannel(d.duplicateSection,this.tabIndex);break;case 1:this.beginEditSection();break;case 2:this.deleteSection(null,this.tabIndex);break;case 3:this.toggleSectionVisibility()}},h.\u0275fac=function(D){return new(D||h)(m.\u0275\u0275directiveInject(i.J),m.\u0275\u0275directiveInject(n.E),m.\u0275\u0275directiveInject(O.V),m.\u0275\u0275directiveInject(I.H),m.\u0275\u0275directiveInject(T.kc))},h.\u0275cmp=m.\u0275\u0275defineComponent({type:h,selectors:[["exploration-navigation-tab"]],viewQuery:function(D,x){var z;(1&D&&m.\u0275\u0275viewQuery(g,5),2&D)&&(m.\u0275\u0275queryRefresh(z=m.\u0275\u0275loadQuery())&&(x.sectionElement=z.first))},inputs:{viewModel:"viewModel",displayName:"displayName",isEditing:"isEditing",isOnlyVisibleTab:"isOnlyVisibleTab",isHiddenInViewMode:"isHiddenInViewMode",tabIndex:"tabIndex"},decls:5,vars:14,consts:[["role","tab","tabindex","0",1,"section","dynamic","thumbnail-container",3,"ngClass","drag","drop","dblclick","accessible-click","contextmenu","keydown","dropHandler"],["sectionElement",""],["class","glyphicon glyph-mini pbi-glyph-hide3 sectionHiddenIcon",4,"ngIf"],["class","section-index textInput",3,"ngModel","ngModelChange","blur",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable"],["class","sectionDeleteIcon","localizeTooltip","Carousel_DeletePage",3,"click",4,"ngIf"],[1,"glyphicon","glyph-mini","pbi-glyph-hide3","sectionHiddenIcon"],[1,"section-index","textInput",3,"ngModel","ngModelChange","blur"],["localizeTooltip","Carousel_DeletePage",1,"sectionDeleteIcon",3,"click"]],template:function(D,x){1&D&&(m.\u0275\u0275elementStart(0,"div",0,1),m.\u0275\u0275listener("dblclick",function(){return x.beginEditSection()})("accessible-click",function(){return x.changeSection()})("contextmenu",function(Q){return x.showContextMenu(Q)})("keydown",function(Q){return x.onKeyDown(Q)})("dropHandler",function(Q){return x.drop(Q.event,Q.ui)}),m.\u0275\u0275template(2,S,1,0,"div",2),m.\u0275\u0275template(3,B,1,1,"input",3),m.\u0275\u0275template(4,w,2,1,"div",4),m.\u0275\u0275elementEnd()),2&D&&(m.\u0275\u0275property("ngClass",m.\u0275\u0275pureFunction2(10,V,x.isHiddenInViewMode,x.viewModel.selected))("drag","sections")("drop",m.\u0275\u0275pureFunction0(13,v)),m.\u0275\u0275attribute("aria-selected",x.viewModel.selected),m.\u0275\u0275advance(2),m.\u0275\u0275property("ngIf",x.isHiddenInViewMode),m.\u0275\u0275advance(1),m.\u0275\u0275property("pbiEditableLabel",x.editableLabelOptions)("pbiEditableLabelValue",x.viewModel.displayName)("pbiEditableLabelMode",x.isEditing)("pbiEditableLabelEditable",x.viewModel.isTabEditable),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",x.isEditing&&!x.isOnlyVisibleTab))},dependencies:[f.NgClass,f.NgIf,M.Fj,M.JJ,M.On,A.r,b.t,P.w,y.W,C.D],styles:['.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]{background-color:var(--fluentThemeNeutralLighterAltColor);border-radius:4px;padding:3px 10px;height:100%}.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     pbi-text-label, .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     pbi-text-label{height:100%}.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]   .section-index[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]   .section-index[_ngcontent-%COMP%]{font-size:13px;margin-top:4px}.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel, .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel{font-size:13px;line-height:24px;padding:0;color:var(--fluentThemeNeutralPrimaryAltColor)}.exploreHost.landingController   .selected[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%], .exploreHost.landingController   .selected   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]{background-color:var(--fluentThemeWhiteColor)}.exploreHost.landingController   .selected[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel:after, .exploreHost.landingController   .selected   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel:after{content:"";float:left;width:100%;height:4px;border-radius:2px;background:var(--fluentThemePrimaryColor)}']}),h}()},51200:function(Le,oe,t){t.d(oe,{m:function(){return M}});var e=t(7005),n=t(59214),m=t(35760),i=t(6067),O=t(26904),I=t(76845);function T(A,b){if(1&A&&n.\u0275\u0275element(0,"pbi-lazy-load",2),2&A){var P=n.\u0275\u0275nextContext();n.\u0275\u0275property("modulePath",P.modulePath)("componentId",P.componentId)("inputArgs",P.inputArgs)("outputArgs",P.outputArgs)}}function f(A,b){1&A&&n.\u0275\u0275element(0,"pbi-spinner",3)}var M=function(A){function b(){var P=null!==A&&A.apply(this,arguments)||this;return P.initialExpr=void 0,P.withFieldList=!1,P.onExprChange=new n.EventEmitter,P.onCrossPickerDrop=new n.EventEmitter,P.componentId="FieldPickerComponentId",P.modulePath="./lazy-modules/field-picker-modern/field-picker-modern.module#FieldPickerModernModule",P.initialExpr$=P.changes$("initialExpr"),P}return(0,e.ZT)(b,A),b.prototype.ngOnInit=function(){var P=this;this.outputArgs={onExprChange:function(C){return P.onExprChange.emit(C)},onCrossPickerDrop:function(C){return P.onCrossPickerDrop.emit(C)}},this.onChanges$.subscribe(function(){P.inputArgs={initialExpr:P.initialExpr$,validators:P.validators,allowMultipleValues:P.allowMultipleValues,allowReorderItems:P.allowReorderItems,disallowReplaceItems:P.disallowReplaceItems,allowEntityField:P.allowEntityField,disableDropZoneIndicator:P.disableDropZoneIndicator,label:P.label,addDataLabelKey:P.addDataLabelKey,addDataAriaLabelKey:P.addDataAriaLabelKey,ariaLabelledby:P.ariaLabelledby,ariaDescribedby:P.ariaDescribedby,disabled:P.disabled,withFieldList:P.withFieldList,getDropExprStrategy:P.getDropExprStrategy,menuStrategy:P.menuStrategy,displayNameStrategy:P.displayNameStrategy,flyoutFieldsStrategy:P.flyoutFieldsStrategy,visualCalcFieldsStrategy:P.visualCalcFieldsStrategy,promotedActionStrategy:P.promotedActionStrategy,enterExitFieldRename$:P.enterExitFieldRename$,externalCrossPickerDragDropMonitor:P.externalCrossPickerDragDropMonitor,perspectiveDisplayName:P.perspectiveDisplayName,tooltipPosition:P.tooltipPosition,tooltipMaxWidth:P.tooltipMaxWidth,disableAutoScroll:P.disableAutoScroll}})},b.\u0275fac=function(){var P;return function(C){return(P||(P=n.\u0275\u0275getInheritedFactory(b)))(C||b)}}(),b.\u0275cmp=n.\u0275\u0275defineComponent({type:b,selectors:[["field-picker-modern-lazy"]],inputs:{initialExpr:"initialExpr",allowMultipleValues:"allowMultipleValues",allowReorderItems:"allowReorderItems",disallowReplaceItems:"disallowReplaceItems",allowEntityField:"allowEntityField",disableDropZoneIndicator:"disableDropZoneIndicator",validators:"validators",label:"label",addDataLabelKey:"addDataLabelKey",addDataAriaLabelKey:"addDataAriaLabelKey",ariaLabelledby:"ariaLabelledby",ariaDescribedby:"ariaDescribedby",disabled:"disabled",withFieldList:"withFieldList",promotedActionStrategy:"promotedActionStrategy",getDropExprStrategy:"getDropExprStrategy",menuStrategy:"menuStrategy",displayNameStrategy:"displayNameStrategy",flyoutFieldsStrategy:"flyoutFieldsStrategy",visualCalcFieldsStrategy:"visualCalcFieldsStrategy",enterExitFieldRename$:"enterExitFieldRename$",externalCrossPickerDragDropMonitor:"externalCrossPickerDragDropMonitor",perspectiveDisplayName:"perspectiveDisplayName",tooltipPosition:"tooltipPosition",tooltipMaxWidth:"tooltipMaxWidth",disableAutoScroll:"disableAutoScroll"},outputs:{onExprChange:"onExprChange",onCrossPickerDrop:"onCrossPickerDrop"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"modulePath","componentId","inputArgs","outputArgs",4,"ngIf","ngIfElse"],["loading",""],[3,"modulePath","componentId","inputArgs","outputArgs"],[1,"pbi-spinner-medium"]],template:function(y,C){if(1&y&&(n.\u0275\u0275template(0,T,1,4,"pbi-lazy-load",0),n.\u0275\u0275template(1,f,1,0,"ng-template",null,1,n.\u0275\u0275templateRefExtractor)),2&y){var d=n.\u0275\u0275reference(2);n.\u0275\u0275property("ngIf",C.inputArgs)("ngIfElse",d)}},dependencies:[i.NgIf,O.R,I.k],encapsulation:2}),b}(m.w)},89934:function(Le,oe,t){t.d(oe,{v:function(){return ve}});var e=t(7005),n=t(16912),m=t(64450),i=t(59214),O=t(51081),I=t(78099),T=t(89718),f=t(49470),M=t(87714),A=t(20019),b=t(22588),P=t(86718),y=t(554),C=t(13057),d=t(22422),g=t(64857),S=t(89515),B=t(49909),w=t(44302),V=t(11719),v=t(41844),c=t(26963),u=t(6067),r=t(45647),h=t(51186),p=t(28958),D=t(77980),x=t(63694),z=t(92869),Q=t(49864),q=t(31820),de=t(50938),se=powerbi.explore.services.ActionIdentifier,Ie=jsCommon.DropPosition,fe=powerbi.explore.services.events,re=powerbi.explore.constants.ExploreCanvasConstants,pe=powerbi.explore.util.FilterPaneUtil,ge=powerbi.explore.FilterUtils,be=powerbi.explore.SectionUtils,ae=powerbi.explore.services.selectionUtils,X=powerbi.explore.viewModels.ViewModelFactory,le=function(o,l){return{"font-family":o,"font-size":l}};function ee(a,o){if(1&a&&i.\u0275\u0275element(0,"span",10),2&a){var l=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(1,le,l.headerFontFamily,l.headerFontSize))}}function N(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",20),i.\u0275\u0275listener("pbiMenuButtonClick",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(H.onMenuItemClicked(U,0))}),i.\u0275\u0275element(1,"span",21),i.\u0275\u0275elementEnd()}if(2&a){var s=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("menuMode",s.menuMode)("pbiMenu",s.getMenuItems)("pbiTooltip",s.getOptionsMenuLabel())("pbiTooltipProgramDisabled",!0),i.\u0275\u0275attribute("aria-label",s.getOptionsMenuLabel())}}function F(a,o){if(1&a&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"h3",18),i.\u0275\u0275template(2,N,2,5,"button",19),i.\u0275\u0275elementEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(3,le,l.headerFontFamily,l.headerFontSize))("localize",l.filterPaneHeaderLocalization_Visual),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",l.isEditMode&&l.isInOutspacePane)}}function E(a,o){if(1&a&&i.\u0275\u0275element(0,"filter",23),2&a){var l=o.$implicit,s=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",l)("isInOutspacePane",s.isInOutspacePane)("filterCardStyleArguments",s.filterCardStyleArguments)("searchFiltersInput",s.searchFiltersInput)}}function k(a,o){if(1&a&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,E,1,4,"filter",22),i.\u0275\u0275elementContainerEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",l.viewModel.visualFilters)}}function R(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"filter",25),i.\u0275\u0275listener("moveFilter",function(ne){i.\u0275\u0275restoreView(l);var te=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(te.moveFilter(ne.startIndex,ne.targetIndex,ne.filterScopeType))})("dropHandler",function(ne){var te=i.\u0275\u0275restoreView(l),Ce=te.index,ye=te.$implicit,we=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(we.dropFilterWithCustomOrder(ne.event,ne.ui,ne.dropAction,Ce,ye))})("drop",function(ne){var te=i.\u0275\u0275restoreView(l),Ce=te.index,ye=te.$implicit,we=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(we.getDropConfigForVisualFilters()&&we.dropFieldFilterWithCustomOrder(ne,Ce,ye))}),i.\u0275\u0275elementEnd()}if(2&a){var s=o.$implicit,L=o.index,U=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",s)("isInOutspacePane",U.isInOutspacePane)("filterCardStyleArguments",U.filterCardStyleArguments)("index",L)("lastIndex",U.getSortableFiltersLength(U.viewModel.visualFilters))("searchFiltersInput",U.searchFiltersInput)("drop",U.getDropConfigForVisualFilters())("dropWatchConfig",!0)("drag","filter")("dragDisabled",U.filterCustomSortDisabled(s))("getDragContext",U.getDragContext(s,L))("dropAction",U.getOutspaceFilterDropAction(U.dropPosition,s))}}function W(a,o){if(1&a&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,R,1,12,"filter",24),i.\u0275\u0275elementContainerEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",l.viewModel.visualFilters)}}function Z(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendVisualFilters(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendFieldVisualFilters(U))}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&a){var s=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",s.shouldShowAddFilterLabelText(s.viewModel.visualFilters)?"dropzone":"end-dropzone")("ngStyle",i.\u0275\u0275pureFunction2(7,le,s.headerFontFamily,s.headerFontSize))("title",s.shouldShowAddFilterLabelText(s.viewModel.visualFilters)?s.viewModel.addFilterLabel:"")("drop",s.dropZoneDropConfig)("dropAction",s.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",s.shouldShowAddFilterLabelText(s.viewModel.visualFilters)?s.viewModel.addFilterLabel:""," ")}}var me=function(o){return{"bucket-padding":o}};function _e(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",11),i.\u0275\u0275template(1,F,3,6,"div",12),i.\u0275\u0275elementStart(2,"div",13)(3,"div",14),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropVisualFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.getFilterPaneDropConfig()&&H.dropFieldVisualFilter(U))}),i.\u0275\u0275template(4,k,2,1,"ng-container",15),i.\u0275\u0275template(5,W,2,1,"ng-container",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,Z,2,10,"div",16),i.\u0275\u0275elementEnd()()}if(2&a){var s=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(8,me,s.isSearchTextNullOrEmpty())),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isSearchTextNullOrEmpty()),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",s.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",s.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!s.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isEditMode()&&s.isSearchTextNullOrEmpty())}}function he(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",30),i.\u0275\u0275listener("pbiMenuButtonClick",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(H.onMenuItemClicked(U,1))}),i.\u0275\u0275element(1,"span",21),i.\u0275\u0275elementEnd()}if(2&a){var s=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("menuMode",s.menuMode)("pbiMenu",s.getMenuItems)("pbiTooltip",s.getOptionsMenuLabel())("pbiTooltipProgramDisabled",!0),i.\u0275\u0275attribute("aria-label",s.getOptionsMenuLabel())}}function G(a,o){if(1&a&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"h3",28),i.\u0275\u0275template(2,he,2,5,"button",29),i.\u0275\u0275elementEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(3,le,l.headerFontFamily,l.headerFontSize))("localize",l.filterPaneHeaderLocalization_Page),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",l.isEditMode&&l.isInOutspacePane)}}function ce(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"filter",32),i.\u0275\u0275listener("moveFilter",function(ne){i.\u0275\u0275restoreView(l);var te=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(te.moveFilter(ne.startIndex,ne.targetIndex,ne.filterScopeType))})("dropHandler",function(ne){var te=i.\u0275\u0275restoreView(l),Ce=te.index,ye=te.$implicit,we=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(we.dropFilterWithCustomOrder(ne.event,ne.ui,ne.dropAction,Ce,ye))})("drop",function(ne){var te=i.\u0275\u0275restoreView(l),Ce=te.index,ye=te.$implicit,we=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(we.getFilterPaneDropConfig()&&we.dropFieldFilterWithCustomOrder(ne,Ce,ye))}),i.\u0275\u0275elementEnd()}if(2&a){var s=o.$implicit,L=o.index,U=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",s)("isInOutspacePane",U.isInOutspacePane)("filterCardStyleArguments",U.filterCardStyleArguments)("index",L)("lastIndex",U.getSortableFiltersLength(U.viewModel.pageFilters))("searchFiltersInput",U.searchFiltersInput)("drop",U.getFilterDropConfig())("dropWatchConfig",!0)("dropAction",U.getOutspaceFilterDropAction(U.dropPosition,s))("drag","filter")("dragDisabled",U.filterCustomSortDisabled(s))("getDragContext",U.getDragContext(s,L))}}function Fe(a,o){if(1&a&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,ce,1,12,"filter",31),i.\u0275\u0275elementContainerEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",l.viewModel.pageFilters)}}function je(a,o){if(1&a&&i.\u0275\u0275element(0,"filter",23),2&a){var l=o.$implicit,s=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",l)("isInOutspacePane",s.isInOutspacePane)("filterCardStyleArguments",s.filterCardStyleArguments)("searchFiltersInput",s.searchFiltersInput)}}function Oe(a,o){if(1&a&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,je,1,4,"filter",22),i.\u0275\u0275elementContainerEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",l.viewModel.pageFilters)}}function J(a,o){if(1&a&&i.\u0275\u0275element(0,"filter",23),2&a){var l=o.$implicit,s=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",l)("isInOutspacePane",s.isInOutspacePane)("filterCardStyleArguments",s.filterCardStyleArguments)("searchFiltersInput",s.searchFiltersInput)}}function ue(a,o){if(1&a&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,J,1,4,"filter",22),i.\u0275\u0275elementContainerEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",l.viewModel.drillthroughFilters)}}function Me(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendPageFilters(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendFieldPageFilters(U))}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&a){var s=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",s.shouldShowAddFilterLabelText(s.viewModel.pageFilters)?"dropzone":"end-dropzone")("ngStyle",i.\u0275\u0275pureFunction2(7,le,s.headerFontFamily,s.headerFontSize))("title",s.shouldShowAddFilterLabelText(s.viewModel.pageFilters)?s.viewModel.addFilterLabel:"")("drop",s.dropZoneDropConfig)("dropAction",s.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",s.shouldShowAddFilterLabelText(s.viewModel.pageFilters)?s.viewModel.addFilterLabel:""," ")}}function Se(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",27),i.\u0275\u0275template(1,G,3,6,"div",12),i.\u0275\u0275elementStart(2,"div",13)(3,"div",14),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropPageFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropFieldPageFilter(U))}),i.\u0275\u0275template(4,Fe,2,1,"ng-container",15),i.\u0275\u0275template(5,Oe,2,1,"ng-container",15),i.\u0275\u0275template(6,ue,2,1,"ng-container",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,Me,2,10,"div",16),i.\u0275\u0275elementEnd()()}if(2&a){var s=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(9,me,s.isSearchTextNullOrEmpty())),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isSearchTextNullOrEmpty()),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",s.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",s.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!s.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isInOutspacePane&&s.showDrillthroughInPageFiltersInOutspacePane()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isEditMode()&&s.isSearchTextNullOrEmpty())}}function Ge(a,o){if(1&a&&i.\u0275\u0275element(0,"filter",23),2&a){var l=o.$implicit,s=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("viewModel",l)("isInOutspacePane",s.isInOutspacePane)("filterCardStyleArguments",s.filterCardStyleArguments)("searchFiltersInput",s.searchFiltersInput)}}function nt(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",36),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.dropDrillthroughFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.dropFieldDrillthroughFilter(U))}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&a){var s=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",0===s.viewModel.drillthroughFilters.length?"dropzone":"end-dropzone")("title",0===s.viewModel.drillthroughFilters.length?s.viewModel.addDrillthroughFilterLabel:"")("drop",s.dropZoneDropConfig)("dropAction",s.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",0===s.viewModel.drillthroughFilters.length?s.viewModel.addDrillthroughFilterLabel:""," ")}}function st(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",33)(1,"div",17),i.\u0275\u0275element(2,"h3",34),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",13)(4,"div",14),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropDrillthroughFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.getFilterPaneDropConfig()&&H.dropFieldDrillthroughFilter(U))}),i.\u0275\u0275template(5,Ge,1,4,"filter",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,nt,2,6,"div",35),i.\u0275\u0275elementEnd()()}if(2&a){var s=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(6,le,s.headerFontFamily,s.headerFontSize)),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",s.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",s.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",s.viewModel.drillthroughFilters),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.showDrillthroughDropZone())}}function yt(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",40),i.\u0275\u0275listener("pbiMenuButtonClick",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(H.onMenuItemClicked(U,2))}),i.\u0275\u0275element(1,"span",21),i.\u0275\u0275elementEnd()}if(2&a){var s=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("menuMode",s.menuMode)("pbiMenu",s.getMenuItems)("pbiTooltip",s.getOptionsMenuLabel())("pbiTooltipProgramDisabled",!0),i.\u0275\u0275attribute("aria-label",s.getOptionsMenuLabel())}}function Ae(a,o){if(1&a&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"h3",38),i.\u0275\u0275template(2,yt,2,5,"button",39),i.\u0275\u0275elementEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(3,le,l.headerFontFamily,l.headerFontSize))("localize",l.filterPaneHeaderLocalization_Report),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",l.isEditMode&&l.isInOutspacePane)}}function Ve(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"filter",32),i.\u0275\u0275listener("moveFilter",function(ne){i.\u0275\u0275restoreView(l);var te=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(te.moveFilter(ne.startIndex,ne.targetIndex,ne.filterScopeType))})("dropHandler",function(ne){var te=i.\u0275\u0275restoreView(l),Ce=te.index,ye=te.$implicit,we=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(we.dropFilterWithCustomOrder(ne.event,ne.ui,ne.dropAction,Ce,ye))})("drop",function(ne){var te=i.\u0275\u0275restoreView(l),Ce=te.index,ye=te.$implicit,we=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(we.getFilterDropConfig()&&we.dropFieldFilterWithCustomOrder(ne,Ce,ye))}),i.\u0275\u0275elementEnd()}if(2&a){var s=o.$implicit,L=o.index,U=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",s)("isInOutspacePane",U.isInOutspacePane)("filterCardStyleArguments",U.filterCardStyleArguments)("index",L)("lastIndex",U.getSortableFiltersLength(U.viewModel.reportFilters))("searchFiltersInput",U.searchFiltersInput)("drop",U.getFilterDropConfig())("dropWatchConfig",!0)("dropAction",U.getOutspaceFilterDropAction(U.dropPosition,s))("drag","filter")("dragDisabled",U.filterCustomSortDisabled(s))("getDragContext",U.getDragContext(s,L))}}function xe(a,o){if(1&a&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ve,1,12,"filter",31),i.\u0275\u0275elementContainerEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",l.viewModel.reportFilters)}}function Pe(a,o){if(1&a&&i.\u0275\u0275element(0,"filter",42),2&a){var l=o.$implicit,s=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",l)("filterCardStyleArguments",s.filterCardStyleArguments)("isInOutspacePane",s.isInOutspacePane)("searchFiltersInput",s.searchFiltersInput)}}function et(a,o){if(1&a&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Pe,1,4,"filter",41),i.\u0275\u0275elementContainerEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",l.viewModel.reportFilters)}}function $e(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendReportFilters(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendFieldReportFilters(U))}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&a){var s=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",s.shouldShowAddFilterLabelText(s.viewModel.reportFilters)?"dropzone":"end-dropzone")("ngStyle",i.\u0275\u0275pureFunction2(7,le,s.headerFontFamily,s.headerFontSize))("title",s.shouldShowAddFilterLabelText(s.viewModel.reportFilters)?s.viewModel.addFilterLabel:"")("drop",s.dropZoneDropConfig)("dropAction",s.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",s.shouldShowAddFilterLabelText(s.viewModel.reportFilters)?s.viewModel.addFilterLabel:""," ")}}function lt(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",37),i.\u0275\u0275template(1,Ae,3,6,"div",12),i.\u0275\u0275elementStart(2,"div",13)(3,"div",14),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropReportFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(l);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropFieldReportFilter(U))}),i.\u0275\u0275template(4,xe,2,1,"ng-container",15),i.\u0275\u0275template(5,et,2,1,"ng-container",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,$e,2,10,"div",16),i.\u0275\u0275elementEnd()()}if(2&a){var s=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(8,me,s.isSearchTextNullOrEmpty())),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isSearchTextNullOrEmpty()),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",s.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",s.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!s.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isEditMode()&&s.isSearchTextNullOrEmpty())}}function Pt(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",43),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(l);var U=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(U.editVariablesOnClick())}),i.\u0275\u0275elementEnd()}if(2&a){var s=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(1,le,s.headerFontFamily,s.headerFontSize))}}function Ct(a,o){if(1&a&&(i.\u0275\u0275elementStart(0,"div",47),i.\u0275\u0275element(1,"i",48)(2,"div",49),i.\u0275\u0275elementEnd()),2&a){var l=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(1,le,l.headerFontFamily,l.headerFontSize))}}var Ue=function(o,l,s,L){return{"font-family":o,"font-size":l,"background-color":s,color:L}};function ke(a,o){if(1&a){var l=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",44),i.\u0275\u0275template(1,Ct,3,4,"div",45),i.\u0275\u0275elementStart(2,"button",46),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(l);var U=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(U.onApplyAllClicked())}),i.\u0275\u0275elementEnd()()}if(2&a){var s=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isApplyAllButtonInErrorState),i.\u0275\u0275advance(1),i.\u0275\u0275propertyInterpolate("localize",s.getApplyAllButtonTooltip()),i.\u0275\u0275propertyInterpolate("localizeTooltip",s.getApplyAllButtonTooltip()),i.\u0275\u0275property("disabled",!s.applyAllHasFiltersToApply()||s.isApplyAllButtonInErrorState)("ngStyle",i.\u0275\u0275pureFunction4(5,Ue,s.headerFontFamily,s.headerFontSize,s.applyAllHasFiltersToApply()&&!s.isApplyAllButtonInErrorState?s.checkboxAndApplyColor:"",s.applyAllHasFiltersToApply()&&!s.isApplyAllButtonInErrorState?s.checkboxAndApplyForegroundColor:s.applyButtonDisabledForegroundColor))}}var We=function(){return{ignoreOverlay:!1,ignoreMobile:!1}},ze=function(o){return{isInOutspacePane:o}},ve=function(){function a(o,l,s,L,U,H,ne,te,Ce,ye,we,Te,De,Re,Ze,Ye,qe,at,it,pt){var ct=this;this.aggrOps=o,this.conceptualSchemaProxy=l,this.dataSources=s,this.displayNameService=L,this.dragDataService=U,this.eventBridge=H,this.explorationCapabilities=ne,this.explorationNavigation=te,this.featureSwitchService=Ce,this.localizationService=ye,this.ngZone=we,this.promiseFactory=Te,this.screenReaderService=De,this.scriptVisuals=Re,this.selection=Ze,this.telemetryService=Ye,this.viewModeState=qe,this.visualAuthoring=at,this.visualPlugin=it,this.visualPluginOps=pt,this.menuMode=n.Kb.Compact,this.selectedSortType=1,this.getOptionsMenuLabel=function(){return ct.localizationService.get("Options_Menu")};var vt=this.explorationNavigation.getCurrentExploration();this.viewModel=X.createFilterPane(this.localizationService,null!=vt),this.filterPaneDropConfig={accept:"field",greedy:!1},this.filterDropConfig={accept:"".concat("filter"," ").concat("field"),greedy:!1},this.dropZoneDropConfig={accept:"field",greedy:!1},this.exploreUIShellConfig=powerbi.explore.modules.ExploreUIShellModule,this.invalidFilterChanges={},this.validFilterChanges={},this.filterPaneUtilServices={aggrOps:this.aggrOps,conceptualSchemaProxy:this.conceptualSchemaProxy,dataSources:this.dataSources,displayNameService:this.displayNameService,explorationCapabilities:this.explorationCapabilities,explorationNavigation:this.explorationNavigation,eventBridge:this.eventBridge,featureSwitchService:this.featureSwitchService,localizationService:this.localizationService,scriptVisuals:this.scriptVisuals,selection:this.selection,telemetryService:this.telemetryService,visualAuthoring:this.visualAuthoring,visualPlugin:this.visualPlugin},this.getDropAction=function(Mt){return ct.getDropActionInternal(Mt)}}return a.prototype.ngOnInit=function(){var o=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(fe.selectionChanged,function(){return o.updateSelection()}).subscribe(fe.visualTypeChanged,function(){return o.updateSelection()}).subscribe(fe.modelChanged,function(){return o.onModelChanged()}).subscribe(fe.canvasChanged,function(){return o.onCanvasChanged()}).subscribe(fe.explorationLoaded,function(){return o.onModelChanged()}).subscribe(fe.visualContainerChanged,function(l,s){return o.onVisualContainerChanged(s)}).subscribe(fe.explorationFiltersContainerChanged,function(l,s){return o.onExplorationFiltersContainerChanged(s)}).subscribe(fe.sectionFiltersContainerChanged,function(l,s){return o.onSectionFiltersContainerChanged(s)}).subscribe(fe.filterContainerChanged,function(l,s){return o.onFilterContainerChanged(s)}).subscribe(fe.applyAllBufferedFilterCardChanged,function(l,s){return o.onApplyAllFilterCardBufferedChanges(s)}).subscribe(fe.explorationSlowDataSourceSettingsLoaded,function(l,s){return o.ngZone.run(function(){s.isApplyAllButtonEnabledChanged&&(o.onApplyAllClicked(),o.isApplyAllEnabled=o.isApplyAllOnForThisFilter())})}).subscribe(fe.explorationSettingsLoaded,function(l,s){s.useDefaultAggregateDisplayNameChanged&&o.updateVisualFilters()}),this.filterPaneHeaderLocalization_Visual="FilterPane_Visual".concat(this.isInOutspacePane?"_OutspacePane":""),this.filterPaneHeaderLocalization_Page="FilterPane_Page".concat(this.isInOutspacePane?"_OutspacePane":""),this.filterPaneHeaderLocalization_Report="FilterPane_Report".concat(this.isInOutspacePane?"_OutspacePane":""),this.isApplyAllEnabled=this.isApplyAllOnForThisFilter(),this.updateSelection(),this.onModelChanged()},a.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},a.prototype.ngOnChanges=function(o){o.sectionObjects&&this.updateFormatting(o.sectionObjects.currentValue),this.searchFiltersInput&&o.searchFiltersInput&&this.announceTotalVisibleFilterCards()},a.prototype.getDragContext=function(o,l){return function(){return{filter:o,filterScopeType:o.getFilterContainerScope().scopeType,startIndex:l}}},a.prototype.getOutspaceFilterDropAction=function(o,l){var s=this;return function(){var L,U=s.dragDataService.getDragContext(),H=l.getFilterContainerScope().scopeType;return L=U?void 0!==U.filterScopeType&&H!==U.filterScopeType?0:Ie.isBelow(o)?3:2:0,s.promiseFactory.resolve(L)}},a.prototype.getFilterPaneDropConfig=function(){if(!this.isInOutspacePane||!this.customSortEnabled()&&this.isSearchTextNullOrEmpty())return this.filterPaneDropConfig},a.prototype.getDropConfigForVisualFilters=function(){if(!this.isInOutspacePane||this.customSortEnabled(0)&&this.isSearchTextNullOrEmpty())return this.filterDropConfig},a.prototype.getFilterDropConfig=function(){if(!this.isInOutspacePane||this.isSearchTextNullOrEmpty())return this.filterDropConfig},Object.defineProperty(a.prototype,"getMenuItems",{get:function(){return{items:[{id:1,type:n.iB.Button,text:this.localizationService.get("FilterPane_Filter_Sort_AZ"),checkable:!0,checked:1===this.selectedSortType,icon:{type:0,glyph:"glyphicon pbi-glyph-atoz glyph-small"}},{id:2,type:n.iB.Button,text:this.localizationService.get("FilterPane_Filter_Sort_ZA"),checkable:!0,checked:2===this.selectedSortType,icon:{type:0,glyph:"glyphicon pbi-glyph-ztoa glyph-small"}}]}},enumerable:!1,configurable:!0}),a.prototype.onMenuItemClicked=function(o,l){this.selectedSortType=o.id,this.onSortOrderMenuItemSelected(l,this.selectedSortType),this.announceSelectedItem(o)},a.prototype.announceSelectedItem=function(o){var l=this.localizationService.format("Selected",o.text);this.screenReaderService.alertPolite(l)},a.prototype.moveFilter=function(o,l,s){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(U){switch(U.label){case 0:return[4,this.visualAuthoring.moveFilter(this.dataSources.get(),s,l,o)];case 1:return U.sent()&&this.sortFiltersBySortType(s,3),[2]}})})},a.prototype.addFilterWithCustomOrder=function(o,l){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(s){switch(s.label){case 0:return[4,this.addFilterWithCustomOrderCore(o,l,this.getFieldFromDragContext())];case 1:return s.sent(),[2]}})})},a.prototype.addFilterWithCustomOrderCore=function(o,l,s){return(0,e.mG)(this,void 0,void 0,function(){var L;return(0,e.Jh)(this,function(H){switch(H.label){case 0:return L=ge.getFiltersContainer(l,this.selection,this.explorationNavigation),[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),l,3)];case 1:return H.sent()&&pe.addFilterToScopeFromDrop(l,L,!1,this.dataSources,s,this.visualAuthoring,o),[2]}})})},a.prototype.showEditVariablesLink=function(){var o=this.explorationNavigation.getCurrentSection();if(be.isQuickExploreSection(o)||!this.isInOutspacePane)return!1;var l=this.conceptualSchemaProxy.getLatestCapabilities(this.dataSources.get(),void 0);if(!l||!l.supportsDataSourceVariables)return!1;var s=this.explorationCapabilities.getCapabilities();return!(!s||s.disableEditVariables)},a.prototype.editVariablesOnClick=function(){this.eventBridge.publishToChannel(fe.datasourceVariablesEditClicked)},a.prototype.onSortOrderMenuItemSelected=function(o,l){this.visualAuthoring.setFilterSortType(this.dataSources.get(),o,l),this.sortFiltersBySortType(o,l)},a.prototype.shouldShowAddFilterLabelText=function(o){return!(!this.isInOutspacePane&&!_.isEmpty(o))},a.prototype.customSortEnabled=function(o){return this.isEditMode()&&this.isInOutspacePane},a.prototype.filterCustomSortDisabled=function(o){if(!o)return!0;var l=o.getFilterContainerScope();return!(l?this.customSortEnabled(l.scopeType):this.customSortEnabled())||!o.canSortManually||!this.isSearchTextNullOrEmpty()},a.prototype.isSortable=function(o){return this.isInOutspacePane&&!this.filterCustomSortDisabled(o)},a.prototype.showDrillthroughDropZone=function(){return!this.isInOutspacePane&&(this.viewModeState.getConfig().alwaysPopulatePanes||this.isEditMode())},a.prototype.dropFieldFilterWithCustomOrder=function(o,l,s){var L=powerbi.explore.helpers.getModernFieldListExpr(o);this.dropFilterWithCustomOrderCore(this.getDropActionInternalCore(L),l,s,L,!1)},a.prototype.dropFilterWithCustomOrder=function(o,l,s,L,U){this.dropFilterWithCustomOrderCore(s,L,U,this.getFieldFromDragContext(),!0)},a.prototype.dropFilterWithCustomOrderCore=function(o,l,s,L,U){var H=s&&s.getFilterContainerScope(),ne=H&&H.scopeType;if(this.customSortEnabled(ne)){var te=this.dragDataService.getDragContext();if(te&&U){var Ce=this.getTargetIndex(te.startIndex,l,3===o);if(void 0!==Ce){var we=H.container.filters[te.startIndex];we&&(this.moveFilter(te.startIndex,Ce,ne),this.eventBridge.publishToChannel(fe.filterContainerChanged,{filter:we,changeType:4,scope:H}))}}else this.addFilterWithCustomOrderCore(3===o?l+1:l,ne,L)}},a.prototype.dropFieldVisualFilter=function(o){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(l){return this.dropVisualFilterCore(powerbi.explore.helpers.getModernFieldListExpr(o)),[2]})})},a.prototype.dropVisualFilter=function(o,l,s){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(L){switch(L.label){case 0:return[4,this.dropVisualFilterCore(this.getFieldFromDragContext())];case 1:return L.sent(),[2]}})})},a.prototype.dropVisualFilterCore=function(o){return(0,e.mG)(this,void 0,void 0,function(){var l;return(0,e.Jh)(this,function(L){switch(L.label){case 0:return(l=this.getSelectedVisual())?this.customSortEnabled(0)?[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),0,3)]:[3,2]:[2];case 1:return L.sent()&&pe.addFilterToScopeFromDrop(0,l,!1,this.dataSources,o,this.visualAuthoring,this.viewModel.visualFilters.length),[3,3];case 2:this.appendVisualFiltersCore(o),L.label=3;case 3:return[2]}})})},a.prototype.appendFieldVisualFilters=function(o){this.appendVisualFiltersCore(powerbi.explore.helpers.getModernFieldListExpr(o))},a.prototype.appendVisualFilters=function(o,l,s){this.appendVisualFiltersCore(this.getFieldFromDragContext())},a.prototype.appendVisualFiltersCore=function(o){var l=this.getSelectedVisual();l&&pe.addFilterToScopeFromDrop(0,l,!1,this.dataSources,o,this.visualAuthoring,3===l.filterSortOrder?this.viewModel.visualFilters.length:void 0)},a.prototype.dropFieldPageFilter=function(o){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(l){switch(l.label){case 0:return[4,this.dropPageFilterCore(powerbi.explore.helpers.getModernFieldListExpr(o))];case 1:return l.sent(),[2]}})})},a.prototype.dropPageFilter=function(o,l,s){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(L){switch(L.label){case 0:return[4,this.dropPageFilterCore(this.getFieldFromDragContext())];case 1:return L.sent(),[2]}})})},a.prototype.dropPageFilterCore=function(o){return(0,e.mG)(this,void 0,void 0,function(){var l;return(0,e.Jh)(this,function(L){switch(L.label){case 0:return l=this.explorationNavigation.getCurrentSection(),this.customSortEnabled(1)?[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),1,3)]:[3,2];case 1:return L.sent()&&pe.addFilterToScopeFromDrop(1,l,!1,this.dataSources,o,this.visualAuthoring,this.getSortableFiltersLength(this.viewModel.pageFilters)),[3,3];case 2:this.appendPageFiltersCore(o),L.label=3;case 3:return[2]}})})},a.prototype.appendFieldPageFilters=function(o){o.stopPropagation(),o.preventDefault(),this.appendPageFiltersCore(powerbi.explore.helpers.getModernFieldListExpr(o))},a.prototype.appendPageFilters=function(o,l,s){this.appendPageFiltersCore(this.getFieldFromDragContext())},a.prototype.appendPageFiltersCore=function(o){var l=this.explorationNavigation.getCurrentSection(),s=3===l.filterSortOrder?this.getSortableFiltersLength(this.viewModel.pageFilters):void 0;pe.addFilterToScopeFromDrop(1,l,!1,this.dataSources,o,this.visualAuthoring,s)},a.prototype.dropFieldDrillthroughFilter=function(o){this.dropDrillthroughFilterCore(powerbi.explore.helpers.getModernFieldListExpr(o))},a.prototype.dropDrillthroughFilter=function(o,l,s){this.dropDrillthroughFilterCore(this.getFieldFromDragContext())},a.prototype.dropDrillthroughFilterCore=function(o){var l=this.explorationNavigation.getCurrentSection();pe.addFilterToScopeFromDrop(1,l,!0,this.dataSources,o,this.visualAuthoring)},a.prototype.dropFieldReportFilter=function(o){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(l){switch(l.label){case 0:return[4,this.dropReportFilterCore(powerbi.explore.helpers.getModernFieldListExpr(o))];case 1:return l.sent(),[2]}})})},a.prototype.dropReportFilter=function(o,l,s){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(L){switch(L.label){case 0:return[4,this.dropReportFilterCore(this.getFieldFromDragContext())];case 1:return L.sent(),[2]}})})},a.prototype.dropReportFilterCore=function(o){return(0,e.mG)(this,void 0,void 0,function(){var l;return(0,e.Jh)(this,function(L){switch(L.label){case 0:return l=this.explorationNavigation.getCurrentExploration(),this.customSortEnabled(2)?[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),2,3)]:[3,2];case 1:return L.sent()&&pe.addFilterToScopeFromDrop(2,l,!1,this.dataSources,o,this.visualAuthoring,this.getSortableFiltersLength(this.viewModel.reportFilters)),[3,3];case 2:this.appendReportFiltersCore(o),L.label=3;case 3:return[2]}})})},a.prototype.appendFieldReportFilters=function(o){this.appendReportFiltersCore(powerbi.explore.helpers.getModernFieldListExpr(o))},a.prototype.appendReportFilters=function(o,l,s){this.appendReportFiltersCore(this.getFieldFromDragContext())},a.prototype.appendReportFiltersCore=function(o){var l=this.explorationNavigation.getCurrentExploration(),s=3===l.filterSortOrder?this.getSortableFiltersLength(this.viewModel.reportFilters):void 0;pe.addFilterToScopeFromDrop(2,l,!1,this.dataSources,o,this.visualAuthoring,s)},a.prototype.getSortableFiltersLength=function(o){var l=_.findIndex(o,function(L){return!L.canSortManually});return-1===l?o.length:l},a.prototype.isVisualFiltersVisible=function(){var o=this.viewModeState.getMode(),l=1===o,s=0===o;if(this.isEditMode()&&this.isInOutspacePane&&this.viewModel.isVisualVisible)return!0;if(this.isInOutspacePane){var L=_.filter(this.viewModel.visualFilters,function(U){return!0!==U.contract.isHiddenInViewMode});return this.viewModel.isVisualVisible&&!_.isEmpty(L)}return!!(l&&this.viewModel.isVisualVisible||s&&!_.isEmpty(this.viewModel.visualFilters))},a.prototype.isPageFiltersVisible=function(){var o=this.viewModel.pageFilters;return this.isReadingMode()&&this.isInOutspacePane&&(o=o.concat(this.viewModel.drillthroughFilters)),this.isPageOrReportScopeFiltersVisible(o)},a.prototype.showDrillthroughInPageFiltersInOutspacePane=function(){return!!this.featureSwitchService.featureSwitches.onObject||this.isReadingMode()},a.prototype.isDrillthroughFiltersVisible=function(){if(!this.viewModeState.getConfig().displayOptions.showDrillthroughFilters)return!1;var l=this.explorationNavigation.getCurrentSection();return!(!l||null!=l.type&&0!==l.type&&2!==l.type)&&this.isPageOrReportScopeFiltersVisible(this.viewModel.drillthroughFilters)},a.prototype.isReportFiltersVisible=function(){return this.isPageOrReportScopeFiltersVisible(this.viewModel.reportFilters)},a.prototype.showNoFiltersHeader=function(){return this.isInOutspacePane&&!this.isVisualFiltersVisible()&&!this.isPageFiltersVisible()&&!this.isDrillthroughFiltersVisible()&&!this.isReportFiltersVisible()},a.prototype.getApplyAllButtonTooltip=function(){return this.viewModeState.getConfig().displayOptions.enableMobileFilters?"Apply_All":"Apply"},a.prototype.isApplyAllOnForThisFilter=function(){var o=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return ge.isApplyAllEnabled(this.isInOutspacePane||o,this.explorationNavigation)},a.prototype.applyAllHasFiltersToApply=function(){return Object.keys(this.validFilterChanges).length+Object.keys(this.invalidFilterChanges).length>0},a.prototype.onApplyAllFilterCardBufferedChanges=function(o){o.wasDeleted?(delete this.validFilterChanges[o.id],delete this.invalidFilterChanges[o.id]):o.canApply?(this.validFilterChanges[o.id]={filterType:o.filterType,filterScope:o.filterScopeType},delete this.invalidFilterChanges[o.id]):(this.invalidFilterChanges[o.id]={filterType:o.filterType,filterScope:o.filterScopeType},delete this.validFilterChanges[o.id]),this.updateIsApplyAllInErrorState()},a.prototype.updateIsApplyAllInErrorState=function(){this.isApplyAllButtonInErrorState=Object.keys(this.invalidFilterChanges).length>0&&this.isApplyAllButtonInErrorState},a.prototype.getFieldFromDragContext=function(){var o=this.dragDataService.getDragContext();return null==o?void 0:o.field},a.prototype.getDropActionInternal=function(o,l){var s=this.promiseFactory.defer();return s.resolve(this.getDropActionInternalCore(this.getFieldFromDragContext())),s.promise},a.prototype.getDropActionInternalCore=function(o){return o?3:0},a.prototype.onApplyAllClicked=function(){this.telemetryService.logEvent(powerbi.telemetry.EXApplyAllClicked,{numValidFilters:Object.keys(this.validFilterChanges).length,numInvalidFilters:Object.keys(this.invalidFilterChanges).length});var o={};Object.keys(this.invalidFilterChanges).length>0?(this.isApplyAllButtonInErrorState=!0,o.idsInError=Object.keys(this.invalidFilterChanges)):(this.validFilterChanges={},this.invalidFilterChanges={},o.undoRedoActionId=new se((new Date).toTimeString(),"Apply All")),this.eventBridge.publishToChannel(fe.applyAllClicked,o)},a.prototype.updateFormatting=function(o){var l,s,L=null==o?void 0:o.outspacePane;if(this.checkboxAndApplyColor=ge.getCheckboxAndApplyColor(L,null===(s=null===(l=this.filterCardStyleArguments)||void 0===l?void 0:l.defaultStyleOverride)||void 0===s?void 0:s.checkboxAndApplyColor),this.isInOutspacePane){this.checkboxAndApplyForegroundColor=ge.getColor(L,"foregroundColor",re.DefaultOutspacePaneCheckboxAndApplyForegroundColor),this.applyButtonDisabledForegroundColor=ge.getColor(L,"foregroundColor",re.DefaultOutspacePaneApplyButtonDisabledForegroundColor);var U=powerbi.DataViewObject.getValue(L,"fontFamily",re.DefaultOutspacePaneFontFamily);this.headerFontFamily=U;var H=powerbi.DataViewObject.getValue(L,"headerSize",re.DefaultOutspacePaneHeaderSizePt);this.headerFontSize="".concat(H,"pt")}},a.prototype.getFiltersByScopeType=function(o,l){var s;switch(o){case 0:s=this.viewModel.visualFilters;break;case 1:s=l&&5===l?this.viewModel.drillthroughFilters:this.viewModel.pageFilters;break;case 2:s=this.viewModel.reportFilters}return s},a.prototype.setFiltersByScopeType=function(o,l,s){switch(o){case 0:this.viewModel.visualFilters=l;break;case 1:5===s?this.viewModel.drillthroughFilters=l:this.viewModel.pageFilters=l;break;case 2:this.viewModel.reportFilters=l}},a.prototype.sortFiltersBySortType=function(o,l){var s=this;void 0===l&&(l=1);var L=this.getFiltersByScopeType(o),U=this.viewModeState.getConfig().displayOptions.enableMobileFilters,H=L.filter(function(te){return(s.isInOutspacePane||U)&&te.canSortManually}),ne=L.filter(function(te){return!s.isInOutspacePane&&!U||!te.canSortManually});if(L.length>0){switch(l){case 1:H.sort(X.sortFilterByDisplayName),ne.sort(X.sortFilterByDisplayName);break;case 2:H.sort(X.sortFilterByDisplayName).reverse(),ne.sort(X.sortFilterByDisplayName).reverse();break;case 3:H.sort(X.sortFilterByOrdinal)}this.setFiltersByScopeType(o,H.concat(ne))}},a.prototype.onModelChanged=function(){this.createReportFilters(),this.createPageScopeFilters()},a.prototype.isEditMode=function(){return 1===this.viewModeState.getMode()},a.prototype.isReadingMode=function(){return 0===this.viewModeState.getMode()},a.prototype.onExplorationFiltersContainerChanged=function(o){o.container===this.explorationNavigation.getCurrentExploration()&&(this.createReportFilters(),this.createPageScopeFilters())},a.prototype.onSectionFiltersContainerChanged=function(o){o.container===this.explorationNavigation.getCurrentSection()&&this.createPageScopeFilters()},a.prototype.onCanvasChanged=function(){this.createPageScopeFilters(),this.isApplyAllEnabled&&(this.validFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.validFilterChanges,[0,1]),this.invalidFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.invalidFilterChanges,[0,1]),this.updateIsApplyAllInErrorState())},a.prototype.getTargetIndex=function(o,l,s){if(s&&(l+=1),l!==o)return l},a.prototype.isPageOrReportScopeFiltersVisible=function(o){if(this.isInOutspacePane){if(this.isEditMode())return!0;o=_.reduce(o,function(s,L){return L.contract.isHiddenInViewMode||s.push(L),s},[])}else if(this.viewModeState.getConfig().alwaysPopulatePanes||this.isEditMode())return!0;return!_.isEmpty(o)},a.prototype.updateSelection=function(){this.isApplyAllEnabled&&(this.validFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.validFilterChanges,[0]),this.invalidFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.invalidFilterChanges,[0]),this.updateIsApplyAllInErrorState());var o=this.viewModel,l=this.getSelectedVisual();o.visualFilters.length=0,l&&this.visualPluginOps.isQueryVisual(l.config.singleVisual.visualType)?(o.isVisualVisible=!0,this.updateVisualFilters()):this.viewModel.isVisualVisible=!1},a.prototype.onVisualContainerChanged=function(o){if(o){var l=this.getSelectedVisual();l&&o.affectContainer(l)&&"UserAction_Sorting"!==o.sourceLabelKey&&this.updateVisualFilters()}},a.prototype.onFilterContainerChanged=function(o){return(0,e.mG)(this,void 0,void 0,function(){var l,s,L,U,H,ne,te;return(0,e.Jh)(this,function(Ce){switch(Ce.label){case 0:return o.filter?[4,pe.getConceptualSchema(this.filterPaneUtilServices.dataSources,this.filterPaneUtilServices.conceptualSchemaProxy)]:[2];case 1:return l=Ce.sent(),s=5===o.filter.howCreated&&!this.viewModeState.getConfig().displayOptions.showDrillthroughFilters,pe.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,0,this.viewModel.visualFilters,o),pe.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,1,this.viewModel.pageFilters,o),pe.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,2,this.viewModel.reportFilters,o),s||pe.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,1,this.viewModel.drillthroughFilters,o),s&&!this.isInOutspacePane||(L=this.explorationNavigation.getCurrentExploration(),U=this.getSelectedVisual(),H=ge.getFiltersContainer(o.scope.scopeType,this.selection,this.explorationNavigation),te=H?H.filterSortOrder:void 0,ne=this.getFiltersByScopeType(o.scope.scopeType,o.filter.howCreated),pe.onFilterContainerChanged(o,ne,L,this.filterPaneUtilServices,l,U),(1===o.changeType||256===o.changeType)&&this.sortFiltersBySortType(o.scope.scopeType,te)),[2]}})})},a.prototype.getSelectedVisual=function(){return ae.getSelectedVisual(this.selection)},a.prototype.createPageScopeFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var o,l,s,L,U;return(0,e.Jh)(this,function(H){switch(H.label){case 0:return(o=this.explorationNavigation.getCurrentSection())?[4,pe.getPageScopeFilters(this.filterPaneUtilServices)]:[2];case 1:for(l=H.sent(),this.viewModel.pageFilters=[],this.viewModel.drillthroughFilters=[],s=0,L=l;s<L.length;s++)5!==(U=L[s]).howCreated?this.viewModel.pageFilters.push(U):this.viewModel.drillthroughFilters.push(U);return this.sortFiltersBySortType(1,o.filterSortOrder),[2]}})})},a.prototype.createReportFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var o,l;return(0,e.Jh)(this,function(s){switch(s.label){case 0:return(o=this.explorationNavigation.getCurrentExploration())?[4,pe.getConceptualSchema(this.dataSources,this.conceptualSchemaProxy)]:(this.viewModel.reportFilters=null,[2]);case 1:return l=s.sent(),this.viewModel.reportFilters=X.createFilters({scopeType:2,container:o},l,this.displayNameService,this.visualPlugin,this.aggrOps,this.localizationService,null),pe.addConfigToFilters(this.viewModel.reportFilters,l,this.dataSources,this.visualAuthoring,!1),this.sortFiltersBySortType(2,this.explorationNavigation.getCurrentExploration().filterSortOrder),[2]}})})},a.prototype.updateVisualFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var o,l,s;return(0,e.Jh)(this,function(L){switch(L.label){case 0:return[4,pe.getConceptualSchema(this.dataSources,this.conceptualSchemaProxy)];case 1:return o=L.sent(),l=this.explorationNavigation.getCurrentSection(),(s=this.getSelectedVisual())?(this.viewModel.visualFilters=this.visualAuthoring.createVisualFilters(l,s,this.dataSources.get(),o),this.sortFiltersBySortType(0,this.getSelectedVisual().filterSortOrder),[2]):[2]}})})},a.prototype.isSearchTextNullOrEmpty=function(){return!(this.searchFiltersInput&&!/^\s*$/.test(this.searchFiltersInput))},a.prototype.removeBufferedFilterChangesByFilterScope=function(o,l){return _.omitBy(o,function(s){return l.some(function(L){return s.filterScope===L})})},a.prototype.announceTotalVisibleFilterCards=function(){var H,o=this,U=this.viewModel.visualFilters.filter(function(ne){return!pe.shouldHideFilterBySearchInput(ne,o.searchFiltersInput,o.featureSwitchService)}).length+this.viewModel.pageFilters.filter(function(ne){return!pe.shouldHideFilterBySearchInput(ne,o.searchFiltersInput,o.featureSwitchService)}).length+this.viewModel.reportFilters.filter(function(ne){return!pe.shouldHideFilterBySearchInput(ne,o.searchFiltersInput,o.featureSwitchService)}).length;H=0===U?this.localizationService.get("ContentList_EmptySearchResults"):1===U?this.localizationService.get("Count_SearchBox_Result_One"):this.localizationService.format("Count_SearchBox_Results",[U]),this.screenReaderService.alert(H)},a.\u0275fac=function(l){return new(l||a)(i.\u0275\u0275directiveInject(O.C),i.\u0275\u0275directiveInject(I.i),i.\u0275\u0275directiveInject(T.D),i.\u0275\u0275directiveInject(f.O),i.\u0275\u0275directiveInject(C.x),i.\u0275\u0275directiveInject(M.J),i.\u0275\u0275directiveInject(d.U),i.\u0275\u0275directiveInject(A.z),i.\u0275\u0275directiveInject(g.vZ),i.\u0275\u0275directiveInject(S.o),i.\u0275\u0275directiveInject(i.NgZone),i.\u0275\u0275directiveInject(m.t),i.\u0275\u0275directiveInject(B.g),i.\u0275\u0275directiveInject(b.k),i.\u0275\u0275directiveInject(P.z),i.\u0275\u0275directiveInject(w.y0),i.\u0275\u0275directiveInject(V.kc),i.\u0275\u0275directiveInject(v.$),i.\u0275\u0275directiveInject(c.D),i.\u0275\u0275directiveInject(y.f))},a.\u0275cmp=i.\u0275\u0275defineComponent({type:a,selectors:[["filter-pane-modern"]],inputs:{isInOutspacePane:"isInOutspacePane",sectionObjects:"sectionObjects",searchFiltersInput:"searchFiltersInput",filterCardStyleArguments:"filterCardStyleArguments"},features:[i.\u0275\u0275NgOnChangesFeature],decls:10,vars:12,consts:[[1,"filterPane-FlexWrapper"],["dragScroll","",1,"filterPaneScrollWrapper",3,"pbiScrollbar"],["data-automation-type","filterPane",1,"filterPaneModern",3,"ngClass"],["id","noFiltersHeader","class","header caption mediumFontSize","localize","No_Filter_For_Visual_FilterPane",3,"ngStyle",4,"ngIf"],["id","visualFilterContainer","class","bucket","role","group","aria-describedby","filterPaneVisualHeader",3,"ngClass",4,"ngIf"],["id","pageFilterContainer","class","bucket","role","group","aria-describedby","filterPanePageHeader",3,"ngClass",4,"ngIf"],["id","drillthroughFilterContainer","class","bucket","role","group","aria-describedby","filterPaneDrillThroughHeader",4,"ngIf"],["id","exploreFilterContainer","class","bucket","role","group","aria-describedby","filterPaneReportHeader",3,"ngClass",4,"ngIf"],["class","editVariablesButton trimmedTextWithEllipsis","localize","EditVariables_OutspacePane","localizeTooltip","EditVariables_OutspacePane_Tooltip",3,"ngStyle","click",4,"ngIf"],["id","paneApplyAll",4,"ngIf"],["id","noFiltersHeader","localize","No_Filter_For_Visual_FilterPane",1,"header","caption","mediumFontSize",3,"ngStyle"],["id","visualFilterContainer","role","group","aria-describedby","filterPaneVisualHeader",1,"bucket",3,"ngClass"],["class","header",4,"ngIf"],[1,"cards"],[3,"drop","dropWatchConfig","dropAction","dropHandler"],[4,"ngIf"],["class","unselectable trimmedTextWithEllipsis",3,"ngClass","ngStyle","title","drop","dropAction","dropHandler",4,"ngIf"],[1,"header"],["localizeTooltip","FilterPane_VisualDescription","id","filterPaneVisualHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle","localize"],["class","optionsMenu","aria-describedby","filterPaneVisualHeader",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick",4,"ngIf"],["aria-describedby","filterPaneVisualHeader",1,"optionsMenu",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick"],[1,"glyphicon","pbi-glyph-more","glyph-mini"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","searchFiltersInput",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","searchFiltersInput"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","drag","dragDisabled","getDragContext","dropAction","moveFilter","dropHandler",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","drag","dragDisabled","getDragContext","dropAction","moveFilter","dropHandler"],[1,"unselectable","trimmedTextWithEllipsis",3,"ngClass","ngStyle","title","drop","dropAction","dropHandler"],["id","pageFilterContainer","role","group","aria-describedby","filterPanePageHeader",1,"bucket",3,"ngClass"],["localizeTooltip","FilterPane_VisualDescription","id","filterPanePageHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle","localize"],["class","optionsMenu","aria-describedby","filterPanePageHeader",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick",4,"ngIf"],["aria-describedby","filterPanePageHeader",1,"optionsMenu",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","dropAction","drag","dragDisabled","getDragContext","moveFilter","dropHandler",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","dropAction","drag","dragDisabled","getDragContext","moveFilter","dropHandler"],["id","drillthroughFilterContainer","role","group","aria-describedby","filterPaneDrillThroughHeader",1,"bucket"],["localize","FilterPane_Drillthrough","localizeTooltip","FilterPane_DrillthroughDescription","id","filterPaneDrillThroughHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle"],["class","unselectable trimmedTextWithEllipsis",3,"ngClass","title","drop","dropAction","dropHandler",4,"ngIf"],[1,"unselectable","trimmedTextWithEllipsis",3,"ngClass","title","drop","dropAction","dropHandler"],["id","exploreFilterContainer","role","group","aria-describedby","filterPaneReportHeader",1,"bucket",3,"ngClass"],["localizeTooltip","FilterPane_VisualDescription","id","filterPaneReportHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle","localize"],["class","optionsMenu","aria-describedby","filterPaneReportHeader",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick",4,"ngIf"],["aria-describedby","filterPaneReportHeader",1,"optionsMenu",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick"],["data-automation-type","filterCard",3,"viewModel","filterCardStyleArguments","isInOutspacePane","searchFiltersInput",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","filterCardStyleArguments","isInOutspacePane","searchFiltersInput"],["localize","EditVariables_OutspacePane","localizeTooltip","EditVariables_OutspacePane_Tooltip",1,"editVariablesButton","trimmedTextWithEllipsis",3,"ngStyle","click"],["id","paneApplyAll"],["class","applyAllErrorDialogue",4,"ngIf"],["ng-keyup","$event.keyCode == 13 && onApplyAllClicked()","id","buttonApplyAll",3,"disabled","ngStyle","localize","localizeTooltip","click"],[1,"applyAllErrorDialogue"],[1,"glyphicon","glyph-small","pbi-glyph-error"],["role","alert","localize","FilterPane_ApplyAllErrorDialogue",1,"applyAllErrorDialogueText",3,"ngStyle"]],template:function(l,s){1&l&&(i.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"div",2),i.\u0275\u0275template(3,ee,1,4,"span",3),i.\u0275\u0275template(4,_e,7,10,"section",4),i.\u0275\u0275template(5,Se,8,11,"section",5),i.\u0275\u0275template(6,st,7,9,"section",6),i.\u0275\u0275template(7,lt,7,10,"section",7),i.\u0275\u0275template(8,Pt,1,4,"button",8),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(9,ke,3,10,"div",9),i.\u0275\u0275elementEnd()),2&l&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("pbiScrollbar",i.\u0275\u0275pureFunction0(9,We)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(10,ze,s.isInOutspacePane)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.showNoFiltersHeader()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isVisualFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isPageFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isDrillthroughFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isReportFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.showEditVariablesLink()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",s.isApplyAllEnabled))},dependencies:[u.NgClass,u.NgForOf,u.NgIf,u.NgStyle,r.X,h.r,p.l8,D.r,x.V,z.w,Q.W,q.W,de.z],styles:['.isInOutspacePane[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;overflow:visible;padding:0 8px}html[data-focus-source=key][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]:focus, html[data-focus-source=key][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus,   html[data-focus-source=key] .isInOutspacePane:focus,   html[data-focus-source=key] .isInOutspacePane *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:0px}html[data-focus-source=mouse][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]:focus, html[data-focus-source=mouse][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus, html[data-focus-source=program][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]:focus, html[data-focus-source=program][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus     html[data-focus-source=mouse] .isInOutspacePane:focus,   html[data-focus-source=mouse] .isInOutspacePane *:focus,   html[data-focus-source=program] .isInOutspacePane:focus,   html[data-focus-source=program] .isInOutspacePane *:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:inherit}.isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{border:none;background-color:inherit;width:100%;border-radius:4px;box-sizing:border-box}html:not([dir="rtl"])[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{float:right}.isInOutspacePane[_ngcontent-%COMP%]   .cards.append[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811)}.isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .dragover.dropzone[_ngcontent-%COMP%]{box-shadow:0 0 2px 2px}.isInOutspacePane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{padding:14px;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);color:inherit;text-align:center}.isInOutspacePane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .end-dropzone[_ngcontent-%COMP%]{height:8px}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]{display:flex;flex-direction:column}.isInOutspacePane[_ngcontent-%COMP%]   .bucket.bucket-padding[_ngcontent-%COMP%]{padding:0 0 18px}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:inherit;display:flex;box-sizing:border-box;font-weight:inherit}html:not([dir="rtl"])[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:0 4px 4px 0}html[dir="rtl"][_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:0 0 4px 4px}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-right:0}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]{background-color:transparent;margin-top:8px;color:inherit}html[data-focus-source=key][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]:focus, html[data-focus-source=key][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus,   html[data-focus-source=key] .isInOutspacePane .bucket .header .optionsMenu:focus,   html[data-focus-source=key] .isInOutspacePane .bucket .header .optionsMenu *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:0px}html[data-focus-source=mouse][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]:focus, html[data-focus-source=mouse][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus, html[data-focus-source=program][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]:focus, html[data-focus-source=program][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus     html[data-focus-source=mouse] .isInOutspacePane .bucket .header .optionsMenu:focus,   html[data-focus-source=mouse] .isInOutspacePane .bucket .header .optionsMenu *:focus,   html[data-focus-source=program] .isInOutspacePane .bucket .header .optionsMenu:focus,   html[data-focus-source=program] .isInOutspacePane .bucket .header .optionsMenu *:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   filter[_ngcontent-%COMP%]{display:flex;touch-action:auto}.isInOutspacePane[_ngcontent-%COMP%]   filter.append[_ngcontent-%COMP%]{box-shadow:0 3px}.isInOutspacePane[_ngcontent-%COMP%]   filter.prepend[_ngcontent-%COMP%]{box-shadow:0 -3px}.isInOutspacePane[_ngcontent-%COMP%]   .hasRestateHighlight[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}.isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%]{padding:6px 0 18px;max-width:100%;color:var(--fluent-theme-link-color, #0078D4)}.isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%], .isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%]:hover{background:transparent}.isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-alt-color, #004578);text-decoration:underline}.isInOutspacePane[_ngcontent-%COMP%]   #noFiltersHeader[_ngcontent-%COMP%]{padding:6px 0 18px;display:block}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{position:sticky;bottom:0px;z-index:1}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{margin:0 auto;display:block;border-radius:2px;width:100%;height:40px;border-color:var(--neutral-secondary-color, #666666)}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:enabled{background:var(--theme-primary-color, #F2C811)}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll.errorState[_ngcontent-%COMP%]{background:var(--warning-color, #A4262C)}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){width:100%;box-sizing:border-box;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;overflow:visible}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){float:left}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){padding:0 6px 4px 4px}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){padding:0 4px 4px 6px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]:focus{outline:none}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--white-color, #FFF);display:flex;box-sizing:border-box;font-weight:inherit}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:6px 5px 6px 0}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:6px 0 6px 5px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{font-size:12px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-left:12px}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-right:12px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:none}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt2, #4a4a4a);width:100%;border:1px dashed var(--neutral-secondary-color, #666666);border-radius:4px;box-sizing:border-box}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{float:right}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards.append[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811)}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);padding:4px 8px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%]:focus{outline:none}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .end-dropzone[_ngcontent-%COMP%]{height:8px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .header[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .header[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards.append[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards.append[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.filterPane-FlexWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;border-color:inherit}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{border-top:1px solid;border-color:inherit;display:flex;flex-direction:column;box-sizing:border-box;padding-top:8px}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{margin:8px 8px 16px auto;border-radius:2px;border:1px transparent solid;width:80px;height:32px}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]   html[data-focus-source=key][_ngcontent-%COMP%], .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]{margin:0 8px;padding:7px;display:flex;background:var(--fluent-theme-error-background-color, #FDE7E9)}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{color:var(--fluent-theme-error-dark-color, #A80000);padding-right:6px}',".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .cards[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .cards[_ngcontent-%COMP%]{font-size:12px;border:0;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{border-top:0;min-height:50px;margin-bottom:unset;padding-top:2px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{min-height:32px;font-weight:500;margin:5px 18px 16px auto;border-radius:4px;font-size:14px;letter-spacing:normal;background-color:var(--fluentThemeWhiteToNightColor);border:2px solid var(--fluentThemeNeutralTertiaColor);font-weight:700;width:100px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:not(:enabled), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:not(:enabled){color:var(--fluentThemeNeutralTertiaColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:enabled, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:enabled{background-color:inherit;border:2px solid var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child{position:relative;top:0px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:hover, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:hover{color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]{background-color:var(--fluentThemeErrorBackgroundColor);color:var(--fluentThemeErrorDarkColor);margin:auto 18px;min-height:24px;padding:5px;font-size:14px;border-radius:4px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{padding-top:2px;margin:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{padding-right:10px;padding-top:2px;font-size:20px;color:var(--fluentThemeErrorDarkColor);margin:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){padding:0 17px}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{min-height:calc(50px + env(safe-area-inset-bottom))}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child, .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child{position:relative;top:0}@media (orientation: landscape){.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{flex-direction:row;min-height:50px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]{margin-top:0;margin-bottom:auto;position:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{padding-right:10px}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{min-height:calc(30px + env(safe-area-inset-bottom))}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child, .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child{position:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{padding-left:10px}}.exploreHost.landingController[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{margin-bottom:8px}.exploreHost.landingController[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{margin-bottom:44px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{margin:5px auto 16px 24px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{padding-left:10px}"]}),a}()},12361:function(Le,oe,t){t.d(oe,{F:function(){return f}});var e=t(59214),n=t(20019),m=t(41770),i=t(6067),O=powerbi.explore.FilterUtils;function I(M,A){if(1&M&&(e.\u0275\u0275elementStart(0,"li",1),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&M){var b=A.$implicit;e.\u0275\u0275propertyInterpolate("title",b),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",b," ")}}var T=function(A,b,P,y,C){return{backgroundColor:A,"border-color":b,color:P,"font-family":y,"font-size":C}},f=function(){function M(A,b){this.explorationNavigation=A,this.themeService=b}return M.prototype.ngOnInit=function(){var A=this.explorationNavigation.getCurrentExploration(),b=this.themeService.getVisualStyle(A.themeCollection),P=O.getFilterCardStyle(this.sectionObjects,!0,b);this.backgroundColor=P.backgroundColor,this.borderColor=P.borderColor,this.color=P.foregroundColor,this.fontFamily=P.fontFamily,this.fontSize=P.fontSize},M.prototype.getAriaLabelForRestatementItem=function(){var A=this.filterRestatement&&this.filterRestatement.fieldName,b=this.filterRestatement&&this.filterRestatement.restatements,P=_.isEmpty(b)?"":b.join();return"".concat(A," ").concat(P)},M.\u0275fac=function(b){return new(b||M)(e.\u0275\u0275directiveInject(n.z),e.\u0275\u0275directiveInject(m.f))},M.\u0275cmp=e.\u0275\u0275defineComponent({type:M,selectors:[["filter-restatement-card"]],inputs:{filterRestatement:"filterRestatement",sectionObjects:"sectionObjects"},decls:5,vars:11,consts:[[1,"filterRestatementCard",3,"ngStyle"],[3,"title"],[3,"title",4,"ngFor","ngForOf"]],template:function(b,P){1&b&&(e.\u0275\u0275elementStart(0,"div",0)(1,"strong",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"ul"),e.\u0275\u0275template(4,I,2,2,"li",2),e.\u0275\u0275elementEnd()()),2&b&&(e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction5(5,T,P.backgroundColor,P.borderColor,P.color,P.fontFamily,P.fontSize)),e.\u0275\u0275attribute("aria-label",P.getAriaLabelForRestatementItem()),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("title",P.filterRestatement.fieldNameToolTip),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(P.filterRestatement.fieldName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",P.filterRestatement.restatements))},dependencies:[i.NgForOf,i.NgStyle],styles:[".filterRestatementCard[_ngcontent-%COMP%]{border:1px solid;margin-top:6px;padding:8px 12px;font-size:14px;word-wrap:break-word;border-radius:2px}.filterRestatementCard[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;margin:0}"]}),M}()},29129:function(Le,oe,t){t.d(oe,{k:function(){return i}});var e=t(93997),n=t(59214),m=t(4963),i=function(){function O(I){this.filterRestatementData=I,this.visual=I.visual,this.isSticky=!!I.isSticky}return O.\u0275fac=function(T){return new(T||O)(n.\u0275\u0275directiveInject(e.M))},O.\u0275cmp=n.\u0275\u0275defineComponent({type:O,selectors:[["filter-restatement-overlay"]],decls:2,vars:2,consts:[[1,"pbi-depth-2"],[3,"visual","isSticky"]],template:function(T,f){1&T&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"filter-restatement",1),n.\u0275\u0275elementEnd()),2&T&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("visual",f.visual)("isSticky",f.isSticky))},dependencies:[m.W],encapsulation:2,changeDetection:0}),O}()},4963:function(Le,oe,t){t.d(oe,{W:function(){return u}});var e=t(7005),n=t(59214),m=t(78099),i=t(89718),O=t(20019),I=t(84638),T=t(89515),f=t(44302),M=t(41770),A=t(11719),b=t(6067),P=t(45647),y=t(12361),C=powerbi.common.utils.ColorUtility,d=powerbi.visuals.ColorHelper,g=powerbi.DataViewObject,S=powerbi.explore.constants.ExploreCanvasConstants,B=powerbi.explore.util;function w(r,h){if(1&r&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275element(1,"filter-restatement-card",7),n.\u0275\u0275elementEnd()),2&r){var p=h.$implicit,D=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("filterRestatement",p)("sectionObjects",D.section.evaluatedObjects)}}function V(r,h){1&r&&n.\u0275\u0275element(0,"li",8)}function v(r,h){if(1&r&&(n.\u0275\u0275elementStart(0,"ul"),n.\u0275\u0275template(1,w,2,2,"li",5),n.\u0275\u0275template(2,V,1,0,"li",6),n.\u0275\u0275elementEnd()),2&r){var p=h.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",p),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!(null!=p&&p.length))}}var c=function(h,p,D,x){return{backgroundColor:h,color:p,"font-family":D,"font-size":x}},u=function(){function r(h,p,D,x,z,Q,q,de){this.conceptualSchemaProxy=h,this.dataSources=p,this.explorationNavigation=D,this.filterRestatementService=x,this.localizationService=z,this.telemetryService=Q,this.themeService=q,this.viewModeState=de,this.filters$=Promise.resolve([]),this.backgroundColorSelector={objectName:"outspacePane",propertyName:"backgroundColor"},this.foregroundColorSelector={objectName:"outspacePane",propertyName:"foregroundColor"}}return r.prototype.ngOnInit=function(){var h=this.explorationNavigation.getCurrentExploration();this.section=this.explorationNavigation.getCurrentSection();var D=this.themeService.getVisualStyle(h.themeCollection),x=d.create(D),z=this.section&&this.section.evaluatedObjects;this.setBackground(z,x),this.setColor(z,x),this.setText(z)},r.prototype.ngOnChanges=function(h){(h.supportsValueLevelFilters||h.visual)&&this.update()},r.prototype.update=function(){var h=this;this.ariaLabelString=this.localizationService.get(this.supportsValueLevelFilters?"FilterRestatementVisual_ToolTip_Dialogue_Description_Value":"FilterRestatementVisual_ToolTip_Dialogue_Description"),this.filters$=this.getVisualFilters().then(function(D){return h.telemetryService.logEvent(powerbi.telemetry.EXImprovedFilterExperienceShowRestatement,{numOfFiltersShown:D.length,viewMode:B.getTelemetryViewMode(h.viewModeState.getMode())}),D||[]}).catch(function(D){return[]})},r.prototype.getVisualFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var h,p;return(0,e.Jh)(this,function(D){switch(D.label){case 0:return h=this.explorationNavigation.getCurrentExploration(),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return p=D.sent(),this.supportsValueLevelFilters?[2,this.filterRestatementService.getContextualFilterRestatements(p,this.visual)]:[2,this.filterRestatementService.getVisualFilterRestatements(h,this.section,p,this.visual)]}})})},r.prototype.setBackground=function(h,p){var D=p.getColorForProperty(h,this.backgroundColorSelector,"background"),z=C.convertTransparencyToOpacity(g.getValue(this.section.evaluatedObjects&&this.section.evaluatedObjects.outspacePane,"transparency",S.DefaultOutspacePaneTransparency));this.backgroundColor=C.hexToRGBString(D,z)},r.prototype.setColor=function(h,p){var D=p.getColorForProperty(h,this.foregroundColorSelector,"foreground");this.color=C.hexToRGBString(D)},r.prototype.setText=function(h){var p=h&&h.outspacePane;this.fontFamily=g.getValue(p,"fontFamily",S.DefaultOutspacePaneFontFamily);var D=g.getValue(p,"headerSize",S.DefaultOutspacePaneHeaderSizePt);this.fontSize="".concat(D,"pt")},r.\u0275fac=function(p){return new(p||r)(n.\u0275\u0275directiveInject(m.i),n.\u0275\u0275directiveInject(i.D),n.\u0275\u0275directiveInject(O.z),n.\u0275\u0275directiveInject(I.I),n.\u0275\u0275directiveInject(T.o),n.\u0275\u0275directiveInject(f.y0),n.\u0275\u0275directiveInject(M.f),n.\u0275\u0275directiveInject(A.kc))},r.\u0275cmp=n.\u0275\u0275defineComponent({type:r,selectors:[["filter-restatement"]],inputs:{supportsValueLevelFilters:"supportsValueLevelFilters",visual:"visual",isSticky:"isSticky"},features:[n.\u0275\u0275NgOnChangesFeature],decls:7,vars:14,consts:[[1,"filter-restatement-container"],[1,"filterRestatement","themeableElement",3,"ngStyle"],["aria-hidden","true",1,"glyphicon","pbi-glyph-filter"],["aria-hidden","true",1,"title"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","noFilter","localize","No_Filter_For_Visual",4,"ngIf"],[3,"filterRestatement","sectionObjects"],["localize","No_Filter_For_Visual",1,"noFilter"]],template:function(p,D){1&p&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275element(2,"span",2),n.\u0275\u0275elementStart(3,"span",3),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,v,3,2,"ul",4),n.\u0275\u0275pipe(6,"async"),n.\u0275\u0275elementEnd()()),2&p&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction4(9,c,D.backgroundColor,D.color,D.fontFamily,D.fontSize)),n.\u0275\u0275attribute("autofocus",D.isSticky||null)("tabindex",D.isSticky?"0":null)("aria-label",D.ariaLabelString)("role",D.isSticky?"region":null),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(D.ariaLabelString),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(6,7,D.filters$)))},dependencies:[b.NgForOf,b.NgIf,b.NgStyle,P.X,y.F,b.AsyncPipe],styles:[".filterRestatement[_ngcontent-%COMP%]{font-size:14px;width:260px;max-height:374px;overflow-y:auto;padding:12px 16px;z-index:999}.filterRestatement[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}.filterRestatement[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{vertical-align:middle;margin-bottom:4px;margin-inline-start:2px}.filterRestatement[_ngcontent-%COMP%]   .noFilter[_ngcontent-%COMP%]{padding:5px}.filterRestatement[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:0}.filterRestatement[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;margin:0}.filter-restatement-container[_ngcontent-%COMP%]{background-color:#fff}"],changeDetection:0}),r}()},78480:function(Le,oe,t){t.d(oe,{A:function(){return je}});var e=t(7005),n=t(59214),m=t(64450),i=t(51081),O=t(78099),I=t(64875),T=t(7772),f=t(89718),M=t(49470),A=t(87714),b=t(91845),P=t(20019),y=t(42645),C=t(43801),d=t(48568),g=t(64857),S=t(98467),B=t(92119),w=t(89515),V=t(82372),v=t(44302),c=t(11719),u=t(41844),r=t(96818),h=t(26963),p=t(49909),D=t(6067),x=t(55858),z=t(45647),Q=t(51186),q=t(76695),de=t(66293),se=t(70311),Ie=t(52393),fe=t(27316),re=powerbi.data.DataViewObjectDefinitions,pe=jsCommon.EnumExtensions,ge=powerbi.explore.services.events,be=powerbi.explore.services,ae=powerbi.explore.FilterUtils,X=powerbi.explore.viewModels.FilterViewModel,le=powerbi.explore.PodUtils,ee=powerbi.data.RestatementHelper,N=powerbi.data.SemanticFilter,F=powerbi.data.SQExpr,E=powerbi.data.SQExprBuilder,k=powerbi.explore.services.toFilterData,R=powerbi.explore.util.VisualContainerUtils,W=powerbi.explore.util.VisualHostServicesUtil;function Z(Oe,J){if(1&Oe&&n.\u0275\u0275element(0,"visual-modern",6),2&Oe){var ue=n.\u0275\u0275nextContext();n.\u0275\u0275property("viewModel",ue.viewModel.readOnlyState.visual)("currentZone",ue.currentZone)("supportsScreenReader",!0)}}function me(Oe,J){1&Oe&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"spinner")(2,"span",8),n.\u0275\u0275elementEnd())}function _e(Oe,J){1&Oe&&(n.\u0275\u0275elementStart(0,"div",9)(1,"i",10),n.\u0275\u0275element(2,"svg-use-symbol",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"span",12),n.\u0275\u0275elementEnd())}function he(Oe,J){if(1&Oe){var ue=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(ue);var Ge=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(Ge.onApplyButtonClicked())}),n.\u0275\u0275elementEnd()}if(2&Oe){var Me=n.\u0275\u0275nextContext();n.\u0275\u0275property("disabled",!Me.isApplyButtonEnabled())}}var G=function(J){return{"border-color":J}};function ce(Oe,J){if(1&Oe){var ue=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",14)(1,"mat-checkbox",15),n.\u0275\u0275listener("change",function(){n.\u0275\u0275restoreView(ue);var Ge=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(Ge.updateRequiredState())})("ngModelChange",function(Ge){n.\u0275\u0275restoreView(ue);var nt=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(nt.viewModel.isSingleSelectionRequired=Ge)}),n.\u0275\u0275element(2,"span",16),n.\u0275\u0275elementEnd()()}if(2&Oe){var Me=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("disabled",Me.viewModel.isSingleSelectDisabled()),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(10,G,Me.viewModel.borderColor))("ngClass",Me.isInOutspacePane?"filterOutspace":"filterClassic"),n.\u0275\u0275advance(1),n.\u0275\u0275property("matCheckBoxColor",Me.viewModel.checkboxAndApplyColor)("matCheckBoxColorIsChecked",Me.viewModel.isSingleSelectionRequired)("disabled",Me.viewModel.isSingleSelectDisabled())("ngModel",Me.viewModel.isSingleSelectionRequired)("aria-label",Me.requireSingleSelectLabel)("localizeTooltip",Me.getToolTipForSingleSelect())}}var Fe={objectName:"general",propertyName:"isInvertedSelectionMode"},je=function(){function Oe(J,ue,Me,Se,Ge,nt,st,yt,Ae,Ve,xe,Pe,et,$e,lt,Pt,Ct,Ue,ke,We,ze,ve,a,o,l){this.aggrOps=J,this.contextActivityService=ue,this.conceptualSchemaProxy=Me,this.dataSources=Se,this.displayNameService=Ge,this.eventBridge=nt,this.explorationActivity=st,this.explorationNavigation=yt,this.featureSwitchService=Ae,this.filterGenerator=Ve,this.geocoder=xe,this.geolocationService=Pe,this.localizationService=et,this.moduleLoader=$e,this.ngZone=lt,this.promiseFactory=Pt,this.singleExecutableDataProxyFactory=Ct,this.telemetryService=Ue,this.undoRedo=ke,this.viewModeState=We,this.visualAuthoring=ze,this.visualHostTooltipServiceFactory=ve,this.visualPlugin=a,this.visualQueryGenerator=o,this.screenReaderService=l}return Oe.prototype.ngOnInit=function(){var J=this;this.runInAngularZone(function(){return J.onInitImpl()})},Oe.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.viewModel.setServices(void 0,this.visualPlugin,this.viewModeState),this.viewModel.readOnlyState.visual=void 0},Oe.prototype.ngOnChanges=function(J){var ue=this;this.runInAngularZone(function(){return ue.onChangesImpl(J)})},Oe.prototype.onInitImpl=function(){var J=this,ue=this.singleExecutableDataProxyFactory.create();if(this.visualDataProxyService=be.createExploreVisualDataProxyService(ue,this.filterGenerator,this.promiseFactory,this.visualPlugin),this.crossFilteringHostService=this.createFilteringHostService(),this.requireSingleSelectLabel=this.localizationService.get("PageFilter_SingleSelectionRequired"),le.isPodEnabled(this.viewModel.contract,this.viewModel.getFilterContainerScope())&&this.isPodParameter())this.viewModel.isSingleSelectionRequired=!0;else if(this.viewModel.contract.objects){var Me=re.getValue(this.viewModel.contract.objects,{objectName:"general",propertyName:"requireSingleSelect"},void 0);Me&&Me.value&&(this.viewModel.isSingleSelectionRequired=powerbi.data.SQConstantExpr.getBooleanValue(Me))}this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(ge.filterContainerChanged,function(Se,Ge){return J.onFilterContainerChanged(Ge)}).subscribe(ge.explorationLoaded,function(){return J.runInAngularZone(function(){return J.updateSlowDataApplyEnabled()})}).subscribe(ge.sectionObjectsEvaluated,function(Se,Ge){return J.runInAngularZone(function(){J.viewModel.isFilterExpanded()&&J.loadData(!1)})}).subscribe(ge.explorationUnloaded,function(){return J.runInAngularZone(function(){return J.updateSlowDataApplyEnabled()})}).subscribe(ge.applyAllClicked,function(Se,Ge){return J.onApplyAllClicked(Ge)}).subscribe(ge.explorationSlowDataSourceSettingsLoaded,function(Se,Ge){return J.runInAngularZone(function(){(Ge.isFilterSelectionsButtonEnabledChanged||Ge.isApplyAllButtonEnabledChanged)&&(J.applyBufferedFilter(),J.updateSlowDataApplyEnabled())})}),this.updateSlowDataApplyEnabled(),this.init(this.viewModel)},Oe.prototype.onChangesImpl=function(J){!this.isInitialized&&!0===J.expanded.currentValue&&(this.init(this.viewModel),this.isInitialized=!0)},Oe.prototype.init=function(J){var ue=this;this.viewModel=J,this.viewModel.setServices(powerbi.Prototype.inherit(powerbi.explore.services.createVisualHostServices({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),screenReaderService:this.screenReaderService}),function(Me){Me.persistProperties=function(Se,Ge){return ue.persistProperties(Se)},Me.loadMoreData=function(){return ue.loadMoreData()},Me.promiseFactory=function(){return ue.promiseFactory},Me.canSelect=function(Se){return!0},Me.getFilterExpressionMetadata=function(){return ue.getFilterExpressionMetadata()},Me.setFilterExpressionMetadata=function(Se){return ue.setFilterExpressionMetadata(Se)},Me.ignoreDefaultFilter=function(){return ue.ignoreDefaultFilter()},Me.dataMultiSelectMode=function(){return ue.getDataMultiSelectMode()}}),this.visualPlugin,this.viewModeState),this.getConceptualSchema().then(function(Me){if(ue.viewModel.updateFilterProperties(Me,ue.visualPlugin,ue.aggrOps),ue.viewModel.updateViewState(),ue.viewModel.isSingleSelectionRequired){var Se=ue.viewModel.getFilterContainerScope();!ue.isPodParameter()&&1===Se.scopeType||ue.viewModel.isMappedToMParameter()&&!ue.viewModel.supportsMultipleValues()?ue.updateRequiredState(!1):ue.updateVisualSelectAllState()}ue.viewModel.readOnlyState.expanded&&ue.loadData(!1),ue.loadRestatement()})},Oe.prototype.getToolTipForSingleSelect=function(){return this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues()?"DQP_RequireSingleSelect_Tootltip":"PageFilter_SingleSelectionRequired_Tooltip"},Oe.prototype.isViewMode=function(){return 0===this.viewModeState.getMode()},Oe.prototype.isFooterVisible=function(){return this.viewModel.readOnlyState.canToggleSingleSelect&&(!this.isInOutspacePane||!this.isViewMode())},Oe.prototype.updateRequiredState=function(J){void 0===J&&(J=!0);var ue=this.viewModel.isSingleSelectionRequired;this.visualAuthoring.setRequireSingleSelection(this.viewModel.contract,this.viewModel.getFilterContainerScope(),ue),this.updateVisualSelectAllState(),this.updateVisualProperties();var Me=this.viewModel;if(J&&ue&&(Me.contract.filter||this.applyAllEnabled)){this.visualAuthoring.updateFilter(Me.getFilterContainerScope(),Me.contract,void 0);var Se=void 0;this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Se=ae.createChangeFilterActivity(this.contextActivityService,"Clear Filter"));var Ge={filter:Me.contract,changeType:10,scope:Me.getFilterContainerScope(),changeFilterActivity:Se};ae.notifyFilterContainerChangedByUser(this.eventBridge,Ge),this.applyAllEnabled&&(this.bufferedFilter=void 0,this.applyBufferedFilter(),Me.setRestatement(ee.fromDataViewScopeIdentities([],!1,Me.formatter)),ae.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,powerbi.explore.contracts.FilterType.Visual,this.viewModel.id,!0,!0)),Se&&Se.resolve()}else J&&this.visualAuthoring.updateFilter(Me.getFilterContainerScope(),Me.contract,Me.contract.filter)},Oe.prototype.isApplyButtonVisible=function(){return this.slowDataApplyEnabled&&!this.applyAllEnabled},Oe.prototype.isApplyButtonEnabled=function(){return this.haveBufferedFilter},Oe.prototype.onApplyAllClicked=function(J){this.applyAllEnabled&&!J.idsInError&&this.applyBufferedFilter(J.undoRedoActionId)},Oe.prototype.onApplyButtonClicked=function(){this.slowDataApplyEnabled&&(document.activeElement.blur(),this.applyBufferedFilter())},Oe.prototype.runInAngularZone=function(J){n.NgZone.isInAngularZone()?J():this.ngZone.run(J)},Oe.prototype.loadRestatement=function(){var J=this,ue=this.viewModel.contract;ue.filter?this.getConceptualSchema().then(function(Me){var Se=powerbi.visuals.plugins.slicer.capabilities,Ge=k(ue.filter,void 0,ue),nt=J.displayNameService.getFilterRestatementForOverlay(Ge,Me,Se);!_.isEmpty(nt)&&nt[0]&&nt[0].restatements?J.viewModel.setRestatement(nt[0].restatements.join(J.localizationService.get("ListJoin_Separator"))):J.viewModel.setRestatement(void 0)}):this.viewModel.setRestatement(void 0)},Oe.prototype.ignoreDefaultFilter=function(){var J=this.viewModel.contract;return 1!==J.howCreated&&!N.isDefaultFilter(J.filter)},Oe.prototype.persistProperties=function(J){var ue=this,Me=_.isArray(J)?{merge:J}:J;!this.viewModel.readOnlyState.visual||(this.viewModel.contract.config.singleVisual.objects=this.viewModel.readOnlyState.visual.dataTransforms.objects,this.runInAngularZone(function(){ue.checkAndApplySelfFilterPropertyChanges(Me),ue.checkAndApplyFilterPropertyChanges(Me)}))},Oe.prototype.checkAndApplySelfFilterPropertyChanges=function(J){var ue=powerbi.visuals.plugins.slicer.capabilities,Me=this.filterGenerator.tryGetSelfFilterProperty(ue);!J||void 0===this.getChangeProperty(Me.propertyName,J.merge)&&void 0===this.getChangeProperty(Me.propertyName,J.remove)||(powerbi.explore.services.applyPropertyChanges(J,ue.objects,this.viewModel.contract.config.singleVisual.objects),this.loadData(!1))},Oe.prototype.checkAndApplyFilterPropertyChanges=function(J){var ue,Me;if(J){var Se=this.filterGenerator.tryGetFilterPropertyIdentifier(powerbi.visuals.plugins.slicer.capabilities),Ge=this.getChangeProperty(Se.propertyName,J.merge),nt=this.getChangeProperty(Fe.propertyName,J.merge);Ge&&(ue=Ge.properties[Se.propertyName]),nt&&(Me=nt.properties[Fe.propertyName]);var st=this.getChangeProperty(Se.propertyName,J.remove),yt=this.getChangeProperty(Fe.propertyName,J.remove);if(!(Ge||st||nt||yt))return;this.bufferPropertyChanges(ue,Me)||this.applyPropertyChanges(ue,Me,void 0)}else this.bufferPropertyChanges(ue,Me)||this.applyPropertyChanges(ue,Me,void 0)},Oe.prototype.getChangeProperty=function(J,ue){if(!_.isEmpty(ue))return _.find(ue,function(Me){return _.has(Me.properties,J)})},Oe.prototype.applyPropertyChanges=function(J,ue,Me){var Se=this,Ge=re.getValue(this.viewModel.contract.objects,Fe,void 0),nt=Ge&&Ge.value,st=this.viewModel;if(st.useDefaultFilter=!1,(!N.isSameFilter(st.contract.filter,J)||nt!==ue)&&(!N.isAnyFilter(st.contract.filter)||J||nt!==ue)){var yt=this.viewModel.readOnlyState.visual,Ae=(0,e.pi)({},yt.data);yt.data=Ae;var Ve=J||nt||ue?2:10,xe=st.getFilterContainerScope();this.viewModel.contract.type=this.viewModel.readOnlyState.type;var Pe=function($e){void 0===st.contract.objects&&(st.contract.objects={}),ue?re.setValue(st.contract.objects,Fe,null,E.boolean(ue)):re.deleteProperty(st.contract.objects,Fe.objectName,null,Fe.propertyName);var lt=st.readOnlyState.visual;lt.dataTransforms&&lt.dataTransforms.objects&&Se.setInvertedSelectionOnVisual(lt.dataTransforms.objects),Se.visualAuthoring.updateFilter(xe,st.contract,J),ae.ensureFilterHasName(st.contract,xe);var Ct,Pt={filter:st.contract,changeType:Ve,scope:xe,parentActivity:$e};Se.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Ct=ae.createChangeFilterActivity(Se.contextActivityService,"Basic Filter"),Pt.changeFilterActivity=Ct),ae.notifyFilterContainerChangedByUser(Se.eventBridge,Pt),Ct&&Ct.resolve(),Se.loadRestatement()};this.undoRedo.register("UpdateFilter",function(){2===Ve?Se.explorationActivity.doRootActivity(Pe,function(){return Se.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneBasicFilterChanged,{filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(xe.scopeType),fieldKind:powerbi.explore.util.getTelemetryFieldKind(st.contract.expression),viewMode:powerbi.explore.util.getTelemetryViewMode(Se.viewModeState.getMode()),isInOutspacePane:Se.viewModel.isInOutspacePane})}):Se.explorationActivity.doActivity(Pe,function(et){return Se.telemetryService.startChildActivity(Se.currentActivity&&Se.currentActivity.event||et&&et.event,powerbi.telemetry.EXFilterPaneBasicFilterChanged,{filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(xe.scopeType),fieldKind:powerbi.explore.util.getTelemetryFieldKind(st.contract.expression),viewMode:powerbi.explore.util.getTelemetryViewMode(Se.viewModeState.getMode()),isInOutspacePane:Se.viewModel.isInOutspacePane})})},Me)}},Oe.prototype.isPodParameter=function(){var J=this.explorationNavigation.getCurrentExploration(),ue=this.explorationNavigation.getCurrentSection(),Me=this.viewModel.contract.name;return!!(J&&ue&&Me)&&le.hasParameter(J,ue.name,Me)},Oe.prototype.createFilteringHostService=function(){var J=this;return powerbi.Prototype.inherit(W.createQueryVisualHostServices(),function(ue){ue.getFilters=function(Me,Se){return J.filterGenerator.calculateFilterContainerInputFilter(J.explorationNavigation.getCurrentExploration(),J.explorationNavigation.getCurrentSection(),J.viewModel.contract,Se,J.viewModel.getFilterContainerScope())},ue.getDataSourceVariables=function(){var Me=J.explorationNavigation.getCurrentExploration();return void 0!==Me?Me.dataSourceVariables:void 0}})},Oe.prototype.loadMoreData=function(){this.visualDataProxyService.canLoadMore()&&this.loadData(!0)},Oe.prototype.loadData=function(J){var ue=this;this.viewModel.isLoading=!0,this.hasQueryError=!1,this.getConceptualSchema().then(function(Me){var Se=ue.dataSources.get();return ue.visualDataProxyService.runQuery({dataSources:Se,schema:Me,config:ue.viewModel.contract.config.singleVisual,hostServices:ue.crossFilteringHostService,visualQueryGenerator:ue.visualQueryGenerator,executionType:J?1:0}).then(function(nt){var st=ue.visualDataProxyService.lastExecutedQuery();ue.hasQueryError=!1,ue.applyVisualStyling(st.transforms),!0===J?ue.onMergeMoreData(nt,Me,st.transforms):ue.onDataChanged(nt,Me,st.transforms)},function(nt){nt instanceof powerbi.QueryCancellationClientError&&nt.ignorable||(ue.hasQueryError=!0)}).finally(function(){ue.viewModel.isLoading=!1})})},Oe.prototype.onDataChanged=function(J,ue,Me){if(J&&J.dataReaderResult&&this.viewModel.readOnlyState.visual){var Ge={dataView:J&&J.dataReaderResult?J.dataReaderResult.dataView:null,dataViewSource:J&&J.dataViewSource?J.dataViewSource:null},nt=R.isSegment(Ge.dataView);nt&&(Ge.isFirstSegment=nt),this.viewModel.contract.filter||this.removeBufferedPropertyChanges(),this.updateVisualState(Me,Ge),this.viewModel.updateViewState(),this.dataLoaded=!0}},Oe.prototype.onMergeMoreData=function(J,ue,Me){var Se=this.viewModel.readOnlyState.visual;if(J&&J.dataReaderResult&&Se){var Ge=J.dataReaderResult.dataView;if(Ge){var nt=Se.data.dataView;powerbi.data.segmentation.DataViewMerger.mergeDataViews(nt,Ge),this.updateVisualState(Me,{dataView:nt,dataViewSource:J&&J.dataViewSource,isFirstSegment:!1})}}},Oe.prototype.updateVisualState=function(J,ue){var Me=this.viewModel.readOnlyState.visual;Me.data=ue,Me.dataTransforms=J,J&&(this.viewModel.contract.config.singleVisual.objects=J.objects)},Oe.prototype.setFilterPropertyByIdAndValue=function(J,ue){re.setValue(this.viewModel.readOnlyState.visual.dataTransforms.objects,J,null,ue)},Oe.prototype.deleteFilterPropertyByNames=function(J){re.deleteProperty(this.viewModel.readOnlyState.visual.dataTransforms.objects,J.objectName,null,J.propertyName)},Oe.prototype.onFilterContainerChanged=function(J){var ue=this,Me=this.viewModel,Se=Me.readOnlyState.visual;if(J.filter===Me.contract){if(J.parentActivity&&(this.currentActivity=J.parentActivity),pe.hasFlag(J.changeType,2))this.runInAngularZone(function(){ue.onFilterUpdate(J,Me,Se)});else if(this.dataLoaded&&pe.hasFlag(J.changeType,4))this.runInAngularZone(function(){ue.loadData(!1)});else if(pe.hasFlag(J.changeType,16))Se&&Se.visual&&Se.visual.update({viewport:X.DefaultVisualViewPort,type:powerbi.VisualUpdateType.Resize,dataViews:null});else if(pe.hasFlag(J.changeType,32)){var Ge=this.viewModel;Ge.cardType.type!==J.filter.type&&this.runInAngularZone(function(){Ge.cardType.type=J.filter.type})}this.currentActivity=void 0}},Oe.prototype.onFilterUpdate=function(J,ue,Me){10===J.changeType?this.onFilterClear(ue,Me):this.setInvertedSelectionOnVisual(Me.dataTransforms.objects),N.isSameFilter(ue.contract.filter,J.filter.filter)||(ue.readOnlyState.visual.dataTransforms&&(ue.contract.config.singleVisual.objects=ue.readOnlyState.visual.dataTransforms.objects),this.applyAllEnabled||this.visualAuthoring.updateFilter(ue.getFilterContainerScope(),ue.contract,J.filter.filter),null!=J.filter.filter&&this.loadData(!1));var Se=this.visualDataProxyService.lastExecutedQuery();Se&&(this.applyVisualStyling(Se.transforms),this.updateVisualProperties()),this.applyAllEnabled||this.loadRestatement()},Oe.prototype.onFilterClear=function(J,ue){if(ue&&(ue.visual&&ue.visual.onClearSelection(),ue.dataTransforms)){var Me=powerbi.visuals.slicerProps.general.filter,Se=J.contract.expression;if(Se&&J.hasDefaultValue){var Ge=N.getDefaultAnyValueFilter([],[Se]);this.setFilterPropertyByIdAndValue(Me,Ge)}else this.deleteFilterPropertyByNames(Me);this.deleteFilterPropertyByNames(powerbi.visuals.slicerProps.data.isInvertedSelectionMode)}this.applyAllEnabled?(this.updateVisualProperties(),this.haveBufferedFilter=!0):((!J.contract.filter||N.isAnyFilter(J.contract.filter))&&J.setRestatement(ee.fromDataViewScopeIdentities([],!1,J.formatter)),N.isDefaultFilter(J.contract.filter)&&J.setRestatement(ee.fromDefault(J.defaultValue.value)))},Oe.prototype.setInvertedSelectionOnVisual=function(J){var ue=powerbi.visuals.slicerProps.data.isInvertedSelectionMode,Me=re.getValue(this.viewModel.contract.objects,Fe,void 0),Se=Me&&Me.value;Se?re.setValue(J,ue,null,E.boolean(Se)):re.deleteProperty(J,ue.objectName,null,ue.propertyName)},Oe.prototype.updateVisualSelectAllState=function(){var J=this.viewModel.readOnlyState.visual;if(J){var ue=this.viewModel.isSingleSelectionRequired,Me=J.dataTransforms.objects,Se=powerbi.visuals.slicerProps.selection.selectAllCheckboxEnabled,Ge=powerbi.visuals.slicerProps.selection.singleSelect;Me||(Me={}),re.setValue(Me,Se,null,E.boolean(!ue)),re.setValue(Me,Ge,null,E.boolean(ue))}},Oe.prototype.updateVisualProperties=function(){var J=this.viewModel.readOnlyState.visual;J&&J.data&&(J.data={dataView:J.data.dataView,dataViewSource:J.data.dataViewSource,isFirstSegment:J.data.isFirstSegment})},Oe.prototype.setFilterExpressionMetadata=function(J){var Me,ue=this.viewModel.contract;if(J&&!_.isEmpty(J.expressions)&&!_.isEmpty(J.cachedValueItems)){var Se=powerbi.data.ScopeIdentityExtractor.getKeys(J.cachedValueItems[0].identities[0].expr);(Se.length>1||!F.equals(ue.expression,Se[0]))&&(Me=J)}ue.cachedValueItems=powerbi.explore.FilterExpressionMetadataUtils.tryGetDisplayNameIdentityPairs(Me)},Oe.prototype.getFilterExpressionMetadata=function(){var ue,J=this.viewModel.contract;return _.isEmpty(J.cachedValueItems)||(ue=powerbi.explore.FilterExpressionMetadataUtils.convertCacheToFilterExpressionMetadata(J.expression,J.cachedValueItems)),ue},Oe.prototype.getDataMultiSelectMode=function(){return this.viewModeState.getConfig().touchOptions.dataMultiSelectMode},Oe.prototype.getConceptualSchema=function(){var J=this.dataSources.get();return J&&this.viewModel.contract.config&&this.viewModel.contract.config.singleVisual?this.conceptualSchemaProxy.get(J):this.promiseFactory.reject()},Oe.prototype.updateSlowDataApplyEnabled=function(){this.slowDataApplyEnabled=!1;var J=this.explorationNavigation.getCurrentExploration();if(J&&J.slowDataSourceSettings){var ue=this.viewModeState.getConfig().displayOptions.enableMobileFilters;this.applyAllEnabled=ae.isApplyAllEnabled(this.isInOutspacePane||ue,this.explorationNavigation),this.slowDataApplyEnabled=J.slowDataSourceSettings.isFilterSelectionsButtonEnabled||this.applyAllEnabled}},Oe.prototype.applyBufferedFilter=function(J){if(this.haveBufferedFilter){var ue=this.bufferedFilter,Me=this.bufferedInvertedSelectionChange;this.haveBufferedFilter=!1,this.bufferedFilter=void 0,this.bufferedInvertedSelectionChange=void 0,this.applyPropertyChanges(ue,Me,J)}},Oe.prototype.bufferPropertyChanges=function(J,ue){if(!this.slowDataApplyEnabled||!this.haveBufferedFilter&&N.isSameFilter(this.viewModel.contract.filter,J))return!1;var Me=powerbi.visuals.slicerProps.general.filter;return this.setFilterPropertyByIdAndValue(Me,J),this.updateVisualProperties(),this.haveBufferedFilter=!0,this.bufferedFilter=J,this.bufferedInvertedSelectionChange=ue,this.applyAllEnabled&&ae.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,powerbi.explore.contracts.FilterType.Visual,this.viewModel.id,!0),!0},Oe.prototype.removeBufferedPropertyChanges=function(){if(this.slowDataApplyEnabled||this.applyAllEnabled){var J=powerbi.visuals.slicerProps.general.filter;this.deleteFilterPropertyByNames(J)}},Oe.prototype.applyVisualStyling=function(J){if(J){var ue={},Me=powerbi.visuals.slicerProps.searchBox,Se=powerbi.visuals.slicerProps.general,Ge=powerbi.visuals.slicerProps.items,nt={solid:{color:E.text(this.viewModel.inputBoxBackgroundColor)}},st={solid:{color:E.text(this.viewModel.inputBoxBorderColor)}},yt={solid:{color:E.text(this.viewModel.foregroundColor)}},Ae=_.toInteger(_.replace(this.viewModel.fontSize,"pt","")),Ve=E.integer(Ae),xe=E.text(this.viewModel.fontFamily);re.setValue(ue,Me.background,null,nt),re.setValue(ue,Me.borderColor,null,st),re.setValue(ue,Ge.fontColor,null,yt),this.viewModel.isInOutspacePane?(re.setValue(ue,Ge.textSize,null,Ve),re.setValue(ue,Ge.fontFamily,null,xe)):re.setValue(ue,Se.outlineColor,null,yt),re.extend(ue,J.objects),J.objects=ue}},Oe.\u0275fac=function(ue){return new(ue||Oe)(n.\u0275\u0275directiveInject(i.C),n.\u0275\u0275directiveInject(T.r),n.\u0275\u0275directiveInject(O.i),n.\u0275\u0275directiveInject(f.D),n.\u0275\u0275directiveInject(M.O),n.\u0275\u0275directiveInject(A.J),n.\u0275\u0275directiveInject(b.Z),n.\u0275\u0275directiveInject(P.z),n.\u0275\u0275directiveInject(g.vZ),n.\u0275\u0275directiveInject(y.r),n.\u0275\u0275directiveInject(S.iS),n.\u0275\u0275directiveInject(B._1),n.\u0275\u0275directiveInject(w.o),n.\u0275\u0275directiveInject(V.m),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(m.t),n.\u0275\u0275directiveInject(I.U),n.\u0275\u0275directiveInject(v.y0),n.\u0275\u0275directiveInject(C.z),n.\u0275\u0275directiveInject(c.kc),n.\u0275\u0275directiveInject(u.$),n.\u0275\u0275directiveInject(r.q),n.\u0275\u0275directiveInject(h.D),n.\u0275\u0275directiveInject(d.S),n.\u0275\u0275directiveInject(p.g))},Oe.\u0275cmp=n.\u0275\u0275defineComponent({type:Oe,selectors:[["filter-visual"]],inputs:{viewModel:"viewModel",isInOutspacePane:"isInOutspacePane",expanded:"expanded"},features:[n.\u0275\u0275NgOnChangesFeature],decls:6,vars:6,consts:[[1,"filterVisualModern",3,"ngClass"],[3,"viewModel","currentZone","supportsScreenReader",4,"ngIf"],["class","filterSpinner",4,"ngIf"],["class","filterError",4,"ngIf"],["class","applyFilter smallFontSize","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",3,"disabled","click",4,"ngIf"],["class","cardFooter",3,"ngStyle","ngClass","disabled",4,"ngIf"],[3,"viewModel","currentZone","supportsScreenReader"],[1,"filterSpinner"],["localize","FilterCard_Loading",1,"message"],[1,"filterError"],[1,"icon","filterPaneIcon","error"],["sheet","filterPaneIcons","symbolId","fieldListError"],["localize","FilterCard_ErrorMessage",1,"message"],["localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",1,"applyFilter","smallFontSize",3,"disabled","click"],[1,"cardFooter",3,"ngStyle","ngClass"],["label","PageFilter_SingleSelectionRequired",1,"required","flex","vertiPad","pbi-checkbox",3,"matCheckBoxColor","matCheckBoxColorIsChecked","disabled","ngModel","aria-label","localizeTooltip","change","ngModelChange"],["localize","PageFilter_SingleSelectionRequired"]],template:function(ue,Me){1&ue&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,Z,1,3,"visual-modern",1),n.\u0275\u0275template(2,me,3,0,"div",2),n.\u0275\u0275template(3,_e,4,0,"div",3),n.\u0275\u0275template(4,he,1,1,"button",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,ce,3,12,"div",5)),2&ue&&(n.\u0275\u0275property("ngClass",Me.isInOutspacePane?"filterOutspace":"filterClassic"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.dataLoaded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.viewModel.isLoading&&!Me.dataLoaded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.hasQueryError),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.isApplyButtonVisible()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Me.isFooterVisible()))},dependencies:[D.NgClass,D.NgIf,D.NgStyle,x.JJ,x.On,z.X,Q.r,q.N,de.oG,se.O,Ie.k,fe.y],styles:['.filterVisualModern.filterOutspace[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .filterError[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:14px;width:14px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-left:5px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-right:5px}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter{margin-top:6px;margin-bottom:6px;color:inherit;font-size:inherit;font-family:inherit;background-color:transparent;opacity:.5;position:relative}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter{float:right}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter{float:left}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter:hover{background-color:transparent}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter:enabled{color:inherit;opacity:1}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerHeader{margin:0}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerHeader input{background-color:transparent;color:inherit}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerHeader button{background-color:transparent}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .searchHeader.show{margin:4px 0;min-height:22px;height:initial}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .searchHeader.show input.searchInput{box-sizing:border-box;outline:0;padding:0!important}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .searchHeader.show input.searchInput::placeholder{color:inherit}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody{width:auto!important}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{right:0}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{left:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{left:unset}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{right:unset}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{color:var(--white-color, #FFF);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-left:4px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-right:4px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-right:8px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-left:8px}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{padding:4px 0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-right:0}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox span.checkbox{color:inherit!important}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox.partiallySelected span.checkbox:before{color:currentColor}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox.selected:not(.partiallySeelcted) span.checkbox:before{content:"\\e73a";background-color:transparent}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .scroll-content{width:inherit!important;height:inherit!important;scrollbar-width:none}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .scroll-content::-webkit-scrollbar{display:none!important}.cardFooter.filterOutspace[_ngcontent-%COMP%]{width:100%;margin-top:4px;padding-top:4px;border-top:1px solid var(--neutral-dark-color, #212121);cursor:pointer}.cardFooter.filterOutspace.disabled[_ngcontent-%COMP%]{opacity:.5}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{float:right}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{float:left}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{margin-right:4px}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox{margin-bottom:0}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container{width:12px;height:12px;top:0px;border-style:solid;border-width:1px;margin-left:1px}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container .mat-checkbox-ripple{display:none}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container .mat-checkbox-background, .cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container .mat-checkbox-frame{border:none!important;border-radius:0}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox input{cursor:pointer}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox span{cursor:pointer;font-family:inherit;color:inherit;font-size:var(--sm-font-size, 12px)}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container{width:12px;height:12px;top:0px;border:none!important}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container .mat-checkbox-ripple{display:none}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container .mat-checkbox-background, .cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container .mat-checkbox-frame{border-color:inherit!important;border-style:solid;border-width:1px;border-radius:0}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-frame{border-style:none}','.filterVisualModern.filterClassic[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.filterVisualModern.filterClassic[_ngcontent-%COMP%]   .filterError[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:14px;width:14px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-left:5px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-right:5px}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter{color:var(--neutral-tertiary-alt-color, #C8C8C8);background-color:transparent;position:relative;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter{float:right}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter{float:left}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter:hover{background-color:transparent}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter:enabled{color:var(--theme-primary-color, #F2C811)}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerHeader{margin:0}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerHeader input{background-color:transparent;color:var(--white-color, #FFF)}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerHeader button{background-color:transparent}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerBody{width:auto!important}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer:hover .slicerCheckbox span.checkbox{color:inherit!important}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer:hover .slicerCheckbox.partiallySelected span.checkbox:before{color:inherit!important}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-right:0}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox.selected:not(.partiallySeelcted) span.checkbox:before{content:"\\e73a";background-color:transparent}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .scroll-content{width:inherit!important;height:inherit!important}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{color:var(--white-color, #FFF);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-left:4px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-right:4px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-right:8px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-left:8px}.cardFooter.filterClassic[_ngcontent-%COMP%]{width:100%;margin-top:4px;padding-top:4px;border-top:1px solid var(--neutral-dark-color, #212121);cursor:pointer}.cardFooter.filterClassic.disabled[_ngcontent-%COMP%]{opacity:.5}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{float:left}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{margin-right:4px}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-bottom:0}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     input{cursor:pointer}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     span{position:relative;cursor:pointer;font-family:inherit;color:inherit}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container{width:12px;height:12px;top:0px;background-color:var(--white-color, #FFF);border-style:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container .mat-checkbox-ripple{display:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-frame{border-style:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-input{display:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-background{width:12px;height:12px;border-radius:0;border-style:solid;border-width:1px;border-color:var(--neutral-secondary-color, #666666)}']}),Oe}()},50938:function(Le,oe,t){t.d(oe,{z:function(){return Pn}});var e=t(59214),n=t(16912),m=t(28958),i=t(7772),O=t(78099),I=t(89718),T=t(49470),f=t(87714),M=t(91845),A=t(20019),b=t(17663),P=t(22422),y=t(64857),C=t(63007),d=t(67641),g=t(49909),S=t(89515),B=t(92119),w=t(44302),V=t(41770),v=t(11719),c=t(41844),u=t(6067),r=t(55858),h=t(45647),p=t(51186),D=t(80041),x=t(72227),z=t(63694),Q=t(39195),q=t(45399),de=t(3597),se=t(78480),Ie=t(54902),fe=t(52393),re=t(49541),pe=t(7005),ge=t(51081),be=t(43801),ae=t(81092),X=t(16459),le=t(26963),ee=t(87092),N=t(42684),F=t(18159),E=t(98482),k=function(){function ie(j){this.localizationService=j}return ie.prototype.transform=function(j,K){return this.localizationService.get(0===j?"ShowItemsWhenValue":1===K?"AdvancedFilter_Description_Or":"AdvancedFilter_Description_And")},ie.\u0275fac=function(K){return new(K||ie)(e.\u0275\u0275directiveInject(S.o,16))},ie.\u0275pipe=e.\u0275\u0275definePipe({name:"computeAriaLabelForConditionalComboBox",type:ie,pure:!0}),ie}(),R=function(){function ie(j){this.localizationService=j}return ie.prototype.transform=function(j,K,Y,Be){switch(j){case 1:return this.localizationService.get(0===K?Y?"AdvancedFilter_Aria_DateTime_LessThan":"AdvancedFilter_Aria_LessThan":1===Be?Y?"AdvancedFilter_Aria_Or_DateTime_LessThan":"AdvancedFilter_Aria_Or_LessThan":Y?"AdvancedFilter_Aria_And_DateTime_LessThan":"AdvancedFilter_Aria_And_LessThan");case 2:return this.localizationService.get(0===K?Y?"AdvancedFilter_Aria_DateTime_LessThanOrEqual":"AdvancedFilter_Aria_LessThanOrEqual":1===Be?Y?"AdvancedFilter_Aria_Or_DateTime_LessThanOrEqual":"AdvancedFilter_Aria_Or_LessThanOrEqual":Y?"AdvancedFilter_Aria_And_DateTime_LessThanOrEqual":"AdvancedFilter_Aria_And_LessThanOrEqual");case 3:return this.localizationService.get(0===K?Y?"AdvancedFilter_Aria_DateTime_GreaterThan":"AdvancedFilter_Aria_GreaterThan":1===Be?Y?"AdvancedFilter_Aria_Or_DateTime_GreaterThan":"AdvancedFilter_Aria_Or_GreaterThan":Y?"AdvancedFilter_Aria_And_DateTime_GreaterThan":"AdvancedFilter_Aria_And_GreaterThan");case 4:return this.localizationService.get(0===K?Y?"AdvancedFilter_Aria_DateTime_GreaterThanOrEqual":"AdvancedFilter_Aria_GreaterThanOrEqual":1===Be?Y?"AdvancedFilter_Aria_Or_DateTime_GreaterThanOrEqual":"AdvancedFilter_Aria_Or_GreaterThanOrEqual":Y?"AdvancedFilter_Aria_And_DateTime_GreaterThanOrEqual":"AdvancedFilter_Aria_And_GreaterThanOrEqual");case 5:return this.localizationService.get(0===K?"AdvancedFilter_Aria_Contains":1===Be?"AdvancedFilter_Aria_Or_Contains":"AdvancedFilter_Aria_And_Contains");case 6:return this.localizationService.get(0===K?"AdvancedFilter_Aria_DoesNotContains":1===Be?"AdvancedFilter_Aria_Or_DoesNotContains":"AdvancedFilter_Aria_And_DoesNotContains");case 7:return this.localizationService.get(0===K?"AdvancedFilter_Aria_StartWith":1===Be?"AdvancedFilter_Aria_Or_StartWith":"AdvancedFilter_Aria_And_StartWith");case 8:return this.localizationService.get(0===K?"AdvancedFilter_Aria_DoesNotStartWith":1===Be?"AdvancedFilter_Aria_Or_DoesNotStartWith":"AdvancedFilter_Aria_And_DoesNotStartWith");case 9:return this.localizationService.get(0===K?"AdvancedFilter_Aria_Is":1===Be?"AdvancedFilter_Aria_Or_Is":"AdvancedFilter_Aria_And_Is");case 10:return this.localizationService.get(0===K?"AdvancedFilter_Aria_IsNot":1===Be?"AdvancedFilter_Aria_Or_IsNot":"AdvancedFilter_Aria_And_IsNot");default:return""}},ie.\u0275fac=function(K){return new(K||ie)(e.\u0275\u0275directiveInject(S.o,16))},ie.\u0275pipe=e.\u0275\u0275definePipe({name:"computeAriaLabelForInputBox",type:ie,pure:!0}),ie}(),W=powerbi.explore.services.events,Z=powerbi.explore.contracts.FilterType,me=powerbi.explore.FilterUtils,_e=powerbi.explore.viewModels.FilterViewModelFactory,he=powerbi.common.utils.IdUtility,G=powerbi.data.SemanticFilter;function ce(ie,j){if(1&ie&&(e.\u0275\u0275elementStart(0,"mat-option",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&ie){var K=j.$implicit,Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",K.value)("ngStyle",Y.filterCardStyle)("title",K.tooltip),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",K.label," ")}}function Fe(ie,j){if(1&ie&&(e.\u0275\u0275elementStart(0,"span",15),e.\u0275\u0275element(1,"svg-use-symbol",16),e.\u0275\u0275elementEnd()),2&ie){var K=e.\u0275\u0275nextContext(2).$implicit,Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("pbiTooltip",Y.invalidTooltipLabel)("pbiTooltipDisabled",!Y.shouldShowErrorFilterPaneIcon(K))}}var je=function(j){return{"border-color":j}},Oe=function(j,K){return{"background-color":j,color:K}};function J(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",11)(1,"div",12)(2,"input",13),e.\u0275\u0275listener("ngModelChange",function(ht){e.\u0275\u0275restoreView(K);var _t=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(_t.value&&(_t.value.stringValue=ht))})("blur",function(){e.\u0275\u0275restoreView(K);var ht=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(ht.handleInputBlur())})("ngModelChange",function(){e.\u0275\u0275restoreView(K);var ht=e.\u0275\u0275nextContext().$implicit,_t=e.\u0275\u0275nextContext(2);return _t.validateFilterInput(ht),e.\u0275\u0275resetView(_t.markDirty())}),e.\u0275\u0275pipe(3,"computeAriaLabelForInputBox"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Fe,2,2,"span",14),e.\u0275\u0275elementEnd()()}if(2&ie){var Y=e.\u0275\u0275nextContext(),Be=Y.$implicit,Ke=Y.index,Xe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("filterInputWarningBorder",Xe.showInputWarning&&Be.isInvalid),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(15,je,Xe.viewModel.inputBoxBorderColor))("hidden",!Be.valueRequired),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("placeholder",Xe.viewModel.getInputPlaceholder()),e.\u0275\u0275property("ngModel",Be.value&&Be.value.stringValue)("ngStyle",e.\u0275\u0275pureFunction2(17,Oe,Xe.viewModel.inputBoxBackgroundColor,Xe.viewModel.inputBoxForegroundColor))("disabled",Xe.viewModel.readOnlyState.disabled),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind4(3,10,Be.operator,Ke,Xe.advFilterCard.isDateTime,Xe.advFilterCard.logicalOperator)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Xe.shouldShowErrorFilterPaneIcon(Be))}}var ue=function(j,K,Y){return{"background-color":j,color:K,"border-color":Y}};function Me(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",17)(1,"div",18)(2,"pbi-date-picker",19),e.\u0275\u0275listener("ngModelChange",function(ht){e.\u0275\u0275restoreView(K);var _t=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(_t.value&&(_t.value.dateValue=ht))})("ngModelChange",function(){e.\u0275\u0275restoreView(K);var ht=e.\u0275\u0275nextContext().$implicit,_t=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_t.dateTimeSelected(ht))}),e.\u0275\u0275pipe(3,"computeAriaLabelForInputBox"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"pbi-time-picker",20),e.\u0275\u0275listener("ngModelChange",function(ht){e.\u0275\u0275restoreView(K);var _t=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(_t.value&&(_t.value.timeValue=ht))})("ngModelChange",function(){e.\u0275\u0275restoreView(K);var ht=e.\u0275\u0275nextContext().$implicit,_t=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_t.dateTimeSelected(ht))}),e.\u0275\u0275elementEnd()()}if(2&ie){var Y=e.\u0275\u0275nextContext(),Be=Y.$implicit,Ke=Y.index,Xe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Xe.viewModel.isInOutspacePane?"datetimePickerOutspace":"datetimePickerClassic"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("light-theme",!Xe.viewModel.isInOutspacePane)("filterInputWarningBorder",Xe.showInputWarning&&!Xe.isValidDate(Be.value.dateValue)),e.\u0275\u0275propertyInterpolate("ariaLabelForInput",e.\u0275\u0275pipeBind4(3,14,Be.operator,Ke,Xe.advFilterCard.isDateTime,Xe.advFilterCard.logicalOperator)),e.\u0275\u0275property("id",Xe.getMenuId(Ke))("ngModel",Be.value&&Be.value.dateValue)("ngStyle",e.\u0275\u0275pureFunction3(19,ue,Xe.viewModel.inputBoxBackgroundColor,Xe.viewModel.inputBoxForegroundColor,Xe.viewModel.inputBoxBorderColor))("placeholder",Xe.getLocalizedPlaceholder())("disabled",!Be.valueRequired||Xe.viewModel.readOnlyState.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275styleMap(Xe.filterCardStyle),e.\u0275\u0275property("ngModel",Be.value&&Be.value.timeValue)}}function Se(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",21),e.\u0275\u0275listener("keydown",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.changeOperator(Ke))}),e.\u0275\u0275elementStart(1,"label",22)(2,"input",23),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.advFilterCard.logicalOperator=Ke)})("ngModelChange",function(){e.\u0275\u0275restoreView(K);var Ke=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Ke.markDirty())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",24)(4,"span",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"label",22)(6,"input",23),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.advFilterCard.logicalOperator=Ke)})("ngModelChange",function(){e.\u0275\u0275restoreView(K);var Ke=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Ke.markDirty())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",24)(8,"span",26),e.\u0275\u0275elementEnd()()}if(2&ie){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("disabledOperator",Y.isAndOperatorDisabled()),e.\u0275\u0275property("title",Y.getDisabledToolTipForAndOperator()),e.\u0275\u0275attribute("tabindex",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalAndOperator?0:-1)("aria-checked",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalAndOperator?"true":"false"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",Y.advFilterCard.logicalOperator)("value",Y.advFilterCard.logicalAndOperator)("disabled",Y.isAndOperatorDisabled())("checked",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalAndOperator),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalAndOperator?"pbi-glyph-radiobtnon":"pbi-glyph-radiobtnoff"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("disabledOperator",Y.isOrOperatorDisabled()),e.\u0275\u0275property("title",Y.getDisabledToolTipForOrOperator()),e.\u0275\u0275attribute("tabindex",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalOrOperator?0:-1)("aria-checked",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalOrOperator?"true":"false"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",Y.advFilterCard.logicalOperator)("value",Y.advFilterCard.logicalOrOperator)("disabled",Y.isOrOperatorDisabled())("checked",Y.advFilterCard.logicalOperator===Y.advFilterCard.logicalOrOperator),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",Y.advFilterCard.logicalOperator!==Y.advFilterCard.logicalAndOperator?"pbi-glyph-radiobtnon":"pbi-glyph-radiobtnoff")}}function Ge(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-select",5),e.\u0275\u0275listener("ngModelChange",function(gt){var ht=e.\u0275\u0275restoreView(K);return e.\u0275\u0275resetView(ht.$implicit.operator=gt)})("ngModelChange",function(){e.\u0275\u0275restoreView(K);var gt=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(gt.markDirty())}),e.\u0275\u0275pipe(2,"computeAriaLabelForConditionalComboBox"),e.\u0275\u0275template(3,ce,2,4,"mat-option",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,J,5,20,"mat-form-field",7),e.\u0275\u0275template(5,Me,5,23,"section",8),e.\u0275\u0275template(6,Se,9,20,"section",9),e.\u0275\u0275elementContainerEnd()}if(2&ie){var Y=j.$implicit,Be=j.index,Ke=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("aria-label",e.\u0275\u0275pipeBind2(2,9,Be,Ke.advFilterCard.logicalOperator)),e.\u0275\u0275property("ngModel",Y.operator)("ngStyle",e.\u0275\u0275pureFunction3(12,ue,Ke.viewModel.inputBoxBackgroundColor,Ke.viewModel.inputBoxForegroundColor,Ke.viewModel.inputBoxBorderColor))("disabled",Ke.viewModel.readOnlyState.disabled)("compareWith",Ke.compareOperator),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",Ke.advFilterCard.operators),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!Ke.advFilterCard.isDateTime&&Y.valueRequired),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Ke.advFilterCard.isDateTime&&Y.valueRequired),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Ke.showLogicOperators(Be))}}function nt(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(K);var Ke=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Ke.applyFilter())}),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!Y.canApplyFilter())}}var st=function(j){return{"font-size":j}};function yt(ie,j){if(1&ie&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275element(1,"h3",2),e.\u0275\u0275template(2,Ge,7,16,"ng-container",3),e.\u0275\u0275template(3,nt,1,1,"button",4),e.\u0275\u0275elementEnd()),2&ie){var K=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(3,st,K.viewModel.fontSize)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",K.advFilterCard.conditions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!K.isApplyAllOnForThisFilter())}}var Ae=function(){function ie(j,K,Y,Be,Ke,Xe,gt,ht,_t,Wt,$t,Yt,Zt,tn,qt,nn,on,rn,Jt){this.aggrOps=j,this.conceptualSchemaProxy=K,this.contextActivityService=Y,this.dataSources=Be,this.eventBridge=Ke,this.explorationActivity=Xe,this.explorationNavigation=gt,this.featureSwitchService=ht,this.highContrastCssGenerationService=_t,this.localizationService=Wt,this.ngZone=$t,this.overlayService=Yt,this.screenReaderService=Zt,this.telemetryService=tn,this.tooltipService=qt,this.undoRedo=nn,this.viewModeState=on,this.visualAuthoring=rn,this.visualPlugin=Jt,this.onFilterChanged=new e.EventEmitter,this.moduleConfig={name:"ui.bootstrap",dependency:{javascript:"angular-ui-datetimepicker"}},this.invalidTooltipLabel=this.localizationService.get("AdvancedFilter_InvalidTooltip_Number"),this.menuIds={},this.isDirty=!1,this.destroyed=!1}return ie.prototype.ngOnInit=function(){var j=this;this.ngZone.run(function(){return j.onInitImpl()})},ie.prototype.ngOnDestroy=function(){var j;this.destroyed=!0,null===(j=this.subscriptionManager)||void 0===j||j.unsubscribeAll()},ie.prototype.compareOperator=function(j,K){return j===K},Object.defineProperty(ie.prototype,"filterCardStyle",{get:function(){return{"background-color":this.viewModel.inputBoxBackgroundColor,color:this.viewModel.inputBoxForegroundColor,"border-color":this.viewModel.inputBoxBorderColor,"font-family":this.viewModel.fontFamily}},enumerable:!1,configurable:!0}),ie.prototype.markDirty=function(){this.isDirty=!0,this.sendBufferedFilterChanges(),this.updateConditionsValid()},ie.prototype.clearDirty=function(){this.isDirty=!1},ie.prototype.getMenuId=function(j){return this.menuIds[j]||(this.menuIds[j]=he.generateId()),this.menuIds[j]},ie.prototype.applyFilter=function(j){var K=this,Y=this.viewModel;Y.contract.type=Z.Advanced,document.activeElement.blur(),this.getConceptualSchema().then(function(Be){K.updateConditionsValid(Be),K.canApplyFilter()&&K.explorationActivity.doRootActivity(function(Ke){K.undoRedo.register("ApplyAdvancedFilter",function(){var ht,_t,Xe=K.advFilterCard.toSQExpr(Be),gt=K.viewModel;Xe?(K.visualAuthoring.updateFilter(gt.getFilterContainerScope(),gt.contract,G.fromSQExpr(Xe)),ht=2):(K.visualAuthoring.updateFilter(gt.getFilterContainerScope(),gt.contract,void 0),ht=10),K.clearDirty(),gt.useDefaultFilter=!1,K.updateRestatement(),K.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(_t=me.createChangeFilterActivity(K.contextActivityService,"Advanced Filter"));var Wt={filter:K.viewModel.contract,changeType:ht,scope:K.viewModel.getFilterContainerScope(),parentActivity:Ke,changeFilterActivity:_t};K.onFilterChanged.emit(Wt),_t&&_t.resolve(),K.formatDate(K.advFilterCard)},j)},function(){return K.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneAdvancedFilterApplied,{filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(K.viewModel.getFilterContainerScope().scopeType),viewMode:powerbi.explore.util.getTelemetryViewMode(K.viewModeState.getMode()),isInOutspacePane:Y.isInOutspacePane,isDateTime:K.advFilterCard&&K.advFilterCard.isDateTime})})})},ie.prototype.validateFilterInput=function(j){var K=this;this.getConceptualSchema().then(function(Y){j.value&&j.value.stringValue&&!K.advFilterCard.isConditionValid(Y,j)?(j.isInvalid=!0,K.shouldShowErrorFilterPaneIcon(j)&&K.screenReaderService.alert(K.localizationService.get(K.invalidTooltipLabel))):(j.isInvalid=!1,K.tooltipService.hideTooltip()),K.updateConditionsValid(Y).then(function(){return K.sendBufferedFilterChanges()})})},ie.prototype.handleFocusedInputChanged=function(j,K){this.validateFilterInput(K)},ie.prototype.handleInputBlur=function(){this.tooltipService.hideTooltip()},ie.prototype.changeOperator=function(j){this.viewModel.isMappedToMParameter()||(39===j.keyCode||37===j.keyCode||38===j.keyCode||40===j.keyCode)&&(this.advFilterCard.logicalOperator=0===this.advFilterCard.logicalOperator?1:0,$(j.target).siblings().attr("tabindex","0").focus(),j.stopPropagation(),this.markDirty())},ie.prototype.dateTimeSelected=function(j){var K=this;if(this.overlayService.hideAllDropdowns(),j.value.dateValue){var Y=j.value.timeValue.getHours(),Be=j.value.timeValue.getMinutes(),Ke=j.value.dateValue.setHours(Y,Be,0,0);j.value.dateValue=new Date(Ke),Ve(j),this.updateConditionsValid().then(function(){return K.markDirty()})}else this.clearDirty()},ie.prototype.isValidDate=function(j){return j&&!isNaN(j.getTime())},ie.prototype.updateConditionsValid=function(j){return(0,pe.mG)(this,void 0,void 0,function(){var K,Y=this;return(0,pe.Jh)(this,function(Be){switch(Be.label){case 0:return K=this.isApplyAllOnForThisFilter(),null==j?[3,1]:(this.conditionsValid=this.advFilterCard.areConditionsValid(K,j),[3,3]);case 1:return[4,this.getConceptualSchema().then(function(Ke){Y.conditionsValid=Y.advFilterCard.areConditionsValid(K,Ke)})];case 2:Be.sent(),Be.label=3;case 3:return this.showInputWarning=this.showInputWarning&&!this.conditionsValid,[2]}})})},ie.prototype.canApplyFilter=function(){return this.isDirty&&!this.viewModel.readOnlyState.disabled&&this.conditionsValid},ie.prototype.onKeyUp=function(j){j.preventDefault();var K=j.keyCode||j.which;!this.isApplyAllOnForThisFilter()&&13===K&&this.applyFilter()},ie.prototype.getLocalizedPlaceholder=function(){return powerbi.formattingService.getCurrentCulture().calendar.patterns.d},ie.prototype.isApplyAllOnForThisFilter=function(){var j=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return me.isApplyAllEnabled(this.viewModel.isInOutspacePane||j,this.explorationNavigation)},ie.prototype.onApplyAllClicked=function(j){this.isApplyAllOnForThisFilter()&&(j.idsInError?this.showInputWarning=-1!==j.idsInError.indexOf(this.viewModel.id.toString()):this.applyFilter(j.undoRedoActionId))},ie.prototype.sendBufferedFilterChanges=function(){this.isApplyAllOnForThisFilter()&&me.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,Z.Advanced,this.viewModel.id,this.canApplyFilter(),!1)},ie.prototype.isAndOperatorDisabled=function(){return this.viewModel.isMappedToMParameter()||this.viewModel.readOnlyState.disabled},ie.prototype.getDisabledToolTipForAndOperator=function(){return this.viewModel.isMappedToMParameter()?this.localizationService.get("DQP_Disabled_Operator"):""},ie.prototype.isOrOperatorDisabled=function(){return this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues()||this.viewModel.readOnlyState.disabled},ie.prototype.getDisabledToolTipForOrOperator=function(){return this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues()?this.localizationService.get("DQP_Disabled_Operator"):""},ie.prototype.showLogicOperators=function(j){var K=j<this.advFilterCard.conditions.length-1;return!K&&this.viewModel.isMappedToMParameter()?!this.viewModel.supportsMultipleValues():K},ie.prototype.shouldShowErrorFilterPaneIcon=function(j){return j.isInvalid&&!this.isApplyAllOnForThisFilter()},ie.prototype.onInitImpl=function(){this.destroyed||(this.initialize(),this.initializeHighContrastRules(),this.viewModel.setServices(void 0,void 0,this.viewModeState))},ie.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement .advancedControl.conditionValue","{ border-color: @buttonForegroundColor !important; }")},ie.prototype.initialize=function(){var j=this;this.getConceptualSchema().then(function(K){j.destroyed||(j.advFilterCard=_e.extractAdvFilterCard(j.viewModel.contract),j.updateRestatement(),j.updateModel(K),j.formatDate(j.advFilterCard),j.formatNumber(j.advFilterCard),j.subscriptionManager=j.eventBridge.createChannelSubscriptionManager().subscribe(W.applyAllClicked,function(Y,Be){return j.onApplyAllClicked(Be)}).subscribe(W.filterContainerChanged,function(Y,Be){return j.onFilterContainerChanged(Be)}).subscribe(powerbi.explore.services.events.explorationSlowDataSourceSettingsLoaded,function(Y,Be){return j.ngZone.run(function(){Be.isApplyAllButtonEnabledChanged&&(j.showInputWarning=!1)})}))}).catch(function(){return j.telemetryService.logEvent(powerbi.telemetry.EXLoadFilterError,{message:"Conceptual schema could not be found."})}),this.showInputWarning=!1},ie.prototype.getConceptualSchema=function(){var j=this.dataSources.get();return this.conceptualSchemaProxy.get(j)},ie.prototype.updateModel=function(j){if(this.advFilterCard.loadOperators(j,this.aggrOps,this.viewModel.isMappedToMParameter()),this.advFilterCard.operators){var Y=this.advFilterCard.field.getMetadata(j);Y&&(this.advFilterCard.isDateTime=!!Y.type.dateTime),this.advFilterCard.ensureConditions(this.viewModel.isMappedToMParameter(),this.viewModel.supportsMultipleValues());var Be=this.advFilterCard.conditions;this.viewModel.updateFilterProperties(j,this.visualPlugin,this.aggrOps);for(var Ke=0,Xe=Be;Ke<Xe.length;Ke++){var gt=Xe[Ke];gt&&gt.value&&(gt.value.formatter=this.viewModel.formatter)}this.updateConditionsValid(j),this.viewModel.updateViewState()}else this.telemetryService.logEvent(powerbi.telemetry.EXLoadFilterError,{message:"Filter operators failed to load."})},ie.prototype.formatDate=function(j){if(j.isDateTime)for(var K=0,Y=j.conditions;K<Y.length;K++)Ve(Y[K])},ie.prototype.formatNumber=function(j){if(this.viewModel.formatter&&!j.isDateTime)for(var K=0,Y=j.conditions;K<Y.length;K++){var Be=Y[K];null!=Be.value.value&&(Be.value.stringValue=this.viewModel.formatter.format(Be.value.value))}},ie.prototype.updateRestatement=function(){var j=this.viewModel;j.useDefaultFilter||j.contract.type!==Z.Advanced||j.setRestatement(this.advFilterCard.getRestatement(j.formatter))},ie.prototype.onFilterContainerChanged=function(j){var K=this,Y=this.viewModel;if(j.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(j.changeType,10)&&this.isApplyAllOnForThisFilter())this.showInputWarning=!1,this.advFilterCard.conditions.map(function(ht){var _t;ht.operator&&!ht.valueRequired&&(ht.operator=9,K.markDirty()),null!==(_t=ht.value)&&void 0!==_t&&_t.stringValue&&(ht.value=new powerbi.data.ConditionValue("",ht.value.formatter),K.markDirty())});else if(j.filter===Y.contract&&jsCommon.EnumExtensions.hasFlag(j.changeType,2)){var Be=_e.extractAdvFilterCard(j.filter);if(this.advFilterCard.conditions=Be.conditions,this.advFilterCard.logicalOperator=Be.logicalOperator,this.viewModel.formatter)for(var Ke=0,Xe=this.advFilterCard.conditions;Ke<Xe.length;Ke++){var gt=Xe[Ke];null!=gt.value.value&&(gt.value.stringValue=this.viewModel.formatter.format(gt.value.value))}this.updateRestatement(),this.advFilterCard.ensureConditions(this.viewModel.isMappedToMParameter(),this.viewModel.supportsMultipleValues())}},ie.\u0275fac=function(K){return new(K||ie)(e.\u0275\u0275directiveInject(ge.C),e.\u0275\u0275directiveInject(O.i),e.\u0275\u0275directiveInject(i.r),e.\u0275\u0275directiveInject(I.D),e.\u0275\u0275directiveInject(f.J),e.\u0275\u0275directiveInject(M.Z),e.\u0275\u0275directiveInject(A.z),e.\u0275\u0275directiveInject(y.vZ),e.\u0275\u0275directiveInject(d.g),e.\u0275\u0275directiveInject(S.o),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(ae.F),e.\u0275\u0275directiveInject(g.g),e.\u0275\u0275directiveInject(w.y0),e.\u0275\u0275directiveInject(X.a),e.\u0275\u0275directiveInject(be.z),e.\u0275\u0275directiveInject(v.kc),e.\u0275\u0275directiveInject(c.$),e.\u0275\u0275directiveInject(le.D))},ie.\u0275cmp=e.\u0275\u0275defineComponent({type:ie,selectors:[["advanced-filter"]],inputs:{viewModel:"viewModel"},outputs:{onFilterChanged:"onFilterChanged"},decls:1,vars:1,consts:[["class","advanced",3,"ngStyle",4,"ngIf"],[1,"advanced",3,"ngStyle"],["localize","ShowItemsWhenValue","localizeTooltip","ShowItemsWhenValue",1,"description"],[4,"ngFor","ngForOf"],["class","applyFilter smallFontSize","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",3,"disabled","click",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",1,"comparisonOperator","advancedControl","pbi-modern-select",3,"aria-label","ngModel","ngStyle","disabled","compareWith","ngModelChange"],[3,"value","ngStyle","title",4,"ngFor","ngForOf"],["floatLabel","never","class","pbi-form-field",4,"ngIf"],["class","datetime datetimePicker","pbiLazyLoadContents","moduleConfig",3,"ngClass",4,"ngIf"],["role","radiogroup","class","logicalOperator advancedControl",3,"keydown",4,"ngIf"],[3,"value","ngStyle","title"],["floatLabel","never",1,"pbi-form-field"],["id","inputTheme",1,"advancedControl","conditionValue","flex","themeableElement",3,"ngStyle","hidden"],["matInput","","autocomplete","off","type","text","spellcheck","false",1,"item-fill","themeableElement",3,"ngModel","ngStyle","disabled","placeholder","ngModelChange","blur"],["class","errorIcon item-auto",3,"pbiTooltip","pbiTooltipDisabled",4,"ngIf"],[1,"errorIcon","item-auto",3,"pbiTooltip","pbiTooltipDisabled"],["sheet","filterPaneIcons","symbolId","alert"],["pbiLazyLoadContents","moduleConfig",1,"datetime","datetimePicker",3,"ngClass"],[1,"datePicker","flex"],[1,"datePickerSelector",3,"ariaLabelForInput","id","ngModel","ngStyle","placeholder","disabled","ngModelChange"],[3,"ngModel","ngModelChange"],["role","radiogroup",1,"logicalOperator","advancedControl",3,"keydown"],["role","radio",1,"logicalOperatorField",3,"title"],["type","radio",3,"ngModel","value","disabled","checked","ngModelChange"],[1,"glyphicon","glyph-mini",3,"ngClass"],["localize","Logical_And_Operator",1,"operatorText"],["localize","Logical_Or_Operator",1,"operatorText"],["localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",1,"applyFilter","smallFontSize",3,"disabled","click"]],template:function(K,Y){1&K&&e.\u0275\u0275template(0,yt,4,5,"div",0),2&K&&e.\u0275\u0275property("ngIf",Y.advFilterCard)},dependencies:[u.NgClass,u.NgForOf,u.NgIf,u.NgStyle,r.Fj,r._,r.JJ,r.On,h.X,p.r,ee.KE,N.Nt,D.gD,x.ey,z.V,F.N,de.x,E.l,fe.k,k,R],styles:['.advanced[_ngcontent-%COMP%]{padding-top:4px}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .datetimePickerOutspace[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .filterOutspaceModern.card   [_nghost-%COMP%]   .datetimePickerOutspace[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:inherit}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-underline, .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix, .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix{padding-bottom:0}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after{color:inherit;border-left-width:3px;border-right-width:3px;border-top-width:6px;right:4px}html:not([dir="rtl"]).filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html:not([dir="rtl"]).filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html:not([dir="rtl"])   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html:not([dir="rtl"])   .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html:not([dir="rtl"])[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html:not([dir="rtl"])   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after{margin-right:2px}html[dir="rtl"].filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html[dir="rtl"].filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html[dir="rtl"]   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html[dir="rtl"]   .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html[dir="rtl"][_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html[dir="rtl"]   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after{margin-left:2px}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%], .filterOutspaceModern.card   [_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{background-color:inherit;color:inherit;font-family:inherit}.advanced[_ngcontent-%COMP%]   .datePicker[_ngcontent-%COMP%]   .datePickerSelector[_ngcontent-%COMP%]{margin:2px 0;width:100%}.advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{min-height:24px;padding:2px 6px}.advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:4px 0 6px}.advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%]{background-color:inherit;display:block;width:100%;box-sizing:border-box;margin:2px 0;outline:0;padding:0;min-height:24px}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{padding:8px 0}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField.disabledOperator[_ngcontent-%COMP%]{color:var(--gray-80, #B3B0AD)}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]   .operatorText[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}.advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]{color:inherit;background:transparent;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);border-radius:2px;box-sizing:border-box;display:flex}.advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background-color:var(--white-color, #FFF)}.advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;margin:7px 3px}.advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%]{display:inline-block;border-color:var(--gray-60, #C8C6C4);background-color:var(--white-color, #FFF);border-radius:2px;padding-left:3px;position:initial;font-family:inherit}.advanced   .newPaneColors   .filterPaneOutspaceModern[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%], .newPaneColors   .filterPaneOutspaceModern   [_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{min-height:24px;color:var(--black-color, #000);background-color:var(--white-color, #FFF);padding:2px 6px}','.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]{padding:4px 0 28px;border-radius:2px;margin:4px 0}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{color:var(--white-color, #FFF);height:24px;border:1px solid var(--black-color, #000);border-radius:0;padding:0 6px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:4px 0 6px}html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{float:left}html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"][_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"]   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{float:right}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt, #444444);display:block;width:100%;height:24px;box-sizing:border-box;margin:2px 0;outline:0;padding:0}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-underline, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-underline{display:none}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper{border:0px;padding:0!important}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-infix, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-infix{padding:0!important;border:0px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after{color:currentColor!important;border-left-width:3px;border-right-width:3px;border-top-width:6px;right:4px}html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after{margin-right:2px}html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"][_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"]   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after{margin-left:2px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     label .mat-radio-outer-circle, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     label .mat-radio-outer-circle{border-width:1px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{padding:4px 0}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%]{margin-right:8px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]{color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);box-sizing:border-box;display:flex}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background-color:var(--neutral-primary-color-alt, #444444)}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%]{display:inline-block;border:1px solid var(--black-color, #000);border-radius:1px;padding-left:5px;position:initial}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]{color:var(--gray-180, #252423);border-color:var(--gray-60, #C8C6C4);border-radius:2px;background-color:var(--white-color, #FFF)}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF)}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-radius:2px}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%]{border-color:var(--gray-60, #C8C6C4)}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{background-color:transparent}',".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{line-height:32px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]{height:32px;background:var(--fluentThemeWhiteColor);border:0;border-bottom:1px solid var(--fluentThemeNeutralTertiaryColor);margin:0 0 15px;border-radius:2px;color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:inherit;color:var(--fluentThemeNeutralDarkColor);height:100%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-empty.mat-form-field-label, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-empty.mat-form-field-label{color:var(--fluentThemeNeutralTertiaColor)!important;padding-left:10px;padding-right:10px;height:32px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{float:none!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{margin:15px 0;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]{margin-right:80px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%]{margin-right:30px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{border-radius:4px;border:2px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{position:absolute;right:0;bottom:20px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label{width:auto}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{text-align:right}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]{margin-left:80px;margin-right:initial}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%]{margin-left:30px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{left:0}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}"]}),ie}();function Ve(ie){ie.value.value=powerbi.formattingService.formatValue(ie.value.dateValue,"d")}var xe=t(77980),Pe=jsCommon.EnumExtensions,et=powerbi.explore.services.events,$e=powerbi.explore.FilterUtils;function lt(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("click",function(Be){e.\u0275\u0275restoreView(K);var Ke=e.\u0275\u0275nextContext().index,Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.delete(Be,Ke))}),e.\u0275\u0275elementEnd()}}var Pt=function(j){return{includeExcludeFilterOutspace:j}},Ct=function(j){return{"font-size":j}};function Ue(ie,j){if(1&ie&&(e.\u0275\u0275elementStart(0,"li",5)(1,"div",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,lt,1,0,"button",7),e.\u0275\u0275elementEnd()),2&ie){var K=j.$implicit,Y=j.index,Be=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,Pt,Be.filterViewModel.isInOutspacePane)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(10,Ct,Be.filterViewModel.fontSize)),e.\u0275\u0275attribute("aria-label",K.text)("ariaSetsize",Be.viewModel.points.length)("ariaPosinset",Y+1)("ariaSelected",!0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",K.text," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!Be.filterViewModel.isFilterLocked())}}function ke(ie,j){if(1&ie&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"ul",3),e.\u0275\u0275template(3,Ue,4,12,"li",4),e.\u0275\u0275elementEnd()()()),2&ie){var K=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiScrollbar",K.scrollbarsConfig),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",K.viewModel.points)}}var We=function(){function ie(j,K,Y,Be,Ke,Xe,gt,ht,_t,Wt){var $t=this;this.conceptualSchemaProxy=j,this.contextActivityService=K,this.dataSources=Y,this.displayNameService=Be,this.eventBridge=Ke,this.explorationNavigation=Xe,this.featureSwitchService=gt,this.includeExcludeService=ht,this.ngZone=_t,this.visualAuthoring=Wt,this.isExpanded=!1,this.currentZone=this.explorationNavigation.getCurrentZone(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(et.filterContainerChanged,function(Yt,Zt){return $t.onFilterContainerChanged(Zt)}),this.scrollbarsConfig={ignoreOverlay:!1,ignoreMobile:!1}}return ie.prototype.ngOnInit=function(){var j=this;this.ngZone.run(function(){return j.onInitImpl()})},ie.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},ie.prototype.toggleExpand=function(){this.isExpanded=!this.isExpanded},ie.prototype.deleteFilter=function(j){var Y,K=this.filterViewModel.getFilterContainerScope();this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Y=$e.createChangeFilterActivity(this.contextActivityService,"Remove Filter")),this.visualAuthoring.removeFilter(this.filterViewModel.contract,K,void 0,Y),Y&&Y.resolve(),j.stopPropagation()},ie.prototype.delete=function(j,K){if(1!==this.viewModel.points.length){var Y=this.filterViewModel.contract;if(Y.filterExpressionMetadata&&!_.isEmpty(Y.filterExpressionMetadata.cachedValueItems)){var Be=this.viewModel.points[K];$e.removeEntryFromFilterCache(Be.columns,Be.values,Y.filterExpressionMetadata)}this.viewModel.points.splice(K,1),this.includeExcludeService.updateFilterContainer(this.filterViewModel,this.viewModel),j.stopPropagation()}else this.deleteFilter(j)},ie.prototype.onInitImpl=function(){this.updateViewModel()},ie.prototype.updateViewModel=function(){var j=this,K=this.dataSources.get();this.conceptualSchemaProxy.get(K).then(function(Y){var Be=j.filterViewModel.contract;j.viewModel=j.includeExcludeService.buildViewModel(Be.filter,Be.type,Y,j.displayNameService,Be.filterExpressionMetadata)})},ie.prototype.getFilterLockTooltip=function(){return this.filterViewModel.isFilterLocked()?"FilterPane_FilterLocked":this.filterViewModel.contract.isLockedInViewMode?"FilterPane_UnlockFilter":"FilterPane_LockFilter"},ie.prototype.onFilterContainerChanged=function(j){j.filter===this.filterViewModel.contract&&Pe.hasFlag(j.changeType,2)&&this.updateViewModel()},ie.prototype.toggleFilterVisibility=function(j,K){j.stopPropagation();var Y=this.filterViewModel;this.visualAuthoring.toggleFilterVisibility(Y.getFilterContainerScope(),Y.contract)},ie.prototype.toggleFilterLockState=function(j,K){j.stopPropagation();var Be,Y=this.filterViewModel;this.visualAuthoring.toggleFilterLock(Y.getFilterContainerScope(),Y.contract),this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Be=$e.createChangeFilterActivity(this.contextActivityService,"Include Exclude Filter"));var Ke={filter:Y.contract,changeType:2,scope:Y.getFilterContainerScope(),changeFilterActivity:Be};$e.notifyFilterContainerChangedByUser(this.eventBridge,Ke),Be&&Be.resolve()},ie.\u0275fac=function(K){return new(K||ie)(e.\u0275\u0275directiveInject(O.i),e.\u0275\u0275directiveInject(i.r),e.\u0275\u0275directiveInject(I.D),e.\u0275\u0275directiveInject(T.O),e.\u0275\u0275directiveInject(f.J),e.\u0275\u0275directiveInject(A.z),e.\u0275\u0275directiveInject(y.vZ),e.\u0275\u0275directiveInject(C.Y),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(c.$))},ie.\u0275cmp=e.\u0275\u0275defineComponent({type:ie,selectors:[["include-exclude-filter"]],inputs:{filterViewModel:"filterViewModel"},decls:1,vars:1,consts:[["class","include-exclude-modern-filter-items",4,"ngIf"],[1,"include-exclude-modern-filter-items"],[3,"pbiScrollbar"],["role","listbox"],["class","include-exclude-modern-filter-item flex",3,"ngClass",4,"ngFor","ngForOf"],[1,"include-exclude-modern-filter-item","flex",3,"ngClass"],["tabindex","0","role","option",1,"caption","smallFontSize","trimmedTextWithEllipsis","unselectable","item-fill",3,"ngStyle"],["type","button","class","delete glyphicon pbi-glyph-close glyph-micro","localizeTooltip","Delete",3,"click",4,"ngIf"],["type","button","localizeTooltip","Delete",1,"delete","glyphicon","pbi-glyph-close","glyph-micro",3,"click"]],template:function(K,Y){1&K&&e.\u0275\u0275template(0,ke,4,2,"div",0),2&K&&e.\u0275\u0275property("ngIf",Y.viewModel)},dependencies:[u.NgClass,u.NgForOf,u.NgIf,u.NgStyle,p.r,xe.r],styles:[".include-exclude-modern-filter-items[_ngcontent-%COMP%]{max-height:150px;display:flex;flex-direction:column;margin-top:8px}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   .include-exclude-modern-filter-item[_ngcontent-%COMP%]{box-sizing:border-box;padding-right:4px;padding-bottom:4px}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   .includeExcludeFilterOutspace[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .include-exclude-modern-filter-items[_ngcontent-%COMP%]   .includeExcludeFilterOutspace[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .include-exclude-modern-filter-items[_ngcontent-%COMP%]   .includeExcludeFilterOutspace[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:inherit}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   .scroll-element.scroll-y[_ngcontent-%COMP%]{width:4px!important}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .include-exclude-modern-filter-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .include-exclude-modern-filter-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:transparent;color:var(--neutral-tertiary-alt-color, #C8C8C8)}"]}),ie}(),ze=t(67455),ve=powerbi.explore.services.events,a=powerbi.explore.util.FilterPaneUtil,o=powerbi.explore.services.filterRestatementUtil,l=powerbi.explore.contracts.FilterType,s=powerbi.explore.FilterUtils,L=jsCommon.FocusManager,U=jsCommon.FocusGroupNavigation,H=powerbi.data.RestatementHelper,ne=powerbi.data.SemanticFilter;function te(ie,j){1&ie&&(e.\u0275\u0275elementStart(0,"i",24),e.\u0275\u0275element(1,"svg-use-symbol",25),e.\u0275\u0275elementEnd())}function Ce(ie,j){1&ie&&e.\u0275\u0275element(0,"i",26)}function ye(ie,j){if(1&ie&&(e.\u0275\u0275elementStart(0,"i"),e.\u0275\u0275element(1,"svg-use-symbol",27),e.\u0275\u0275elementEnd()),2&ie){var K=e.\u0275\u0275nextContext(2);e.\u0275\u0275classMapInterpolate1("filterPaneIcon ",K.getIconClassName(),""),e.\u0275\u0275advance(1),e.\u0275\u0275property("symbolId",K.getIconClassName())}}function we(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",28),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.editablelabelInputName=Ke)})("blur",function(){e.\u0275\u0275restoreView(K);var Ke=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Ke.rename())}),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngModel",Y.editableLabelName)}}var Te=function(j){return{visibility:j}};function De(ie,j){if(1&ie&&e.\u0275\u0275element(0,"button",29),2&ie){var K=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(5,Te,K.isEditMode?"":"visible"))("ngClass",K.isFilterExpanded()?"expand":"collapse")("pbiTooltip",K.viewModel.chevronExpandCollapseDescription),e.\u0275\u0275attribute("aria-expanded",K.isFilterExpanded())("aria-label",K.editableLabelName+" "+K.viewModel.chevronExpandCollapseDescription)}}function Re(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.deleteFilter(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(7,Te,Y.isEditMode?"":"visible"))("pbiTooltip",e.\u0275\u0275pipeBind1(2,5,"FilterPane_DeleteFilter")),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,3,"FilterPane_DeleteFilter"))}}var Ze=function(j){return{color:j}};function Ye(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.clearFilter(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!Y.viewModel.hasRestatement)("ngStyle",e.\u0275\u0275pureFunction1(9,Ze,Y.viewModel.foregroundColor))("pbiTooltip",e.\u0275\u0275pipeBind1(2,7,Y.clearFilterTooltip)),e.\u0275\u0275attribute("aria-disabled",!Y.viewModel.hasRestatement)("aria-label",e.\u0275\u0275pipeBind1(1,5,Y.clearFilterTooltip))}}var qe=function(j,K){return{"pbi-glyph-lock":j,"pbi-glyph-unlock":K}},at=function(j){return{visibility:j}};function it(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",32),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.toggleFilterLockState(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(9,qe,Y.viewModel.isFilterLocked(),!Y.viewModel.isFilterLocked()))("disabled",!Y.isEditMode)("ngStyle",e.\u0275\u0275pureFunction1(12,at,Y.viewModel.isFilterLocked()?"visible":""))("pbiTooltip",e.\u0275\u0275pipeBind1(2,7,Y.getFilterLockTooltip())),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,5,Y.getFilterLockTooltip()))}}function pt(ie,j){1&ie&&e.\u0275\u0275element(0,"button",33)}function ct(ie,j){1&ie&&e.\u0275\u0275element(0,"button",34)}function vt(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.clearFilter(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!Y.viewModel.hasRestatement)("ngStyle",e.\u0275\u0275pureFunction1(8,Ze,Y.viewModel.foregroundColor))("pbiTooltip",e.\u0275\u0275pipeBind1(2,6,Y.clearFilterTooltip)),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,4,Y.clearFilterTooltip))}}var Mt=function(j,K){return{"pbi-glyph-view":j,"pbi-glyph-hide3":K}};function bt(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",35),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.toggleFilterVisibility(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,Mt,!Y.viewModel.contract.isHiddenInViewMode,Y.viewModel.contract.isHiddenInViewMode))("ngStyle",e.\u0275\u0275pureFunction1(11,Te,Y.isEditMode&&Y.viewModel.isFilterHidden()?"visible":""))("pbiTooltip",e.\u0275\u0275pipeBind1(2,6,Y.getFilterHiddenTooltip())),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,4,Y.getFilterHiddenTooltip()))}}function Tt(ie,j){if(1&ie&&(e.\u0275\u0275elementStart(0,"option",40),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&ie){var K=j.$implicit,Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngValue",K),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",Y.getLabelForAsAggregationOption(!!K),"")}}var Et=function(){return[!0,!1]};function Ft(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275element(1,"span",37),e.\u0275\u0275elementStart(2,"select",38),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.viewModel.isLinkedAsAggregation=Ke)})("change",function(){e.\u0275\u0275restoreView(K);var Ke=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Ke.updateLinkAsAggregation())}),e.\u0275\u0275template(3,Tt,2,2,"option",39),e.\u0275\u0275elementEnd()()}if(2&ie){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("localize",Y.getResourceIdForAsAggregationDropdown()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",Y.viewModel.isLinkedAsAggregation)("disabled",Y.viewModel.discourageAggregation),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(4,Et))}}function tt(ie,j){if(1&ie&&(e.\u0275\u0275element(0,"label",47),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize")),2&ie){var K=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(2,4,K.getFilterTypeTooltip())),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,2,K.getFilterTypeTooltip()))}}var Bt=function(j,K,Y,Be){return{"background-color":j,color:K,"border-color":Y,"font-family":Be}};function Ut(ie,j){if(1&ie&&(e.\u0275\u0275elementStart(0,"mat-option",48),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&ie){var K=j.$implicit,Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",K)("ngStyle",e.\u0275\u0275pureFunction4(4,Bt,Y.viewModel.inputBoxBackgroundColor,Y.viewModel.inputBoxForegroundColor,Y.viewModel.inputBoxBorderColor,Y.viewModel.fontFamily))("disabled",!Y.isEditMode&&5===K.type),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",K.label,"")}}var Rt=function(j){return{"font-size":j}},Gt=function(j){return{invalidType:j}},Qt=function(j,K,Y){return{"background-color":j,color:K,"border-color":Y}};function jt(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",41)(1,"div",42),e.\u0275\u0275element(2,"span",43),e.\u0275\u0275template(3,tt,3,6,"label",44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",45),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.viewModel.cardType=Ke)})("selectionChange",function(){e.\u0275\u0275restoreView(K);var Ke=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Ke.switchCardType(Ke.cardType))}),e.\u0275\u0275template(5,Ut,2,9,"mat-option",46),e.\u0275\u0275elementEnd()()}if(2&ie){var Y=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(8,Rt,Y.viewModel.fontSize)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.isEditMode&&Y.isInOutspacePane),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("aria-label",Y.ariaLabelFilterType),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,Gt,Y.viewModel.isInvalidCardType()))("ngModel",Y.viewModel.cardType)("compareWith",Y.compareCardType)("ngStyle",e.\u0275\u0275pureFunction3(12,Qt,Y.viewModel.inputBoxBackgroundColor,Y.viewModel.inputBoxForegroundColor,Y.viewModel.inputBoxBorderColor)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",Y.viewModel.availableTypes)}}function Xt(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"advanced-filter",52),e.\u0275\u0275listener("onFilterChanged",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.onFilterChanged(Ke))}),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",Y.viewModel)}}function pn(ie,j){if(1&ie&&e.\u0275\u0275element(0,"filter-visual",53),2&ie){var K=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",K.viewModel)("isInOutspacePane",K.isInOutspacePane)("expanded",K.viewModel.readOnlyState.expanded)}}function dn(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"top-n-filter",52),e.\u0275\u0275listener("onFilterChanged",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.onFilterChanged(Ke))}),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",Y.viewModel)}}function hn(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"relative-filter",54),e.\u0275\u0275listener("onFilterChanged",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.onFilterChanged(Ke.args))}),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",Y.viewModel)("filterType",Y.viewModel.cardType.type)}}function gn(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"relative-filter",54),e.\u0275\u0275listener("onFilterChanged",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.onFilterChanged(Ke.args))}),e.\u0275\u0275elementEnd()}if(2&ie){var Y=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",Y.viewModel)("filterType",Y.viewModel.cardType.type)}}function vn(ie,j){if(1&ie&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Xt,1,1,"advanced-filter",49),e.\u0275\u0275template(2,pn,1,3,"filter-visual",50),e.\u0275\u0275template(3,dn,1,1,"top-n-filter",49),e.\u0275\u0275template(4,hn,1,2,"relative-filter",51),e.\u0275\u0275template(5,gn,1,2,"relative-filter",51),e.\u0275\u0275elementEnd()),2&ie){var K=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",2===K.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===K.viewModel.cardType.type||4===K.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",5===K.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",8===K.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",10===K.viewModel.cardType.type)}}function fn(ie,j){if(1&ie&&e.\u0275\u0275element(0,"include-exclude-filter",55),2&ie){var K=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("filterViewModel",K.viewModel)}}var mn=function(j,K,Y,Be,Ke){return{"background-color":j,"border-color":K,color:Y,"font-family":Be,"font-size":Ke}},Cn=function(j,K){return{hasRestateHighlight:j,withMobileInvalidIcon:K}},_n=function(j){return{cardExpanded:j}};function yn(ie,j){if(1&ie){var K=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"div",2),e.\u0275\u0275listener("singleClickAction",function(){e.\u0275\u0275restoreView(K);var Ke=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ke.toggle())}),e.\u0275\u0275elementStart(2,"div",3),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementStart(4,"div",4,5),e.\u0275\u0275listener("pbiMenuButtonClick",function(Ke){e.\u0275\u0275restoreView(K);var Xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Xe.onMenuItemClicked(Ke))}),e.\u0275\u0275template(6,te,2,0,"i",6),e.\u0275\u0275template(7,Ce,1,0,"i",7),e.\u0275\u0275template(8,ye,2,4,"i",8),e.\u0275\u0275template(9,we,1,1,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,De,1,7,"button",10),e.\u0275\u0275template(11,Re,3,9,"button",11),e.\u0275\u0275template(12,Ye,3,11,"button",12),e.\u0275\u0275template(13,it,3,14,"button",13),e.\u0275\u0275template(14,pt,1,0,"button",14),e.\u0275\u0275template(15,ct,1,0,"button",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",16)(17,"span",1),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",17),e.\u0275\u0275template(20,vt,3,10,"button",12),e.\u0275\u0275template(21,bt,3,13,"button",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(22,Ft,4,5,"div",19),e.\u0275\u0275elementStart(23,"div",20),e.\u0275\u0275template(24,jt,6,16,"div",21),e.\u0275\u0275template(25,vn,6,5,"div",22),e.\u0275\u0275template(26,fn,1,1,"include-exclude-filter",23),e.\u0275\u0275elementEnd()()}if(2&ie){var Y=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("card ",Y.getFilterClass(),""),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction5(47,mn,Y.viewModel.backgroundColor,Y.viewModel.borderColor,Y.viewModel.foregroundColor,Y.viewModel.fontFamily,Y.viewModel.fontSize)),e.\u0275\u0275advance(1),e.\u0275\u0275property("singleClickDisabled",Y.viewModel.isEditingLabel)("singleClickTimeout",Y.isEditMode?300:0),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(3,45,"Invalid_Filter_Tooltip"))("pbiTooltipDisabled",Y.isValid),e.\u0275\u0275attribute("tooltip",Y.viewModel.readOnlyState.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(53,Cn,Y.isFilterApplied(),Y.showMobileInvalidIcon))("ngStyle",e.\u0275\u0275pureFunction1(56,Rt,Y.viewModel.fontSize))("pbiMenu",Y.menuItems)("menuMode",Y.menuMode)("disabled",!(Y.isEditMode&&Y.isInOutspacePane)),e.\u0275\u0275attribute("aria-label",Y.getAriaLabelString())("title",Y.getTooltip())("tabindex",Y.isEditMode?0:null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Y.viewModel.readOnlyState.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showInputWarningIcon&&!Y.isMobileFilter()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=Y.getIconClassName()),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiEditableLabel",Y.pbiEditableLabelOptions)("pbiEditableLabelValue",Y.editableLabelName)("pbiEditableLabelMode",Y.isEditMode)("pbiEditableLabelEditable",!!Y.isInOutspacePane&&!!Y.viewModel.isEditingLabel)("pbiEditableLabelSearchString",Y.searchFiltersInput),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.canExpand&&!Y.disableToggling&&!Y.shouldHideExpandForEmptyContent()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showDeleteIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showTopRowClearIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showLockIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showMobileInvalidIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showMobileEditIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(58,_n,Y.isFilterExpanded())),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("restatement ",Y.restatementLineStyleRule,""),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(60,Rt,Y.viewModel.fontSize)),e.\u0275\u0275attribute("title",Y.getRestatement()),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(Y.getRestatement()),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Y.showBottomRowClearIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showVisibilityIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showLinkFieldOptions()),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",Y.shouldHideFilterContent()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.showFilterTypeSelection()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.viewModel.cardType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Y.viewModel.readOnlyState&&(Y.viewModel.readOnlyState.type===Y.FilterType.Include||Y.viewModel.readOnlyState.type===Y.FilterType.Exclude)&&Y.isFilterExpanded())}}var Pn=function(){function ie(j,K,Y,Be,Ke,Xe,gt,ht,_t,Wt,$t,Yt,Zt,tn,qt,nn,on,rn,Jt){this.contextActivityService=j,this.conceptualSchemaProxy=K,this.dataSources=Y,this.displayNameService=Be,this.eventBridge=Ke,this.explorationActivity=Xe,this.explorationCapabilities=gt,this.explorationNavigation=ht,this.featureSwitchService=_t,this.includeExcludeService=Wt,this.highContrastCssGenerationService=$t,this.localizationService=Yt,this.networkAvailabilityService=Zt,this.telemetryService=tn,this.themeService=qt,this.screenReaderService=nn,this.viewModeState=on,this.visualAuthoring=rn,this.visualTimeSynchronizationService=Jt,this.moveFilter=new e.EventEmitter,this.FilterType=l,this.menuMode=n.Kb.Compact,this.ariaLabelFilterType=this.localizationService.get("FilterCardTypeSwitchLabel"),this.allowChangeFilterTypes=!0,this.showInputWarningIconInternal=!1,this.showInputEditIconInternal=!1,this.initializeHighContrastRules()}return Object.defineProperty(ie.prototype,"editableLabelName",{get:function(){return this.getDisplayName()},enumerable:!1,configurable:!0}),ie.prototype.ngOnInit=function(){var j=this,K=this.viewModel;K.updateViewState(),K.updateAvailableTypes(this.featureSwitchService.featureSwitches),K.isInOutspacePane=this.isInOutspacePane,K.filterCardStyleArguments=this.filterCardStyleArguments,this.isValid=!K.readOnlyState.invalid,K.chevronExpandCollapseDescription=this.localizationService.get("FilterCard_ExpandCollapse"),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(ve.filterContainerChanged,function(Y,Be){return j.onFilterContainerChanged(Be)}).subscribe(ve.sectionObjectsEvaluated,function(Y,Be){return j.updateFilterCardStyle()}).subscribe(powerbi.events.visualThemeChanged,function(){return j.updateFilterCardStyle()}).subscribe(ve.podParameterChanged,function(Y,Be){return j.onPodParameterChanged(Be)}).subscribe(ve.explorationSettingsLoaded,function(Y,Be){Be.allowChangeFilterTypesChanged&&j.updateAllowChangeFilterTypeSettings(j.explorationNavigation.getCurrentExploration())}).subscribe(ve.applyAllClicked,function(Y,Be){return j.onApplyAllClicked(Be)}).subscribe(ve.applyAllBufferedFilterCardChanged,function(Y,Be){return j.onApplyAllFilterCardBufferedChanges(Be)}).subscribe(ve.explorationSlowDataSourceSettingsLoaded,function(Y,Be){return function(){Be.isApplyAllButtonEnabledChanged&&(j.showInputWarningIconInternal=!1,j.showInputEditIconInternal=!1)}}),this.updateAllowChangeFilterTypeSettings(this.explorationNavigation.getCurrentExploration()),this.initializeDefaultValue(),this.updateRestatement(),this.updateFilterCardStyle(),this.isInOutspacePane&&5===this.viewModel.contract.howCreated&&a.setDrillthroughMetadata(this.viewModel,this.explorationNavigation),this.pbiEditableLabelOptions={disableClick:!0,customTooltip:!0,inputMatchLabelWidth:!1,onEdit:function(){return j.editLabelModern()},onBlur:function(){j.blurLabel(),j.rename()}}},ie.prototype.rename=function(){if(!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(this.editablelabelInputName)){this.viewModel.contract.displayName=this.editablelabelInputName;var j=this.viewModel;this.visualAuthoring.renameFilter(j.getFilterContainerScope(),j.contract,this.editablelabelInputName),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Rename",isInOutspacePane:this.isInOutspacePane})}},ie.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},ie.prototype.ngOnChanges=function(j){j.searchFiltersInput&&(this.hiddenBySearchInput=a.shouldHideFilterBySearchInput(this.viewModel,this.searchFiltersInput,this.featureSwitchService))},ie.prototype.compareCardType=function(j,K){return j.type===K.type},ie.prototype.updateLinkAsAggregation=function(){var j=this.viewModel;this.visualAuthoring.setLinkFieldAsAggregation(j.contract,j.getFilterContainerScope(),j.isLinkedAsAggregation),this.updateLinkAsAggregationOnViewModel()},ie.prototype.getLabelForAsAggregationOption=function(j){return this.localizationService.get(j?"LinkField_AsAggregationEnabledText":"LinkField_AsAggregationDisabledText")},ie.prototype.getResourceIdForAsAggregationDropdown=function(){return 1===this.explorationNavigation.getCurrentSection().type?"LinkField_AsAggregationForTooltip":"LinkField_AsAggregationForDrillthrough"},ie.prototype.isIncludeExclude=function(){return this.viewModel.contract.type===l.Include||this.viewModel.contract.type===l.Exclude},ie.prototype.getDisplayName=function(){return this.viewModel.contract.displayName?this.viewModel.contract.displayName:this.viewModel.displayName},ie.prototype.getRestatement=function(){var j;return this.viewModel.contract.type===l.Passthrough?j="":(j=this.viewModel.getRestatement())||(j=this.localizationService.get("FilterRestatement_IsAll")),j},ie.prototype.isFilterApplied=function(){return this.viewModel.hasRestatement},Object.defineProperty(ie.prototype,"isFilterHidden",{get:function(){return this.isEditMode?this.hiddenBySearchInput:this.viewModel.isFilterHidden()||this.hiddenBySearchInput},enumerable:!1,configurable:!0}),ie.prototype.getTooltip=function(){return this.viewModel.isInvalidForMappedColumn?this.localizationService.get("DQP_Invalid_FilterCard_Tooltip"):this.isIncludeExclude()||this.viewModel.contract.type===l.Passthrough?this.getDisplayName():this.viewModel.tooltip},ie.prototype.getIconClassName=function(){var j=this.viewModel;if(5===j.howCreated&&j.contract&&!j.contract.isTransient){if(j.isMeasure)return"fieldListMeasure";if(j.isLinkedAsAggregation)return"fieldListNumeric"}},Object.defineProperty(ie.prototype,"canExpand",{get:function(){return this.isEditMode?this.viewModel.canExpandManually:this.viewModel.canExpandManually&&!this.viewModel.isFilterLocked()},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"showDeleteIcon",{get:function(){return!(!this.isEditMode&&!this.isIncludeExclude()&&this.viewModel.contract.type!==l.Passthrough)&&(this.featureSwitchService.featureSwitches.onObject&&5===this.viewModel.howCreated?this.viewModel.contract.isTransient:this.viewModel.canDeleteManually)},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"showVisibilityIcon",{get:function(){return!this.useMobileFilterConfig()&&this.viewModel.canHideManually&&(this.isEditMode||this.viewModel.isFilterHidden())},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"showLockIcon",{get:function(){return this.viewModel.canLockManually&&(this.isEditMode||this.viewModel.isFilterLocked())},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"showMobileInvalidIcon",{get:function(){return!!this.isMobileFilter()&&this.showInputWarningIcon},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"showMobileEditIcon",{get:function(){return!!this.isMobileFilter()&&this.showInputEditIconInternal},enumerable:!1,configurable:!0}),ie.prototype.isFilterExpanded=function(){return!(this.viewModel.isFilterLocked()&&!this.isEditMode)&&this.viewModel.isFilterExpanded()},ie.prototype.showFilterTypeSelection=function(){return(this.allowChangeFilterTypes||this.isEditMode)&&this.viewModel.availableTypes&&this.viewModel.availableTypes.length>1&&(!this.viewModel.isSingleSelectionRequired||this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues())&&!this.viewModel.isInvalid()&&!this.isIncludeExclude()},ie.prototype.getFilterLockTooltip=function(){return this.viewModel.isFilterLocked()?"FilterPane_FilterLocked":this.viewModel.isFilterLocked()?"FilterPane_UnlockFilter":"FilterPane_LockFilter"},ie.prototype.getFilterHiddenTooltip=function(){return this.viewModel.contract.isHiddenInViewMode?"FilterPane_ShowFilter":"FilterPane_HideFilter"},ie.prototype.getFilterTypeTooltip=function(){return this.allowChangeFilterTypes?"FilterPane_FilterType_Shown":"FilterPane_FilterType_Hidden"},ie.prototype.getAriaLabelString=function(){var j=this.getDisplayName(),K=this.getRestatement();return K&&(j=j+" "+K),j},ie.prototype.onFilterChanged=function(j){this.viewModel.useDefaultFilter&&(j.filter.filter=ne.getDefaultValueFilter(this.viewModel.contract.expression)),s.notifyFilterContainerChangedByUser(this.eventBridge,j),this.updateRestatement(),this.updateFilterCardStyle()},ie.prototype.toggle=function(j){if(void 0===j&&(j=!0),this.canExpand&&!this.shouldHideExpandForEmptyContent()){var K=this.visualTimeSynchronizationService?this.visualTimeSynchronizationService.getAnchorTime():void 0;o.updateRelativeTimeRestatementOnToggle(this.dataSources.get(),this.conceptualSchemaProxy,this.localizationService,this.viewModel,K,this.networkAvailabilityService.isNetworkAvailable());var Y=this.viewModel.contract;if(Y.expanded=!Y.expanded,this.telemetryService.logEvent(powerbi.telemetry.EXToggleFilterCardExpanded,{filterType:powerbi.explore.util.getTelemetryFilterType(Y.type),filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(this.viewModel.getFilterContainerScope().scopeType),fieldKind:powerbi.explore.util.getTelemetryFieldKind(Y.expression),expanded:Y.expanded,viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode()),isInOutspacePane:this.isInOutspacePane}),this.viewModel.updateViewState(),j){var Be=this.viewModel,Ke={filter:Be.contract,changeType:16,scope:Be.getFilterContainerScope()};this.eventBridge.publishToChannel(ve.filterContainerChanged,Ke)}}},ie.prototype.clearFilter=function(j){var K=this;if(j&&j.stopPropagation(),this.viewModel.clearDQPWarning(),this.viewModel.hasDefaultValue)this.restoreDefaultFilter();else if(this.viewModel.contract.filter){var Y={filter:this.viewModel.contract,changeType:10,scope:this.viewModel.getFilterContainerScope()};if(this.isApplyAllOnForThisFilter())s.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.cardType.type,this.viewModel.id,!0,!1),s.notifyFilterContainerChangedByUser(this.eventBridge,Y);else if(this.explorationActivity.tryDoRootActivity(function(Xe){var ht,gt=K.viewModel;Y.parentActivity=Xe,gt.clearRestatement(),K.visualAuthoring.clearFilter(gt.getFilterContainerScope(),gt.contract,Xe),K.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(ht=s.createChangeFilterActivity(K.contextActivityService,"Clear Filter"),Y.changeFilterActivity=ht),s.notifyFilterContainerChangedByUser(K.eventBridge,Y),ht&&ht.resolve()},function(){return K.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneFilterCleared)})&&(this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Clear",isInOutspacePane:this.isInOutspacePane,viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())}),j)){var Ke=U.getFocusNextElement(!0,j.target);L.focus(Ke,!0)}}},Object.defineProperty(ie.prototype,"showInputWarningIcon",{get:function(){return this.showInputWarningIconInternal},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"clearFilterTooltip",{get:function(){return this.viewModel.hasDefaultValue?"FilterPane_ResetDefaultFilter":"FilterPane_ClearFilter"},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"showTopRowClearIcon",{get:function(){return this.viewModel.canClearManually&&!this.viewModel.isFilterLocked()&&!this.isEditMode},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"showBottomRowClearIcon",{get:function(){return this.viewModel.canClearManually&&this.isEditMode&&this.viewModel.hasRestatement},enumerable:!1,configurable:!0}),ie.prototype.toggleFilterVisibility=function(j){if(j&&j.stopPropagation(),this.isEditMode){var K=this.viewModel;this.visualAuthoring.toggleFilterVisibility(K.getFilterContainerScope(),K.contract),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Visibility",isInOutspacePane:this.isInOutspacePane})}},ie.prototype.toggleFilterLockState=function(j){if(j&&j.stopPropagation(),this.isEditMode){var K=this.viewModel;this.visualAuthoring.toggleFilterLock(K.getFilterContainerScope(),K.contract),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Lock",isInOutspacePane:this.isInOutspacePane})}},ie.prototype.deleteFilter=function(j){var K=this;j&&j.stopPropagation(),this.isApplyAllOnForThisFilter()&&s.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.cardType?this.viewModel.cardType.type:null,this.viewModel.id,!1,!0),this.explorationActivity.doRootActivity(function(Be){var Ke;K.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Ke=s.createChangeFilterActivity(K.contextActivityService,"Remove Filter"));var Xe=K.viewModel.getFilterContainerScope();K.visualAuthoring.removeFilter(K.viewModel.contract,Xe,Be,Ke),Ke&&Ke.resolve()},function(){return K.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneFilterDeleted)}),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Delete",isInOutspacePane:this.isInOutspacePane,viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())});var Y=this.localizationService.get("FilterPane_DeleteFilterDeleted");this.screenReaderService.alertPolite(Y)},ie.prototype.switchCardType=function(j){switch(void 0===j&&(j=this.viewModel.cardType),this.viewModel.cardType=j,this.viewModel.contract.type=j.type,this.viewModel.cardType.type){case l.Advanced:case l.Categorical:case l.TopN:case l.RelativeTime:case l.RelativeDate:this.viewModel.switchType(this.viewModel.cardType.type),this.viewModel.updateViewState()}var Y,K={filter:this.viewModel.contract,changeType:32,scope:this.viewModel.getFilterContainerScope()};this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Y=s.createChangeFilterActivity(this.contextActivityService,"Switch Filter Type"),K.changeFilterActivity=Y),s.notifyFilterContainerChangedByUser(this.eventBridge,K),Y&&Y.resolve(),this.isApplyAllOnForThisFilter()&&s.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.cardType.type,this.viewModel.id,!1,!0),this.toggle(!1),this.toggle(!1)},ie.prototype.showLinkFieldOptions=function(){return this.hasNoLinkFieldOptions()&&this.viewModel.readOnlyState.expanded},ie.prototype.shouldHideExpandForEmptyContent=function(){return!!this.featureSwitchService.featureSwitches.onObject&&!this.hasNoLinkFieldOptions()&&this.hasNoFilterContent()},ie.prototype.shouldHideFilterContent=function(){return this.hasNoFilterContent()||!this.canExpand||!this.isFilterExpanded()},ie.prototype.hasNoLinkFieldOptions=function(){return this.viewModel.canToggleLinkAsAggregation&&!this.isInOutspacePane&&!this.isMobileFilter()},ie.prototype.hasNoFilterContent=function(){return this.viewModel.isLinkField&&this.viewModel.isLinkedAsAggregation},ie.prototype.getFilterClass=function(){var j=[];if(j.push("unselectable"),this.viewModel.cardType)switch(this.viewModel.cardType.type){case l.Visual:j.push("visual");break;case l.Advanced:j.push("advanced");break;case l.Categorical:j.push("categorical");break;case l.TopN:j.push("topN");break;case l.RelativeDate:j.push("relativeDate");break;case l.RelativeTime:j.push("relativeTime")}return j.push(this.isInOutspacePane?"filterOutspaceModern":"filter"),this.isFilterApplied()&&j.push("hasRestateHighlight"),!this.viewModel.canSortManually&&this.isInOutspacePane&&j.push("italicized"),j.join(" ")},ie.prototype.editLabel=function(){this.isEditMode&&this.viewModel.canRenameManually&&this.isInOutspacePane&&(this.viewModel.isEditingLabel=!0)},ie.prototype.editLabelModern=function(){this.viewModel.canRenameManually&&this.isInOutspacePane&&(this.viewModel.isEditingLabel=!0)},ie.prototype.blurLabel=function(){this.viewModel.isEditingLabel=!1},Object.defineProperty(ie.prototype,"restatementLineStyleRule",{get:function(){return this.isFilterExpanded()||this.isEditMode?"trimmedTextWithEllipsis":"multiLineText"},enumerable:!1,configurable:!0}),ie.prototype.onMenuItemClicked=function(j){var K;this.onMenuItemSelected({action:j.id,moveDirection:null===(K=j.data)||void 0===K?void 0:K.moveDirection})},Object.defineProperty(ie.prototype,"menuItems",{get:function(){var K=[{type:n.iB.Button,disabled:!this.viewModel.canDeleteManually,text:this.localizationService.get("FilterPane_DeleteFilter"),id:0},{type:n.iB.Button,disabled:!this.canExpand,text:this.viewModel.isFilterExpanded()?this.localizationService.get("Collapse"):this.localizationService.get("Expand"),id:this.viewModel.isFilterExpanded()?2:1}];return this.customSortEnabled&&K.push({type:n.iB.SubMenu,disabled:!this.viewModel.canSortManually,text:this.localizationService.get("ItemAction_Move"),id:3,menu:{items:[{type:n.iB.Button,disabled:!this.viewModel.canSortManually||0===this.index,text:this.localizationService.get("ItemAction_Move_Up"),id:3,data:{moveDirection:0}},{type:n.iB.Button,disabled:!this.viewModel.canSortManually||this.index===this.lastIndex-1,text:this.localizationService.get("ItemAction_Move_Down"),id:3,data:{moveDirection:1}},{type:n.iB.Button,disabled:!this.viewModel.canSortManually||0===this.index,text:this.localizationService.get("ItemAction_Move_Top"),id:3,data:{moveDirection:2}},{type:n.iB.Button,disabled:!this.viewModel.canSortManually||this.index===this.lastIndex-1,text:this.localizationService.get("ItemAction_Move_Bottom"),id:3,data:{moveDirection:3}}]}}),K.push({type:n.iB.Divider},{type:n.iB.Button,disabled:!this.viewModel.canRenameManually,text:this.localizationService.get("ItemAction_Rename"),id:4},{type:n.iB.Button,disabled:!this.viewModel.canLockManually,text:this.viewModel.isFilterLocked()?this.localizationService.get("FilterPane_UnlockFilter"):this.localizationService.get("FilterPane_LockFilter"),id:this.viewModel.isFilterLocked()?6:5},{type:n.iB.Button,disabled:!this.viewModel.canHideManually,text:this.viewModel.isFilterHidden()?this.localizationService.get("FilterPane_ShowFilter"):this.localizationService.get("FilterPane_HideFilter"),id:this.viewModel.isFilterHidden()?7:8},{type:n.iB.Button,disabled:!this.viewModel.canClearManually,text:this.localizationService.get("FilterPane_ClearFilter"),id:9}),{items:K}},enumerable:!1,configurable:!0}),ie.prototype.onMenuItemSelected=function(j){switch(j.action){case 0:this.deleteFilter();break;case 4:this.editLabel();break;case 3:this.customSortEnabled&&this.moveFilterInDirection(j.moveDirection);break;case 1:case 2:this.toggle();break;case 5:case 6:this.toggleFilterLockState();break;case 7:case 8:this.toggleFilterVisibility();break;case 9:this.clearFilter();break;default:return}},Object.defineProperty(ie.prototype,"isEditMode",{get:function(){return 1===this.viewModeState.getMode()},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"isFluentDesignEnabled",{get:function(){return this.explorationCapabilities.getCapabilities().showFluentDesign&&0===this.viewModeState.getMode()},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"customSortEnabled",{get:function(){return this.viewModel.getFilterContainerScope(),this.isEditMode&&this.isInOutspacePane},enumerable:!1,configurable:!0}),ie.prototype.isApplyAllOnForThisFilter=function(){var j=this.viewModel.isInOutspacePane||this.isMobileFilter();return s.isApplyAllEnabled(j,this.explorationNavigation)},ie.prototype.updateFilterCardStyle=function(){var j=this.themeService.getVisualStyle(this.explorationNavigation.getCurrentExploration().themeCollection);this.viewModel.updateFilterCardStyle(this.explorationNavigation.getCurrentSection(),j)},ie.prototype.isMobileFilter=function(){var j;return null===(j=this.viewModeState)||void 0===j?void 0:j.getConfig().displayOptions.enableMobileFilters},ie.prototype.updateLinkAsAggregationOnViewModel=function(){var j=this.viewModel;if(j.isLinkedAsAggregation&&j.contract.filter){this.viewModel.clearRestatement(),this.visualAuthoring.updateFilter(j.getFilterContainerScope(),j.contract,void 0);var K={filter:j.contract,changeType:10,scope:j.getFilterContainerScope()};this.eventBridge.publishToChannel(ve.filterContainerChanged,K)}var Y={filter:j.contract,changeType:16,scope:j.getFilterContainerScope()};this.eventBridge.publishToChannel(ve.filterContainerChanged,Y)},ie.prototype.useMobileFilterConfig=function(){return this.viewModeState.getConfig().displayOptions.useMobileExplorationFooter},ie.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement .visual .slicer-container .slicer-content-wrapper .searchHeader","{ border-color: @buttonForegroundColor !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement .cardHeader .title:focus .textLabel","{ color: @selectedForegroundColor !important; background-color: @selectedBackgroundColor !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement .cardHeader button[aria-disabled=true].clear","{ opacity: 0.5 !important; }")},ie.prototype.onFilterContainerChanged=function(j){var K=this.viewModel;if(j.filter===K.contract){if(jsCommon.EnumExtensions.hasFlag(j.changeType,2)&&(this.updateRestatement(),this.viewModel.updateViewState()),K.cardType&&j.filter.type!==K.cardType.type&&jsCommon.EnumExtensions.hasFlag(j.changeType,32)&&((j.filter.type===l.TopN&&K.cardType.type!==l.TopN||j.filter.type!==l.TopN&&K.cardType.type===l.TopN)&&this.viewModel.clearRestatement(),K.updateCardType(j.filter.type)),jsCommon.EnumExtensions.hasFlag(j.changeType,10)){var Y=this.localizationService.get("FilterPane_ClearFilterCleared");this.screenReaderService.alertPolite(Y)}jsCommon.EnumExtensions.hasFlag(j.changeType,16)&&this.viewModel.updateViewState()}this.updateFilterCardStyle()},ie.prototype.restoreDefaultFilter=function(){var j=this;this.explorationActivity.doRootActivity(function(K){var Y=j.viewModel,Be=j.viewModel.contract.expression;j.visualAuthoring.updateFilter(Y.getFilterContainerScope(),Y.contract,ne.getDefaultValueFilter(Be));var Xe,Ke={filter:Y.contract,changeType:10,scope:Y.getFilterContainerScope(),parentActivity:K};j.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Xe=s.createChangeFilterActivity(j.contextActivityService,"Restore Default Filter"),Ke.changeFilterActivity=Xe),s.notifyFilterContainerChangedByUser(j.eventBridge,Ke),Xe&&Xe.resolve(),Y.useDefaultFilter=!0,j.updateRestatement()},function(){return j.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneFilterDefaultRestored)})},ie.prototype.moveFilterInDirection=function(j){var K=this.viewModel.getFilterContainerScope(),Y=K.container.filters,Be={filterScopeType:K.scopeType,startIndex:this.index,targetIndex:void 0};switch(j){case 0:Be.targetIndex=this.index-1;break;case 1:Be.targetIndex=this.index+2;break;case 2:Be.targetIndex=0;break;case 3:Be.targetIndex=Y.length}this.moveFilter.emit(Be)},ie.prototype.updateRestatement=function(){var j=this,K=this.viewModel;if(K.useDefaultFilter)K.setRestatement(H.fromDefault(K.defaultValue.value));else if(K.contract.type===l.Passthrough)K.displayName=K.getRestatement(),K.updateViewState();else if(this.isIncludeExclude()){var Y=this.dataSources.get();this.conceptualSchemaProxy.get(Y).then(function(Be){var Ke=j.viewModel.contract,Xe=j.includeExcludeService.buildViewModel(Ke.filter,Ke.type,Be,j.displayNameService,Ke.filterExpressionMetadata);K.setRestatement(Xe.restatement),K.displayName=Xe.displayName,K.updateViewState()})}},ie.prototype.onPodParameterChanged=function(j){!j||j.filter!==this.viewModel.contract||2===j.type&&(this.viewModel.updateIsLinkedAsAggregation(j.asAggregation),this.updateLinkAsAggregationOnViewModel())},ie.prototype.initializeDefaultValue=function(){var j=this.viewModel;(j.hasDefaultValue&&!j.contract.filter||ne.isDefaultFilter(j.contract.filter))&&(j.useDefaultFilter=!0,this.updateRestatement())},ie.prototype.updateAllowChangeFilterTypeSettings=function(j){j&&j.settings&&(this.allowChangeFilterTypes=j.settings.allowChangeFilterTypes)},ie.prototype.onApplyAllFilterCardBufferedChanges=function(j){this.viewModel.id===j.id&&(this.showInputWarningIconInternal=!j.wasDeleted&&!j.canApply&&(this.showInputWarningIcon||this.isMobileFilter()),this.showInputEditIconInternal=this.isMobileFilter()&&!this.showInputWarningIconInternal)},ie.prototype.onApplyAllClicked=function(j){j.idsInError&&(this.showInputWarningIconInternal=-1!==j.idsInError.indexOf(this.viewModel.id.toString()))},ie.\u0275fac=function(K){return new(K||ie)(e.\u0275\u0275directiveInject(i.r),e.\u0275\u0275directiveInject(O.i),e.\u0275\u0275directiveInject(I.D),e.\u0275\u0275directiveInject(T.O),e.\u0275\u0275directiveInject(f.J),e.\u0275\u0275directiveInject(M.Z),e.\u0275\u0275directiveInject(P.U),e.\u0275\u0275directiveInject(A.z),e.\u0275\u0275directiveInject(y.vZ),e.\u0275\u0275directiveInject(C.Y),e.\u0275\u0275directiveInject(d.g),e.\u0275\u0275directiveInject(S.o),e.\u0275\u0275directiveInject(B.SW),e.\u0275\u0275directiveInject(w.y0),e.\u0275\u0275directiveInject(V.f),e.\u0275\u0275directiveInject(g.g),e.\u0275\u0275directiveInject(v.kc),e.\u0275\u0275directiveInject(c.$),e.\u0275\u0275directiveInject(b.a))},ie.\u0275cmp=e.\u0275\u0275defineComponent({type:ie,selectors:[["filter"]],viewQuery:function(K,Y){var Be;(1&K&&e.\u0275\u0275viewQuery(m.l8,5),2&K)&&(e.\u0275\u0275queryRefresh(Be=e.\u0275\u0275loadQuery())&&(Y.menuElement=Be.first))},inputs:{viewModel:"viewModel",isInOutspacePane:"isInOutspacePane",index:"index",lastIndex:"lastIndex",searchFiltersInput:"searchFiltersInput",filterCardStyleArguments:"filterCardStyleArguments",disableToggling:"disableToggling"},outputs:{moveFilter:"moveFilter"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"ngStyle","class",4,"ngIf"],[3,"ngStyle"],["customClick","",1,"filterCardTitleSection",3,"singleClickDisabled","singleClickTimeout","singleClickAction"],[1,"cardHeader","flex",3,"pbiTooltip","pbiTooltipDisabled"],["pbiMenuActivation","contextmenu",1,"title","trimmedTextWithEllipsis","unselectable",3,"ngClass","ngStyle","pbiMenu","menuMode","disabled","pbiMenuButtonClick"],["menuElement",""],["class","filterPaneIcon error",4,"ngIf"],["localizeTooltip","Filter_CantBeApplied","class","filterPaneIcon glyphicon pbi-glyph-warning glyph-small no-bold",4,"ngIf"],[3,"class",4,"ngIf"],["class","editableLabel",3,"ngModel","ngModelChange","blur",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable","pbiEditableLabelSearchString"],["class","glyphicon glyph-mini","type","button",3,"ngStyle","ngClass","pbiTooltip",4,"ngIf"],["class","delete glyphicon pbi-glyph-close glyph-micro",3,"ngStyle","pbiTooltip","click",4,"ngIf"],["class","filterPaneIcon clear glyphicon glyph-mini pbi-glyph-eraser",3,"disabled","ngStyle","pbiTooltip","click",4,"ngIf"],["class","filterPaneIcon lock glyphicon glyph-mini",3,"ngClass","disabled","ngStyle","pbiTooltip","click",4,"ngIf"],["use-tooltip-as-aria-label","","class","filterPaneIcon glyphicon glyph-mini pbi-glyph-error","localizeTooltip","Filter_CantBeApplied",4,"ngIf"],["use-tooltip-as-aria-label","","class","filterPaneIcon glyphicon glyph-mini pbi-glyph-edit","localizeTooltip","Filter_Edited",4,"ngIf"],[1,"controlPanel","flex",3,"ngClass"],[1,"controlIcons"],["class","filterPaneIcon hide glyphicon glyph-mini",3,"ngClass","ngStyle","pbiTooltip","click",4,"ngIf"],["class","linkFieldOptions",4,"ngIf"],[1,"filterContent",3,"hidden"],["class","filterTypeSelection",4,"ngIf"],[4,"ngIf"],[3,"filterViewModel",4,"ngIf"],[1,"filterPaneIcon","error"],["sheet","filterPaneIcons","symbolId","fieldListError"],["localizeTooltip","Filter_CantBeApplied",1,"filterPaneIcon","glyphicon","pbi-glyph-warning","glyph-small","no-bold"],["sheet","filterPaneIcons",3,"symbolId"],[1,"editableLabel",3,"ngModel","ngModelChange","blur"],["type","button",1,"glyphicon","glyph-mini",3,"ngStyle","ngClass","pbiTooltip"],[1,"delete","glyphicon","pbi-glyph-close","glyph-micro",3,"ngStyle","pbiTooltip","click"],[1,"filterPaneIcon","clear","glyphicon","glyph-mini","pbi-glyph-eraser",3,"disabled","ngStyle","pbiTooltip","click"],[1,"filterPaneIcon","lock","glyphicon","glyph-mini",3,"ngClass","disabled","ngStyle","pbiTooltip","click"],["use-tooltip-as-aria-label","","localizeTooltip","Filter_CantBeApplied",1,"filterPaneIcon","glyphicon","glyph-mini","pbi-glyph-error"],["use-tooltip-as-aria-label","","localizeTooltip","Filter_Edited",1,"filterPaneIcon","glyphicon","glyph-mini","pbi-glyph-edit"],[1,"filterPaneIcon","hide","glyphicon","glyph-mini",3,"ngClass","ngStyle","pbiTooltip","click"],[1,"linkFieldOptions"],[1,"asAggregationTitle","smallFontSize","trimmedTextWithEllipsis",3,"localize"],[1,"asAggregation",3,"ngModel","disabled","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"filterTypeSelection"],[1,"flex"],["use-tooltip-as-aria-label","","localize","FilterCardTypeSwitchLabel","localizeTooltip","FilterCardTypeSwitchLabel",1,"typeSelectTitle","trimmedTextWithEllipsis","smallFontSize",3,"ngStyle"],["id","focusableLabelIcon","tabindex","0","class","filterPaneIcon pbi-glyph-info glyphicon glyph-mini",3,"pbiTooltip",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",1,"typeSwitchOptions","pbi-modern-select",3,"aria-label","ngClass","ngModel","compareWith","ngStyle","ngModelChange","selectionChange"],[3,"value","ngStyle","disabled",4,"ngFor","ngForOf"],["id","focusableLabelIcon","tabindex","0",1,"filterPaneIcon","pbi-glyph-info","glyphicon","glyph-mini",3,"pbiTooltip"],[3,"value","ngStyle","disabled"],[3,"viewModel","onFilterChanged",4,"ngIf"],[3,"viewModel","isInOutspacePane","expanded",4,"ngIf"],[3,"viewModel","filterType","onFilterChanged",4,"ngIf"],[3,"viewModel","onFilterChanged"],[3,"viewModel","isInOutspacePane","expanded"],[3,"viewModel","filterType","onFilterChanged"],[3,"filterViewModel"]],template:function(K,Y){1&K&&e.\u0275\u0275template(0,yn,27,62,"div",0),2&K&&e.\u0275\u0275property("ngIf",Y.viewModel&&!Y.isFilterHidden)},dependencies:[u.NgClass,u.NgForOf,u.NgIf,u.NgStyle,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.On,h.X,p.r,D.gD,x.ey,m.l8,z.V,Q.f,q.D,de.x,se.A,Ie.E,fe.k,re.z,Ae,We,ze.F],styles:['.filter.card[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color, #333333);margin:2px;border:1px solid var(--neutral-dark-color, #212121);border-radius:4px;overflow:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{padding:0 4px 4px 8px}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{padding:0 8px 4px 4px}.filter.card[_ngcontent-%COMP%]:hover   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.filter.card[_ngcontent-%COMP%]:hover   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%], .filter.card[_ngcontent-%COMP%]:hover   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%], .filter.card[_ngcontent-%COMP%]:hover   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{visibility:visible}.filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]{cursor:pointer}.filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);background:transparent}.filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   .asAggregationTitle[_ngcontent-%COMP%]{display:inline-block;width:100%}.filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:var(--neutral-secondary-color, #666666);border:1px solid var(--black-color, #000);width:100%;margin:2px 0;padding:2px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{width:100%;line-height:21px;display:flex;flex-direction:row}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;flex-grow:1;outline:none;font-size:12px;display:flex}html[data-focus-source=key][_ngcontent-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{width:16px;height:16px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .no-bold[_ngcontent-%COMP%]{font-weight:400}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{height:16px;width:16px;background:transparent;flex-grow:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{margin:1px 4px 3px 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{margin:1px 0 3px 4px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"\\e70d"}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"\\e70e"}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{height:16px;width:16px;background:transparent;flex-grow:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{margin:1px 4px 3px 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{margin:1px 0 3px 4px}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .controlIcons[_ngcontent-%COMP%]{display:inline-flex}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .multiLineText[_ngcontent-%COMP%]{white-space:normal;display:block;display:-webkit-box;word-wrap:break-word;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{margin:0 4px;visibility:hidden}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{visibility:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{margin:0 0 0 4px}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{margin:0 4px 0 0}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{visibility:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:left}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{margin:0 0 0 4px}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{margin:0 4px 0 0}.filter.card[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{background-color:transparent;cursor:pointer;vertical-align:top}.filter.card[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%]{display:inline-block}.filter.card[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{background-color:var(--neutral-secondary-color, #666666);border:1px solid var(--neutral-dark-color, #212121);width:100%;margin:2px 0;padding:2px}.filter.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt, #444444);border:1px solid var(--black-color, #000);height:24px;padding:2px}.filterOutspaceModern.card.hasRestateHighlight[_ngcontent-%COMP%]{box-shadow:0 0 2px rgba(0,0,0,.2)}.filterOutspaceModern.card[_ngcontent-%COMP%]{background-color:inherit;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);overflow:hidden;flex-grow:1;margin:0 0 6px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]{padding:4px 4px 4px 8px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]{padding:4px 8px 4px 4px}.filterOutspaceModern.card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition-duration:0s}.filterOutspaceModern.card.italicized[_ngcontent-%COMP%]{font-style:italic}.filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .collapse[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .collapse[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .delete[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .delete[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .lock[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .lock[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .hide[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .hide[_ngcontent-%COMP%]{visibility:visible!important}.filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .collapse[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .delete[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .lock[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .hide[_ngcontent-%COMP%]{visibility:visible!important}.filterOutspaceModern.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   .asAggregationTitle[_ngcontent-%COMP%]{display:inline-block}.filterOutspaceModern.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);width:100%;margin:2px 0;padding:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]{width:100%;cursor:pointer}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:4px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .filterCardTitle[_ngcontent-%COMP%]:focus{outline:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:inherit}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:4px;height:16px;width:16px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:2px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .controlIcons[_ngcontent-%COMP%]{display:inline-flex}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .multiLineText[_ngcontent-%COMP%]{white-space:normal;display:block;display:-webkit-box;word-wrap:break-word;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{visibility:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:2px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;flex-grow:1;font-size:14px;display:flex}  html[data-focus-source=key] .filterOutspaceModern.card .cardHeader .title:focus,   html[data-focus-source=key] .filterOutspaceModern.card .cardHeader .title *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}  html[data-focus-source=mouse] .filterOutspaceModern.card .cardHeader .title:focus,   html[data-focus-source=mouse] .filterOutspaceModern.card .cardHeader .title *:focus,   html[data-focus-source=program] .filterOutspaceModern.card .cardHeader .title:focus,   html[data-focus-source=program] .filterOutspaceModern.card .cardHeader .title *:focus{outline:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterCardTitle[_ngcontent-%COMP%]{display:inline-block;background:var(--white-color, #FFF);width:100%;border:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterCardTitle[_ngcontent-%COMP%]::selection{background:var(--input-selection-color, #0078d7);color:var(--white-color, #FFF)}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{width:16px;height:16px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .no-bold[_ngcontent-%COMP%]{font-weight:400}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]{width:100%;border:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     pbi-text-label{width:100%}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[aria-disabled=true].clear[_ngcontent-%COMP%]{opacity:.5}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[aria-disabled=false].clear[_ngcontent-%COMP%]{opacity:1}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{opacity:.5;height:16px;width:16px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]:enabled{opacity:1}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"\\e70d"}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"\\e70e"}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0;visibility:hidden;font-weight:inherit}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .hasRestateHighlight[_ngcontent-%COMP%]{background-color:transparent;font-weight:bolder}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{height:16px;width:16px;color:inherit;background:transparent;visibility:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:left}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0;visibility:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{background-color:transparent;color:inherit;cursor:pointer;vertical-align:top}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]{margin-top:8px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{display:block}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin-right:4px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border:1px solid var(--neutral-dark-color, #212121);width:100%;margin:4px 0 0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{padding-left:2px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{padding-right:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);min-height:24px}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{background-color:var(--gray-30, #EDEBE9);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], .newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}[_nghost-%COMP%]     .filterOutspaceModern.card select, [_nghost-%COMP%]     .filterOutspaceModern.card mat-select{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);min-height:24px!important;box-sizing:border-box;font-family:inherit}[_nghost-%COMP%]     .filterOutspaceModern.card input[type=number]{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);min-height:24px;padding:2px 6px;text-align:left}[_nghost-%COMP%]     .filterOutspaceModern.card input[type=number].ng-invalid{border:1px solid var(--warning-color, #A4262C)!important}[_nghost-%COMP%]     .filterOutspaceModern.card input[type=number][type=number]::-webkit-outer-spin-button, [_nghost-%COMP%]     .filterOutspaceModern.card input[type=number][type=number]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}[_nghost-%COMP%]     .filterOutspaceModern.card .filterInputWarningBorder{border:1px solid var(--warning-color, #A4262C)!important}[_nghost-%COMP%]     .filterOutspaceModern.card .applyFilter{margin-top:6px;margin-bottom:6px;color:inherit;font-size:inherit;font-family:inherit;background-color:transparent;opacity:.5;position:relative;float:right}[_nghost-%COMP%]     .filterOutspaceModern.card .applyFilter:hover{background-color:transparent}[_nghost-%COMP%]     .filterOutspaceModern.card .applyFilter:enabled{color:inherit;opacity:1}[_nghost-%COMP%]     .filterOutspaceModern.card .description{font-size:inherit}[_nghost-%COMP%]     .filter.card select, [_nghost-%COMP%]     .filter.card mat-select{border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);background-color:var(--white-color, #FFF);height:24px;padding:2px}[_nghost-%COMP%]     .filter.card input[type=number]{background-color:var(--neutral-dark-color, #212121);border:1px solid var(--black-color, #000);height:24px;padding:2px 6px;text-align:left}[_nghost-%COMP%]     .filter.card input[type=number].ng-invalid{border:1px solid var(--warning-color, #A4262C)}[_nghost-%COMP%]     .filter.card input[type=number][type=number]::-webkit-outer-spin-button, [_nghost-%COMP%]     .filter.card input[type=number][type=number]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}[_nghost-%COMP%]     .filter.card .applyFilter{color:var(--neutral-tertiary-alt-color, #C8C8C8);background-color:transparent;position:relative;float:right;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif}[_nghost-%COMP%]     .filter.card .applyFilter:hover{background-color:transparent}[_nghost-%COMP%]     .filter.card .applyFilter:enabled{color:var(--theme-primary-color, #F2C811)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]{float:left;width:100%;box-sizing:border-box;padding:0 6px 4px 4px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;overflow:visible}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]:focus{outline:none}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--white-color, #FFF);display:flex;margin:6px 5px 6px 0;box-sizing:border-box;font-weight:inherit}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-left:12px;font-size:12px}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:none}html[data-focus-source=key][_ngcontent-%COMP%]   .explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt2, #4a4a4a);float:left;width:100%;border:1px dashed var(--neutral-secondary-color, #666666);border-radius:4px;box-sizing:border-box}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards.append[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811)}html[data-focus-source=key][_ngcontent-%COMP%]   .explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .filterWell[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);padding:4px 8px}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]:focus{outline:none}html[data-focus-source=key][_ngcontent-%COMP%]   .explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .end-dropzone[_ngcontent-%COMP%]{height:8px}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards.append[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:inherit;padding:4px 8px;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);overflow:hidden}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:6px;margin-top:4px;height:16px;width:16px}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .controlIcons[_ngcontent-%COMP%]{display:inline-flex}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{background:transparent}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{background:transparent}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:6px}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;flex-grow:1;outline:none;font-size:14px}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{width:16px;height:16px;display:inline-block;padding:0;margin:2px 2px 0 0}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"\\e70d"}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"\\e70e"}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .hasRestateHighlight[_ngcontent-%COMP%]{background-color:transparent;font-weight:bolder}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0;font-weight:inherit}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:right;height:16px;width:16px;color:inherit;background:transparent}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], .explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPaneOutspace[_ngcontent-%COMP%]   .relativeDateFilter[_ngcontent-%COMP%]   .relativeDateFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   pbi-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:inherit}','.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{position:relative;background-color:var(--fluentThemeWhiteColor);border-color:var(--fluentThemeNeutralTertiaColor);box-sizing:border-box;padding:0 8px;margin-bottom:20px;color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.hasRestateHighlight[_ngcontent-%COMP%]:not(.expanded), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.hasRestateHighlight[_ngcontent-%COMP%]:not(.expanded){background-color:var(--fluentThemeNeutralLighterColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded.advanced[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded.advanced[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded.relativeDate[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded.relativeDate[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded.topN[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded.topN[_ngcontent-%COMP%]{overflow-y:auto}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]{max-height:100px;line-height:initial;position:relative;-webkit-tap-highlight-color:transparent;margin-bottom:10px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%]{order:1}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[aria-disabled=true][_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[aria-disabled=true][_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[disabled][_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[disabled][_ngcontent-%COMP%]{visibility:hidden}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%]{order:2;margin-left:24px;color:var(--fluentThemeErrorDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%]{order:2;margin-left:20px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]{order:3;margin-left:24px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before{content:"\\e76c"}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{float:initial;margin-top:5px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{height:auto;width:auto}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%]{position:absolute;right:28px;padding:12px 4px;visibility:visible}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%]{font-size:18px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel.cardExpanded[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel.cardExpanded[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%]{display:none;-webkit-line-clamp:unset;-webkit-box-orient:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{font-size:14px!important;line-height:initial;-webkit-tap-highlight-color:transparent;padding-top:10px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%]{display:block!important;right:0;position:absolute}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0;font-size:14px!important;font-weight:700;letter-spacing:normal}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not([ng-bind]), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not([ng-bind]){display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title.withMobileInvalidIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title.withMobileInvalidIcon[_ngcontent-%COMP%]{color:var(--fluentThemeErrorDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     pbi-text-label, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     pbi-text-label{width:100%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select{height:32px;border-radius:4px;border:1px solid var(--fluentThemeNeutralTertiaColor);border-width:1px!important;width:100%;padding:0 8px!important;line-height:32px;background-color:var(--fluentThemeWhiteColor);margin:0 0 10px;color:var(--fluentThemeNeutralDarkColor);font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;display:flex;align-items:center}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-trigger, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-trigger{line-height:28px;vertical-align:middle}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select.typeSwitchOptions, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select.typeSwitchOptions{border:2px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow{width:auto;height:auto;color:inherit;font-weight:initial;font-size:14px;padding-right:0;padding-bottom:0}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow:before, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow:before{content:"\\ec8f"}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow-wrapper{line-height:30px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container{display:initial;height:auto!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container .slicer-content-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container .slicer-content-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container .slicer-content-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container .slicer-content-wrapper{-webkit-tap-highlight-color:transparent}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row{display:inline-block;margin-top:8px;min-width:50px;max-width:90%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox.selected+.slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox.selected+.slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox.selected+.slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox.selected+.slicerText{background-color:transparent;color:var(--fluentThemeNeutralDarkColor);border-color:var(--fluentThemeNeutralDarkColor);border-width:3px!important;font-weight:600!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCountText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCountText, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCountText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCountText{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerText{padding:10px;border-radius:100px;background-color:transparent;text-align:center;color:var(--fluentThemeNeutralDarkColor);border-width:1px!important;border-style:solid!important;border-color:var(--fluentThemeGrayRat);font-family:inherit!important;font-size:inherit!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer{padding:2px 0 0 10px;height:44px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-date-picker, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-date-picker{width:initial}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .mat-select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .mat-select{margin:0 8px 2px;width:100px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker input, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker input{border-radius:4px!important;border:1px solid var(--fluentThemeNeutralTertiaColor);height:32px;padding-top:8px;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:last-child, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:last-child{padding-top:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:first-child, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:first-child{padding-bottom:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker button, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker button{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader{height:32px;border:0;border-bottom:1px solid var(--fluentThemeNeutralTertiaColor);border-radius:2px;color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader{background-color:var(--fluentThemeWhiteColor)!important;margin-bottom:10px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon{transform:rotateY(-180deg);margin:auto 30px auto auto;position:absolute;right:0px;color:var(--fluentThemeNeutralSecondaryColor)!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput{background:none;color:var(--fluentThemeNeutralDarkColor);height:100%;margin:auto 0;padding:0 30px 0 8px;z-index:2;border-radius:initial;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput::-webkit-input-placeholder{color:var(--fluentThemeNeutralSecondaryAltColor);font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker{margin-bottom:15px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector{background-color:var(--fluentThemeWhiteColor);color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector .condition-value, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector .condition-value{border:0px;border-bottom:1px solid var(--fluentThemeNeutralTertiaColor);width:220px;color:inherit;background:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input{height:32px;border:0;border-radius:2px;padding:0 8px;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input[type=text]::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input[type=text]::-webkit-input-placeholder{color:inherit;opacity:.5}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table{margin-top:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button{margin-left:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter{height:32px;font-weight:500;padding:0 16px;margin:8px 0 24px;border-radius:4px;color:var(--fluentThemeNeutralDarkColor);border-width:2px;border-style:solid;border-color:var(--fluentThemeNeutralDarkColor);font-size:14px;letter-spacing:normal;font-weight:700;background-color:transparent;opacity:.35}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter:enabled, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter:enabled{opacity:1}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .cardFooter, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .cardFooter{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select{width:100%;padding-left:8px;-webkit-appearance:none;border-radius:4px;border:1px solid var(--fluentThemeNeutralTertiaryColor);display:initial;margin:4px 0;background:url(data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%202.49707L3.93262%206.55762L3.31738%205.94238L8%201.25293L12.6826%205.94238L12.0674%206.55762L8%202.49707ZM8%2013.5029L12.0674%209.44238L12.6826%2010.0576L8%2014.7471L3.31738%2010.0576L3.93262%209.44238L8%2013.5029Z%22%20fill%3D%22%23201F1E%22%2F%3E%3C%2Fsvg%3E) center right 10px no-repeat var(--fluentThemeWhiteColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions{padding-right:35px;border:2px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions+.ui-selectmenu-button, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions+.ui-selectmenu-button{width:200px!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number].ng-invalid, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number].ng-invalid{border-color:var(--fluentThemeErrorDarkColor);color:var(--fluentThemeErrorDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea) input, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea) input, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea){border-color:var(--fluentThemeErrorDarkColor)!important;color:var(--fluentThemeErrorDarkColor)!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     *, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     *{font-size:14px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]{margin-right:20px;margin-left:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%]{margin-right:20px;margin-left:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%]{margin-right:20px;margin-left:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before{content:"\\e76b"}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%]{right:initial;left:28px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%]{right:initial;left:0}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select-arrow, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select-arrow{padding-left:0}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer{padding:2px 0 0 12px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon{margin:auto auto auto 30px;right:initial;left:0}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput{padding:0 30px 0 10px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button{margin-right:8px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker .time-picker-body-item, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker .time-picker-body-item{direction:ltr}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select{padding-right:8px;background:url(data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%202.49707L3.93262%206.55762L3.31738%205.94238L8%201.25293L12.6826%205.94238L12.0674%206.55762L8%202.49707ZM8%2013.5029L12.0674%209.44238L12.6826%2010.0576L8%2014.7471L3.31738%2010.0576L3.93262%209.44238L8%2013.5029Z%22%20fill%3D%22%23201F1E%22%2F%3E%3C%2Fsvg%3E) center left 10px no-repeat var(--fluentThemeWhiteColor)}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions{padding-left:35px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number]{text-align:right}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}']}),ie}()},89874:function(Le,oe,t){t.d(oe,{I:function(){return V}});var e=t(59214),n=t(37325),m=function(){function v(){var c=this;this.onClick=function(u){return c.onButtonClick(u)},this.onKeydown=function(u){return c.onButtonKeydown(u)},this.onDocumentMouseDown=function(u){c.popup.contains(u.target)||c.popupButton.contains(u.target)||c.close()}}return v.prototype.subscribe=function(c,u){this.popup=c,this.popupButton=u,this.popup.style.position="fixed",this.close(),this.popupButton.addEventListener("click",this.onClick),this.popupButton.addEventListener("keydown",this.onKeydown),document.addEventListener("mousedown",this.onDocumentMouseDown,!0)},v.prototype.unsubscribe=function(){this.popupButton.removeEventListener("click",this.onClick),this.popupButton.removeEventListener("keydown",this.onKeydown),document.removeEventListener("mousedown",this.onDocumentMouseDown,!0),this.close(),this.popup=void 0,this.popupButton=void 0},v.prototype.onButtonClick=function(c){this.togglePopup()},v.prototype.onButtonKeydown=function(c){switch(c.keyCode){case n.K5:this.open();break;case n.hY:this.close();break;default:return}c.preventDefault(),c.stopPropagation()},v.prototype.togglePopup=function(){this.closed?this.open():this.close()},v.prototype.open=function(){this.popup.style.display="block";var r,c=this.popup.getBoundingClientRect(),u=this.popupButton.getBoundingClientRect();this.popup.style.left=u.right-c.width+"px",r=u.bottom+c.height>window.innerHeight?Math.max(u.top-c.height,0):u.bottom,this.popup.style.top=r+"px",this.closed=!1},v.prototype.close=function(){this.popup.style.display="none",this.closed=!0},v}(),i=t(87714),O=t(89515),I=t(82472),T=t(6067),f=t(24696),M=t(67455),A=["button"],b=["popup"],P=["noIcon"],y=["icon"];function C(v,c){if(1&v&&e.\u0275\u0275element(0,"img",14),2&v){var u=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",u.selectedIcon.imageUrl,e.\u0275\u0275sanitizeUrl)}}function d(v,c){if(1&v&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&v){var u=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("symbolId",u.selectedIcon.svgId)}}function g(v,c){if(1&v&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,C,1,1,"img",12),e.\u0275\u0275template(2,d,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()),2&v){var u=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("aria-label",u.getIconDescription(u.selectedIcon)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!u.selectedIcon.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!u.selectedIcon.svgId)}}function S(v,c){if(1&v&&e.\u0275\u0275element(0,"img",14),2&v){var u=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("src",u.imageUrl,e.\u0275\u0275sanitizeUrl)}}function B(v,c){if(1&v&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&v){var u=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("symbolId",u.svgId)}}function w(v,c){if(1&v){var u=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16,17),e.\u0275\u0275listener("click",function(){var z=e.\u0275\u0275restoreView(u).$implicit,Q=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Q.onIconClick(z))})("keydown",function(x){var Q=e.\u0275\u0275restoreView(u).$implicit,q=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(q.onIconKeydown(x,Q))}),e.\u0275\u0275template(2,S,1,1,"img",12),e.\u0275\u0275template(3,B,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()}if(2&v){var r=c.$implicit,h=c.index,p=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",p.getIconDescription(r)),e.\u0275\u0275attribute("key",h)("tabindex",0==h?0:-1)("aria-selected",p.selectedIconId===r.id)("aria-posinset",h+1)("aria-setsize",r.length)("data-unique-id","icon-"+r.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!r.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!r.svgId)}}var V=function(){function v(c,u,r){this.eventBridge=c,this.localizationService=u,this.itemPickerService=r,this.iconChanged=new e.EventEmitter,this.closed=new e.EventEmitter,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager()}return v.prototype.ngOnInit=function(){var c=this;this.noIconLabel=this.localizationService.get("IconPicker_NoIcon"),this.subscriptionManager.subscribe(powerbi.events.visualThemeChanged,function(){return c.onVisualThemeChanged()}),this.updateIcons(),this.selectedIcon=this.icons.find(function(u){return u.id===c.selectedIconId})},v.prototype.ngAfterViewInit=function(){this.popupHandler=new m,this.popupHandler.subscribe(this.popup.nativeElement,this.headerButton.nativeElement)},v.prototype.ngOnDestroy=function(){this.popupHandler.unsubscribe(),this.subscriptionManager.unsubscribeAll()},v.prototype.onIconClick=function(c){this.selectIcon(c)},v.prototype.onIconKeydown=function(c,u){switch(c.keyCode){case n.hY:this.popupHandler.close();break;case n.K5:this.selectIcon(u);break;case n.Mf:this.noIcon.nativeElement.focus();break;case n.LH:case n.JH:case n.oh:case n.SV:this.focusOnNextIcon(c.keyCode,this.icons.indexOf(u))}c.preventDefault(),c.stopPropagation()},v.prototype.onNoPickClick=function(){this.selectIcon(void 0)},v.prototype.onNoPickKeyDown=function(c){switch(c.keyCode){case n.Mf:var u;u=c.shiftKey?this.icons.length-1:0,this.iconElementRefs.map(function(r){return r.nativeElement}).find(function(r){return r.getAttribute("key")===u.toString()}).focus();break;case n.K5:this.selectIcon(void 0)}c.preventDefault(),c.stopPropagation()},v.prototype.getIconDescription=function(c){if(c.description){if("string"==typeof c.description)return c.description;if(c.description.resourceKey)return this.localizationService.get(c.description.resourceKey)}},v.prototype.onVisualThemeChanged=function(){this.updateIcons()},v.prototype.updateIcons=function(){var c=_.cloneDeep(this.itemPickerService.getIcons());for(var u in this.icons=[],c){var r=c[u];r.id=u,this.icons.push(r)}},v.prototype.selectIcon=function(c){this.selectedIcon=c,this.selectedIconId=c?c.id:void 0,this.popupHandler.close(),this.iconChanged.emit(this.selectedIconId)},v.prototype.focusOnNextIcon=function(c,u){var r=this.getNextIconIndex(c,u);this.focusOnIconByIndex(r)},v.prototype.focusOnIconByIndex=function(c){this.getElementFromIndex(c).focus()},v.prototype.getElementFromIndex=function(c){return this.iconElementRefs.map(function(u){return u.nativeElement}).find(function(u){return u.getAttribute("key")===c.toString()})},v.prototype.getNextIconIndex=function(c,u){var p,D,r=u%v.columnCount,h=Math.floor(u/v.columnCount);return c===n.LH||c===n.JH?(p=r,D=this.getNextIndex(this.getColumnItemCount(r),h,c)):(c===n.oh||c===n.SV)&&(p=this.getNextIndex(this.getRowItemCount(h),r,c),D=h),this.getIndexFromPosition(p,D)},v.prototype.getRowItemCount=function(c){var u=this.icons.length;return c<Math.floor(u/v.columnCount)?v.columnCount:u%v.columnCount},v.prototype.getColumnItemCount=function(c){var u=this.icons.length/v.columnCount,r=Math.floor(u);return c<(u-r)*v.columnCount-1&&r++,r},v.prototype.getNextIndex=function(c,u,r){return r===n.SV||r===n.JH?u=++u>=c?0:u:(r===n.oh||r===n.LH)&&(u=--u<0?c-1:u),u},v.prototype.getIndexFromPosition=function(c,u){return c+u*v.columnCount},v.columnCount=10,v.\u0275fac=function(u){return new(u||v)(e.\u0275\u0275directiveInject(i.J),e.\u0275\u0275directiveInject(O.o),e.\u0275\u0275directiveInject(I.a))},v.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["icon-picker"]],viewQuery:function(u,r){if(1&u&&(e.\u0275\u0275viewQuery(A,7),e.\u0275\u0275viewQuery(b,7),e.\u0275\u0275viewQuery(P,7),e.\u0275\u0275viewQuery(y,5)),2&u){var h=void 0;e.\u0275\u0275queryRefresh(h=e.\u0275\u0275loadQuery())&&(r.headerButton=h.first),e.\u0275\u0275queryRefresh(h=e.\u0275\u0275loadQuery())&&(r.popup=h.first),e.\u0275\u0275queryRefresh(h=e.\u0275\u0275loadQuery())&&(r.noIcon=h.first),e.\u0275\u0275queryRefresh(h=e.\u0275\u0275loadQuery())&&(r.iconElementRefs=h)}},inputs:{selectedIconId:"selectedIconId",labelId:"labelId"},outputs:{iconChanged:"iconChanged",closed:"closed"},decls:13,vars:7,consts:[["role","button","tabindex","0",1,"popoutButton"],["button",""],["class","icon",4,"ngIf"],[1,"glyphicon","pbi-glyph-flickup","glyph-micro","dropdown-icon"],[1,"popup"],["popup",""],["role","listbox",1,"icon-container"],[1,"icon-container-scroll"],["class","icon","role","option",3,"title","click","keydown",4,"ngFor","ngForOf"],["tabindex","0",1,"noIcon",3,"click","keydown"],["noIcon",""],[1,"icon"],["role","presentation",3,"src",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["role","presentation",3,"src"],["sheet","conditionalFormattingDialogIcons",3,"symbolId"],["role","option",1,"icon",3,"title","click","keydown"],["icon",""]],template:function(u,r){1&u&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275template(3,g,3,3,"div",2),e.\u0275\u0275element(4,"i",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4,5)(7,"div",6)(8,"div",7),e.\u0275\u0275template(9,w,4,9,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9,10),e.\u0275\u0275listener("click",function(){return r.onNoPickClick()})("keydown",function(p){return r.onNoPickKeyDown(p)}),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()()),2&u&&(e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(2,5,"Icon_Picker")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!!r.selectedIcon),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",r.icons),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-selected",void 0===r.selectedIconId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(r.noIconLabel))},dependencies:[T.NgForOf,T.NgIf,f.R,M.F],styles:["[_nghost-%COMP%]{display:flex;white-space:nowrap;user-select:none}.popoutButton[_ngcontent-%COMP%]{display:flex;width:44px;height:28px;margin-left:4px;background-color:var(--white-color, #FFF);border:1px solid var(--fluent-theme-neutral-dark-color, #201F1E);box-sizing:border-box}.popoutButton[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:relative}.dropdown-icon[_ngcontent-%COMP%]{margin-left:6px;margin-top:6px}.popup[_ngcontent-%COMP%]{position:fixed;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--white-color, #FFF);box-shadow:0 4.8px 14.4px rgba(0,0,0,.11),0 25.6px 57.6px rgba(0,0,0,.13);font-size:12px;padding:5px;z-index:1}.icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.icon-container-scroll[_ngcontent-%COMP%]{overflow:auto;max-height:200px}.icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:4px;width:16px;height:16px;float:left}.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.noIcon[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),v}()},53004:function(Le,oe,t){t.d(oe,{Z:function(){return w}});var e=t(71983),n=t(33695),m=t(72249),i=t(89515),O=t(82472),I=t(36157),T=t(59214),f=t(87714),M=t(6067),A=t(45647),b=t(66291),P=t(8542),y=t(52393);function C(V,v){if(1&V&&T.\u0275\u0275element(0,"img"),2&V){var c=T.\u0275\u0275nextContext().$implicit;T.\u0275\u0275attribute("src",c.imageUrl,T.\u0275\u0275sanitizeUrl)}}function d(V,v){if(1&V&&T.\u0275\u0275element(0,"svg-use-symbol",10),2&V){var c=T.\u0275\u0275nextContext().$implicit;T.\u0275\u0275property("symbolId",c.svgId)}}function g(V,v){if(1&V&&(T.\u0275\u0275elementStart(0,"div",7),T.\u0275\u0275template(1,C,1,1,"img",8),T.\u0275\u0275template(2,d,1,1,"svg-use-symbol",9),T.\u0275\u0275elementEnd()),2&V){var c=v.$implicit;T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",c.url),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",c.svgId)}}function S(V,v){if(1&V&&(T.\u0275\u0275elementStart(0,"div",5),T.\u0275\u0275template(1,g,3,2,"div",6),T.\u0275\u0275elementEnd()),2&V){var c=T.\u0275\u0275nextContext();T.\u0275\u0275advance(1),T.\u0275\u0275property("ngForOf",c.selectedIcons)}}function B(V,v){1&V&&T.\u0275\u0275element(0,"div",11)}var w=function(){function V(v,c,u,r,h,p){this.elementRef=v,this.eventBridge=c,this.injector=u,this.itemPickerService=r,this.localizationService=h,this.overlay=p}return V.prototype.ngOnInit=function(){var v=this;this.updateIconSets(),this.visibilityPicker=new m.X(!1),this.isPickerOpened$=this.visibilityPicker.asObservable(),this.iconSelected=new m.X(this.iconSetId),this.onIconSetSelected$=this.iconSelected.asObservable(),this.eventsSubscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.events.visualThemeChanged,function(){v.iconSets=null,v.updateIconSets()})},V.prototype.ngOnDestroy=function(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.dispose(),this.eventsSubscriptionManager.unsubscribeAll()},V.prototype.setIcons=function(v){var c;this.iconSetId=v,this.selectedIcons=null===(c=this.iconSets[this.iconSetId])||void 0===c?void 0:c.icons,this.onIconSetSelected(v),this.iconSelected.next(v),this.overlayRef&&this.overlayRef.hasAttached()&&this.closePicker()},V.prototype.toggle=function(){this.overlayRef&&this.overlayRef.hasAttached()?this.closePicker():this.openIconPicker()},V.prototype.closePicker=function(){this.overlayRef.dispose(),this.onClose&&this.onClose(),this.visibilityPicker.next(!1)},V.prototype.updateIconSets=function(){var v;for(var c in this.iconSets=this.itemPickerService.getIconSets(),this.icons=this.itemPickerService.getIcons(),this.iconSets){var u=this.iconSets[c];u.icons=[];for(var r=0,h=u.iconIds;r<h.length;r++)u.icons.push(this.icons[h[r]])}this.selectedIcons=null===(v=this.iconSets[this.iconSetId])||void 0===v?void 0:v.icons},V.prototype.openIconPicker=function(){var v=this;if(!this.isDisabled){var c=this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"}]);this.overlayRef=this.overlay.create({width:"262px",height:"360px",hasBackdrop:!0,backdropClass:"invisible-backdrop",positionStrategy:c});var u=new WeakMap;u.set(this.itemPickerService,O.a),u.set(this.localizationService,i.o),u.set(n.Iu,this.overlayRef);var r=new e.nK(this.injector,u),h=new e.C5(I.V,null,r),p=this.overlayRef.attach(h);p.instance.labelId=this.labelId,p.instance.iconSetId=this.iconSetId,p.instance.iconSets=this.iconSets,p.instance.onClose=this.onClose,this.overlayRef.backdropClick().subscribe(function(D){return v.closePicker()}),p.instance.iconSetChanged.subscribe(function(D){return v.setIcons(D)}),this.visibilityPicker.next(!0)}},V.\u0275fac=function(c){return new(c||V)(T.\u0275\u0275directiveInject(T.ElementRef),T.\u0275\u0275directiveInject(f.J),T.\u0275\u0275directiveInject(T.Injector),T.\u0275\u0275directiveInject(O.a),T.\u0275\u0275directiveInject(i.o),T.\u0275\u0275directiveInject(n.aV))},V.\u0275cmp=T.\u0275\u0275defineComponent({type:V,selectors:[["icon-set-picker-input"]],inputs:{isDisabled:"isDisabled",labelId:"labelId",iconSetId:"iconSetId",onIconSetSelected:"onIconSetSelected",onClose:"onClose"},decls:6,vars:8,consts:[["role","combobox",1,"iconSetPicker",3,"tabindex","accessible-click"],[1,"iconsetpicker-anchor"],["class","selectedIconSet",4,"ngIf"],["class","iconSet-custom","localize","ConditionalFormattingDialog_RuleBased_IconStyleCustom",4,"ngIf"],["name","flickup","size","micro",1,"iconSetPicker-icon"],[1,"selectedIconSet"],["class","iconSet-icon",4,"ngFor","ngForOf"],[1,"iconSet-icon"],[4,"ngIf"],["class","iconSvg","sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",1,"iconSvg",3,"symbolId"],["localize","ConditionalFormattingDialog_RuleBased_IconStyleCustom",1,"iconSet-custom"]],template:function(c,u){1&c&&(T.\u0275\u0275elementStart(0,"div",0),T.\u0275\u0275listener("accessible-click",function(){return u.toggle()}),T.\u0275\u0275pipe(1,"async"),T.\u0275\u0275elementStart(2,"div",1),T.\u0275\u0275template(3,S,2,1,"div",2),T.\u0275\u0275template(4,B,1,0,"div",3),T.\u0275\u0275element(5,"pbi-icon",4),T.\u0275\u0275elementEnd()()),2&c&&(T.\u0275\u0275propertyInterpolate("tabindex",u.isDisabled?-1:0),T.\u0275\u0275attribute("aria-labelledby",u.labelId)("aria-expanded",!!T.\u0275\u0275pipeBind1(1,6,u.isPickerOpened$))("aria-disabled",!!u.isDisabled),T.\u0275\u0275advance(3),T.\u0275\u0275property("ngIf",u.iconSetId),T.\u0275\u0275advance(1),T.\u0275\u0275property("ngIf",!u.iconSetId))},dependencies:[M.NgForOf,M.NgIf,A.X,b.t,P._,y.k,M.AsyncPipe],styles:["[_nghost-%COMP%]{height:28px}.iconSetPicker[_ngcontent-%COMP%]{position:relative;border:1px solid var(--black-color, #000);box-sizing:border-box;width:262px;margin-top:0;height:28px;padding-left:8px;vertical-align:middle;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.iconsetpicker-anchor[_ngcontent-%COMP%]{display:flex;align-items:center}.iconsetpicker-anchor[_ngcontent-%COMP%]   .selectedIconSet[_ngcontent-%COMP%]{display:inline-block;width:226px;overflow:hidden}.iconsetpicker-anchor[_ngcontent-%COMP%]   .iconSet-custom[_ngcontent-%COMP%]{display:inline-block;margin:4px}.iconsetpicker-anchor[_ngcontent-%COMP%]   .iconSetPicker-icon[_ngcontent-%COMP%]{position:absolute;margin-top:3px;margin-right:10px;right:0}  .iconSet-icon{display:inline-block;margin:6px;width:16px;height:16px}  .iconSet-icon img{max-width:100%;max-height:100%}"]}),V}()},36157:function(Le,oe,t){t.d(oe,{V:function(){return d}});var e=t(59214),n=t(37325),m=t(89515),i=t(33695),O=t(6067),I=t(66291),T=t(52393),f=t(67455),M=["popup"],A=["icons"];function b(S,B){if(1&S&&e.\u0275\u0275element(0,"img"),2&S){var w=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275attribute("src",w.imageUrl,e.\u0275\u0275sanitizeUrl)}}function P(S,B){if(1&S&&e.\u0275\u0275element(0,"svg-use-symbol",12),2&S){var w=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("symbolId",w.svgId)}}function y(S,B){if(1&S&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275template(1,b,1,1,"img",10),e.\u0275\u0275template(2,P,1,1,"svg-use-symbol",11),e.\u0275\u0275elementEnd()),2&S){var w=B.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",w.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",w.svgId)}}function C(S,B){if(1&S){var w=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6,7),e.\u0275\u0275listener("keydown",function(r){var p=e.\u0275\u0275restoreView(w).index,D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.onIconSetKeyDown(r,p))})("accessible-click",function(r){var p=e.\u0275\u0275restoreView(w).$implicit,D=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(D.iconSetSelected(r,p.key))}),e.\u0275\u0275template(2,y,3,2,"div",8),e.\u0275\u0275elementEnd()}if(2&S){var V=B.$implicit,v=B.index,c=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("tabindex",0===v?0:-1),e.\u0275\u0275attribute("aria-posinset",v+1)("key",v)("aria-label",c.ariaLabels[V.key]),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",V.value.icons)}}var d=function(){function S(B,w){this.localizationService=B,this.overlayRef=w,this.iconSetChanged=new e.EventEmitter}return S.prototype.ngOnInit=function(){this.ariaLabels={};for(var B=0,w=Object.keys(this.iconSets);B<w.length;B++){var V=w[B];this.ariaLabels[V]=this.setAriaLabel(this.iconSets[V])}},S.prototype.ngAfterViewInit=function(){this.focusManager=new g(this.iconElementRefs,Object.keys(this.iconSets).length),this.focusManager.focusFirstIcon()},S.prototype.setIcons=function(B){this.iconSetId=B},S.prototype.iconSetSelected=function(B,w){this.setIcons(w),this.iconSetChanged.emit(w),B.preventDefault(),B.stopPropagation()},S.prototype.close=function(){this.overlayRef.dispose(),this.onClose&&this.onClose()},S.prototype.onIconSetKeyDown=function(B,w){B.keyCode===n.hY?this.close():this.focusManager.onIconSetKeyDown(B,w),B.preventDefault(),B.stopPropagation()},S.prototype.setAriaLabel=function(B){for(var w="",V=0,v=B.icons;V<v.length;V++){var c=v[V];w+=this.localizationService.get("string"==typeof c.description?c.description:c.description.resourceKey)+", "}return w},S.\u0275fac=function(w){return new(w||S)(e.\u0275\u0275directiveInject(m.o),e.\u0275\u0275directiveInject(i.Iu))},S.\u0275cmp=e.\u0275\u0275defineComponent({type:S,selectors:[["icon-set-picker"]],viewQuery:function(w,V){if(1&w&&(e.\u0275\u0275viewQuery(M,7),e.\u0275\u0275viewQuery(A,5,e.ElementRef)),2&w){var v=void 0;e.\u0275\u0275queryRefresh(v=e.\u0275\u0275loadQuery())&&(V.popup=v.first),e.\u0275\u0275queryRefresh(v=e.\u0275\u0275loadQuery())&&(V.iconElementRefs=v)}},inputs:{labelId:"labelId",iconSetId:"iconSetId",iconSets:"iconSets",onClose:"onClose"},outputs:{iconSetChanged:"iconSetChanged"},decls:8,vars:6,consts:[[1,"popup","themeableElement"],["popup",""],[1,"iconSet-flyout"],["role","listbox",1,"iconSet-container"],[1,"iconSet-container-scroll"],["class","iconSet","role","option",3,"tabindex","keydown","accessible-click",4,"ngFor","ngForOf"],["role","option",1,"iconSet",3,"tabindex","keydown","accessible-click"],["icons",""],["class","iconSet-icon",4,"ngFor","ngForOf"],[1,"iconSet-icon"],[4,"ngIf"],["class","iconSvg","sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",1,"iconSvg",3,"symbolId"]],template:function(w,V){1&w&&(e.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2)(3,"div",3),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275template(6,C,3,5,"div",5),e.\u0275\u0275pipe(7,"keyvalue"),e.\u0275\u0275elementEnd()()()()),2&w&&(e.\u0275\u0275advance(3),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(4,2,"Icon_Picker")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(7,4,V.iconSets)))},dependencies:[O.NgForOf,O.NgIf,I.t,T.k,O.KeyValuePipe,f.F],styles:["[_nghost-%COMP%]{position:relative}.popup[_ngcontent-%COMP%]{position:fixed;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--white-color, #FFF);box-shadow:var(--fluent-shadow-depth64, 0 25.6px 57.6px 0 rgba(0, 0, 0, .22), 0 4.8px 14.4px 0 rgba(0, 0, 0, .18));font-size:12px}.iconSet-container[_ngcontent-%COMP%]{overflow-y:auto;max-height:360px}.iconSet-flyout[_ngcontent-%COMP%]{width:262px;margin-left:0}.iconSet[_ngcontent-%COMP%]{padding-left:8px}.iconSet[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}"]}),S}(),g=function(){function S(B,w){this.iconElementRefs=B,this.totalIconSets=w}return S.prototype.onIconSetKeyDown=function(B,w){switch(B.keyCode){case n.Mf:this.focusOnNextIcon(B.shiftKey?n.LH:n.JH,w);break;case n.LH:case n.JH:case n.oh:case n.SV:this.focusOnNextIcon(B.keyCode,w)}},S.prototype.focusFirstIcon=function(){this.getElementFromIndex(0).focus()},S.prototype.focusOnNextIcon=function(B,w){var V=this.getNextColorIndex(B,w);this.getElementFromIndex(V).focus()},S.prototype.getElementFromIndex=function(B){return this.iconElementRefs.map(function(w){return w.nativeElement}).find(function(w){return w.getAttribute("key")===B.toString()})},S.prototype.getNextColorIndex=function(B,w){return(w+(B===n.JH||B===n.SV?1:-1)+this.totalIconSets)%this.totalIconSets},S}()},28440:function(Le,oe,t){t.d(oe,{O:function(){return c}});var e=t(59214),n=t(64450),m=t(87714),i=t(20019),O=t(42645),I=t(98467),T=t(92119),f=t(89515),M=t(82372),A=t(96818),b=t(6067),P=t(99875),y=powerbi.explore.services.createVisualHostServices,C=powerbi.data.DataViewObjectDefinitions,d=powerbi.explore.services.events,g=powerbi.data.SemanticFilter,S=powerbi.data.SemanticQuery,B=powerbi.data.SQExprBuilder,w=powerbi.explore.util.VisualContainerUtils,V=powerbi.explore.contracts.VisualQuery;function v(u,r){if(1&u&&e.\u0275\u0275element(0,"single-visual-host",3),2&u){var h=e.\u0275\u0275nextContext();e.\u0275\u0275property("visual",h.visual)("visualViewport",h.viewport)("themeCollection",h.themeCollection)("config",h.singleVisualHostConfig)}}var c=function(){function u(r,h,p,D,x,z,Q,q,de){var se=this;this.eventBridge=r,this.explorationNavigation=h,this.filterGenerator=p,this.geocoder=D,this.geolocationService=x,this.localizationService=z,this.moduleLoader=Q,this.promiseFactory=q,this.visualHostTooltipServiceFactory=de,this.modelChange=new e.EventEmitter,this.queryError=new e.EventEmitter,this.slicerWidth=146,this.slicerHeight=28,this.singleVisualHostConfig={notifyStart:_.noop,notifyEnd:_.noop,clearQueryErrors:_.noop,handleQueryErrors:function(fe){return se.handleQueryErrors(fe)},handleQueryWarnings:_.noop,queryVisualHostServices:{getFilters:function(){if(se.filter){for(var fe=new powerbi.explore.services.FilterBuilder,pe=0,ge=g.unmerge(se.filter);pe<ge.length;pe++)fe.addVisualFilter({filter:ge[pe]});return fe.getFilters()}},getDataSourceVariables:function(){var fe=se.explorationNavigation.getCurrentExploration();return null==fe?void 0:fe.dataSourceVariables},disableAnchorTime:!0},visualHostServices:powerbi.Prototype.inherit(y({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create()}),function(Ie){Ie.persistProperties=function(fe){return se.persistProperties(fe)},Ie.getLocalizedString=function(fe){return se.getLocalizedString(fe)}}),interactivityOptions:{selection:!0},additionalObjectUpdates:void 0,disableQueryCacheUpdates:!1,noLoadMore:!1},this.viewport={width:this.slicerWidth,height:this.slicerHeight,scale:1},this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.events.visualThemeChanged,function(){return se.updateTheme()})}return u.prototype.ngOnInit=function(){this.updateTheme(),this.createVisualContainer(),this.isInitialized=!0},u.prototype.ngOnChanges=function(r){if(this.isInitialized){if(r.filter&&!g.isSameFilter(r.filter.currentValue,r.filter.previousValue)){var p=this.createQuery(this.field,r.filter.currentValue);this.visual.config.singleVisual.query=p,this.triggerChanges()}r.field&&(p=this.createQuery(r.field.currentValue,this.filter),this.visual.config.singleVisual.query=p,r.selectedValue||this.setFilterObject(this.visual,void 0),this.triggerChanges()),r.selectedValue&&(this.setFilterObject(this.visual,r.selectedValue.currentValue),this.triggerChanges())}},u.prototype.ngOnDestroy=function(){this.subscriptionManager&&(this.subscriptionManager.unsubscribeAll(),this.subscriptionManager=null)},u.prototype.createVisualContainer=function(){if(this.field){var r={},h=powerbi.visuals.slicerProps.data.mode,p=powerbi.visuals.slicerProps.selection.selectAllCheckboxEnabled,D=powerbi.visuals.slicerProps.selection.singleSelect,x=powerbi.visuals.slicerProps.header.show,z=powerbi.visuals.slicerProps.items.textSize;C.setValue(r,h,null,B.text(this.mode)),C.setValue(r,p,null,B.boolean(!1)),C.setValue(r,D,null,B.boolean(!0)),C.setValue(r,x,null,B.boolean(!1)),C.setValue(r,z,null,B.integer(powerbi.explore.constants.smallFontSizeInPoint)),this.visualName=jsCommon.Utility.generateGuid();var Q={name:this.visualName,config:{singleVisual:{visualType:powerbi.visuals.plugins.slicer.name,objects:r}}},q=this.createQuery(this.field,this.filter);Q.config.singleVisual.query=q,this.selectedValue&&this.setFilterObject(Q,this.selectedValue),this.visual=Q}},u.prototype.persistProperties=function(r){var D,h=this.filterGenerator.tryGetFilterPropertyIdentifier(powerbi.visuals.plugins.slicer.capabilities),p=_.isArray(r)?{merge:r}:r;p&&!_.isEmpty(p.merge)&&(D=_.find(p.merge,function(z){return z.objectName===h.objectName}).properties[h.propertyName]),this.setFilterObject(this.visual,D),this.triggerChanges(),this.modelChange.emit({field:this.field,filter:D})},u.prototype.getLocalizedString=function(r){return this.localizationService.get("All"===r?"InstancePicker_Slicer_Restatement_All":r)},u.prototype.handleQueryErrors=function(r){this.queryError.emit(r)},u.prototype.createQuery=function(r,h){var p=new V(S.create(),{},[]);return p.add(r,powerbi.visuals.slicerRoles.value),h&&(p.defn=p.defn.where(h.where(),h.from())),p},u.prototype.setFilterObject=function(r,h){var p=this.filterGenerator.tryGetFilterPropertyIdentifier(powerbi.visuals.plugins.slicer.capabilities),D=w.getObjectDefinitions(r);h?C.setValue(D,p,null,h):C.deleteProperty(D,p.objectName,null,p.propertyName)},u.prototype.triggerChanges=function(){var r=this;this.eventBridge.publishToChannel(d.visualContainerChanged,{affectContainer:function(p){return p.name===r.visualName}})},u.prototype.updateTheme=function(){var r=this.explorationNavigation.getCurrentExploration();this.themeCollection=null==r?void 0:r.themeCollection},u.\u0275fac=function(h){return new(h||u)(e.\u0275\u0275directiveInject(m.J),e.\u0275\u0275directiveInject(i.z),e.\u0275\u0275directiveInject(O.r),e.\u0275\u0275directiveInject(I.iS),e.\u0275\u0275directiveInject(T._1),e.\u0275\u0275directiveInject(f.o),e.\u0275\u0275directiveInject(M.m),e.\u0275\u0275directiveInject(n.t),e.\u0275\u0275directiveInject(A.q))},u.\u0275cmp=e.\u0275\u0275defineComponent({type:u,selectors:[["instance-picker-modern"]],inputs:{mode:"mode",filter:"filter",field:"field",selectedValue:"selectedValue"},outputs:{modelChange:"modelChange",queryError:"queryError"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[[1,"instancePicker"],[1,"singleVisualHostContainer"],[3,"visual","visualViewport","themeCollection","config",4,"ngIf"],[3,"visual","visualViewport","themeCollection","config"]],template:function(h,p){1&h&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,v,1,4,"single-visual-host",2),e.\u0275\u0275elementEnd()()),2&h&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",p.field&&p.visual&&p.singleVisualHostConfig))},dependencies:[b.NgIf,P.v],styles:[".instancePicker[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]{position:relative}.instancePicker[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]   single-visual-host[_ngcontent-%COMP%]     visual-modern{width:100%}"]}),u}()},72201:function(Le,oe,t){t.d(oe,{s:function(){return C}});var e=t(7005),n=t(59214),m=t(89515),i=t(6067),O=t(66291),I=t(37985),T=powerbi.visuals.FontProperties,f=powerbi.Promise;function M(d,g){if(1&d){var S=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mobile-tooltip-child-menu",3),n.\u0275\u0275listener("onHide",function(){n.\u0275\u0275restoreView(S);var V=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(V.onHide)}),n.\u0275\u0275elementEnd()}if(2&d){var B=n.\u0275\u0275nextContext();n.\u0275\u0275property("commandsMenu",B.childMenu)("actionIconStyle",B.styles.actionIconStyle)("actionTitleStyle",B.styles.actionTitleStyle)}}function A(d,g){if(1&d&&n.\u0275\u0275element(0,"hr",4),2&d){var S=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",S.styles.dividerStyle)}}var b=function(g,S){return[g,S]};function P(d,g){if(1&d){var S=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",7),n.\u0275\u0275listener("accessible-click",function(){var c=n.\u0275\u0275restoreView(S).$implicit,u=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(u.execute(c.command))}),n.\u0275\u0275element(1,"div",8),n.\u0275\u0275elementStart(2,"div",9),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()}if(2&d){var B=g.$implicit,w=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("disabled",!B.enabled),n.\u0275\u0275attribute("aria-label",B.command.title(w.localizationService)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(6,b,B.command.glyph,B.command.title().toLowerCase()))("ngStyle",w.styles.actionIconStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",w.styles.actionTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(B.command.title(w.localizationService))}}function y(d,g){if(1&d&&(n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275template(1,P,4,9,"button",6),n.\u0275\u0275elementEnd()),2&d){var S=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",S.commands)}}var C=function(){function d(g){this.localizationService=g,this.onHide=new n.EventEmitter,this.showChildMenu=new n.EventEmitter,this.styles={dividerStyle:{},actionTitleStyle:{},actionIconStyle:{}}}return d.prototype.ngOnChanges=function(g){(g.tooltipShown&&g.tooltipShown.currentValue||this.tooltipShown&&g.identities&&g.identities.currentValue)&&(this.childMenu=void 0,this.commands=this.getCommands()),this.setupStyle()},d.prototype.hide=function(){this.childMenu=void 0,this.showChildMenu.emit({show:!1}),this.onHide.emit()},d.prototype.execute=function(g){return(0,e.mG)(this,void 0,f,function(){var S;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return[4,g.getChildren()];case 1:return S=B.sent(),_.isEmpty(S)?[3,2]:(this.toggleChildMenu(S),[3,4]);case 2:return g.execute?[4,g.execute()]:[3,4];case 3:B.sent(),this.hide(),B.label=4;case 4:return[2]}})})},d.prototype.toggleChildMenu=function(g){this.childMenu=this.childMenu?void 0:g,this.showChildMenu.emit({show:!!this.childMenu})},d.prototype.getCommands=function(){return this.actionsProvider&&this.actionsProvider.updateAndGetTooltipCommands()},d.prototype.setupStyle=function(){var g=this.tooltipStyle;if(g){if(g.actionFontProperties){var S=T.toHTMLStyle(g.actionFontProperties);this.styles.actionIconStyle.color=S.color,this.styles.actionTitleStyle.color=S.color,this.styles.actionTitleStyle["font-family"]=S["font-family"]}this.styles.dividerStyle["background-color"]=g.dividerColor,this.styles.dividerStyle.opacity=null!=g.transparency?1-g.transparency/100:1}},d.\u0275fac=function(S){return new(S||d)(n.\u0275\u0275directiveInject(m.o))},d.\u0275cmp=n.\u0275\u0275defineComponent({type:d,selectors:[["mobile-tooltip-actions"]],inputs:{actionsProvider:"actionsProvider",identities:"identities",tooltipShown:"tooltipShown",tooltipStyle:"tooltipStyle"},outputs:{onHide:"onHide",showChildMenu:"showChildMenu"},features:[n.\u0275\u0275NgOnChangesFeature],decls:3,vars:3,consts:[[3,"commandsMenu","actionIconStyle","actionTitleStyle","onHide",4,"ngIf"],["class","tooltip-divider",3,"ngStyle",4,"ngIf"],["class","mobile-tooltip-actions-container",4,"ngIf"],[3,"commandsMenu","actionIconStyle","actionTitleStyle","onHide"],[1,"tooltip-divider",3,"ngStyle"],[1,"mobile-tooltip-actions-container"],["class","action-button",3,"disabled","accessible-click",4,"ngFor","ngForOf"],[1,"action-button",3,"disabled","accessible-click"],[1,"glyphicon",3,"ngClass","ngStyle"],[1,"title",3,"ngStyle"]],template:function(S,B){1&S&&(n.\u0275\u0275template(0,M,1,3,"mobile-tooltip-child-menu",0),n.\u0275\u0275template(1,A,1,1,"hr",1),n.\u0275\u0275template(2,y,2,1,"div",2)),2&S&&(n.\u0275\u0275property("ngIf",!!B.childMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==B.commands?null:B.commands.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==B.commands?null:B.commands.length))},dependencies:[i.NgClass,i.NgForOf,i.NgIf,i.NgStyle,O.t,I.d],styles:[".tooltip-divider[_ngcontent-%COMP%]{width:100%;height:1px;border:none;margin:0}.mobile-tooltip-actions-container[_ngcontent-%COMP%]{pointer-events:auto;height:48px;opacity:.87;display:flex;flex-direction:row;justify-content:flex-start}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover, .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus{padding:0;border:none;background-color:transparent;width:80px;height:48px;margin-left:4px;color:#e1e1e1}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover   .glyphicon[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus   .glyphicon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px;margin-top:4px;color:#e1e1e1}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus   .title[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:10px}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .glyphicon[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertiary-color, #A19F9D)!important;touch-action:none}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .title[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertiary-color, #A19F9D)!important}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-left:auto}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus{margin-left:auto}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;margin-top:0}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .hide-action-button[_ngcontent-%COMP%]{display:none}"]}),d}()},37985:function(Le,oe,t){t.d(oe,{d:function(){return b}});var e=t(7005),n=t(59214),m=t(64857),i=t(6067),O=t(66291),I=t(49943);function T(P,y){if(1&P){var C=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",2),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(C);var S=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(S.back())}),n.\u0275\u0275element(1,"tri-svg-icon",3),n.\u0275\u0275elementStart(2,"label",4),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()}if(2&P){var d=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",d.actionIconStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",d.actionTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(d.commandsMenuTitle)}}function f(P,y){if(1&P&&n.\u0275\u0275element(0,"tri-svg-icon",8),2&P){var C=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",C.actionIconStyle)}}function M(P,y){if(1&P&&n.\u0275\u0275element(0,"div",9),2&P){var C=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",C.actionIconStyle)}}function A(P,y){if(1&P){var C=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"button",2),n.\u0275\u0275listener("accessible-click",function(){var w=n.\u0275\u0275restoreView(C).$implicit,V=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(V.execute(w))}),n.\u0275\u0275template(2,f,1,1,"tri-svg-icon",5),n.\u0275\u0275elementStart(3,"label",6),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,M,1,1,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&P){var d=y.$implicit,g=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",g.isNewMobileTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",g.actionTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(d.title()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!g.isNewMobileTooltip)}}var b=function(){function P(y){this.featureSwitchService=y,this.actionIconStyle={},this.actionTitleStyle={},this.onHide=new n.EventEmitter,this.onBack=new n.EventEmitter}return Object.defineProperty(P.prototype,"isNewMobileTooltip",{get:function(){return this.featureSwitchService.featureSwitches.newMobileTooltip},enumerable:!1,configurable:!0}),P.prototype.execute=function(y){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var C;return(0,e.Jh)(this,function(d){switch(d.label){case 0:return[4,y.getChildren()];case 1:return C=d.sent(),_.isEmpty(C)?[3,2]:(this.commandsMenu=C,[3,4]);case 2:return y.execute?[4,y.execute()]:[3,4];case 3:d.sent(),this.onHide.emit(),d.label=4;case 4:return[2]}})})},P.prototype.back=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(y){return this.onBack.emit(),[2]})})},P.\u0275fac=function(C){return new(C||P)(n.\u0275\u0275directiveInject(m.vZ))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["mobile-tooltip-child-menu"]],inputs:{commandsMenu:"commandsMenu",commandsMenuTitle:"commandsMenuTitle",actionIconStyle:"actionIconStyle",actionTitleStyle:"actionTitleStyle"},outputs:{onHide:"onHide",onBack:"onBack"},decls:2,vars:2,consts:[["class","child-action",3,"accessible-click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"child-action",3,"accessible-click"],["tri-svg-icon-20","","name","chevron_left_20_regular","sprite","fluentui-icons",1,"title-icon-20",3,"ngStyle"],[1,"label","title-label",3,"ngStyle"],["tri-svg-icon-20","","name","document_20_regular","sprite","fluentui-icons","class","item-icon-20",3,"ngStyle",4,"ngIf"],[1,"label","trimmedTextWithEllipsis",3,"ngStyle"],["class","chevron glyphicon pbi-glyph-chevronrightmedium",3,"ngStyle",4,"ngIf"],["tri-svg-icon-20","","name","document_20_regular","sprite","fluentui-icons",1,"item-icon-20",3,"ngStyle"],[1,"chevron","glyphicon","pbi-glyph-chevronrightmedium",3,"ngStyle"]],template:function(C,d){1&C&&(n.\u0275\u0275template(0,T,4,3,"button",0),n.\u0275\u0275template(1,A,6,4,"ng-container",1)),2&C&&(n.\u0275\u0275property("ngIf",d.isNewMobileTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",d.commandsMenu))},dependencies:[i.NgForOf,i.NgIf,i.NgStyle,O.t,I.M],styles:["@media (orientation: landscape){.tooltip-container.truncate-tooltip-height.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%], .tooltip-container.truncate-tooltip-height.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]{max-height:80px}}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]{height:auto;max-height:160px;background-color:transparent}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]:first-child, .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]:first-child{margin:0 10px 0 0;padding:6px 0 2px;font-weight:700}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]{justify-content:left;margin:0 10px;padding:6px 0 6px 11px;border:none}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-label[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-label[_ngcontent-%COMP%]{padding-left:2px}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-icon-20[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-icon-20[_ngcontent-%COMP%]{margin:4px 0 0 2px;width:20px;height:20px}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{max-width:200px}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .item-icon-20[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .item-icon-20[_ngcontent-%COMP%]{padding:4px 15px 4px 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100px;overflow-y:auto}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-height:40px;background-color:transparent;border:none;border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);padding:12px 56px 12px 16px}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);font-size:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;padding-top:4px}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-icon-20[_ngcontent-%COMP%]{float:right;fill:var(--fluent-theme-neutral-lighter-color, #F3F2F1);width:16px;height:16px;font-size:14px;margin:auto 0}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{font-size:22px}"]}),P}()},32928:function(Le,oe,t){t.d(oe,{Q:function(){return A}});var e=t(59214),n=t(64857),m=t(6067),i=t(80049),O=t(66291),I=t(49943),T=powerbi.visuals.FontProperties;function f(b,P){if(1&b&&(e.\u0275\u0275elementStart(0,"span",4),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&b){var y=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",y.headerTextStyle),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",y.mobileTooltipHeaderText," ")}}var M=function(){return{"aria-label":"Close"}},A=function(){function b(P){this.featureSwitchService=P,this.onHide=new e.EventEmitter,this.mobileTooltipHeaderStyle={},this.closeButtonStyle={},this.headerTextStyle={}}return Object.defineProperty(b.prototype,"isNewMobileTooltip",{get:function(){return this.featureSwitchService.featureSwitches.newMobileTooltip},enumerable:!1,configurable:!0}),b.prototype.ngOnChanges=function(P){var y=this.tooltipStyle;if(y&&this.isNewMobileTooltip){var C=T.toHTMLStyle(y.titleFontProperties);this.closeButtonStyle.fill=y.valueFontProperties.color,this.headerTextStyle.color=y.valueFontProperties.color,this.headerTextStyle["font-size"]=C["font-size"],this.headerTextStyle["font-weight"]="700"}},b.prototype.hide=function(){this.onHide.emit()},b.\u0275fac=function(y){return new(y||b)(e.\u0275\u0275directiveInject(n.vZ))},b.\u0275cmp=e.\u0275\u0275defineComponent({type:b,selectors:[["mobile-tooltip-header"]],inputs:{tooltipStyle:"tooltipStyle",mobileTooltipHeaderText:"mobileTooltipHeaderText"},outputs:{onHide:"onHide"},features:[e.\u0275\u0275NgOnChangesFeature],decls:4,vars:5,consts:[[1,"mobile-tooltip-header-container",3,"ngStyle"],["class","mobile-tooltip-header-text trimmedTextWithEllipsis",3,"ngStyle",4,"ngIf"],[1,"close-button",3,"localizeAttr","accessible-click"],["tri-svg-icon-20","","name","dismiss_20_regular","sprite","fluentui-icons",1,"dismiss-icon",3,"ngStyle"],[1,"mobile-tooltip-header-text","trimmedTextWithEllipsis",3,"ngStyle"]],template:function(y,C){1&y&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,f,2,2,"span",1),e.\u0275\u0275elementStart(2,"button",2),e.\u0275\u0275listener("accessible-click",function(){return C.hide()}),e.\u0275\u0275element(3,"tri-svg-icon",3),e.\u0275\u0275elementEnd()()),2&y&&(e.\u0275\u0275property("ngStyle",C.mobileTooltipHeaderStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",C.isNewMobileTooltip),e.\u0275\u0275advance(1),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(4,M)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",C.closeButtonStyle))},dependencies:[m.NgIf,m.NgStyle,i.b,O.t,I.M],styles:['.tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]{float:none;position:relative}.tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}html:not([dir="rtl"]).tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html:not([dir="rtl"]).tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html:not([dir="rtl"])   .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html:not([dir="rtl"])   .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   html:not([dir="rtl"])[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   html:not([dir="rtl"])   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]{padding-left:24px}html[dir="rtl"].tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html[dir="rtl"].tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html[dir="rtl"]   .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html[dir="rtl"]   .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   html[dir="rtl"][_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   html[dir="rtl"]   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]{padding-right:24px}.tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]   .mobile-tooltip-header-text[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]   .mobile-tooltip-header-text[_ngcontent-%COMP%]{max-width:200px}.tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:focus, .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:focus{margin:0}[_nghost-%COMP%]{float:right;width:40px;height:40px;position:absolute;right:0;z-index:1}.mobile-tooltip-header-container[_ngcontent-%COMP%]{pointer-events:auto;background-color:transparent}.mobile-tooltip-header-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .dismiss-icon[_ngcontent-%COMP%]{color:#6e6e6e!important;touch-action:none}.mobile-tooltip-header-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   title[_ngcontent-%COMP%]{color:#6e6e6e!important}.mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus{padding:0;border:none;background-color:transparent;color:var(--fluent-theme-neutral-dark-color, #201F1E);width:40px;height:40px;margin:auto}.mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .dismiss-icon[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover   .dismiss-icon[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus   .dismiss-icon[_ngcontent-%COMP%]{padding:0 1px 1px 0;fill:#e1e1e1}.mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus   .title[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:10px}'],changeDetection:0}),b}()},78285:function(Le,oe,t){t.d(oe,{t:function(){return ee}});var e=t(37845),n=t(59214),m=t(55144),i=t(87714),O=t(20019),I=t(43801),T=t(64857),f=t(93667),M=t(44302),A=t(41770),b=t(11719),P=t(89515),y=t(6067),C=t(45647),d=t(6093),g=t(63694),S=t(2889),B=t(36749),w=t(89934),V=t(67455),v=powerbi.explore.services.events,c=powerbi.visuals.ColorHelper,u=powerbi.common.utils.ColorUtility,r=powerbi.DataViewObject,h=powerbi.data.DataViewObjectDefinitions,p=powerbi.explore.constants.ExploreCanvasConstants,D=powerbi.data.SQExprBuilder,x=powerbi.explore.util,z=["collapseIcon"],Q=function(E,k){return{"pbi-glyph-view":E,"pbi-glyph-hide3":k}},q=function(E){return{color:E}};function de(F,E){if(1&F){var k=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",14),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(k);var Z=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(Z.toggleOutspacePaneVisibility())}),n.\u0275\u0275elementEnd()}if(2&F){var R=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(4,Q,R.isOutspacePaneVisible,!R.isOutspacePaneVisible))("pbiTooltip",R.showHidePaneLabel)("ngStyle",n.\u0275\u0275pureFunction1(7,q,R.color)),n.\u0275\u0275attribute("aria-label",R.hideShowTooltip)}}var se=function(E,k,R){return{backgroundColor:E,"font-size":k,borderColor:R}};function Ie(F,E){if(1&F){var k=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"search-box-modern",15),n.\u0275\u0275listener("searchText",function(Z){n.\u0275\u0275restoreView(k);var me=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(me.updateFilterSearchText(Z))}),n.\u0275\u0275elementEnd()}if(2&F){var R=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(3,se,R.inputBoxColor,R.searchTextSize,R.borderColor))("initialValue",R.searchFiltersInput)("ariaLabel",R.searchLabel+" "+R.searchLabeledby)}}function fe(F,E){1&F&&n.\u0275\u0275element(0,"hr",16)}var re=function(E){return{borderColor:E}};function pe(F,E){if(1&F&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275element(1,"filter-pane-modern",18,19),n.\u0275\u0275elementEnd()),2&F){var k=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(4,re,k.borderColor))("isInOutspacePane",!0)("sectionObjects",k.sectionObjects)("searchFiltersInput",k.searchFiltersInput)}}var ge=function(E,k){return{outspacePaneCollapsed:E,outspacePaneExpanded:k}},be=function(E,k,R,W,Z){return{backgroundColor:E,borderColor:k,borderWidth:R,width:W,color:Z}},ae=function(){return{leftOrRight:"ew-resize"}},X=function(E,k,R){return{color:E,"font-size":k,"font-family":R}},le=function(E,k){return{"pbi-glyph-doublechevronright":E,"pbi-glyph-doublechevronleft":k}},ee=function(){function F(E,k,R,W,Z,me,_e,he,G,ce,Fe){this.dir=E,this.eventBridge=k,this.featureSwitchService=R,this.gettingStartedService=W,this.navigationService=Z,this.telemetryService=me,this.themeService=_e,this.undoRedoService=he,this.viewModeState=G,this.localizationService=ce,this.screenSizeService=Fe,this.headerTitle="VisualizationPane_Filters",this.isPaneExpanded=!0,this.backgroundColorSelector={objectName:"outspacePane",propertyName:"backgroundColor"},this.foregroundColorSelector={objectName:"outspacePane",propertyName:"foregroundColor"},this.inputBoxColorSelector={objectName:"outspacePane",propertyName:"inputBoxColor"},this.expandCollapsePaneEditModeLabel=this.localizationService.get("FilterPane_ExpandCollapse"),this.searchLabeledby=this.localizationService.get("FilterPane_Page_OutspacePane"),this.searchLabel=this.localizationService.get("SearchBox_Text"),this.expandCollapsePaneReadModeLabel=this.localizationService.get("Pane_Toggle"),this.showHidePaneLabel=this.localizationService.get("FilterPane_ShowHide")}return Object.defineProperty(F.prototype,"contractWidth",{get:function(){return powerbi.explore.util.CanvasVisualsUtility.getOutspacePaneWidth(this.navigationService)},enumerable:!1,configurable:!0}),F.prototype.paneWidth=function(){return"".concat(this.isPaneExpanded?null!=this.manuallyResizedWidth?this.manuallyResizedWidth:this.contractWidth:p.OutspacePaneCollapsedWidth,"px")},Object.defineProperty(F.prototype,"showFilterPaneSearch",{get:function(){var k=this.navigationService.getCurrentExploration(),W=!(k.settings&&k.settings.disableFilterPaneSearch)&&this.isPaneExpanded;return!W&&""!==this.searchFiltersInput&&(this.searchFiltersInput=""),W},enumerable:!1,configurable:!0}),F.prototype.ngOnInit=function(){var E=this;this.autoCollapseSubscription=this.screenSizeService.observeMaxScreenSize(e._.Large).subscribe(function(R){R&&(E.isPaneExpanded=!1)});var k=this.navigationService.getCurrentExploration();k&&this.updateIsPaneExpanded(k.evaluatedObjects,this.isPaneExpanded),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(v.explorationObjectsLoaded,function(R,W){return E.updateIsPaneExpanded(W.evaluatedObjects,E.isPaneExpanded&&!E.screenSizeService.queryMaxWidth(e._.Large))}).subscribe(v.sectionChanged,function(R,W){E.onSectionChange()}),this.searchFiltersInput="",this.visibilitySubscription=this.gettingStartedService.filterPaneVisibility$.subscribe(function(R){E.updateIsPaneExpanded(E.navigationService.getCurrentExploration().evaluatedObjects,R.value,R.isForced)})},F.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.visibilitySubscription.unsubscribe(),this.autoCollapseSubscription.unsubscribe()},Object.defineProperty(F.prototype,"hideShowTooltip",{get:function(){return this.localizationService.get(this.isOutspacePaneVisible?"FilterPane_HidePane":"FilterPane_ShowPane")+", "+this.showHidePaneLabel},enumerable:!1,configurable:!0}),F.prototype.ngOnChanges=function(E){E.sectionObjects&&(this.updateStyle(E.sectionObjects.currentValue),this.isEditMode()&&void 0!==this.manuallyResizedWidth&&this.setResizedWidth())},F.prototype.toggle=function(){var E=this;this.isPaneExpanded=!this.isPaneExpanded,this.collapseIcon.nativeElement.focus();var k=D.boolean(this.isPaneExpanded),R=this.navigationService.getCurrentExploration();void 0===R.objects&&(R.objects={}),this.undoRedoService.register("ToggleOutspacePane",function(){h.setValue(R.objects,{objectName:"outspacePane",propertyName:"expanded"},null,k),E.eventBridge.publishToChannel(v.explorationObjectsChanged)}),this.telemetryService.logEvent(powerbi.telemetry.EXImprovedFilterExperienceToggleOutspacePaneExpansion,{expanded:this.isPaneExpanded,viewMode:x.getTelemetryViewMode(this.viewModeState.getMode())})},F.prototype.updateIsPaneExpanded=function(E,k,R){this.isPaneExpanded=R?k:r.getValue(E&&E.outspacePane,"expanded",k)},F.prototype.toggleOutspacePaneVisibility=function(){var E=this;this.isOutspacePaneVisible=!this.isOutspacePaneVisible;var k=D.boolean(this.isOutspacePaneVisible),R=this.navigationService.getCurrentExploration();this.undoRedoService.register("ToggleOutspacePaneVisibility",function(){void 0===R.objects&&(R.objects={}),h.setValue(R.objects,{objectName:"outspacePane",propertyName:"visible"},null,k),E.eventBridge.publishToChannel(v.explorationObjectsChanged)}),this.telemetryService.logEvent(powerbi.telemetry.EXImprovedFilterExperienceToggleOutspacePaneVisibility,{visible:this.isOutspacePaneVisible})},F.prototype.updateStyle=function(E){var k=E&&E.outspacePane,R=this.navigationService.getCurrentExploration(),Z=this.themeService.getVisualStyle(R.themeCollection),me=c.create(Z);this.setBackground(E,me),this.setText(k),this.setBorderColor(k),this.setBorderVisibility(k),this.setColor(E,me),this.setSearchTextSize(k),this.setInputBoxColor(E,me)},F.prototype.setBackground=function(E,k){var R=k.getColorForProperty(E,this.backgroundColorSelector,"background"),W=u.convertTransparencyToOpacity(r.getValue(E&&E.outspacePane,"transparency",p.DefaultOutspacePaneTransparency));this.backgroundColor=u.hexToRGBString(R,W)},F.prototype.setText=function(E){var k=r.getValue(E,"titleSize",p.DefaultOutspacePaneTitleSizePt);this.titleFontSize="".concat(k,"pt");var R=r.getValue(E,"fontFamily",p.DefaultOutspacePaneFontFamily);this.titleFontFamily=R},F.prototype.setSearchTextSize=function(E){var k=r.getValue(E,"searchTextSize",p.DefaultOutspaceSearchTextSizePt);this.searchTextSize="".concat(k,"pt")},F.prototype.setBorderColor=function(E){this.borderColor=r.getFillColorByPropertyName(E,"borderColor",p.DefaultOutspacePaneBorderColor)},F.prototype.setBorderVisibility=function(E){this.borderVisibility=r.getValue(E,"border",p.DefaultOutspacePaneBorder)},F.prototype.setColor=function(E,k){var R=k.getColorForProperty(E,this.foregroundColorSelector,"foreground");this.color=u.hexToRGBString(R)},F.prototype.setInputBoxColor=function(E,k){var R;R=k.getColorForProperty(E,E&&E.outspacePane&&E.outspacePane.inputBoxColor?this.inputBoxColorSelector:this.backgroundColorSelector,"background"),this.inputBoxColor=u.hexToRGBString(R)},F.prototype.onSectionChange=function(){this.setResizedWidth()},Object.defineProperty(F.prototype,"resizeEdges",{get:function(){return"rtl"===this.dir.value?{right:this.isPaneExpanded}:{left:this.isPaneExpanded}},enumerable:!1,configurable:!0}),F.prototype.onResizing=function(E){E.rectangle.width&&(this.isEditMode()?this.setContractWidth(E.rectangle.width):this.setResizedWidth(E.rectangle.width))},F.prototype.updateFilterSearchText=function(E){this.searchFiltersInput=E},F.prototype.onResizeEnd=function(){this.recurringActionInfo=void 0},F.prototype.setContractWidth=function(E){var k=this,R=this.getValueBoundByMinMax(E),W=D.integer(R),Z=this.navigationService.getCurrentSection();void 0===this.recurringActionInfo&&(this.recurringActionInfo=new N),this.undoRedoService.register("SetOutspacePaneContractWidth",function(){void 0===Z.objects&&(Z.objects={}),h.setValue(Z.objects,{objectName:"outspacePane",propertyName:"width"},null,W),k.eventBridge.publishToChannel(v.sectionObjectsChanged)},this.recurringActionInfo)},F.prototype.setResizedWidth=function(E){this.manuallyResizedWidth=E?this.getValueBoundByMinMax(E):void 0},F.prototype.getValueBoundByMinMax=function(E){return E>p.OutspacePaneMaxWidth?p.OutspacePaneMaxWidth:E<p.OutspacePaneMinWidth?p.OutspacePaneMinWidth:Math.round(E)},F.prototype.getValidationFunction=function(){return function(E){if(E.rectangle&&E.rectangle.width){var k=E.rectangle.width;return k<=p.OutspacePaneMaxWidth&&k>=p.OutspacePaneMinWidth}return!1}},F.prototype.isEditMode=function(){return 1===this.viewModeState.getMode()},F.\u0275fac=function(k){return new(k||F)(n.\u0275\u0275directiveInject(m.Is),n.\u0275\u0275directiveInject(i.J),n.\u0275\u0275directiveInject(T.vZ),n.\u0275\u0275directiveInject(f.c),n.\u0275\u0275directiveInject(O.z),n.\u0275\u0275directiveInject(M.y0),n.\u0275\u0275directiveInject(A.f),n.\u0275\u0275directiveInject(I.z),n.\u0275\u0275directiveInject(b.kc),n.\u0275\u0275directiveInject(P.o),n.\u0275\u0275directiveInject(e.O))},F.\u0275cmp=n.\u0275\u0275defineComponent({type:F,selectors:[["outspace-pane"]],viewQuery:function(k,R){var W;(1&k&&n.\u0275\u0275viewQuery(z,7),2&k)&&(n.\u0275\u0275queryRefresh(W=n.\u0275\u0275loadQuery())&&(R.collapseIcon=W.first))},inputs:{sectionObjects:"sectionObjects",isOutspacePaneVisible:"isOutspacePaneVisible"},features:[n.\u0275\u0275NgOnChangesFeature],decls:18,vars:53,consts:[["role","presentation","data-automation-type","outspacePaneGroup","mwlResizable","","keyboard-shortcuts","ctrl-F6","focus-priority","6","focus-nav-mode","Group",1,"outspacePane",3,"ngClass","ngStyle","enableGhostResize","resizeEdges","resizeCursorPrecision","resizeCursors","validateResize","resizing","resizeEnd"],[1,"paneHeader"],["role","heading","aria-level","2",1,"hiddenHeading",3,"localize"],[1,"btn","toggleBtn","pbi-borderless-button",3,"tabindex","pbiTooltip","click"],[1,"title"],[1,"glyphicon","pbi-glyph-filter","filterBtnIcon",3,"ngStyle"],[1,"titleContainer"],["id","outspace-pane-title",1,"unselectable","sidePaneTitle",3,"localize","ngStyle"],["class","btn enableFilterPane pbi-borderless-button glyphicon glyph-mini",3,"ngClass","pbiTooltip","ngStyle","click",4,"ngIf"],[1,"btn","collapseIcon","pbi-borderless-button","glyphicon","glyph-mini",3,"ngClass","pbiTooltip","ngStyle","click"],["collapseIcon",""],["id","searchBoxTheme","class","themeableElement","focus-nav-mode","Hierarchy",3,"ngStyle","initialValue","ariaLabel","searchText",4,"ngIf"],["class","searchFiltersLineBreak",4,"ngIf"],["class","paneContents",4,"ngIf"],[1,"btn","enableFilterPane","pbi-borderless-button","glyphicon","glyph-mini",3,"ngClass","pbiTooltip","ngStyle","click"],["id","searchBoxTheme","focus-nav-mode","Hierarchy",1,"themeableElement",3,"ngStyle","initialValue","ariaLabel","searchText"],[1,"searchFiltersLineBreak"],[1,"paneContents"],[3,"ngStyle","isInOutspacePane","sectionObjects","searchFiltersInput"],["filterPane",""]],template:function(k,R){1&k&&(n.\u0275\u0275elementStart(0,"article",0),n.\u0275\u0275listener("resizing",function(Z){return R.onResizing(Z)})("resizeEnd",function(){return R.onResizeEnd()}),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275element(2,"span",2),n.\u0275\u0275pipe(3,"localize"),n.\u0275\u0275elementStart(4,"button",3),n.\u0275\u0275listener("click",function(){return R.toggle()}),n.\u0275\u0275pipe(5,"localize"),n.\u0275\u0275elementStart(6,"div",4),n.\u0275\u0275element(7,"div",5),n.\u0275\u0275elementStart(8,"div",6),n.\u0275\u0275element(9,"div",7),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(10,de,1,9,"button",8),n.\u0275\u0275elementStart(11,"button",9,10),n.\u0275\u0275listener("click",function(){return R.toggle()}),n.\u0275\u0275pipe(13,"localize"),n.\u0275\u0275pipe(14,"localize"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(15,Ie,1,7,"search-box-modern",11),n.\u0275\u0275template(16,fe,1,0,"hr",12),n.\u0275\u0275template(17,pe,3,6,"div",13),n.\u0275\u0275elementEnd()),2&k&&(n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(32,ge,!R.isPaneExpanded,R.isPaneExpanded))("ngStyle",n.\u0275\u0275pureFunction5(35,be,R.backgroundColor,R.borderColor,R.borderVisibility?"1px":"0",R.paneWidth(),R.color))("enableGhostResize",!1)("resizeEdges",R.resizeEdges)("resizeCursorPrecision",5)("resizeCursors",n.\u0275\u0275pureFunction0(41,ae))("validateResize",R.getValidationFunction()),n.\u0275\u0275advance(2),n.\u0275\u0275property("localize",R.headerTitle),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(3,24,R.headerTitle)),n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("tabindex",R.isPaneExpanded?0:-1),n.\u0275\u0275property("pbiTooltip",R.isEditMode()?R.expandCollapsePaneEditModeLabel:R.expandCollapsePaneReadModeLabel),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(5,26,R.headerTitle)),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(42,q,R.color)),n.\u0275\u0275advance(2),n.\u0275\u0275property("localize",R.headerTitle)("ngStyle",n.\u0275\u0275pureFunction3(44,X,R.color,R.isPaneExpanded?R.titleFontSize:"",R.titleFontFamily)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",R.isPaneExpanded&&R.isEditMode()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(48,le,R.isPaneExpanded,!R.isPaneExpanded))("pbiTooltip",R.isEditMode()?R.expandCollapsePaneEditModeLabel:R.expandCollapsePaneReadModeLabel)("ngStyle",n.\u0275\u0275pureFunction1(51,q,R.color)),n.\u0275\u0275attribute("aria-label",R.isEditMode()?n.\u0275\u0275pipeBind1(13,28,R.headerTitle)+" "+R.expandCollapsePaneEditModeLabel:n.\u0275\u0275pipeBind1(14,30,R.headerTitle)+" "+R.expandCollapsePaneReadModeLabel)("aria-expanded",R.isPaneExpanded),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",R.showFilterPaneSearch),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",R.showFilterPaneSearch),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",R.isPaneExpanded))},dependencies:[y.NgClass,y.NgIf,y.NgStyle,C.X,d.q,g.V,S.E$,B.E,w.v,V.F],styles:['.outspacePane[_ngcontent-%COMP%]{height:100%;color:#333;position:relative;display:flex;flex-direction:column}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-style:solid;border-right-style:none}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-style:none;border-right-style:solid}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-width:1px;border-right-width:0}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-width:0;border-right-width:1px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{transform-origin:top left}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{transform-origin:top right}.outspacePane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]{cursor:pointer}.outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%]{margin-top:7px;border-color:inherit;border:1px solid;border-radius:2px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%]{margin-left:8px;margin-right:12px}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%]{margin-left:12px;margin-right:8px}.outspacePane[_ngcontent-%COMP%]   .searchFiltersLineBreak[_ngcontent-%COMP%]{border:0;width:100%;border-bottom:1px solid;border-color:inherit;margin-top:4px}.outspacePane[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%]{display:block;overflow-y:auto;overflow-y:overlay;height:100%}.outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%]{margin:11px 8px 0;width:16px;background:transparent;font-weight:var(--font-weight-semi-bold, 600)}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%]{float:left}.outspacePane[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-semi-bold, 600);vertical-align:middle}.outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;cursor:pointer}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{text-align:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{text-align:right}.outspacePane[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]{display:inline-block;text-align:center;vertical-align:middle;margin-bottom:4px}.outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{background-color:transparent;width:calc(100% - 60px)}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:right}.outspacePane[_ngcontent-%COMP%]   .enableFilterPane[_ngcontent-%COMP%]{margin:11px 8px 0;font-weight:var(--font-weight-semi-bold, 600);background-color:transparent}.hiddenHeading[_ngcontent-%COMP%]{font-size:0}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{height:initial;padding-bottom:initial}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{line-height:normal;display:inline-block;width:100%;padding-top:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:right}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]{width:calc(100% - 8px)}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:block;font-size:24px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 20px 5px 8px}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 8px 5px 20px}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin-left:12px;margin-right:unset}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin-left:unset;margin-right:12px}@media screen and (max-height: 320px){.outspacePaneExpanded[_ngcontent-%COMP%]{overflow-y:scroll!important}.outspacePaneExpanded[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%]{height:unset!important;overflow-y:visible!important}.outspacePaneExpanded[_ngcontent-%COMP%]   .filterPaneScrollWrapper.scroll-content[_ngcontent-%COMP%]{max-height:none!important}}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column-reverse;padding-bottom:20px}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]:focus{outline:none}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:right}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{line-height:normal;font-size:24px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:18px;margin-right:unset}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:unset;margin-right:18px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:right}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:6px;padding-right:unset}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:unset;padding-right:6px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform:rotate(90deg)}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform:rotate(-90deg)}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform-origin:0}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform-origin:100%}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{display:inline-block;font-size:16px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 0 4px 8px}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 8px 4px 0}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{font-size:12px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin:8px 0 9px 16px}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin:8px 16px 9px 0}',".exploreHost.landingController   .explorationContainer[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], .exploreHost.landingController   .explorationContainer   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{-webkit-transition:all .3s;transition:right .3s;right:0}.exploreHost.landingController.commentsMenuOpenTablet[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], .exploreHost.landingController.commentsMenuOpenTablet   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{right:350px;z-index:50000}.exploreHost.landingController.commentsMenuOpenTablet.inFocus   .canvasFlexBox[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], .exploreHost.landingController.commentsMenuOpenTablet.inFocus   .canvasFlexBox   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{right:0}"]}),F}(),N=function(){function F(){}return F.prototype.equals=function(E){return!!E&&this===E},F}()},86919:function(Le,oe,t){t.d(oe,{A:function(){return m}});var e=t(59214),n=t(26904),m=function(){function i(){this.modulePath="@powerbi/ExploreUI/pane-switcher.module#PaneSwitcherModule",this.componentId="PaneSwitcherComponentId"}return i.\u0275fac=function(I){return new(I||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["pane-switcher-lazy"]],decls:1,vars:2,consts:[[3,"modulePath","componentId"]],template:function(I,T){1&I&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&I&&e.\u0275\u0275property("modulePath",T.modulePath)("componentId",T.componentId)},dependencies:[n.R],encapsulation:2}),i}()},63471:function(Le,oe,t){t.d(oe,{S:function(){return C}});var e=function(){function d(g){this.annotations=g}return d.prototype.clear=function(){this.annotations=[]},d.prototype.length=function(){return this.annotations.length},d.prototype.removeAt=function(g){this.annotations.splice(g,1)},d.prototype.getAnnotation=function(g){return this.annotations[g]},d.prototype.takeAll=function(){return _.take(this.annotations,this.annotations.length)},d.prototype.push=function(g){this.annotations.push(g)},d.prototype.eraseAnnotations=function(g,S){var B=this.annotations.length;return _.remove(this.annotations,function(w){return w.polygon.lineIntersectionPoint(g,S)}),B-this.annotations.length},d}(),n=function(){function d(g){this.rect=g,this.rectContext=this.rect.getContext("2d")}return d.prototype.validateRectPos=function(g){this.loadCanvasClientRects(),0===g&&(this.rect.width!==Math.floor(this.rectPosition.width)||this.rect.height!==Math.floor(this.rectPosition.height))&&(this.rect.width=this.rectPosition.width,this.rect.height=this.rectPosition.height)},d.prototype.drawLine=function(g,S){this.rectContext.moveTo(g.x,g.y),this.rectContext.lineTo(S.x,S.y),this.rectContext.stroke()},d.prototype.loadCanvasClientRects=function(){this.rectPosition=this.rect.getBoundingClientRect(),this.canvasLeft=this.rectPosition.left,this.canvasTop=this.rectPosition.top},d.prototype.redrawAnnotations=function(g){this.loadCanvasClientRects(),this.rectContext.clearRect(0,0,this.rectPosition.width,this.rectPosition.height);for(var S=0,B=this.getAnnotations(g);S<B.length;S++)this.drawAnnotation(B[S])},d.prototype.getAnnotations=function(g){var S=g.annotationsList.takeAll(),B=[];for(var w in g.currentAnnotations)B.push(g.currentAnnotations[w]);return S.concat(B)},d.prototype.drawAnnotation=function(g){this.rectContext.beginPath(),this.setupNewPath(g);var S=g.polygon.polygonPoints;this.rectContext.moveTo(S[0].x,S[0].y);for(var B=1;B<S.length;B++)this.rectContext.lineTo(S[B].x,S[B].y);this.rectContext.stroke()},d.prototype.setupNewPath=function(g){this.rectContext.lineWidth=g.lineWidth,this.rectContext.strokeStyle=g.strokeStyle,this.rectContext.globalAlpha=g.opacity,this.rectContext.lineCap="round",this.rectContext.lineJoin="round"},d.prototype.convertToCanvasPosition=function(g,S){return{x:g-this.canvasLeft,y:S-this.canvasTop}},d}(),m=function(){function d(){this.pensAnnotationsData=[]}return d.prototype.getAnnotationMode=function(g){return this.pensAnnotationsData[g]?this.pensAnnotationsData[g].penAnnotationMode:0},d.prototype.createPenAnnotationData=function(g,S){this.pensAnnotationsData[g]={pointerId:g,penAnnotationMode:S,points:[]}},d.prototype.addPoint=function(g,S){!this.pensAnnotationsData[g]||this.pensAnnotationsData[g].points.push(S)},d.prototype.remove=function(g){delete this.pensAnnotationsData[g]},d.prototype.getPoints=function(g){return this.pensAnnotationsData[g]?this.pensAnnotationsData[g].points:[]},d.prototype.clear=function(){this.pensAnnotationsData=[]},d}(),i=t(59214),O=t(87714),I=t(20019),T=t(11719),f=powerbi.explore.services.events,M=powerbi.visuals.shapes.Polygon,A=["penAnnotationCanvas"],b="pen",C=function(){function d(g,S,B){this.eventBridge=g,this.explorationNavigation=S,this.viewModeState=B}return d.prototype.ngOnInit=function(){var g=this;this.pensAnnotationsDataHelper=new m,this.penAnnotationDrawer=new n(this.penAnnotationCanvas.nativeElement),interact.on("pointerdown",function(S){g.onPointerDown(S)}),interact.on("pointermove",function(S){g.onPointerMove(S)}),interact.on("pointerup",function(S){g.onPointerUp(S)}),this.resetViewModel(),this.eventBridge.createChannelSubscriptionManager().subscribe(f.sectionChanged,function(){return g.invalidateAnnotations()}).subscribe(f.clearAnnotations,function(){return g.clearAnnotations()})},d.prototype.ngOnDestroy=function(){var g=this;interact.off("pointerdown",function(S){g.onPointerDown(S)}),interact.off("pointermove",function(S){g.onPointerMove(S)}),interact.off("pointerup",function(S){g.onPointerUp(S)}),this.clearAnnotationsFromExploration()},d.prototype.eraseAnnotations=function(g,S){this.viewModel.annotationsList.eraseAnnotations(S,g)>0&&(this.penAnnotationDrawer.redrawAnnotations(this.viewModel),this.persistOnSection(this.viewModel.annotationsList.takeAll()))},d.prototype.onPointerDown=function(g){if(g.pointerType===b){this.penAnnotationDrawer.validateRectPos(this.viewModel.annotationsList.length());var S=this.penAnnotationDrawer.convertToCanvasPosition(g.pageX,g.pageY),B=this.isEraseEvent(g)?2:1;switch(this.pensAnnotationsDataHelper.createPenAnnotationData(g.pointerId,B),B){case 1:this.pensAnnotationsDataHelper.addPoint(g.pointerId,S),this.viewModel.currentAnnotations[g.pointerId]=this.createPenAnnotationCurve(g.pointerId);break;case 2:this.erasePrevPoint=S,this.eraseAnnotations(S,this.erasePrevPoint)}}},d.prototype.onPointerMove=function(g){if(g.pointerType===b){var S=this.penAnnotationDrawer.convertToCanvasPosition(g.pageX,g.pageY);switch(this.pensAnnotationsDataHelper.getAnnotationMode(g.pointerId)){case 1:this.pensAnnotationsDataHelper.addPoint(g.pointerId,S);var w=this.viewModel.currentAnnotations[g.pointerId];w&&(w.polygon=this.createPolygon(g.pointerId)),this.drawAnnotationAddedPoints(w);break;case 2:this.eraseAnnotations(S,this.erasePrevPoint),this.erasePrevPoint=S}}},d.prototype.onPointerUp=function(g){if(g.pointerType===b){if(1===this.pensAnnotationsDataHelper.getAnnotationMode(g.pointerId)){var B=this.viewModel.currentAnnotations[g.pointerId];B&&(B.polygon.polygonPoints.length>=10&&(this.viewModel.annotationsList.push(B),this.persistOnSection(this.viewModel.annotationsList.takeAll())),delete this.viewModel.currentAnnotations[g.pointerId])}this.pensAnnotationsDataHelper.remove(g.pointerId)}},d.prototype.drawAnnotationAddedPoints=function(g){var S=g.polygon.polygonPoints,B=S.length;B<10||(10===B?this.penAnnotationDrawer.drawAnnotation(g):this.penAnnotationDrawer.drawLine(S[B-2],S[B-1]))},d.prototype.resetViewModel=function(g){void 0===g&&(g=[]),this.viewModel={currentAnnotations:[],annotationsList:new e(g)},this.pensAnnotationsDataHelper.clear()},d.prototype.clearAnnotationsFromExploration=function(){for(var S=0,B=this.explorationNavigation.getCurrentExploration().sections;S<B.length;S++)B[S].penAnnotations=[]},d.prototype.isEraseEvent=function(g){return 5===g.button||!g.isPrimary&&0===g.pressure},d.prototype.persistOnSection=function(g){var S=this.explorationNavigation.getCurrentSection();S&&(S.penAnnotations=g)},d.prototype.getAnnotationsFromSection=function(){return this.explorationNavigation.getCurrentSection().penAnnotations||[]},d.prototype.clearAnnotations=function(){this.persistOnSection([]),this.invalidateAnnotations()},d.prototype.invalidateAnnotations=function(){var g=this.getAnnotationsFromSection();this.resetViewModel(g),this.penAnnotationDrawer.redrawAnnotations(this.viewModel)},d.prototype.createPenAnnotationCurve=function(g){var S=this.viewModeState.getConfig();return{polygon:this.createPolygon(g),lineWidth:S.penProperties.lineWidth,strokeStyle:S.penProperties.strokeStyle,opacity:S.penProperties.opacity}},d.prototype.createPolygon=function(g){for(var S=[],B=0,w=this.pensAnnotationsDataHelper.getPoints(g);B<w.length;B++){var V=w[B];S.push(V.x),S.push(V.y)}return new M(new Float64Array(S))},d.\u0275fac=function(S){return new(S||d)(i.\u0275\u0275directiveInject(O.J),i.\u0275\u0275directiveInject(I.z),i.\u0275\u0275directiveInject(T.kc))},d.\u0275cmp=i.\u0275\u0275defineComponent({type:d,selectors:[["pen-annotation"]],viewQuery:function(S,B){var w;(1&S&&i.\u0275\u0275viewQuery(A,7),2&S)&&(i.\u0275\u0275queryRefresh(w=i.\u0275\u0275loadQuery())&&(B.penAnnotationCanvas=w.first))},decls:2,vars:0,consts:[[1,"penAnnotationCanvas"],["penAnnotationCanvas",""]],template:function(S,B){1&S&&i.\u0275\u0275element(0,"canvas",0,1)},styles:[".penAnnotationCanvas[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:9999;pointer-events:none}"]}),d}()},70557:function(Le,oe,t){t.d(oe,{C:function(){return m}});var e=t(59214),n=t(26904),m=function(){function i(){this.modulePath="@powerbi/ExploreUI/performance-pane.module#PerformancePaneModule",this.componentId="PerformancePaneComponentId"}return i.\u0275fac=function(I){return new(I||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["performance-pane-lazy"]],decls:1,vars:2,consts:[[3,"modulePath","componentId"]],template:function(I,T){1&I&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&I&&e.\u0275\u0275property("modulePath",T.modulePath)("componentId",T.componentId)},dependencies:[n.R],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:column}"]}),i}()},88661:function(Le,oe,t){t.d(oe,{i:function(){return P}});var e=t(59214),n=t(81602),m=t(93460),i=t(47954),O=t(6067),I=t(26904),T=t(45647),f=t(76845),M=t(67455);function A(y,C){1&y&&e.\u0275\u0275element(0,"pbi-lazy-load",3)}function b(y,C){1&y&&(e.\u0275\u0275elementStart(0,"section",4),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementStart(2,"header"),e.\u0275\u0275element(3,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",6),e.\u0275\u0275element(5,"pbi-spinner",7),e.\u0275\u0275elementEnd()()),2&y&&e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,1,"DataLoaderSpinner_LoadingMessage1"))}var P=function(){function y(C,d,g){this.lazyScoped=C,this.lazyProvider=d,this.pbiLazyLoad=g}return y.prototype.ngOnInit=function(){var C=this;this.loaded=this.pbiLazyLoad.load(powerbi.explore.modules.ExploreUIShellModule).then(function(){return C.lazyScoped.get("fieldWellViewModelService")}).then(function(){return C.lazyProvider.getModule("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule")})},y.\u0275fac=function(d){return new(d||y)(e.\u0275\u0275directiveInject(n.H),e.\u0275\u0275directiveInject(m.E),e.\u0275\u0275directiveInject(i.Q))},y.\u0275cmp=e.\u0275\u0275defineComponent({type:y,selectors:[["ng-component"]],decls:5,vars:4,consts:[[1,"no-outline","themeableElement"],["modulePath","./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule","componentId","PersonalizeVisualComponentId",4,"ngIf","ngIfElse"],["loading",""],["modulePath","./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule","componentId","PersonalizeVisualComponentId"],["tabindex","0",1,"pbi-depth-2","themeableElement"],["localize","PersonalizeVisual_MainMenuLabel",1,"fluentTheme-vlg-semibold"],[1,"loading"],[1,"pbi-spinner-medium"]],template:function(d,g){if(1&d&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,A,1,0,"pbi-lazy-load",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,b,6,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&d){var S=e.\u0275\u0275reference(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,g.loaded))("ngIfElse",S)}},dependencies:[O.NgIf,I.R,T.X,f.k,O.AsyncPipe,M.F],styles:["section[_ngcontent-%COMP%]{width:240px;background:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-radius:2px;box-sizing:border-box;height:300px;display:flex;flex-direction:column;padding:12px 24px 24px}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-alt-color, #333333);margin-bottom:16px}.loading[_ngcontent-%COMP%]{display:flex;height:100%}.loading[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin:auto}.no-outline[_ngcontent-%COMP%]{outline:none}"],changeDetection:0}),y}()},54902:function(Le,oe,t){t.d(oe,{E:function(){return Ct}});var e=t(86390),n=powerbi.data.RelativeDateFilterPattern,m=powerbi.data.RelativeDateQualifier,i=powerbi.data.RelativeDateUnit,O={relativeQualifier:m.Last,duration:null,relativeUnit:i.Day,includeToday:!0},I=function(){function Ue(){}return Ue.prototype.getDefaultOptions=function(){return O},Ue.prototype.getRelativeUnitsAll=function(ke){return[{value:i.Day,text:ke.get("RelativeDateUnit_Days")},{value:i.Week,text:ke.get("RelativeDateUnit_Weeks")},{value:i.CalendarWeek,text:ke.get("RelativeDateUnit_CalendarWeeks")},{value:i.Month,text:ke.get("RelativeDateUnit_Months")},{value:i.CalendarMonth,text:ke.get("RelativeDateUnit_CalendarMonths")},{value:i.Year,text:ke.get("RelativeDateUnit_Years")},{value:i.CalendarYear,text:ke.get("RelativeDateUnit_CalendarYears")}]},Ue.prototype.getCurrentRelativeUnits=function(ke){return[{value:i.Day,text:ke.get("RelativeDateUnit_Day")},{value:i.Week,text:ke.get("RelativeDateUnit_Week")},{value:i.Month,text:ke.get("RelativeDateUnit_Month")},{value:i.Year,text:ke.get("RelativeDateUnit_Year")}]},Ue.prototype.isIncludeTodayApplicable=function(ke,We){return ke.value!==m.Current&&!n.isCalendarPeriod(We.value)},Ue.prototype.onRelativeQualifierChanged=function(ke,We,ze){if(ke.value===m.Current){var ve=We.value;switch(We.value){case i.CalendarWeek:ve=i.Week;break;case i.CalendarMonth:ve=i.Month;break;case i.CalendarYear:ve=i.Year}return _.find(ze,function(a){return a.value===ve})}},Ue}(),T=powerbi.data.RelativeDateQualifier,f=powerbi.data.RelativeDateUnit,M={relativeQualifier:T.Last,duration:null,relativeUnit:f.Hour,includeToday:!0},A=function(){function Ue(){}return Ue.prototype.getDefaultOptions=function(){return M},Ue.prototype.getRelativeUnitsAll=function(ke){return[{value:f.Minute,text:ke.get("TimeUnit_Minutes_Lowercase")},{value:f.Hour,text:ke.get("TimeUnit_Hours_Lowercase")}]},Ue.prototype.getCurrentRelativeUnits=function(ke){return[{value:f.Minute,text:ke.get("Insights_MinutesSingular")},{value:f.Hour,text:ke.get("Insights_HoursSingular")}]},Ue.prototype.isIncludeTodayApplicable=function(){return!1},Ue.prototype.onRelativeQualifierChanged=function(ke,We,ze){if(ke.value===T.Current){var ve=We.value;We=_.find(ze,function(a){return a.value===ve})}},Ue}(),b=powerbi.explore.contracts.FilterType,P=powerbi.data.RelativeDateFilterPattern,y=powerbi.data.RelativeDateQualifier,C=powerbi.data.RelativeFilterType,v=t(84452),c=t(84634),u=t(55858),r=t(59214),h=jsCommon.NumberExtensions,p=powerbi.data.RelativeDateRangeHelper,D=powerbi.data.RelativeDateQualifier,x=powerbi.data.RelativeFilterType,z=function(){function Ue(ke,We,ze,ve){this.relativeFilterViewModelComponent=function(Ue){switch(Ue){case C.Time:return new A;case C.Date:return new I;default:return null}}(ze),ve||(ve=this.relativeFilterViewModelComponent.getDefaultOptions()),this.dateField=ke,this.duration=ve.duration,this.anchorDate=ve.anchorDate,this.localizationService=We,this.includeToday=function(Ue,ke){switch(Ue){case C.Time:return!0;case C.Date:return ke;default:return!1}}(ze,ve.includeToday),this.showInputWarning=!1,this.populateRelativeQualifiers(ve.relativeQualifier),this.populateRelativeUnits(ve.relativeUnit)}return Ue.prototype.populateRelativeQualifiers=function(ke){this.relativeQualifiers=[{value:D.Last,text:this.localizationService.get("RelativeDateQualifier_Last")},{value:D.Current,text:this.localizationService.get("RelativeDateQualifier_Current")},{value:D.Next,text:this.localizationService.get("RelativeDateQualifier_Next")}],this.relativeQualifier=_.find(this.relativeQualifiers,function(We){return We.value===ke})},Ue.prototype.populateRelativeUnits=function(ke){this.relativeUnitsAll=this.relativeFilterViewModelComponent.getRelativeUnitsAll(this.localizationService),this.relativeUnitsCurrent=this.relativeFilterViewModelComponent.getCurrentRelativeUnits(this.localizationService),this.relativeUnit=_.find(this.relativeUnitsAll,function(We){return We.value===ke})},Ue.prototype.isDurationApplicable=function(){return this.relativeQualifier.value!==D.Current},Ue.prototype.isDurationWithinRange=function(){return this.duration>0&&this.duration<=this.getDurationMax()&&!h.isDecimal(this.duration)||this.relativeQualifier.value===D.Current},Ue.prototype.isIncludeTodayApplicable=function(){return this.relativeFilterViewModelComponent.isIncludeTodayApplicable(this.relativeQualifier,this.relativeUnit)},Ue.prototype.onRelativeQualifierChanged=function(){var ke=this.relativeFilterViewModelComponent.onRelativeQualifierChanged(this.relativeQualifier,this.relativeUnit,this.relativeUnitsAll);ke&&(this.relativeUnit=ke)},Ue.prototype.getDurationMax=function(){return p.getDurationMax(this.relativeQualifier.value,this.relativeUnit.value)},Ue.prototype.getRestatement=function(ke,We){var ze=this,ve=this.getRelativeDateRangeOptions();return p.getRestatement(ve,ke,function(l,s){return ze.localizationService.format(l,s)},We)},Ue.prototype.getRelativeDateRangeOptions=function(){return{duration:this.duration,includeToday:this.includeToday,relativeUnit:this.relativeUnit.value,relativeQualifier:this.relativeQualifier.value,anchorDate:this.anchorDate}},Ue.prototype.clearShowInputWarningAndPendingClear=function(){this.hasPendingClear=void 0,this.showInputWarning=void 0},Ue.prototype.updateShowInputWarning=function(ke,We){this.showInputWarning=ke&&We?ke&&-1!==ke.indexOf(We.toString()):this.showInputWarning&&(this.duration<=0||h.isDecimal(this.duration))},Ue.prototype.setupPendingClear=function(){this.showInputWarning=!1,this.duration=void 0,this.hasPendingClear=!0},Ue.createRelativeFilterViewModel=function(ke,We,ze,ve){switch(ke){case x.Time:return new Ue(We,ze,x.Time,ve);case x.Date:return new Ue(We,ze,x.Date,ve);default:return null}},Ue}(),Q=t(51081),q=t(78099),de=t(7772),se=t(89718),Ie=t(87714),fe=t(20019),re=t(43801),pe=t(17663),ge=t(22422),be=t(64857),ae=t(89515),X=t(92119),le=t(44302),ee=t(11719),N=t(41844),F=t(26963),E=t(6067),k=t(45647),R=t(51186),W=t(76695),Z=t(66293),me=t(80041),_e=t(72227),he=t(63694),G=t(3597),ce=powerbi.explore.contracts.FilterType,Fe=powerbi.explore.FilterUtils,je=powerbi.data.RelativeDateFilterPattern,Oe=powerbi.data.RelativeFilterType,J=jsCommon.Utility,ue=function(ke,We,ze,ve){return{"background-color":ke,color:We,"border-color":ze,"font-family":ve}};function Me(Ue,ke){if(1&Ue&&(r.\u0275\u0275elementStart(0,"mat-option",11),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&Ue){var We=ke.$implicit,ze=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("value",We)("ngStyle",r.\u0275\u0275pureFunction4(3,ue,ze.viewModel.inputBoxBackgroundColor,ze.viewModel.inputBoxForegroundColor,ze.viewModel.inputBoxBorderColor,ze.viewModel.fontFamily)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",We.text,"")}}var Se=function(ke,We,ze){return{"background-color":ke,color:We,"border-color":ze}};function Ge(Ue,ke){if(1&Ue){var We=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"input",12),r.\u0275\u0275listener("ngModelChange",function(a){r.\u0275\u0275restoreView(We);var o=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(o.vm.duration=a)}),r.\u0275\u0275elementEnd()}if(2&Ue){var ze=r.\u0275\u0275nextContext(2);r.\u0275\u0275classProp("filterInputWarningBorder",ze.vm.showInputWarning),r.\u0275\u0275propertyInterpolate("placeholder","1-"+ze.vm.getDurationMax()),r.\u0275\u0275property("ngModel",ze.vm.duration)("ngStyle",r.\u0275\u0275pureFunction3(7,Se,ze.viewModel.inputBoxBackgroundColor,ze.viewModel.inputBoxForegroundColor,ze.viewModel.inputBoxBorderColor))("pbiTooltip",ze.slicerDurationName),r.\u0275\u0275attribute("aria-label",ze.slicerDurationName)}}function nt(Ue,ke){if(1&Ue&&(r.\u0275\u0275elementStart(0,"mat-option",11),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&Ue){var We=ke.$implicit,ze=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("value",We)("ngStyle",r.\u0275\u0275pureFunction4(3,ue,ze.viewModel.inputBoxBackgroundColor,ze.viewModel.inputBoxForegroundColor,ze.viewModel.inputBoxBorderColor,ze.viewModel.fontFamily)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",We.text,"")}}function st(Ue,ke){if(1&Ue){var We=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"mat-select",13),r.\u0275\u0275listener("ngModelChange",function(a){r.\u0275\u0275restoreView(We);var o=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(o.vm.relativeUnit=a)}),r.\u0275\u0275template(1,nt,2,8,"mat-option",5),r.\u0275\u0275elementEnd()}if(2&Ue){var ze=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngModel",ze.vm.relativeUnit)("ngStyle",r.\u0275\u0275pureFunction4(7,ue,ze.viewModel.inputBoxBackgroundColor,ze.viewModel.inputBoxForegroundColor,ze.viewModel.inputBoxBorderColor,ze.viewModel.fontFamily))("pbiTooltip",ze.slicerPeriodFieldName)("aria-label",ze.slicerPeriodFieldName)("compareWith",ze.compareRelativeUnit)("panelClass",ze.newPaneColors),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",ze.vm.relativeUnitsAll)}}function yt(Ue,ke){if(1&Ue&&(r.\u0275\u0275elementStart(0,"mat-option",11),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&Ue){var We=ke.$implicit,ze=r.\u0275\u0275nextContext(3);r.\u0275\u0275property("value",We)("ngStyle",r.\u0275\u0275pureFunction4(3,ue,ze.viewModel.inputBoxBackgroundColor,ze.viewModel.inputBoxForegroundColor,ze.viewModel.inputBoxBorderColor,ze.viewModel.fontFamily)),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",We.text,"")}}function Ae(Ue,ke){if(1&Ue){var We=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"mat-select",14),r.\u0275\u0275listener("ngModelChange",function(a){r.\u0275\u0275restoreView(We);var o=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(o.vm.relativeUnit=a)}),r.\u0275\u0275template(1,yt,2,8,"mat-option",5),r.\u0275\u0275elementEnd()}if(2&Ue){var ze=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("ngModel",ze.vm.relativeUnit)("ngStyle",r.\u0275\u0275pureFunction4(7,ue,ze.viewModel.inputBoxBackgroundColor,ze.viewModel.inputBoxForegroundColor,ze.viewModel.inputBoxBorderColor,ze.viewModel.fontFamily))("compareWith",ze.compareRelativeUnit)("panelClass",ze.newPaneColors)("pbiTooltip",ze.slicerPeriodFieldName)("aria-label",ze.slicerPeriodFieldName),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",ze.vm.relativeUnitsCurrent)}}var Ve=function(ke,We){return{color:ke,"font-family":We}};function xe(Ue,ke){if(1&Ue){var We=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",15)(1,"mat-checkbox",16),r.\u0275\u0275listener("ngModelChange",function(a){r.\u0275\u0275restoreView(We);var o=r.\u0275\u0275nextContext(2);return r.\u0275\u0275resetView(o.vm.includeToday=a)}),r.\u0275\u0275element(2,"span",17),r.\u0275\u0275elementEnd()()}if(2&Ue){var ze=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("aria-label",ze.includeTodayLabel),r.\u0275\u0275property("matCheckBoxColor",ze.viewModel.checkboxAndApplyColor)("matCheckBoxColorIsChecked",ze.vm.includeToday)("ngModel",ze.vm.includeToday)("ngStyle",r.\u0275\u0275pureFunction2(7,Ve,ze.viewModel.inputBoxForegroundColor,ze.viewModel.fontFamily))("pbiTooltip",ze.includeTodayName)("pbiTooltipAlwaysShow",!0)}}function Pe(Ue,ke){if(1&Ue&&r.\u0275\u0275element(0,"button",18),2&Ue){var We=r.\u0275\u0275nextContext(2);r.\u0275\u0275property("disabled",!We.canApplyFilter())("pbiTooltip",We.applyFilterDescriptionName)}}var et=function(ke){return{invalid:ke}},$e=function(ke){return{"font-size":ke}};function lt(Ue,ke){if(1&Ue){var We=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"form",1),r.\u0275\u0275listener("ngSubmit",function(){r.\u0275\u0275restoreView(We);var a=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(a.handleSubmit())}),r.\u0275\u0275element(1,"h3",2),r.\u0275\u0275elementStart(2,"div",3)(3,"mat-select",4),r.\u0275\u0275listener("ngModelChange",function(a){r.\u0275\u0275restoreView(We);var o=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(o.vm.relativeQualifier=a)})("ngModelChange",function(){r.\u0275\u0275restoreView(We);var a=r.\u0275\u0275nextContext();return r.\u0275\u0275resetView(a.vm.onRelativeQualifierChanged())}),r.\u0275\u0275template(4,Me,2,8,"mat-option",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(5,Ge,1,11,"input",6),r.\u0275\u0275template(6,st,2,12,"mat-select",7),r.\u0275\u0275template(7,Ae,2,12,"mat-select",8),r.\u0275\u0275template(8,xe,3,10,"div",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(9,Pe,1,2,"button",10),r.\u0275\u0275elementEnd()}if(2&Ue){var ze=r.\u0275\u0275nextContext();r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(15,et,ze.viewModel.isInvalidCardType()))("ngStyle",r.\u0275\u0275pureFunction1(17,$e,ze.viewModel.fontSize))("formGroup",ze.relativeFilterForm),r.\u0275\u0275advance(1),r.\u0275\u0275property("pbiTooltip",ze.showItemsWhenValueName),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngModel",ze.vm.relativeQualifier)("ngStyle",r.\u0275\u0275pureFunction4(19,ue,ze.viewModel.inputBoxBackgroundColor,ze.viewModel.inputBoxForegroundColor,ze.viewModel.inputBoxBorderColor,ze.viewModel.fontFamily))("pbiTooltip",ze.slicerDateRangeName)("aria-label",ze.slicerDateRangeName)("panelClass",ze.newPaneColors),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",ze.vm.relativeQualifiers),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",ze.vm.isDurationApplicable()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",ze.vm.isDurationApplicable()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!ze.vm.isDurationApplicable()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",ze.vm.isIncludeTodayApplicable()),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!ze.isApplyAllOnForThisFilter())}}var Ct=function(){function Ue(ke,We,ze,ve,a,o,l,s,L,U,H,ne,te,Ce,ye,we,Te){var De=this;this.aggrOps=ke,this.conceptualSchemaProxy=We,this.contextActivityService=ze,this.dataSources=ve,this.eventBridge=a,this.explorationCapabilities=o,this.explorationNavigation=l,this.featureSwitchService=s,this.localizationService=L,this.networkAvailabilityService=U,this.ngZone=H,this.telemetryService=ne,this.undoRedo=te,this.viewModeState=Ce,this.visualAuthoring=ye,this.visualPlugin=we,this.visualTimeSynchronizationService=Te,this.onFilterChanged=new r.EventEmitter,this.slicerDateRangeName=this.localizationService.get("Slicer_DateRange"),this.slicerDurationName=this.localizationService.get("Duration"),this.slicerPeriodFieldName=this.localizationService.get("DaxTemplates_PeriodField"),this.showItemsWhenValueName=this.localizationService.get("ShowItemsWhenValue"),this.applyFilterDescriptionName=this.localizationService.get("Filter_ApplyFilterDescription"),this.includeTodayName=this.localizationService.get("RelativeDateFilter_IncludeToday"),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.explore.services.events.applyAllClicked,function(Re,Ze){return De.onApplyAllClicked(Ze)}).subscribe(powerbi.explore.services.events.explorationSlowDataSourceSettingsLoaded,function(Re,Ze){return De.ngZone.run(function(){Ze.isApplyAllButtonEnabledChanged&&De.vm.clearShowInputWarningAndPendingClear()})}).subscribe(powerbi.explore.services.events.filterContainerChanged,function(Re,Ze){return De.onFilterContainerChanged(Ze)}),this.newPaneColors=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign?"pbi-modern-select-panel themeableElement":"pbi-modern-select-old-panel themeableElement"}return Ue.prototype.ngOnInit=function(){var ke=this;this.relativeFilterType=function(Ue){switch(Ue){case b.RelativeTime:return C.Time;case b.RelativeDate:return C.Date;default:return"The following filterType is not a relativeDate or relativeTime: ".concat(Ue),C.Unsupported}}(this.filterType),this.relativeFilterForm=new u.nJ({qualifier:new u.p4,duration:new u.p4,unitsAll:new u.p4,unitsCurrent:new u.p4,includeToday:new u.p4}),this.isApplyAllOnForThisFilter()&&(this.formChanges$=this.relativeFilterForm.valueChanges.pipe((0,v.b)(500),(0,c.b)(function(){return ke.onModelChanged()})).subscribe()),this.filterForm=new e.h(this.relativeFilterForm),this.currentZone=this.explorationNavigation.getCurrentZone(),this.ngZone.run(function(){return ke.onInitImpl()})},Ue.prototype.onInitImpl=function(){this.viewModel.setServices(void 0,void 0,this.viewModeState),this.initializeViewModel(this.viewModel.contract),this.includeTodayLabel=this.localizationService.get("RelativeDateFilter_IncludeToday")},Ue.prototype.ngOnDestroy=function(){this.formChanges$&&this.formChanges$.unsubscribe(),this.subscriptionManager.unsubscribeAll()},Ue.prototype.handleSubmit=function(){this.isApplyAllOnForThisFilter()||this.applyFilter()},Ue.prototype.compareRelativeUnit=function(ke,We){return ke.value===We.value},Ue.prototype.applyFilter=function(ke){var We=this;if(this.canApplyFilter()){var ze;this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(ze=Fe.createChangeFilterActivity(this.contextActivityService,this.relativeFilterType===Oe.Date?"Relative Date Filter":"Relative Time Filter")),document.activeElement.blur(),this.viewModel.contract.type=function(Ue){switch(Ue){case C.Time:return b.RelativeTime;case C.Date:return b.RelativeDate;default:return null}}(this.relativeFilterType);var a=function(Ue){switch(Ue){case C.Time:return"ApplyRelativeTimeFilter";case C.Date:return"ApplyRelativeDateFilter";default:return"unknown command"}}(this.relativeFilterType),o=this.dataSources.get();this.conceptualSchemaProxy.get(o).then(function(l){We.undoRedo.register(a,function(){var s=We.vm.getRelativeDateRangeOptions();We.logFilterAppliedTelemetry(s,function(){var L=We.vm.isDurationWithinRange()?je.buildSemanticFilter({field:We.vm.dateField,options:s}):void 0;We.visualAuthoring.updateFilter(We.viewModel.getFilterContainerScope(),We.viewModel.contract,L),We.viewModel.useDefaultFilter=!1,We.filterForm.setPristine(),L?We.updateRestatement():We.clearRestatement(),We.onFilterChanged.emit({args:{filter:We.viewModel.contract,changeType:2,scope:We.viewModel.getFilterContainerScope(),changeFilterActivity:ze}}),ze&&ze.resolve()})},ke)})}},Ue.prototype.canApplyFilter=function(){return this.viewModel&&!this.viewModel.isInvalidCardType()&&this.vm&&this.vm.relativeUnit&&this.vm.relativeQualifier&&(this.vm.hasPendingClear||this.vm.isDurationWithinRange()&&this.filterForm&&this.filterForm.isDirty()&&this.filterForm.isValid())},Ue.prototype.isApplyAllOnForThisFilter=function(){var ke=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return Fe.isApplyAllEnabled(this.viewModel.isInOutspacePane||ke,this.explorationNavigation)},Ue.prototype.onApplyAllClicked=function(ke){this.isApplyAllOnForThisFilter()&&(ke.idsInError?this.vm.updateShowInputWarning(ke.idsInError,this.viewModel.id):(this.applyFilter(ke.undoRedoActionId),this.vm.clearShowInputWarningAndPendingClear()))},Ue.prototype.onModelChanged=function(){!this.isApplyAllOnForThisFilter()||!this.filterForm.isDirty()||(this.vm.isDurationApplicable()&&null===this.vm.duration&&!this.vm.hasPendingClear?Fe.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.contract.type,this.viewModel.id,!0,!0):Fe.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.contract.type,this.viewModel.id,this.canApplyFilter()),this.vm.updateShowInputWarning())},Ue.prototype.initializeViewModel=function(ke){var We=this,ze=this.dataSources.get();this.conceptualSchemaProxy.get(ze).then(function(ve){var a=je.extractParametersFromSemanticFilter(ke.filter,We.relativeFilterType);We.vm=z.createRelativeFilterViewModel(We.relativeFilterType,ke.expression||a&&a.field,We.localizationService,a&&a.options),We.viewModel.updateFilterProperties(ve,We.visualPlugin,We.aggrOps),We.viewModel.updateViewState(),a?We.updateRestatement():(We.filterForm.setDirty(),ke.filter||We.clearRestatement())})},Ue.prototype.logFilterAppliedTelemetry=function(ke,We){var ze=function(Ue,ke,We,ze,ve){switch(Ue){case C.Time:return ke.startEvent(powerbi.telemetry.EXFilterPaneRelativeTimeFilterApplied,{relativeQualifier:y[ve.relativeQualifier],duration:ve.duration,relativeUnit:powerbi.data.RelativeDateUnit[ve.relativeUnit],viewMode:powerbi.explore.util.getTelemetryViewMode(We.getMode()),isInOutspacePane:ze});case C.Date:return ke.startEvent(powerbi.telemetry.EXFilterPaneRelativeDateFilterApplied,{relativeQualifier:y[ve.relativeQualifier],duration:ve.duration,relativeUnit:powerbi.data.RelativeDateUnit[ve.relativeUnit],includeToday:ve.includeToday,isCalendarPeriod:P.isCalendarPeriod(ve.relativeUnit),viewMode:powerbi.explore.util.getTelemetryViewMode(We.getMode()),isInOutspacePane:ze});default:return null}}(this.relativeFilterType,this.telemetryService,this.viewModeState,this.viewModel.isInOutspacePane,ke);try{We(),ze.resolve()}catch(ve){throw ze.reject(),J.ensureError(ve)}},Ue.prototype.onFilterContainerChanged=function(ke){ke.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(ke.changeType,10)?this.onFilterClear(ke):ke.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(ke.changeType,2)&&this.initializeViewModel(ke.filter)},Ue.prototype.onFilterClear=function(ke){this.isApplyAllOnForThisFilter()?(this.vm.setupPendingClear(),this.filterForm.setDirty(),this.vm.isDurationApplicable()||(this.vm.relativeQualifier.value=powerbi.data.RelativeDateQualifier.Last),Fe.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,ce.TopN,this.viewModel.id,!0)):this.initializeViewModel(ke.filter)},Ue.prototype.updateRestatement=function(){var ke=this.visualTimeSynchronizationService?this.visualTimeSynchronizationService.getAnchorTime():void 0,We=this.viewModel.isFilterExpanded()&&this.networkAvailabilityService.isNetworkAvailable();this.viewModel.setRestatement(this.vm.getRestatement(We,ke))},Ue.prototype.clearRestatement=function(){this.viewModel.setRestatement(void 0)},Ue.\u0275fac=function(We){return new(We||Ue)(r.\u0275\u0275directiveInject(Q.C),r.\u0275\u0275directiveInject(q.i),r.\u0275\u0275directiveInject(de.r),r.\u0275\u0275directiveInject(se.D),r.\u0275\u0275directiveInject(Ie.J),r.\u0275\u0275directiveInject(ge.U),r.\u0275\u0275directiveInject(fe.z),r.\u0275\u0275directiveInject(be.vZ),r.\u0275\u0275directiveInject(ae.o),r.\u0275\u0275directiveInject(X.SW),r.\u0275\u0275directiveInject(r.NgZone),r.\u0275\u0275directiveInject(le.y0),r.\u0275\u0275directiveInject(re.z),r.\u0275\u0275directiveInject(ee.kc),r.\u0275\u0275directiveInject(N.$),r.\u0275\u0275directiveInject(F.D),r.\u0275\u0275directiveInject(pe.a))},Ue.\u0275cmp=r.\u0275\u0275defineComponent({type:Ue,selectors:[["relative-filter"]],inputs:{filterType:"filterType",viewModel:"viewModel"},outputs:{onFilterChanged:"onFilterChanged"},decls:1,vars:1,consts:[["class","relativeFilter",3,"ngClass","ngStyle","formGroup","ngSubmit",4,"ngIf"],[1,"relativeFilter",3,"ngClass","ngStyle","formGroup","ngSubmit"],["localize","ShowItemsWhenValue",1,"description",3,"pbiTooltip"],[1,"relativeFilterSettings"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","formControlName","qualifier","disableOptionCentering","true",1,"filterInput","pbi-modern-select",3,"ngModel","ngStyle","pbiTooltip","aria-label","panelClass","ngModelChange"],[3,"value","ngStyle",4,"ngFor","ngForOf"],["class","filterInput pbi-modern-input","type","number","formControlName","duration",3,"ngModel","filterInputWarningBorder","ngStyle","pbiTooltip","placeholder","ngModelChange",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","class","filterInput pbi-modern-select","formControlName","unitsAll","disableOptionCentering","true",3,"ngModel","ngStyle","pbiTooltip","aria-label","compareWith","panelClass","ngModelChange",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","class","filterInput pbi-modern-select","formControlName","unitsCurrent","disableOptionCentering","true",3,"ngModel","ngStyle","compareWith","panelClass","pbiTooltip","aria-label","ngModelChange",4,"ngIf"],["class","footerSection",4,"ngIf"],["type","submit","class","applyFilter smallFontSize","localize","Filter_ApplyFilter",3,"disabled","pbiTooltip",4,"ngIf"],[3,"value","ngStyle"],["type","number","formControlName","duration",1,"filterInput","pbi-modern-input",3,"ngModel","ngStyle","pbiTooltip","placeholder","ngModelChange"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","formControlName","unitsAll","disableOptionCentering","true",1,"filterInput","pbi-modern-select",3,"ngModel","ngStyle","pbiTooltip","aria-label","compareWith","panelClass","ngModelChange"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","formControlName","unitsCurrent","disableOptionCentering","true",1,"filterInput","pbi-modern-select",3,"ngModel","ngStyle","compareWith","panelClass","pbiTooltip","aria-label","ngModelChange"],[1,"footerSection"],["pbiTooltipCheckChildren","true","localizeTooltip","RelativeDateFilter_IncludeToday","formControlName","includeToday",1,"pbi-checkbox",3,"matCheckBoxColor","matCheckBoxColorIsChecked","ngModel","ngStyle","aria-label","pbiTooltip","pbiTooltipAlwaysShow","ngModelChange"],["localize","RelativeDateFilter_IncludeToday"],["type","submit","localize","Filter_ApplyFilter",1,"applyFilter","smallFontSize",3,"disabled","pbiTooltip"]],template:function(We,ze){1&We&&r.\u0275\u0275template(0,lt,10,24,"form",0),2&We&&r.\u0275\u0275property("ngIf",void 0!==ze.vm)},dependencies:[E.NgClass,E.NgForOf,E.NgIf,E.NgStyle,u._Y,u.Fj,u.wV,u.JJ,u.JL,k.X,R.r,W.N,Z.oG,me.gD,_e.ey,he.V,u.sg,u.u,G.x],styles:['.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666)}.description[_ngcontent-%COMP%]{margin:12px 0 6px}.relativeFilterSettings[_ngcontent-%COMP%]   .filterInput[_ngcontent-%COMP%]{margin-bottom:4px;width:100%;box-sizing:border-box;border:1px solid var(--neutral-dark-color, #212121);min-height:24px}html:not([dir="rtl"])[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]{margin:6px 0 3px 3px}html[dir="rtl"][_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]{margin:6px 3px 3px 0}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]    {margin-bottom:0;display:inline-block;vertical-align:middle}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{color:inherit}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label span.mat-checkbox-label{font-size:inherit;font-family:inherit}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label div.mat-checkbox-inner-container{width:16px;height:16px}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle}html:not([dir="rtl"])[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 0 0 4px}html[dir="rtl"][_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 4px 0 0}.relativeFilterSettings[_ngcontent-%COMP%]   input.filterInput.pbi-modern-input[_ngcontent-%COMP%]{font-size:inherit;font-family:inherit}.filterPaneModern   .card[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label, .filterPaneModern   .card   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{color:inherit;font-family:inherit;line-height:unset}.filterPaneModern   .card[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .formLabel, .filterPaneModern   .card   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .formLabel, .filterPaneModern   .card[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .checkbox, .filterPaneModern   .card   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .checkbox{font-size:unset}.newPaneColors.explorationContainer[_nghost-%COMP%]   .relativeFilter.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .relativeFilter.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%]{color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .filterInput[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .filterInput[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]    , .newPaneColors.explorationContainer   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]    {color:inherit}',".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px;padding:0 8px;background-color:var(--fluentThemeNeutralLighterAltColor);margin:0 0 15px;border:0px;border-bottom:1px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-select-value, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-select-value{padding:0}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-background, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-background{background-color:var(--fluentThemeNeutralLighterAltColor);border:solid 1px var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checked, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checked, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checkmark-path, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checkmark-path{stroke:var(--fluentThemeNeutralDarkColor)!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox:not(.mat-checkbox-checked) .mat-checkbox-checkmark-path, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox:not(.mat-checkbox-checked) .mat-checkbox-checkmark-path{display:none}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}"]}),Ue}()},86036:function(Le,oe,t){t.d(oe,{u:function(){return f}});var e=t(84634),n=t(59214),m=t(4255),i=t(6067),O=t(26904);function I(M,A){if(1&M&&n.\u0275\u0275element(0,"pbi-lazy-load",3),2&M){var b=A.ngIf;n.\u0275\u0275property("modulePath",b.componentManifest.modulePath)("componentId",b.componentManifest.componentId)("inputArgs",b.componentManifest.inputArgs)}}function T(M,A){if(1&M&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275pipe(1,"async"),n.\u0275\u0275template(2,I,1,3,"pbi-lazy-load",2),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd()),2&M){var P,b=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",null==(P=n.\u0275\u0275pipeBind1(1,2,b.sideFlyoutConfig$))?null:P.paneClass),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(3,4,b.sideFlyoutConfig$))}}var f=function(){function M(A,b){this.sideFlyoutService=A,this.changeDetector=b}return M.prototype.ngOnInit=function(){var A=this;this.shouldShowFlyout$=this.sideFlyoutService.shouldShow(),this.sideFlyoutConfig$=this.sideFlyoutService.config().pipe((0,e.b)(function(){return A.changeDetector.detectChanges()}))},M.\u0275fac=function(b){return new(b||M)(n.\u0275\u0275directiveInject(m.p),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},M.\u0275cmp=n.\u0275\u0275defineComponent({type:M,selectors:[["side-flyout"]],decls:2,vars:3,consts:[["class","flyout",3,"ngClass",4,"ngIf"],[1,"flyout",3,"ngClass"],[3,"modulePath","componentId","inputArgs",4,"ngIf"],[3,"modulePath","componentId","inputArgs"]],template:function(b,P){1&b&&(n.\u0275\u0275template(0,T,4,6,"div",0),n.\u0275\u0275pipe(1,"async")),2&b&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,P.shouldShowFlyout$))},dependencies:[i.NgClass,i.NgIf,O.R,i.AsyncPipe],styles:[".flyout[_ngcontent-%COMP%]{height:100%;width:100%;max-width:fit-content;overflow-x:auto;background:var(--fluent-theme-white-color, #FFF);z-index:10000003;border-left:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4);position:absolute;right:0;top:0;bottom:0}"],changeDetection:0}),M}()},4255:function(Le,oe,t){t.d(oe,{p:function(){return m}});var e=t(72249),n=t(59214),m=function(){function i(){this.shouldShow$=new e.X(!1),this.config$=new e.X(void 0)}return i.prototype.shouldShow=function(){return this.shouldShow$.asObservable()},i.prototype.config=function(){return this.config$.asObservable()},i.prototype.show=function(O){this.config$.next(void 0),this.config$.next(O),this.shouldShow$.next(!!O&&!!O.componentManifest)},i.prototype.hide=function(){this.shouldShow$.next(!1),this.config$.next(void 0)},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac=function(I){return new(I||i)},providedIn:"root"}),i}()},99875:function(Le,oe,t){t.d(oe,{v:function(){return fe}});var e=t(7005),n=t(59214),m=t(64450),i=t(66951),O=t(78099),I=t(64875),T=t(89718),f=t(49470),M=t(87714),A=t(42645),b=t(40152),P=t(88637),y=t(68829),C=t(61205),d=t(5243),g=t(554),S=t(48568),B=t(69582),w=t(13922),V=t(67613),v=t(64857),c=t(92119),u=t(10242),r=t(26963),h=t(44302),p=t(37687),D=t(27316),x=powerbi.explore.services.createExploreVisualDataProxyService,z=powerbi.explore.services.createVisualContainerQueryHandler,Q=powerbi.data.DataViewObjectDefinitions,q=powerbi.explore.services.events,de=powerbi.data.SQExpr,se=powerbi.explore.util.VisualContainerUtils,Ie=powerbi.explore.helpers.VisualHostInsideZoneAdapter,fe=function(){function re(pe,ge,be,ae,X,le,ee,N,F,E,k,R,W,Z,me,_e,he,G,ce,Fe,je,Oe,J,ue,Me){this.cachePolicyProviderService=pe,this.conceptualSchemaProxy=ge,this.dataSources=be,this.displayNameService=ae,this.eventBridge=X,this.explorationNavigation=le,this.featureSwitchService=ee,this.filterGenerator=N,this.networkAvailability=F,this.ngZone=E,this.promiseFactory=k,this.resourceLoader=R,this.resourceRegistration=W,this.singleExecutableDataProxyFactory=Z,this.telemetryService=me,this.visualDataProxyExecutionServiceFactory=_e,this.visualInsightsAnalysisHandlerFactory=he,this.visualLifecycleService=G,this.visualParameterServiceFactory=ce,this.visualPlugin=Fe,this.visualPluginOps=je,this.visualQueryGenerator=Oe,this.visualValidator=J,this.runningVisual=ue,this.visualContainerUtils=Me,this.visualReady=new n.EventEmitter,this.canDeferQuery=!0}return re.prototype.ngOnInit=function(){var pe=this;this.initializeQueryHandler(),this.initializeVisual(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(q.visualContainerChanged,function(ge,be){pe.visual&&(null==be?void 0:be.affectContainer(pe.visual))&&pe.onVisualContainerChanged()}),this.onVisualContainerChanged(!0,!this.networkAvailability.isNetworkAvailable()||void 0)},re.prototype.ngOnChanges=function(pe){var ge,be,ae,X=null==pe?void 0:pe.visualViewport;X&&!X.isFirstChange()&&this.visualDefinition&&(this.visualDefinition.viewport=this.visualViewport);var le=null==pe?void 0:pe.themeCollection;le&&!le.isFirstChange()&&this.visualDefinition&&(this.visualDefinition.themeCollection=this.themeCollection);var ee=null===(ge=null==pe?void 0:pe.visual)||void 0===ge?void 0:ge.currentValue;if((null==ee?void 0:ee.name)&&(null===(be=this.currentVisual)||void 0===be?void 0:be.name)!==ee.name){null!==(ae=this.currentVisual)&&void 0!==ae&&ae.name&&this.runningVisual.removeVisual(this.currentVisual);var N=this.visualContainerUtils.wrapRunningVisual(this.visualDefinition,this.getVisualHostServices(),void 0,ee.config.singleVisual,void 0,this.filterGenerator,void 0);this.currentVisual=ee,this.runningVisual.setVisual(ee,N)}},re.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.runningVisual.removeVisual(this.visual)},re.prototype.onVisualReady=function(){this.visualReady.emit()},re.prototype.onVisualContainerChanged=function(pe,ge){return void 0===pe&&(pe=!1),(0,e.mG)(this,void 0,void 0,function(){var be,ae;return(0,e.Jh)(this,function(X){switch(X.label){case 0:return this.config.clearQueryErrors(),this.visualDefinition.type=se.getVisualType(this.visual),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return be=X.sent(),[4,this.visualValidator.validate(this.visual,be)];case 2:return(ae=X.sent())?(this.config.handleQueryErrors({code:ae.code,getDetails:function(){return ae.details}}),[2]):(this.visualQueryGenerator.shouldExecute(this.visual.config.singleVisual,this.dataSources.get())?this.applyUpdate({initialLoad:pe,preferCurrentData:!1,allowResultFromClientCache:ge}):this.queryHandler.updateNonQueryVisual(this.visual,this.visualDefinition.dataTransforms),[2])}})})},re.prototype.initializeQueryHandler=function(){var pe=this;this.queryHandler=this.createQueryHandler({notifyStart:function(ae){return pe.config.notifyStart(ae)},notifyEnd:function(){return pe.config.notifyEnd()},clearErrors:function(){return pe.config.clearQueryErrors()},handleErrors:function(ae){return pe.config.handleQueryErrors(ae)},handleWarnings:function(ae,X){return pe.config.handleQueryWarnings(ae,X)},applyUpdate:function(ae,X,le,ee){return pe.handleQueryResult(ae,X,le,ee)},applyResolveParametersUpdate:function(){return _.noop()},loadMergedData:function(ae,X){return pe.setVisualData(ae,X)}})},re.prototype.initializeVisual=function(){var ge,pe=this,be=this.visualPlugin.getPlugin(se.getVisualType(this.visual)),ae=null!==(ge=null==be?void 0:be.name)&&void 0!==ge?ge:void 0,X=Q.getValue(se.getContainerObjectDefinitions(this.visual),{objectName:"stylePreset",propertyName:"name"},void 0),le=this.getVisualHostServices();this.visualDefinition={interactivityOptions:this.config.interactivityOptions,type:ae,allowInvalidDataView:!0,themeCollection:this.themeCollection,viewport:this.visualViewport,dataTransforms:{objects:se.getObjectDefinitions(this.visual)},hostServices:Ie.wrapHostServices(le,this.ngZone),visualAdapterHostServices:{startProgressBar:function(){return pe.config.notifyStart()},stopProgressBar:function(){return pe.config.notifyEnd()},getNextDataSegment:function(){return pe.getNextDataSegment()}},stylePresetName:X&&de.isConstant(X)?X.value:void 0,additionalObjectUpdates:this.config.additionalObjectUpdates,visualPlugin:this.visualPlugin};var ee=this.visualContainerUtils.wrapRunningVisual(this.visualDefinition,le,void 0,this.visual.config.singleVisual,void 0,this.filterGenerator,void 0);this.currentVisual=this.visual,this.runningVisual.setVisual(this.visual,ee)},re.prototype.createQueryHandler=function(pe){var ge=x(this.singleExecutableDataProxyFactory.create(),this.filterGenerator,this.promiseFactory,this.visualPlugin);return z(pe,this.config.queryVisualHostServices,this.promiseFactory,this.conceptualSchemaProxy,this.featureSwitchService,this.telemetryService,this.visualQueryGenerator,this.visualPlugin,this.visualPluginOps,this.filterGenerator,this.displayNameService,this.explorationNavigation,this.visualValidator,this.resourceLoader,this.eventBridge,ge,this.dataSources,this.cachePolicyProviderService,this.visualInsightsAnalysisHandlerFactory.create(this.config.queryVisualHostServices),this.visualParameterServiceFactory.create(),this.visualDataProxyExecutionServiceFactory.create(ge),this.resourceRegistration,this.visualLifecycleService)},re.prototype.getVisualHostServices=function(){var pe=this,ge=this.config.visualHostServices;return this.config.noLoadMore||(ge=powerbi.Prototype.inherit(ge,function(be){be.loadMoreData=function(){return pe.loadMoreData()}})),powerbi.Prototype.inherit(ge,function(be){be.setShouldDeferData=function(ae){pe.canDeferQuery!==ae&&(pe.canDeferQuery=ae,ae||pe.applyUpdate())}})},re.prototype.applyUpdate=function(pe){void 0===pe&&(pe={});var be=pe.preferCurrentData,ae=pe.allowResultFromClientCache;this.queryHandler.runQuery({contract:this.visual,viewport:this.visualDefinition.viewport,initialLoad:pe.initialLoad,useVisualContainerCache:this.shouldUseCache(),preferCurrentData:be,allowResultFromClientCache:ae,currentData:this.visualDefinition.data,canDefer:this.canDeferQuery})},re.prototype.handleQueryResult=function(pe,ge,be,ae){var X=this.visualDefinition;X.dataTransforms=ge,be&&(X.dataTransforms=powerbi.Prototype.inherit(X.dataTransforms),X.dataTransforms.objects=be),this.setVisualData(pe,ae)},re.prototype.setVisualData=function(pe,ge){var be=this.visualDefinition;be.data=pe,be.dataAppliedEvent&&(be.dataAppliedEvent.reject(),be.dataAppliedEvent=void 0),be.dataAppliedEvent=this.telemetryService.startChildActivity(ge&&ge.telemetryActivity&&ge.telemetryActivity.event,powerbi.telemetry.EXVisualDataChanged,{visualName:this.visual.name})},re.prototype.getNextDataSegment=function(){return this.queryHandler.getNextDataSegment({contract:this.visual,viewport:this.visualDefinition.viewport,useVisualContainerCache:this.shouldUseCache()})},re.prototype.loadMoreData=function(){this.queryHandler.loadMoreData({contract:this.visual,currentData:this.visualDefinition.data,useVisualContainerCache:this.shouldUseCache(),viewport:this.visualDefinition.viewport})},re.prototype.shouldUseCache=function(){return se.shouldUseQueryCache(this.visual,this.config.disableQueryCacheUpdates)},re.\u0275fac=function(ge){return new(ge||re)(n.\u0275\u0275directiveInject(i.g),n.\u0275\u0275directiveInject(O.i),n.\u0275\u0275directiveInject(T.D),n.\u0275\u0275directiveInject(f.O),n.\u0275\u0275directiveInject(M.J),n.\u0275\u0275directiveInject(V.I),n.\u0275\u0275directiveInject(v.vZ),n.\u0275\u0275directiveInject(A.r),n.\u0275\u0275directiveInject(c.SW),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(m.t),n.\u0275\u0275directiveInject(u.l6),n.\u0275\u0275directiveInject(b.j),n.\u0275\u0275directiveInject(I.U),n.\u0275\u0275directiveInject(h.y0),n.\u0275\u0275directiveInject(P.Y),n.\u0275\u0275directiveInject(y.b),n.\u0275\u0275directiveInject(C.U),n.\u0275\u0275directiveInject(d.P),n.\u0275\u0275directiveInject(r.D),n.\u0275\u0275directiveInject(g.f),n.\u0275\u0275directiveInject(S.S),n.\u0275\u0275directiveInject(B.R),n.\u0275\u0275directiveInject(w.s),n.\u0275\u0275directiveInject(p.K))},re.\u0275cmp=n.\u0275\u0275defineComponent({type:re,selectors:[["single-visual-host"]],inputs:{visual:"visual",visualViewport:"visualViewport",themeCollection:"themeCollection",config:"config"},outputs:{visualReady:"visualReady"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[1,"visualSite"],[3,"viewModel","allowDeferredRendering","visualReady"]],template:function(ge,be){1&ge&&(n.\u0275\u0275elementStart(0,"div",0)(1,"visual-modern",1),n.\u0275\u0275listener("visualReady",function(){return be.onVisualReady()}),n.\u0275\u0275elementEnd()()),2&ge&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("viewModel",be.visualDefinition)("allowDeferredRendering",!0))},dependencies:[D.y],styles:["single-visual-host[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF)}single-visual-host[_ngcontent-%COMP%]   .visualSite[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;transform-origin:0 0;display:flex}single-visual-host[_ngcontent-%COMP%]   .visualSite[_ngcontent-%COMP%]   .visual.allow-deferred-rendering[_ngcontent-%COMP%]{opacity:0;transition:opacity .25s}single-visual-host[_ngcontent-%COMP%]   .visualSite[_ngcontent-%COMP%]   .visual.allow-deferred-rendering[initialized][_ngcontent-%COMP%]{opacity:1}"]}),re}()},57759:function(Le,oe,t){t.d(oe,{W:function(){return i}});var e=t(93997),n=t(59214),m=t(95521),i=function(){function O(I){this.smartNarrativeData=I,this.visual=I.visual}return O.\u0275fac=function(T){return new(T||O)(n.\u0275\u0275directiveInject(e.M))},O.\u0275cmp=n.\u0275\u0275defineComponent({type:O,selectors:[["smart-narrative-overlay"]],decls:2,vars:1,consts:[[1,"pbi-depth-2"],[3,"visual"]],template:function(T,f){1&T&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"smart-narrative",1),n.\u0275\u0275elementEnd()),2&T&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("visual",f.visual))},dependencies:[m.I],encapsulation:2,changeDetection:0}),O}()},95521:function(Le,oe,t){t.d(oe,{I:function(){return T}});var e=t(7005),n=t(59214),m=t(81602),i=t(89515),O=t(6067);function I(f,M){if(1&f&&(n.\u0275\u0275elementStart(0,"li")(1,"p"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&f){var A=M.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(A)}}var T=function(){function f(M,A,b){this.lazyScoped=M,this.changeDetector=A,this.localizationService=b,this.summaryDisplays=[],this.emptySummaryCode="EmptySummary"}return f.prototype.ngOnInit=function(){this.ariaLabelString=this.localizationService.get("SmartNarratives_ToolTip"),this.summaryDisplays[0]=this.localizationService.get("SmartNarratives_Visual_Loading_Message"),this.update()},f.prototype.ngOnChanges=function(M){M.visual&&this.update()},f.prototype.update=function(){return(0,e.mG)(this,void 0,void 0,function(){var M,A,b;return(0,e.Jh)(this,function(P){switch(P.label){case 0:return this.visual?(M=this,[4,this.lazyScoped.get("smartNarratives")]):[3,3];case 1:return M.smartNarrativeService=P.sent(),[4,this.smartNarrativeService.getVisualSummary(this.visual)];case 2:(A=P.sent()).error&&A.error.code!==this.emptySummaryCode?this.summaryDisplays=[this.localizationService.get("SmartNarratives_Visual_Fail_Message")]:_.isEmpty(A.summaryText)?this.summaryDisplays=[this.localizationService.get("SmartNarratives_Visual_CouldNotFind_Message")]:(b=(b=A.summaryText.split("\n")).slice(0,3),this.summaryDisplays=b),this.changeDetector.detectChanges(),P.label=3;case 3:return[2]}})})},f.\u0275fac=function(A){return new(A||f)(n.\u0275\u0275directiveInject(m.H),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(i.o))},f.\u0275cmp=n.\u0275\u0275defineComponent({type:f,selectors:[["smart-narrative"]],inputs:{visual:"visual"},features:[n.\u0275\u0275NgOnChangesFeature],decls:4,vars:2,consts:[[2,"background-color","white"],["autofocus","autofocus","tabindex","0","role","region",1,"smartNarrative","themeableElement",2,"z-index","999"],["aria-live","polite"],[4,"ngFor","ngForOf"]],template:function(A,b){1&A&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"ul",2),n.\u0275\u0275template(3,I,3,1,"li",3),n.\u0275\u0275elementEnd()()()),2&A&&(n.\u0275\u0275advance(1),n.\u0275\u0275attribute("aria-label",b.ariaLabelString),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",b.summaryDisplays))},dependencies:[O.NgForOf],styles:[".smartNarrative[_ngcontent-%COMP%]{font-size:14px;width:260px;max-height:374px;overflow-y:auto;padding:12px 16px}.smartNarrative[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}.smartNarrative[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{vertical-align:middle;margin-bottom:4px;margin-left:2px}.smartNarrative[_ngcontent-%COMP%]   .noFilter[_ngcontent-%COMP%]{padding:5px}.smartNarrative[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:0}.smartNarrative[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;margin:0}.no-outline[_ngcontent-%COMP%]{outline:none}"],changeDetection:0}),f}()},51978:function(Le,oe,t){t.d(oe,{$:function(){return y}});var e=t(7005),n=t(93823),m=t(44243),i=t(90289),O=t(37946),I=t(35760),T=t(59214),f=t(87714),M=t(20019),A=t(89515),b=t(6067),P=powerbi.explore.services.events,y=function(C){function d(g,S,B){var w=C.call(this)||this;return w.eventBridge=g,w.localizationService=S,w.navigationService=B,w}return(0,e.ZT)(d,C),d.prototype.ngOnInit=function(){var g=this,S=this.eventBridge.on(P.sectionChanged),B=this.eventBridge.on(P.sectionDeleted);this.sectionStatus$=(0,n.T)(S,B).pipe((0,m.O)(this.getSectionStatus()),(0,i.U)(function(){return g.getSectionStatus()}),(0,O.R)(this.onDestroy$))},d.prototype.getSectionStatus=function(){var g=this.navigationService.getCurrentSection(),S=this.navigationService.getAllSections();return g&&0!==(null==S?void 0:S.length)?this.localizationService.format("ReportStatusBarReportPageCount",S.indexOf(g)+1,S.length):""},d.\u0275fac=function(S){return new(S||d)(T.\u0275\u0275directiveInject(f.J),T.\u0275\u0275directiveInject(A.o),T.\u0275\u0275directiveInject(M.z))},d.\u0275cmp=T.\u0275\u0275defineComponent({type:d,selectors:[["status-bar-section-status"]],features:[T.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[[1,"statusBarSection"]],template:function(S,B){1&S&&(T.\u0275\u0275elementStart(0,"div",0)(1,"span"),T.\u0275\u0275text(2),T.\u0275\u0275pipe(3,"async"),T.\u0275\u0275elementEnd()()),2&S&&(T.\u0275\u0275advance(2),T.\u0275\u0275textInterpolate(T.\u0275\u0275pipeBind1(3,1,B.sectionStatus$)))},dependencies:[b.AsyncPipe],styles:[".statusBarSection[_ngcontent-%COMP%]{display:flex}"],changeDetection:0}),d}(I.w)},68335:function(Le,oe,t){t.d(oe,{f:function(){return O},q:function(){return I}});var e=t(59214),n=t(74569),m=t(81865),i=t(6067),O=Object.freeze({maxZoomScale:4,midZoomScale:1,minZoomScale:.1,zoomScaleStepAmount:.1}),I=function(){function T(f){this.canvasZoomService=f,this.zoomScaleConfig=O}return T.prototype.ngOnInit=function(){this.zoomScale$=this.canvasZoomService.getZoomScale()},T.prototype.onFitToContent=function(){this.canvasZoomService.fitToPage()},T.prototype.onZoomStep=function(f){f?this.canvasZoomService.zoomIn():this.canvasZoomService.zoomOut()},T.prototype.onZoomScaleChange=function(f){this.canvasZoomService.setZoomScale(f)},T.\u0275fac=function(M){return new(M||T)(e.\u0275\u0275directiveInject(n.w))},T.\u0275cmp=e.\u0275\u0275defineComponent({type:T,selectors:[["status-bar-zoom"]],decls:2,vars:6,consts:[[3,"zoomScale","showFitToPage","enableZoomDialog","zoomScaleConfig","fitToPage","zoomStep","zoomScaleChange"]],template:function(M,A){1&M&&(e.\u0275\u0275elementStart(0,"pbi-zoom-control",0),e.\u0275\u0275listener("fitToPage",function(){return A.onFitToContent()})("zoomStep",function(P){return A.onZoomStep(P)})("zoomScaleChange",function(P){return A.onZoomScaleChange(P)}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()),2&M&&e.\u0275\u0275property("zoomScale",e.\u0275\u0275pipeBind1(1,4,A.zoomScale$))("showFitToPage",!0)("enableZoomDialog",!0)("zoomScaleConfig",A.zoomScaleConfig)},dependencies:[m.i,i.AsyncPipe],encapsulation:2,changeDetection:0}),T}()},52393:function(Le,oe,t){t.d(oe,{k:function(){return m}});var e=t(59214),n=t(28774),m=function(){function i(O){this.svgProvider=O}return i.prototype.ngOnInit=function(){this.svgProvider.loadSheet(this.sheet)},i.prototype.getSymbolRef=function(){return"#"+this.symbolId+(this.disabled?"_disabled":"")},i.\u0275fac=function(I){return new(I||i)(e.\u0275\u0275directiveInject(n.g))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["svg-use-symbol"]],inputs:{disabled:"disabled",sheet:"sheet",symbolId:"symbolId"},decls:2,vars:2,consts:[["height","100%","width","100%"],[2,"pointer-events","none"]],template:function(I,T){1&I&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",0),e.\u0275\u0275element(1,"use",1),e.\u0275\u0275elementEnd()),2&I&&(e.\u0275\u0275advance(1),e.\u0275\u0275attribute("href",T.getSymbolRef())("href",T.getSymbolRef(),null,"xlink"))},encapsulation:2}),i}()},76313:function(Le,oe,t){t.d(oe,{E:function(){return h}});var e=t(7005),n=t(59214),m=t(93721),i=t(32531),O=t(90289),I=t(72249),T=t(29150),f=t(12517),M=t(16912),A=t(35760),b=t(89515),P=t(44302),y=t(64857),C=t(6067),d=t(69152),g=t(37985),S=powerbi.visuals.FontProperties,B=powerbi.Promise;function w(p,D){if(1&p&&n.\u0275\u0275element(0,"hr",5),2&p){var x=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",x.dividerStyle)}}function V(p,D){if(1&p&&n.\u0275\u0275element(0,"div",6),2&p){var x=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",x.bufferSpaceStyle)}}function v(p,D){if(1&p){var x=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"pbi-menu-container",9),n.\u0275\u0275listener("menuButtonClick",function(de){n.\u0275\u0275restoreView(x);var se=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(se.handleActionClicked(de))})("onOpenSubMenu",function(de){n.\u0275\u0275restoreView(x);var se=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(se.openTouchSubMenu(de))})("isPointerWithin",function(de){n.\u0275\u0275restoreView(x);var se=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(se.receiveIsPointerWithin(de))}),n.\u0275\u0275elementEnd()}if(2&p){var z=n.\u0275\u0275nextContext(2).ngIf,Q=n.\u0275\u0275nextContext();n.\u0275\u0275property("menu",z)("menuMode",Q.menuMode)}}function c(p,D){if(1&p){var x=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mobile-tooltip-child-menu",10),n.\u0275\u0275listener("onHide",function(){n.\u0275\u0275restoreView(x);var de=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(de.onHide)})("onBack",function(){n.\u0275\u0275restoreView(x);var de=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(de.closeTouchSubMenu())}),n.\u0275\u0275elementEnd()}if(2&p){var z=n.\u0275\u0275nextContext().ngIf,Q=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("commandsMenu",z)("commandsMenuTitle",Q.touchSubMenuTitle)("actionIconStyle",Q.touchSubMenuStyles.actionIconStyle)("actionTitleStyle",Q.touchSubMenuStyles.actionTitleStyle)}}function u(p,D){if(1&p&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,v,1,2,"pbi-menu-container",7),n.\u0275\u0275template(2,c,1,4,"mobile-tooltip-child-menu",8),n.\u0275\u0275elementContainerEnd()),2&p){var x=D.ngIf,z=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0==x.length||!z.isNewMobileTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",x.length>0&&z.isNewMobileTooltip)}}function r(p,D){if(1&p&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,w,1,1,"hr",2),n.\u0275\u0275template(2,V,1,1,"div",3),n.\u0275\u0275template(3,u,3,2,"ng-container",4),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementEnd()),2&p){var x=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!x.hideDivider),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!x.isOptimizedTouchEvent),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(4,3,x.touchSubMenu$))}}var h=function(p){function D(x,z,Q){var q=p.call(this)||this;return q.localizationService=x,q.telemetryService=z,q.featureSwitchService=Q,q.onHide=new n.EventEmitter,q.isPointerWithin=new n.EventEmitter,q.menuMode=M.Kb.Full,q.dividerStyle={},q.bufferSpaceStyle={},q.touchSubMenuStyles={actionTitleStyle:{},actionIconStyle:{}},q.pbiMenuStyle={},q.touchSubMenu$=new I.X([]),q.subscriptionChange=(0,T.aj)([p.prototype.changes$.call(q,"tooltipShown"),p.prototype.changes$.call(q,"identities"),p.prototype.changes$.call(q,"tooltipStyle")]).pipe((0,m.h)(function(de){return de[0]||!!de[1]})).subscribe(function(de){q.setupActionComponent(de[2])}),q}return(0,e.ZT)(D,p),Object.defineProperty(D.prototype,"isNewMobileTooltip",{get:function(){return this.featureSwitchService.featureSwitches.newMobileTooltip},enumerable:!1,configurable:!0}),D.prototype.ngOnChanges=function(x){this.touchSubMenu$.getValue().length>0&&this.isNewMobileTooltip&&this.openTouchSubMenu(),p.prototype.ngOnChanges.call(this,x)},D.prototype.setupActionComponent=function(x){x?(this.dividerStyle=this.constructDividerStyle(x),this.bufferSpaceStyle=this.constructBufferSpaceStyle(x),this.pbiMenuStyle=this.constructPbiMenuStyle(x),this.touchSubMenuStyles=this.setupTouchTooltipStyle(x)):this.telemetryService.logEvent(powerbi.telemetry.EXUndefinedTooltipStyleInActionBar);var z=this.getCommands();this.menu$=this.getPbiMenu(z,this.pbiMenuStyle,!0)},D.prototype.receiveIsPointerWithin=function(x){this.isPointerWithin.emit(x)},D.prototype.ngOnDestroy=function(){return this.isPointerWithin.emit(void 0),this.subscriptionChange.unsubscribe(),p.prototype.ngOnDestroy.call(this)},D.prototype.handleActionClicked=function(x){return(0,e.mG)(this,void 0,B,function(){var z,Q;return(0,e.Jh)(this,function(q){switch(q.label){case 0:return(z=x.data).execute?(Q=z.getTelemetryInfo(),this.telemetryService.logEvent(powerbi.telemetry.EXExecuteActionCommands,{commandName:Q}),[4,z.execute()]):[3,2];case 1:q.sent(),this.onHide.emit(),q.label=2;case 2:return[2]}})})},D.prototype.openTouchSubMenu=function(){return(0,e.mG)(this,void 0,void 0,function(){var x,z,Q,q,de;return(0,e.Jh)(this,function(se){switch(se.label){case 0:if(!this.isOptimizedTouchEvent)return[2];Q=0,q=this.getCommands(),se.label=1;case 1:return Q<q.length?[4,(de=q[Q]).getChildren()]:[3,4];case 2:x=se.sent(),_.isEmpty(x)||(_.isEmpty(z),z=x,this.touchSubMenuTitle=de.title(this.localizationService)),se.label=3;case 3:return Q++,[3,1];case 4:return _.isEmpty(z)||this.touchSubMenu$.next(z),[2]}})})},D.prototype.closeTouchSubMenu=function(){this.touchSubMenu$.next([])},D.prototype.setupTouchTooltipStyle=function(x){var z={actionTitleStyle:{},actionIconStyle:{}};if(x.actionFontProperties){var Q=S.toHTMLStyle(x.actionFontProperties);z.actionIconStyle={color:Q.color,fill:Q.color,"font-size":Q["font-size"]},z.actionTitleStyle={color:Q.color,"font-size":Q["font-size"],"font-family":Q["font-family"]}}return z},D.prototype.getCommands=function(){var x;return(null===(x=this.actionsProvider)||void 0===x?void 0:x.updateAndGetTooltipCommands().filter(function(Q){return Q.enabled}).map(function(Q){return Q.command}))||[]},D.prototype.constructPbiMenuStyle=function(x){var z={};if(z["background-color"]=x.background.solid.color,z.opacity=null!=x.transparency?1-x.transparency/100:1,z[":hover"]={"background-color":x.hoverColor},x.actionFontProperties){var Q=S.toHTMLStyle(x.actionFontProperties);z=(0,e.pi)((0,e.pi)({},z),Q)}return z},D.prototype.constructDividerStyle=function(x){var z={};return z["background-color"]=x.dividerColor,z.opacity=null!=x.transparency?1-x.transparency/100:1,z},D.prototype.constructBufferSpaceStyle=function(x){var z={};return z["background-color"]=x.background.solid.color,z.opacity=null!=x.transparency?1-x.transparency/100:1,z},D.prototype.getPbiMenu=function(x,z,Q){var q=this,de=z["font-size"],se=z["font-family"],Ie=z.color,fe=z["background-color"],re=z.opacity,pe=z[":hover"],ge=x.map(function(be,ae){return(0,f.D)(be.getChildren()).pipe((0,i.q)(1),(0,O.U)(function(X){var le=X&&X.length>0?M.iB.SubMenu:M.iB.Button,ee={id:ae,type:le,text:be.title(q.localizationService),styles:{"font-family":se,"font-size":de,color:Ie,"background-color":fe,":hover":pe},icon:null==be.glyph?null:{type:0,glyph:be.glyph,styles:{"font-size":de,color:Ie}}};return le===M.iB.SubMenu?ee.menu=function(){return q.getPbiMenu(X,q.pbiMenuStyle,!1)}:ee.data=be,ee}))});return(0,T.aj)(ge).pipe((0,m.h)(function(be){return be&&be.length>0}),(0,O.U)(function(be){return q.telemetryService.logEvent(powerbi.telemetry.EXActionBarShown,{isSubmenu:!Q}),{items:be,styles:{"box-shadow":Q?"none":"","border-radius":"0px","background-color":fe,opacity:re,"min-width":Q?"inherit":"",animation:"none"}}}))},D.\u0275fac=function(z){return new(z||D)(n.\u0275\u0275directiveInject(b.o),n.\u0275\u0275directiveInject(P.y0),n.\u0275\u0275directiveInject(y.vZ))},D.\u0275cmp=n.\u0275\u0275defineComponent({type:D,selectors:[["tooltip-actions"]],inputs:{actionsProvider:"actionsProvider",identities:"identities",tooltipShown:"tooltipShown",tooltipStyle:"tooltipStyle",isOptimizedTouchEvent:"isOptimizedTouchEvent",hideDivider:"hideDivider"},outputs:{onHide:"onHide",isPointerWithin:"isPointerWithin"},features:[n.\u0275\u0275InheritDefinitionFeature,n.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[["class","tooltip-actions-container",4,"ngIf"],[1,"tooltip-actions-container"],["class","tooltip-divider",3,"ngStyle",4,"ngIf"],["class","buffer-space",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"tooltip-divider",3,"ngStyle"],[1,"buffer-space",3,"ngStyle"],[3,"menu","menuMode","menuButtonClick","onOpenSubMenu","isPointerWithin",4,"ngIf"],[3,"commandsMenu","commandsMenuTitle","actionIconStyle","actionTitleStyle","onHide","onBack",4,"ngIf"],[3,"menu","menuMode","menuButtonClick","onOpenSubMenu","isPointerWithin"],[3,"commandsMenu","commandsMenuTitle","actionIconStyle","actionTitleStyle","onHide","onBack"]],template:function(z,Q){1&z&&(n.\u0275\u0275template(0,r,5,5,"div",0),n.\u0275\u0275pipe(1,"async")),2&z&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,Q.menu$))},dependencies:[C.NgIf,C.NgStyle,d.m,g.d,C.AsyncPipe],styles:[".tooltip-actions-container[_ngcontent-%COMP%]{pointer-events:auto}.tooltip-actions-container[_ngcontent-%COMP%]   .tooltip-divider[_ngcontent-%COMP%]{width:100%;height:1px;border:none;margin:0}.tooltip-actions-container[_ngcontent-%COMP%]   .buffer-space[_ngcontent-%COMP%]{height:2px}","@media (orientation: landscape){.tooltip-container.truncate-tooltip-height   .visual-tooltip-mobile[_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu, .tooltip-container.truncate-tooltip-height   .visual-tooltip-mobile   [_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu{max-height:80px}}.tooltip-container   .visual-tooltip-mobile[_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu, .tooltip-container   .visual-tooltip-mobile   [_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu{background-color:transparent!important;opacity:1!important}.tooltip-container   .visual-tooltip-mobile[_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu .pbi-menu-item, .tooltip-container   .visual-tooltip-mobile   [_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu .pbi-menu-item{margin-left:15px;background-color:transparent!important}"],changeDetection:0}),D}(A.w)},49541:function(Le,oe,t){t.d(oe,{z:function(){return yt}});var e=t(7005),n=t(59214),m=t(55858),i=t(86390),O=t(64450),I=jsCommon.StringExtensions,T=powerbi.visuals.valueFormatter,f=function(Ae){return Ae[Ae.Top=0]="Top",Ae[Ae.Bottom=1]="Bottom",Ae}({}),M=function(){function Ae(Ve,xe,Pe){this.filterTypes=Ve,this.targetType=xe,this.itemCount=Pe}return Ae.prototype.getRestatement=function(Ve){if(null!=this.itemCount){var xe=T.format(this.itemCount,"#,###"),Pe=this.orderByDisplayName,et=this.targetType.type===f.Top;return Pe?I.format(Ve.get(et?"FilterRestatement_TopNBy":"FilterRestatement_BottomNBy"),xe,Pe):I.format(Ve.get(et?"FilterRestatement_TopN":"FilterRestatement_BottomN"),xe)}},Ae.prototype.canApplyPendingClear=function(){return this.hasPendingClear&&!this.orderByField&&!this.itemCount},Ae.prototype.setInitialInputWarningStates=function(Ve,xe){var Pe=Ve&&-1!==Ve.indexOf(xe.toString());this.showItemCountInputWarning=Pe&&!this.itemCount,this.showOrderByFieldWarning=Pe&&!this.orderByField},Ae.prototype.clearOrderByFieldWarning=function(){this.showOrderByFieldWarning=!1},Ae.prototype.updateItemCountInputWarning=function(){this.showItemCountInputWarning=this.showItemCountInputWarning&&this.itemCount<=0},Ae}(),A=powerbi.data.SQExpr,b=powerbi.data.SQExprBuilder;function g(Ae,Ve,xe,Pe,et,$e){return!A.equals(Ve,Ae.orderByField)&&(Ae.orderByField=Ve,Ae.availableAggregates=function(Ae,Ve,xe,Pe){return{items:powerbi.explore.viewModels.MenuItemFactory.createAggregateMenuItems(Ae,Ve,xe,!1,powerbi.VisualDataRoleKind.Measure,[],Pe)}}(Ve,xe,$e,et),Ae.orderByDisplayName=Pe.getDisplayName(Ae.orderByField,xe,null,null,null,{includeVariationSource:!0}),Ae.selectedAggregate=A.isAggregation(Ve)?Ve.func:null,B(Ae),!0)}function B(Ae){for(var Ve=0,xe=Ae.availableAggregates.items;Ve<xe.length;Ve++){var Pe=xe[Ve];Pe.checked=Pe.key.aggregate===Ae.selectedAggregate}}powerbi;var v=t(51081),c=t(78099),u=t(7772),r=t(89718),h=t(49470),p=t(87714),D=t(20019),x=t(13057),z=t(75216),Q=t(64857),q=t(89515),de=t(11719),se=t(41844),Ie=t(26963),fe=t(6067),re=t(45647),pe=t(51186),ge=t(80041),be=t(72227),ae=t(31820),X=t(1099),le=t(3597),ee=powerbi.data.FieldExprPattern,N=powerbi.explore.viewModels.FilterEvents,F=powerbi.explore.contracts.FilterType,E=powerbi.explore.FilterUtils,k=powerbi.data.SQExprBuilder,R=powerbi.data.SQExprConverter,W=powerbi.data.SQExprUtils,Z=powerbi.data.TopNFilterPattern,me=function(Ve,xe){return{"font-size":Ve,"font-family":xe}};function _e(Ae,Ve){if(1&Ae&&n.\u0275\u0275element(0,"pbi-alert",14),2&Ae){var xe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction2(3,me,xe.viewModel.fontSize,xe.viewModel.fontFamily))("kind","warning")("messageWarning","TopNFilter_SingleTopNAllowedWarning")}}var he=function(Ve,xe,Pe,et){return{"background-color":Ve,color:xe,"border-color":Pe,"font-family":et}};function G(Ae,Ve){if(1&Ae&&(n.\u0275\u0275elementStart(0,"mat-option",17),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&Ae){var xe=Ve.$implicit,Pe=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("value",xe)("ngStyle",n.\u0275\u0275pureFunction4(3,he,Pe.viewModel.inputBoxBackgroundColor,Pe.viewModel.inputBoxForegroundColor,Pe.viewModel.inputBoxBorderColor,Pe.viewModel.fontFamily)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",xe.text,"")}}var ce=function(Ve,xe,Pe){return{"background-color":Ve,color:xe,"border-color":Pe}};function Fe(Ae,Ve){if(1&Ae){var xe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-select",15),n.\u0275\u0275listener("selectionChange",function($e){n.\u0275\u0275restoreView(xe);var lt=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(lt.onTargetSelectionChange($e))})("ngModelChange",function($e){n.\u0275\u0275restoreView(xe);var lt=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(lt.vm.targetType=$e)}),n.\u0275\u0275template(1,G,2,8,"mat-option",16),n.\u0275\u0275elementEnd()}if(2&Ae){var Pe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(3,ce,Pe.viewModel.inputBoxBackgroundColor,Pe.viewModel.inputBoxForegroundColor,Pe.viewModel.inputBoxBorderColor))("ngModel",Pe.vm.targetType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",Pe.vm.filterTypes)}}function je(Ae,Ve){if(1&Ae){var xe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",22),n.\u0275\u0275listener("click",function(et){n.\u0275\u0275restoreView(xe);var $e=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView($e.showContextMenu(et))}),n.\u0275\u0275elementEnd()}}function Oe(Ae,Ve){if(1&Ae){var xe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",23),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(xe);var et=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(et.removeOrderBy())}),n.\u0275\u0275elementEnd()}}function J(Ae,Ve){if(1&Ae&&(n.\u0275\u0275elementStart(0,"div",18)(1,"span",19),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,je,1,0,"button",20),n.\u0275\u0275template(4,Oe,1,0,"button",21),n.\u0275\u0275elementEnd()),2&Ae){var xe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(5,ce,xe.viewModel.inputBoxBackgroundColor,xe.viewModel.inputBoxForegroundColor,xe.viewModel.inputBoxBorderColor)),n.\u0275\u0275advance(1),n.\u0275\u0275property("tabindex",xe.isEditMode?0:-1),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(xe.vm.orderByDisplayName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",xe.vm.availableAggregates.items.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",xe.isEditMode)}}function ue(Ae,Ve){1&Ae&&n.\u0275\u0275element(0,"div",24)}function Me(Ae,Ve){if(1&Ae&&n.\u0275\u0275element(0,"button",25),2&Ae){var xe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("disabled",!xe.canApplyFilter())}}var Se=function(Ve){return{invalid:Ve}},Ge=function(Ve){return{"font-size":Ve}},nt=function(Ve){return{filled:Ve}};function st(Ae,Ve){if(1&Ae){var xe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"form",1),n.\u0275\u0275listener("ngSubmit",function(){n.\u0275\u0275restoreView(xe);var $e=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView($e.applyFilter())}),n.\u0275\u0275template(1,_e,1,6,"pbi-alert",2),n.\u0275\u0275elementStart(2,"fieldset",3),n.\u0275\u0275element(3,"legend",4),n.\u0275\u0275elementStart(4,"div",5),n.\u0275\u0275template(5,Fe,2,7,"mat-select",6),n.\u0275\u0275elementStart(6,"input",7),n.\u0275\u0275listener("ngModelChange",function($e){n.\u0275\u0275restoreView(xe);var lt=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(lt.vm.itemCount=$e)})("input",function($e){n.\u0275\u0275restoreView(xe);var lt=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(lt.onInputEvent($e))}),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(7,"fieldset",8),n.\u0275\u0275element(8,"legend",9),n.\u0275\u0275elementStart(9,"div",10),n.\u0275\u0275listener("dropHandler",function(){n.\u0275\u0275restoreView(xe);var $e=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView($e.dropFilterTarget())})("dropAction",function(){n.\u0275\u0275restoreView(xe);var $e=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView($e.getDropAction())})("drop",function($e){n.\u0275\u0275restoreView(xe);var lt=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(lt.drop($e))}),n.\u0275\u0275template(10,J,5,9,"div",11),n.\u0275\u0275template(11,ue,1,0,"div",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(12,Me,1,1,"button",13),n.\u0275\u0275elementEnd()}if(2&Ae){var Pe=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroup",Pe.topNFilterForm)("ngClass",n.\u0275\u0275pureFunction1(24,Se,Pe.viewModel.isInvalidCardType()))("ngStyle",n.\u0275\u0275pureFunction1(26,Ge,Pe.viewModel.fontSize)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Pe.viewModel.isInvalidCardType()),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",Pe.viewModel.isInvalidCardType()),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",Pe.vm.targetType),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("filterInputWarningBorder",Pe.vm.showItemCountInputWarning),n.\u0275\u0275propertyInterpolate("placeholder",Pe.viewModel.getInputPlaceholder()),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(28,ce,Pe.viewModel.inputBoxBackgroundColor,Pe.viewModel.inputBoxForegroundColor,Pe.viewModel.inputBoxBorderColor))("ngModel",Pe.vm.itemCount),n.\u0275\u0275attribute("aria-label",Pe.topNEditAriaLabel)("aria-valuemin",Pe.topNMinValue)("aria-valuemax",Pe.topNMaxValue)("aria-invalid",Pe.ariaInvalid),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",Pe.viewModel.isInvalidCardType()),n.\u0275\u0275advance(2),n.\u0275\u0275classProp("filterInputWarningBorder",Pe.vm.showOrderByFieldWarning),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(32,nt,Pe.vm.orderByDisplayName))("ngStyle",n.\u0275\u0275pureFunction3(34,ce,Pe.viewModel.inputBoxBackgroundColor,Pe.viewModel.inputBoxForegroundColor,Pe.viewModel.inputBoxBorderColor))("drop",Pe.dropConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Pe.vm.orderByDisplayName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!Pe.vm.orderByDisplayName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!Pe.isApplyAllOnForThisFilter())}}var yt=function(){function Ae(Ve,xe,Pe,et,$e,lt,Pt,Ct,Ue,ke,We,ze,ve,a,o,l){this.aggrOps=Ve,this.conceptualSchemaProxy=xe,this.contextActivityService=Pe,this.dataSources=et,this.displayNameService=$e,this.dragDataService=lt,this.dropdown=Pt,this.eventBridge=Ct,this.explorationNavigation=Ue,this.featureSwitchService=ke,this.localizationService=We,this.ngZone=ze,this.promiseFactory=ve,this.viewModeState=a,this.visualAuthoring=o,this.visualPlugin=l,this.onFilterChanged=new n.EventEmitter,this.topNMaxValue=9999999,this.topNMinValue=1,this.ariaInvalid=!1}return Ae.prototype.ngOnInit=function(){var Ve=this;this.topNFilterForm=new m.nJ({targetType:new m.p4,itemCount:new m.p4}),this.topNInteropForm=new i.h(this.topNFilterForm),this.ngZone.run(function(){return Ve.onInitImpl()}),this.topNEditAriaLabel=this.localizationService.get("Top_N_Edit_Aria_Label")},Ae.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},Object.defineProperty(Ae.prototype,"isEditMode",{get:function(){return 1===this.viewModeState.getMode()},enumerable:!1,configurable:!0}),Ae.prototype.applyFilter=function(Ve){return(0,e.mG)(this,void 0,void 0,function(){var xe,Pe,et,$e;return(0,e.Jh)(this,function(lt){switch(lt.label){case 0:return this.canApplyFilter()?(document.activeElement.blur(),this.viewModel.contract.type=F.TopN,xe={fieldBeingFiltered:this.viewModel.contract.expression,isTop:this.vm.targetType.type===f.Top,itemCount:this.vm.itemCount,orderByField:this.vm.orderByField},this.vm.canApplyPendingClear()?(this.visualAuthoring.updateFilter(this.viewModel.getFilterContainerScope(),this.viewModel.contract,void 0),Pe=!0,[3,3]):[3,1]):[2];case 1:return[4,this.visualAuthoring.updateTopNFilter(this.viewModel.visualContainer,xe,this.viewModel.getFilterContainerScope(),this.viewModel.contract,this.viewModel.isInOutspacePane,Ve)];case 2:Pe=lt.sent(),lt.label=3;case 3:return Pe&&(et=void 0,this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(et=E.createChangeFilterActivity(this.contextActivityService,"Top N Filter")),$e={filter:this.viewModel.contract,changeType:2,scope:this.viewModel.getFilterContainerScope(),changeFilterActivity:et},this.viewModel.useDefaultFilter=!1,this.updateRestatement(),this.topNInteropForm.setPristine(),this.onFilterChanged.emit($e),et&&et.resolve()),[2]}})})},Ae.prototype.canApplyFilter=function(){return this.checkDisabled(),!this.viewModel.isInvalidCardType()&&this.vm&&this.vm.canApplyPendingClear()||this.vm.itemCount>0&&null!=this.vm.orderByField&&this.topNInteropForm.isDirty()&&this.topNInteropForm.isValid()},Ae.prototype.dropFilterTarget=function(){var Ve=this.dragDataService.getDragContext();!Ve||!Ve.field||this.dropField(Ve.field)},Ae.prototype.drop=function(Ve){var xe=powerbi.explore.helpers.getModernFieldListExpr(Ve);!xe||this.dropField(xe)},Ae.prototype.dropField=function(Ve){var xe=this,Pe=this.dataSources.get();this.conceptualSchemaProxy.get(Pe).then(function(et){var $e=W.isMeasure(Ve)?Ve:k.aggregate(Ve,xe.aggrOps.defaultAggregate(Ve,et,!0));xe.isValidOrderByExpr($e,et)&&xe.ngZone.run(function(){g(xe.vm,$e,et,xe.displayNameService,xe.localizationService,xe.aggrOps)&&xe.topNInteropForm.setDirty()}),xe.isApplyAllOnForThisFilter()&&(xe.vm.clearOrderByFieldWarning(),E.notifyBufferedFilterChanges(xe.eventBridge,xe.viewModel.getFilterContainerScope().scopeType,F.TopN,xe.viewModel.id,xe.canApplyFilter()))})},Ae.prototype.getDropAction=function(){return(0,e.mG)(this,void 0,void 0,function(){var Ve,xe,Pe,et,$e,lt;return(0,e.Jh)(this,function(Pt){switch(Pt.label){case 0:return Ve=this.promiseFactory.defer(),xe=0,this.viewModel.isInvalidCardType()?[3,2]:(Pe=this.dragDataService.getDragContext())&&Pe.field?(et=Pe.field,$e=this.dataSources.get(),[4,this.conceptualSchemaProxy.get($e)]):[3,2];case 1:lt=Pt.sent(),this.isValidOrderByExpr(et,lt)&&!W.isFromVariation(et)&&(xe=1),Pt.label=2;case 2:return Ve.resolve(xe),[2,Ve.promise]}})})},Ae.prototype.removeOrderBy=function(){(function(Ae){Ae.orderByField=null,Ae.availableAggregates=null,Ae.selectedAggregate=null,Ae.orderByDisplayName=null})(this.vm),this.topNInteropForm.setDirty(),this.isApplyAllOnForThisFilter()&&E.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,F.TopN,this.viewModel.id,this.canApplyFilter())},Ae.prototype.selectAggregate=function(Ve){var xe=this;if(Ve!==this.vm.selectedAggregate){var Pe=this.dataSources.get();this.conceptualSchemaProxy.get(Pe).then(function(et){(function(Ae,Ve,xe,Pe,et){return Ae.selectedAggregate!==Ve&&(Ae.orderByField=b.setAggregate(Ae.orderByField,Ve),Ae.selectedAggregate=Ve,B(Ae),Ae.orderByDisplayName=Pe.getDisplayName(Ae.orderByField,xe,null,null,null,{includeVariationSource:!0}),!0)})(xe.vm,Ve,et,xe.displayNameService)&&(xe.topNInteropForm.setDirty(),xe.isApplyAllOnForThisFilter()&&E.notifyBufferedFilterChanges(xe.eventBridge,xe.viewModel.getFilterContainerScope().scopeType,F.TopN,xe.viewModel.id,xe.canApplyFilter()))})}},Ae.prototype.showContextMenu=function(Ve){var xe=this,Pe={anchorElement:$(Ve.currentTarget)};this.dropdown.showContextMenu(this.vm.availableAggregates,void 0,function(et){return xe.selectAggregate(et.aggregate)},!1,void 0,void 0,!0,Pe)},Ae.prototype.onInputEvent=function(Ve){this.isApplyAllOnForThisFilter()&&isFinite(Ve.data)&&(this.vm.updateItemCountInputWarning(),E.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,F.TopN,this.viewModel.id,this.canApplyFilter())),this.ariaInvalid=!this.topNInteropForm.isValid()},Ae.prototype.onTargetSelectionChange=function(Ve){this.isApplyAllOnForThisFilter()&&E.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,F.TopN,this.viewModel.id,this.canApplyFilter())},Ae.prototype.isApplyAllOnForThisFilter=function(){var Ve=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return E.isApplyAllEnabled(this.viewModel.isInOutspacePane||Ve,this.explorationNavigation)},Ae.prototype.onApplyAllClicked=function(Ve){this.isApplyAllOnForThisFilter()&&(Ve.idsInError?this.vm.setInitialInputWarningStates(Ve.idsInError,this.viewModel.id):this.applyFilter(Ve.undoRedoActionId),this.vm.hasPendingClear=!1)},Ae.prototype.onInitImpl=function(){var Ve=this;this.initializeViewModel(this.viewModel.contract),this.checkDisabled(),this.dropConfig={accept:"field"},this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.explore.services.events.filterContainerChanged,function(xe,Pe){return Ve.onFilterContainerChanged(Pe)}).subscribe(powerbi.explore.services.events.applyAllClicked,function(xe,Pe){return Ve.onApplyAllClicked(Pe)}).subscribe(powerbi.explore.services.events.explorationSlowDataSourceSettingsLoaded,function(xe,Pe){return Ve.ngZone.run(function(){Pe.isApplyAllButtonEnabledChanged&&(Ve.vm.setInitialInputWarningStates(),Ve.vm.hasPendingClear=!1)})}).subscribe(N.topNFilterOrderByUpdate,function(xe,Pe){return Ve.onTopNFilterValueUpdate(Pe)})},Ae.prototype.checkDisabled=function(){var Ve=this,xe=this.viewModel.getFilterContainerScope().container;this.viewModel.cardType.invalid=this.isApplyAllOnForThisFilter()?_.filter(xe.filters,function(Pe){return Pe&&Pe.type===F.TopN}).length>1:_.some(xe.filters,function(Pe){return Pe&&Pe!==Ve.viewModel.contract&&Z.extractParametersFromFilter(Pe.filter)})},Ae.prototype.initializeViewModel=function(Ve){var xe=this,Pe=this.dataSources.get();this.conceptualSchemaProxy.get(Pe).then(function(et){var $e=Ve&&Ve.filter&&Z.extractParametersFromFilter(Ve.filter);xe.vm=function(Ae,Ve,xe,Pe,et){var $e=!Ae||Ae.isTop?f.Top:f.Bottom,lt=function(Ae){return[{type:f.Top,text:Ae.get("Top")},{type:f.Bottom,text:Ae.get("Bottom")}]}(xe),Pt=new M(lt,_.find(lt,function(Ct){return Ct.type===$e}),Ae&&Ae.itemCount);return Ae&&g(Pt,Ae.orderByField,Ve,Pe,xe,et),Pt}($e,et,xe.localizationService,xe.displayNameService,xe.aggrOps),xe.updateRestatement(),xe.viewModel.updateFilterProperties(et,xe.visualPlugin,xe.aggrOps),xe.viewModel.updateViewState()})},Ae.prototype.isValidOrderByExpr=function(Ve,xe){var Pe=R.asFieldPattern(Ve,xe);return!!(W.isMeasure(Ve)||ee.getProperty(Pe)||Pe.hierarchyLevel)},Ae.prototype.onTopNFilterValueUpdate=function(Ve){var xe=this,Pe=Ve.filterViewModel,et=Ve.orderByField;if(Pe&&Pe.contract===this.viewModel.contract){var $e=this.dataSources.get();this.conceptualSchemaProxy.get($e).then(function(lt){xe.isValidOrderByExpr(et,lt)&&g(xe.vm,et,lt,xe.displayNameService,xe.localizationService,xe.aggrOps)&&xe.topNInteropForm.setDirty()})}},Ae.prototype.onFilterContainerChanged=function(Ve){Ve.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(Ve.changeType,10)?this.onFilterClear(Ve):Ve.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(Ve.changeType,2)&&this.initializeViewModel(Ve.filter),this.checkDisabled()},Ae.prototype.onFilterClear=function(Ve){this.isApplyAllOnForThisFilter()?(this.vm.hasPendingClear=!0,this.topNInteropForm.setDirty(),this.vm.setInitialInputWarningStates(),this.vm.itemCount=void 0,this.removeOrderBy()):this.initializeViewModel(Ve.filter)},Ae.prototype.updateRestatement=function(){this.viewModel.setRestatement(this.vm.getRestatement(this.localizationService))},Ae.\u0275fac=function(xe){return new(xe||Ae)(n.\u0275\u0275directiveInject(v.C),n.\u0275\u0275directiveInject(c.i),n.\u0275\u0275directiveInject(u.r),n.\u0275\u0275directiveInject(r.D),n.\u0275\u0275directiveInject(h.O),n.\u0275\u0275directiveInject(x.x),n.\u0275\u0275directiveInject(z.V),n.\u0275\u0275directiveInject(p.J),n.\u0275\u0275directiveInject(D.z),n.\u0275\u0275directiveInject(Q.vZ),n.\u0275\u0275directiveInject(q.o),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(O.t),n.\u0275\u0275directiveInject(de.kc),n.\u0275\u0275directiveInject(se.$),n.\u0275\u0275directiveInject(Ie.D))},Ae.\u0275cmp=n.\u0275\u0275defineComponent({type:Ae,selectors:[["top-n-filter"]],inputs:{viewModel:"viewModel"},outputs:{onFilterChanged:"onFilterChanged"},decls:1,vars:1,consts:[["class","topNFilterModern",3,"formGroup","ngClass","ngStyle","ngSubmit",4,"ngIf"],[1,"topNFilterModern",3,"formGroup","ngClass","ngStyle","ngSubmit"],["class","pbi-alert-reset",3,"ngStyle","kind","messageWarning",4,"ngIf"],[1,"filterOptions",3,"disabled"],["id","TopNFilter_header","localize","ShowItems"],[1,"topNSelector","topNInputArea","flex"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","aria-labelledby","TopNFilter_header","class","item-fill topNInputBox pbi-modern-select","formControlName","targetType","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",3,"ngStyle","ngModel","selectionChange","ngModelChange",4,"ngIf"],["pattern","^[1-9][0-9]{0,6}$","formControlName","itemCount","type","number","inputmode","numeric",1,"item-fill","topNInputBox","topNNumber","pbi-modern-input",3,"ngStyle","ngModel","placeholder","ngModelChange","input"],[1,"orderBy",3,"disabled"],["localize","TopNFilter_Value"],[1,"topNInputArea","ui-droppable","dropzone","topNInputBox",3,"ngClass","ngStyle","drop","dropHandler","dropAction"],["class","flex orderByPill",3,"ngStyle",4,"ngIf"],["class","dragHereWatermark trimmedTextWithEllipsis","localize","FieldDropZone_AddFields",4,"ngIf"],["type","submit","class","applyFilter smallFontSize","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",3,"disabled",4,"ngIf"],[1,"pbi-alert-reset",3,"ngStyle","kind","messageWarning"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","aria-labelledby","TopNFilter_header","formControlName","targetType","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",1,"item-fill","topNInputBox","pbi-modern-select",3,"ngStyle","ngModel","selectionChange","ngModelChange"],[3,"value","ngStyle",4,"ngFor","ngForOf"],[3,"value","ngStyle"],[1,"flex","orderByPill",3,"ngStyle"],[1,"displayName","trimmedTextWithEllipsis","item-fill",3,"tabindex"],["class","fieldWellIcon dropDown item-auto glyphicon pbi-glyph-chevrondownsmall glyph-mini","type","button",3,"click",4,"ngIf"],["localizeTooltip","FieldWell_Remove","class","delete glyphicon pbi-glyph-close glyph-micro item-auto","type","button",3,"click",4,"ngIf"],["type","button",1,"fieldWellIcon","dropDown","item-auto","glyphicon","pbi-glyph-chevrondownsmall","glyph-mini",3,"click"],["localizeTooltip","FieldWell_Remove","type","button",1,"delete","glyphicon","pbi-glyph-close","glyph-micro","item-auto",3,"click"],["localize","FieldDropZone_AddFields",1,"dragHereWatermark","trimmedTextWithEllipsis"],["type","submit","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",1,"applyFilter","smallFontSize",3,"disabled"]],template:function(xe,Pe){1&xe&&n.\u0275\u0275template(0,st,13,38,"form",0),2&xe&&n.\u0275\u0275property("ngIf",void 0!==Pe.vm)},dependencies:[fe.NgClass,fe.NgForOf,fe.NgIf,fe.NgStyle,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.c5,re.X,pe.r,ge.gD,be.ey,m.sg,m.u,ae.W,X.r,le.x],styles:[".topNFilterModern.invalid[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{border-color:var(--neutral-secondary-color, #666666);background-color:inherit}.topNFilterModern.invalid[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%], .topNFilterModern.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%], .topNFilterModern.invalid[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666)}.topNFilterModern[_ngcontent-%COMP%]   pbi-alert[_ngcontent-%COMP%]{margin-top:8px}.topNFilterModern[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{min-width:0;border-width:0;margin:8px 0 0;padding:0}.topNFilterModern[_ngcontent-%COMP%]   .topNInputArea[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:4px}.topNFilterModern[_ngcontent-%COMP%]   .topNInputArea.dropzone[_ngcontent-%COMP%]{margin:4px 0;padding:0}.topNFilterModern[_ngcontent-%COMP%]   .topNSelector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:4px;width:inherit}.topNFilterModern[_ngcontent-%COMP%]   .topNNumber[_ngcontent-%COMP%]{min-width:40px;-moz-appearance:textfield}.topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{box-sizing:border-box;height:28px;border:1px dashed var(--neutral-secondary-color, #666666);border-radius:4px;background-color:var(--neutral-primary-color-alt2, #4a4a4a)}.topNFilterModern[_ngcontent-%COMP%]   .dropzone.dropover[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811);border-style:dashed}.topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{height:100%;background:var(--neutral-primary-color, #333333);border:1px solid var(--neutral-dark-color, #212121);border-radius:3px;box-sizing:border-box;color:var(--white-color, #FFF)}.topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .displayName[_ngcontent-%COMP%]{margin-left:4px;line-height:21px}.topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{height:16px;width:16px;background:0 0;flex-grow:0;color:inherit}.topNFilterModern[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{display:inline-block;width:100%;line-height:22px;margin-left:4px}.topNFilterModern[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%]{margin:0 4px}.topNFilterModern[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-secondary-alt-color2, #888888)}.topNFilterModern[_ngcontent-%COMP%]   .dropDown[_ngcontent-%COMP%]{background:transparent;color:inherit}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .displayName[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .displayName[_ngcontent-%COMP%]{line-height:initial}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputArea[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputArea[_ngcontent-%COMP%]{margin-bottom:0}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{height:initial;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);color:inherit;text-align:left;padding:2px;margin-bottom:2px}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{line-height:initial;vertical-align:middle;min-height:20px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{border-color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{border-color:var(--gray-60, #C8C6C4);background-color:var(--white-color, #FFF);border-radius:2px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone.dropover[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone.dropover[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{background:var(--gray-30, #EDEBE9);border-color:var(--gray-60, #C8C6C4);border-radius:2px;color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4)}",".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{height:32px;background-color:var(--fluentThemeWhiteColor);border:0;padding-left:8px;margin:4px 0;flex-basis:100%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]{border:1px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]{flex-flow:row wrap}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{visibility:hidden!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]:before, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]:before{visibility:visible!important;color:var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{border:0;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%]{border-radius:inherit;border-bottom:1px solid var(--fluentThemeNeutralTertiaryColor);color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%]::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   select[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   select[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralDarkColor)!important;border-radius:4px;border:1px solid var(--fluentThemeNeutralTertiaryColor);background:url(data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%202.49707L3.93262%206.55762L3.31738%205.94238L8%201.25293L12.6826%205.94238L12.0674%206.55762L8%202.49707ZM8%2013.5029L12.0674%209.44238L12.6826%2010.0576L8%2014.7471L3.31738%2010.0576L3.93262%209.44238L8%2013.5029Z%22%20fill%3D%22%23201F1E%22%2F%3E%3C%2Fsvg%3E) center right 10px no-repeat var(--fluentThemeWhiteColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding-left:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   pbi-alert[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   pbi-alert[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E)}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding-right:8px}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}"]}),Ae}()},290:function(Le,oe,t){t.d(oe,{U:function(){return I}});var e=t(7005),n=t(59214),m=t(20658),i=powerbi.common.controllers.TransformElement,O=["*"],I=function(){function T(f,M,A){this.elementRef=f,this.platformCapabilities=M,this.ngZone=A,this.positionChange=new n.EventEmitter}return T.prototype.ngAfterViewInit=function(){this.updatePosition(this.position),this.attachHandlers&&this.updateTransformElement()},T.prototype.ngOnDestroy=function(){this.transformElement&&this.transformElement.destroy()},T.prototype.ngOnChanges=function(f){var M=!1;if(f.autoScrollSelector){var A=f.autoScrollSelector,b=A.currentValue;A.previousValue&&(this.autoScrollElement=void 0),b&&(this.autoScrollElement=$(this.elementRef.nativeElement).closest(b)),M=!f.autoScrollSelector.isFirstChange()}f.attachHandlers&&f.attachHandlers.currentValue&&!f.attachHandlers.isFirstChange()&&(M=!0),f.position&&!f.position.isFirstChange()&&this.updatePosition(f.position.currentValue),f.transformOptions&&!f.transformOptions.isFirstChange()&&(M=!0),this.attachHandlers&&M?this.updateTransformElement():this.transformElement&&!this.attachHandlers&&(this.transformElement.destroy(),this.transformElement=void 0)},T.prototype.updateTransformElement=function(){var f=(0,e.pi)((0,e.pi)({},this.transformOptions),{supportsPointerCapture:this.platformCapabilities.supportsPointerCapture,restrictDraw:this.restrictDraw});this.autoScrollElement&&(f.autoScrollParent=this.autoScrollElement),this.transformElement?this.transformElement.updateOptions(f):this.transformElement=new i($(this.elementRef.nativeElement),this.ngZone,f)},T.prototype.updatePosition=function(f){var M=[];f.angle&&M.push("rotate(".concat(f.angle,"deg)")),M.push("translate(".concat(f.x,"px, ").concat(f.y,"px)")),$(this.elementRef.nativeElement).height(f.height).width(f.width).css("transform",M.join(" ")).css("zIndex",f.z),this.positionChange.emit(f)},T.\u0275fac=function(M){return new(M||T)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(m.E),n.\u0275\u0275directiveInject(n.NgZone))},T.\u0275cmp=n.\u0275\u0275defineComponent({type:T,selectors:[["transform"]],inputs:{attachHandlers:"attachHandlers",autoScrollSelector:"autoScrollSelector",position:"position",restrictDraw:"restrictDraw",transformOptions:"transformOptions"},outputs:{positionChange:"positionChange"},features:[n.\u0275\u0275NgOnChangesFeature],ngContentSelectors:O,decls:1,vars:0,template:function(M,A){1&M&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275projection(0))},styles:["[_nghost-%COMP%]{position:absolute}"]}),T}()},52416:function(Le,oe,t){t.d(oe,{g:function(){return i}});var e=t(59214),n=t(37803),m=t(26904),i=function(){function O(I){this.modelingUICapabilitiesService=I,this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/visual-calc-editor/visual-calc-editor.module#VisualCalcEditorModule",this.componentId="VisualCalcEditorComponentId"}return O.prototype.ngOnInit=function(){this.modelingUICapabilitiesService.disableDataModelFormulaBar()},O.prototype.ngOnChanges=function(){this.inputArgs={visualContainer:this.visualContainer,themeCollection:this.themeCollection,viewport:this.viewport,detailVisualSpinnerActionCallback:this.detailVisualSpinnerActionCallback}},O.prototype.ngOnDestroy=function(){this.modelingUICapabilitiesService.enableDataModelFormulaBar()},O.\u0275fac=function(T){return new(T||O)(e.\u0275\u0275directiveInject(n.B))},O.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["visual-calc-editor-lazy"]],inputs:{visualContainer:"visualContainer",themeCollection:"themeCollection",viewport:"viewport",detailVisualSpinnerActionCallback:"detailVisualSpinnerActionCallback"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[1,"visual-calc-editor-lazy"],[3,"modulePath","componentId","inputArgs"]],template:function(T,f){1&T&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"pbi-lazy-load",1),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("modulePath",f.modulePath)("componentId",f.componentId)("inputArgs",f.inputArgs))},dependencies:[m.R],styles:["div.visual-calc-editor-lazy[_ngcontent-%COMP%]{width:100%}"]}),O}()},79393:function(Le,oe,t){t.d(oe,{e:function(){return y}});var e=t(72249),n=t(59214),m=t(7772),i=t(87714),O=t(22422),I=t(89515),T=t(93460),f=t(44302),M=t(63694),A=t(75939),b=t(31465),P=t(6067),y=function(){function C(d,g,S,B,w,V){this.contextActivityService=d,this.eventBridge=g,this.explorationCapabilities=S,this.localizationService=B,this.lazyProvider=w,this.telemetryService=V,this.disableCopyVisualImageButton$=new e.X(!1)}return C.prototype.ngOnInit=function(){var d=this;this.lazyProvider.get("@powerbi/CopyVisualImage/copy-visual-image.module#CopyVisualImageModule","copyVisualImageService").then(function(g){d.copyVisualImageService=g,d.disableCopyVisualImageButton$.next(d.disableCopyVisualImageButton())})},C.prototype.copyVisualContainer=function(){var d,g=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"CopyVisual",source:"VisualHeader"}});this.telemetryService.logEvent(powerbi.telemetry.CopyVisualImageEntryPoint,{visualType:powerbi.explore.util.VisualContainerUtils.getVisualType(this.visual.contract),hasMetadata:!0,entryPoint:"VisualHeader"}),this.eventBridge.publishToChannel(powerbi.explore.services.events.copyVisualAsImage,{visual:this.visual,hasMetadata:!0,useModernClipboard:null===(d=this.explorationCapabilities.getCapabilities())||void 0===d?void 0:d.useModernClipboard}),g.resolve()},C.prototype.getCopyTileTitle=function(){return this.localizationService.get("CopyVisualImage_Caption")},C.prototype.getCopyTooltipTitle=function(){return this.disableCopyVisualImageButton$.value?this.localizationService.get("CopyVisualImage_NotSupported"):this.getCopyTileTitle()},C.prototype.disableCopyVisualImageButton=function(){var d=powerbi.explore.util.VisualContainerUtils.getVisualType(this.visual.contract);return!this.copyVisualImageService.canCopy(d)},C.\u0275fac=function(g){return new(g||C)(n.\u0275\u0275directiveInject(m.r),n.\u0275\u0275directiveInject(i.J),n.\u0275\u0275directiveInject(O.U),n.\u0275\u0275directiveInject(I.o),n.\u0275\u0275directiveInject(T.E),n.\u0275\u0275directiveInject(f.y0))},C.\u0275cmp=n.\u0275\u0275defineComponent({type:C,selectors:[["visual-container-copy-button"]],inputs:{visual:"visual"},decls:4,vars:7,consts:[[3,"dynamicStyle"],[1,"vcCopyBtn",3,"disabled","pbiTooltip","apply-style","click"],[1,"glyphicon","pbi-glyph-copy","glyph-small"]],template:function(g,S){1&g&&(n.\u0275\u0275elementStart(0,"visual-header-item-container",0)(1,"button",1),n.\u0275\u0275listener("click",function(){return S.copyVisualContainer()}),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275element(3,"i",2),n.\u0275\u0275elementEnd()()),2&g&&(n.\u0275\u0275property("dynamicStyle",S.visual.readOnlyState.headerItemContainerStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",n.\u0275\u0275pipeBind1(2,5,S.disableCopyVisualImageButton$))("pbiTooltip",S.getCopyTooltipTitle())("apply-style",S.visual.readOnlyState.headerForegroundStyle),n.\u0275\u0275attribute("aria-label",S.getCopyTileTitle()))},dependencies:[M.V,A.Y,b.s,P.AsyncPipe],encapsulation:2,changeDetection:0}),C}()},45168:function(Le,oe,t){t.d(oe,{p:function(){return b}});var e=t(59214),n=t(76115),m=t(87714),i=t(89515),O=t(6067),I=t(63694),T=t(75939),f=t(31465),M=powerbi.explore.services.events;function A(y,C){if(1&y){var d=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(d);var B=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(B.toggleDrillDown())}),e.\u0275\u0275elementEnd()()}if(2&y){var g=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",g.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("pbi-glyph-drilldownenabled",g.isDrillDownEnabled),e.\u0275\u0275property("ngClass",g.visual.useStylableHeader()?"pbi-glyph-drilldowndisabled-nocircle":"pbi-glyph-drilldowndisabled")("pbiTooltip",g.title)("apply-style",g.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",g.title)}}var b=function(){function y(C,d,g){this.drill=C,this.eventBridge=d,this.localizationService=g}return y.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},y.prototype.ngOnInit=function(){var C=this;this.updateDrillState(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(M.visualContainerChanged,function(d,g){g&&g.affectContainer(C.visual.contract)&&C.updateDrillState()}).subscribe(M.drillModeChanged,function(d,g){C.updateDrillState()})},y.prototype.updateDrillState=function(){if(!this.visual)return this.canDrillDown=!1,void(this.isDrillDownEnabled=!1);var C=this.visual.contract,d=this.drill;this.canDrillDown=P(1,d,C);var g=C.drillMode,S=!1;(1===g&&!this.canDrillDown||null!=g&&0!==g&&!P(g,d,C))&&(S=!0),S&&this.drill.setDrillMode(C,0),this.isDrillDownEnabled=d.isDrillModeEnabled(C,1),this.title=this.localizationService.get(1===this.visual.contract.drillMode?"DrillMode_ToolTip":"DrillDown_ToolTip")},y.prototype.toggleDrillDown=function(){this.isDrillDownEnabled=!1===this.isDrillDownEnabled,this.drill.setDrillMode(this.visual.contract,this.isDrillDownEnabled?1:0)},y.\u0275fac=function(d){return new(d||y)(e.\u0275\u0275directiveInject(n.s),e.\u0275\u0275directiveInject(m.J),e.\u0275\u0275directiveInject(i.o))},y.\u0275cmp=e.\u0275\u0275defineComponent({type:y,selectors:[["visual-container-drill-toggle"]],inputs:{visual:"visual"},decls:1,vars:1,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],[1,"drillDownLevelGrouped","glyphicon","glyph-small",3,"ngClass","pbiTooltip","apply-style","click"]],template:function(d,g){1&d&&e.\u0275\u0275template(0,A,2,7,"visual-header-item-container",0),2&d&&e.\u0275\u0275property("ngIf",g.canDrillDown)},dependencies:[O.NgClass,O.NgIf,I.V,T.Y,f.s],encapsulation:2}),y}();function P(y,C,d){switch(y){case 1:return C.canDrillByDirection(d,2)||C.canDrillByDirection(d,4)||C.canDrillByDirection(d,1);case 3:return C.canDrillthrough(d);case 2:return C.canDrillToDetails(d);case 0:return!0;default:return!1}}},76302:function(Le,oe,t){t.d(oe,{c:function(){return h}});var e=t(59214),n=t(7772),m=t(76115),i=t(87714),O=t(89515),I=t(41844),T=t(26963),f=t(6067),M=t(55858),A=t(45647),b=t(63694),P=t(45168),y=t(75939),C=t(31465),d=powerbi.explore.services.events,g=powerbi.explore.viewModels.ViewModelFactory,S=["drillUpButton"],B=["drillDownButton"];function w(p,D){if(1&p&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"option",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&p){var x=D.$implicit,z=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngValue",x.name)("apply-style",z.visual.readOnlyState.headerBackgroundStyle),e.\u0275\u0275attribute("label",x.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(x.name)}}function V(p,D){if(1&p){var x=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2),e.\u0275\u0275element(1,"span",3),e.\u0275\u0275elementStart(2,"select",4),e.\u0275\u0275listener("ngModelChange",function(q){e.\u0275\u0275restoreView(x);var de=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(de.activeRoleName=q)})("ngModelChange",function(){e.\u0275\u0275restoreView(x);var q=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(q.onRoleChanged())})("click",function(q){return q.stopPropagation()})("mousedown",function(q){e.\u0275\u0275restoreView(x);var de=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(de.handleRoleNameMouseDown(q))}),e.\u0275\u0275template(3,w,3,4,"ng-container",5),e.\u0275\u0275elementEnd()()}if(2&p){var z=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",z.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("apply-style",z.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",z.activeRoleName)("apply-style",z.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",z.drillableRoles)("ngForTrackBy",z.role&&z.role.name)}}function v(p,D){if(1&p){var x=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2)(1,"button",7,8),e.\u0275\u0275listener("click",function(q){e.\u0275\u0275restoreView(x);var de=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(de.drillUp(q))}),e.\u0275\u0275elementEnd()()}if(2&p){var z=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",z.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("drillDownLevelGrouped glyphicon glyph-small ",z.visual.useStylableHeader()?"pbi-glyph-drillup-nocircle":"pbi-glyph-drillup",""),e.\u0275\u0275property("pbiTooltip",z.drillUpTitle())("disabled",!z.canDrillUp)("apply-style",z.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",z.drillUpTitle())}}function c(p,D){if(1&p&&e.\u0275\u0275element(0,"visual-container-drill-toggle",9),2&p){var x=e.\u0275\u0275nextContext();e.\u0275\u0275property("visual",x.visual)}}function u(p,D){if(1&p){var x=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2)(1,"button",10,11),e.\u0275\u0275listener("click",function(q){e.\u0275\u0275restoreView(x);var de=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(de.drillDownLevel(q))}),e.\u0275\u0275elementEnd()()}if(2&p){var z=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",z.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("drillDownLevelGrouped glyphicon glyph-small ",z.visual.useStylableHeader()?"pbi-glyph-expand-nocircle":"pbi-glyph-expand",""),e.\u0275\u0275property("pbiTooltip",z.drillLevelTitle())("disabled",!z.canDrillDownWithoutCurrentGroup)("apply-style",z.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",z.drillLevelTitle())}}function r(p,D){if(1&p){var x=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2)(1,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(x);var q=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(q.drillDownLevelGrouped())}),e.\u0275\u0275elementEnd()()}if(2&p){var z=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",z.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("drillDownLevelGrouped glyphicon glyph-small ",z.visual.useStylableHeader()?"pbi-glyph-inline-drill-nocircle":"pbi-glyph-inline-drill",""),e.\u0275\u0275property("pbiTooltip",z.drillLevelGroupedTitle())("disabled",!z.canDrillDownWithCurrentGroup)("apply-style",z.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",z.drillLevelGroupedTitle())}}var h=function(){function p(D,x,z,Q,q,de){this.contextActivityService=D,this.drill=x,this.eventBridge=z,this.localizationService=Q,this.visualAuthoring=q,this.visualPlugin=de,this.drillableRoles=[]}return p.prototype.ngOnInit=function(){var D=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(d.visualContainerChanged,function(x,z){D.updateDrillableRoles(),D.updateDrillMode(z)}).subscribe(d.drillModeChanged,function(x,z){D.updateDrillModeCore()}),this.updateDrillableRoles(),this.updateDrillModeCore()},p.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},p.prototype.handleRoleNameMouseDown=function(D){if(jsCommon.BrowserUtils.isFirefox()||jsCommon.BrowserUtils.isInternetExplorer11()){D.preventDefault();var x=1+this.drillableRoles.indexOf(this.activeRole);x>=this.drillableRoles.length&&(x=0),this.activeRole=this.drillableRoles[x],this.onRoleChanged()}},Object.defineProperty(p.prototype,"activeRoleName",{get:function(){return this.activeRole.name},set:function(x){var z=_.find(this.drillableRoles,function(Q){return Q.name===x});z&&(this.activeRole=z)},enumerable:!1,configurable:!0}),p.prototype.drillUp=function(D){var x,z=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"DrillUp",source:"VisualHeader"}});this.visualAuthoring.drillUp(this.getActiveRoleName(),this.visual.contract),z.resolve(),!this.canDrillUp&&D&&jsCommon.BrowserUtils.isKeyboardClick(D)&&(null===(x=this.drillDownButton)||void 0===x||x.nativeElement.focus())},p.prototype.drillDownLevel=function(D){var x,z=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"DrillDown",source:"VisualHeader"}});this.visualAuthoring.drillDownLevel(this.getActiveRoleName(),this.visual.contract,3),z.resolve(),!this.canDrillDownWithoutCurrentGroup&&D&&jsCommon.BrowserUtils.isKeyboardClick(D)&&(null===(x=this.drillUpButton)||void 0===x||x.nativeElement.focus())},p.prototype.drillDownLevelGrouped=function(){var D=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"DrillDownLevelGrouped",source:"VisualHeader"}});this.visualAuthoring.drillDownLevel(this.getActiveRoleName(),this.visual.contract,2),D.resolve()},p.prototype.canDrill=function(){var D=this.visualPlugin.capabilities(this.visual.contract.config.singleVisual.visualType);return!(D&&D.drilldown&&D.drilldown.suppresDrillOperations)&&(this.canDrillDownWithCurrentGroup||this.canDrillDownWithoutCurrentGroup||this.canDrillUp)},p.prototype.canDrillOnMoreThanOneRole=function(){return this.drillableRoles.length>1},p.prototype.onRoleChanged=function(){this.updateDrillModeCore()},p.prototype.drillUpTitle=function(){return this.localizationService.get("DrillUp_ToolTip")},p.prototype.drillLevelTitle=function(){return this.localizationService.get(this.canDrillDownWithCurrentGroup||this.canDrillDownWithoutCurrentGroup?"DrillDownLevel_ToolTip":"DrillDownLevelDisabled_ToolTip")},p.prototype.drillLevelGroupedTitle=function(){return this.localizationService.get(this.canDrillDownWithCurrentGroup||this.canDrillDownWithoutCurrentGroup?"DrillDownLevelGrouped_ToolTip":"DrillDownLevelDisabled_ToolTip")},p.prototype.updateDrillMode=function(D){D&&D.affectContainer(this.visual.contract)&&this.updateDrillModeCore()},p.prototype.updateDrillableRoles=function(){this.drillableRoles=[];var D=this.visualPlugin.capabilities(this.visual.contract.config.singleVisual.visualType);if(D){var x=D.dataRoles;if(x)for(var z=0,Q=x;z<Q.length;z++){var q=Q[z],de=q.name;(this.canDrillDownWithCurrentGroupOnRole(de)||this.canDrillDownWithoutCurrentGroupOnRole(de)||this.canDrillUpOnRole(de))&&this.drillableRoles.push({name:de,value:g.getDisplayName(q.displayName)})}}if(_.isEmpty(this.drillableRoles))this.activeRole=void 0;else{var se=this.getActiveRoleName();_.find(this.drillableRoles,function(Ie){return se===Ie.name})||(this.activeRole=this.drillableRoles[0])}},p.prototype.canDrillDownWithCurrentGroupOnRole=function(D){return this.drill.canDrillByDirection(this.visual.contract,2,D)},p.prototype.canDrillDownWithoutCurrentGroupOnRole=function(D){return this.drill.canDrillByDirection(this.visual.contract,4,D)},p.prototype.canDrillUpOnRole=function(D){return this.drill.canDrillByDirection(this.visual.contract,1,D)},p.prototype.getActiveRoleName=function(){return this.activeRole?this.activeRole.name:null},p.prototype.updateDrillModeCore=function(){var D=this.getActiveRoleName();this.canDrillDownWithCurrentGroup=this.canDrillDownWithCurrentGroupOnRole(D),this.canDrillDownWithoutCurrentGroup=this.canDrillDownWithoutCurrentGroupOnRole(D),this.canDrillUp=this.canDrillUpOnRole(D)},p.\u0275fac=function(x){return new(x||p)(e.\u0275\u0275directiveInject(n.r),e.\u0275\u0275directiveInject(m.s),e.\u0275\u0275directiveInject(i.J),e.\u0275\u0275directiveInject(O.o),e.\u0275\u0275directiveInject(I.$),e.\u0275\u0275directiveInject(T.D))},p.\u0275cmp=e.\u0275\u0275defineComponent({type:p,selectors:[["visual-container-drill"]],viewQuery:function(x,z){if(1&x&&(e.\u0275\u0275viewQuery(S,5),e.\u0275\u0275viewQuery(B,5)),2&x){var Q=void 0;e.\u0275\u0275queryRefresh(Q=e.\u0275\u0275loadQuery())&&(z.drillUpButton=Q.first),e.\u0275\u0275queryRefresh(Q=e.\u0275\u0275loadQuery())&&(z.drillDownButton=Q.first)}},inputs:{visual:"visual"},decls:5,vars:5,consts:[[3,"dynamicStyle",4,"ngIf"],["class","optionSection",3,"visual",4,"ngIf"],[3,"dynamicStyle"],["localize","Drill_On","id","drillOnText",3,"apply-style"],["aria-labelledby","drillOnText",3,"ngModel","apply-style","ngModelChange","click","mousedown"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngValue","apply-style"],[3,"pbiTooltip","disabled","apply-style","click"],["drillUpButton",""],[1,"optionSection",3,"visual"],["data-automation-type","drillDownLevelButton",3,"pbiTooltip","disabled","apply-style","click"],["drillDownButton",""]],template:function(x,z){1&x&&(e.\u0275\u0275template(0,V,4,6,"visual-header-item-container",0),e.\u0275\u0275template(1,v,3,8,"visual-header-item-container",0),e.\u0275\u0275template(2,c,1,1,"visual-container-drill-toggle",1),e.\u0275\u0275template(3,u,3,8,"visual-header-item-container",0),e.\u0275\u0275template(4,r,2,8,"visual-header-item-container",0)),2&x&&(e.\u0275\u0275property("ngIf",z.visual.isHeaderItemVisible("drillRoleSelector")&&z.canDrillOnMoreThanOneRole()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",z.visual.isHeaderItemVisible("drillUpButton")&&z.canDrill()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",z.visual.useStylableHeader()&&z.visual.isHeaderItemVisible("drillToggleButton")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",z.visual.isHeaderItemVisible("drillDownLevelButton")&&z.canDrill()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",z.visual.isHeaderItemVisible("drillDownExpandButton")&&z.canDrill()))},dependencies:[f.NgForOf,f.NgIf,M.YN,M.Kr,M.EJ,M.JJ,M.On,A.X,b.V,P.p,y.Y,C.s],encapsulation:2}),p}()},6651:function(Le,oe,t){t.d(oe,{m:function(){return v}});var e=t(31288),n=t(84452),m=t(32531),i=t(69169),O=t(76734),I=t(31844),T=t(29129),f=t(59214),M=t(89515),A=t(554),b=t(87714),P=t(89010),y=t(93997),C=t(6067),d=t(63694),g=t(75939),S=t(31465),B=powerbi.explore.services.events,w=powerbi.explore.util.VisualContainerUtils;function V(c,u){if(1&c){var r=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2,3),f.\u0275\u0275listener("click",function(){f.\u0275\u0275restoreView(r);var D=f.\u0275\u0275reference(2),x=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(x.handleMouseClick(D))})("mouseenter",function(){f.\u0275\u0275restoreView(r);var D=f.\u0275\u0275reference(2),x=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(x.handleMouseEnter(D))})("mouseleave",function(D){f.\u0275\u0275restoreView(r);var x=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(x.handleMouseLeave(D))}),f.\u0275\u0275element(3,"i",4),f.\u0275\u0275elementEnd()()}if(2&c){var h=f.\u0275\u0275nextContext();f.\u0275\u0275property("dynamicStyle",h.visual.readOnlyState.headerItemContainerStyle),f.\u0275\u0275advance(1),f.\u0275\u0275property("apply-style",h.visual.readOnlyState.headerForegroundStyle)("pbiTooltip",h.pinTileTitle),f.\u0275\u0275attribute("aria-label",h.ariaLabel)}}var v=function(){function c(u,r,h,p,D,x,z,Q){this.el=u,this.localizationService=r,this.visualPluginOps=h,this.canvasScaleService=p,this.overlay=D,this.injector=x,this.componentFactoryResolver=z,this.eventBridge=Q,this.close$=new e.xQ,this.showTimeout=500}return c.prototype.ngOnInit=function(){var u=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(B.visibilityChanged,function(){u.closeStickyOverlay()}),this.ariaLabel=this.localizationService.get("FilterRestatementVisual_Button_Label"),this.pinTileTitle=this.localizationService.get("FilterRestatementVisual_Button_Label")},c.prototype.ngOnDestroy=function(){this.clearShowRestatementTimeout(),null!=this.subscriptionManager&&this.subscriptionManager.unsubscribeAll(),this.closeStickyOverlay()},c.prototype.showButton=function(){var u=this.visual.isHeaderItemVisible("filterRestatementButton"),r=w.getVisualType(this.visual.contract),h=this.visualPluginOps.isQueryVisual(r);return u&&h},c.prototype.handleMouseClick=function(u){(null==this.overlayRef||!this.sticky)&&(this.clearShowRestatementTimeout(),this.showRestatement(u,!0))},c.prototype.handleMouseEnter=function(u){this.setShowRestatementTimeout(u)},c.prototype.handleMouseLeave=function(u){var r,h,p;this.clearShowRestatementTimeout();var D=null===(p=null===(h=null===(r=this.overlayRef)||void 0===r?void 0:r.componentRef)||void 0===h?void 0:h.location)||void 0===p?void 0:p.nativeElement;null!=D&&D.contains(u.relatedTarget)||this.close$.next(!1)},c.prototype.closeStickyOverlay=function(){this.sticky&&(this.sticky=!1,this.overlayRef.close(),this.overlayRef=void 0,this.close$.next(!1))},c.prototype.listenForHideIntent=function(){var u=this,r=this.close$.pipe((0,n.b)(1e3)).subscribe(function(h){!h&&!u.sticky&&(u.overlayRef&&(u.overlayRef.close(),u.overlayRef=void 0),r.unsubscribe(),r=null)})},c.prototype.setShowRestatementTimeout=function(u){var r=this;null!=this.showTimer||null!=this.overlayRef||(this.showTimer=setTimeout(function(){r.showTimer=void 0,r.showRestatement(u)},this.showTimeout))},c.prototype.clearShowRestatementTimeout=function(){this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=void 0)},c.prototype.showRestatement=function(u,r){var h=this;if(null==this.overlayRef||!this.sticky){var p=this.overlayRef;this.sticky=r;var D=this.injector;if(!D)throw new Error("Parent element injector undefined when creating filter restatement overlay");var x={visual:this.visual.contract,options:this.options?this.options:{hideExistingOverlays:!0},isSticky:r},z=this.overlay.position().flexibleConnectedTo(u).withPositions([(0,I.Oq)(-4,0),(0,I.hT)(4,0),(0,I.f6)(4,0),(0,I.w3)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0);this.overlayRef=this.overlay.open({component:T.k,data:x,options:{positionStrategy:z,hasBackdrop:r,disposeOnNavigation:!0,backdropClass:"cdk-overlay-transparent-backdrop"},focusElementOnClose:r?u:null,hasCaret:!1,injector:D,componentFactoryResolver:this.componentFactoryResolver,closeOnBackdropClick:r}),r?this.overlayRef.onClose.pipe((0,m.q)(1)).subscribe(function(){h.overlayRef=void 0,h.sticky=!1}):(this.overlayRef.isPointerWithin$&&this.overlayRef.isPointerWithin$.pipe((0,i.T)(1),(0,O.x)()).subscribe(function(Q){h.close$.next(Q)}),this.listenForHideIntent()),p&&p.close()}},c.\u0275fac=function(r){return new(r||c)(f.\u0275\u0275directiveInject(f.ElementRef),f.\u0275\u0275directiveInject(M.o),f.\u0275\u0275directiveInject(A.f),f.\u0275\u0275directiveInject(P.Z),f.\u0275\u0275directiveInject(y._c),f.\u0275\u0275directiveInject(f.Injector),f.\u0275\u0275directiveInject(f.ComponentFactoryResolver),f.\u0275\u0275directiveInject(b.J))},c.\u0275cmp=f.\u0275\u0275defineComponent({type:c,selectors:[["visual-container-filter-restatement-button"]],inputs:{visual:"visual",options:"options"},decls:1,vars:1,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],["cdkmonitorelementfocus","","aria-haspopup","true","aria-expanded","false",1,"vcFilterRestatementBtn",3,"apply-style","pbiTooltip","click","mouseenter","mouseleave"],["overlayOrigin",""],[1,"glyphicon","pbi-glyph-filter","glyph-small"]],template:function(r,h){1&r&&f.\u0275\u0275template(0,V,4,4,"visual-header-item-container",0),2&r&&f.\u0275\u0275property("ngIf",h.showButton())},dependencies:[C.NgIf,d.V,g.Y,S.s],encapsulation:2,changeDetection:0}),c}()},9934:function(Le,oe,t){t.d(oe,{x:function(){return c}});var e=t(7005),n=t(32531),m=t(88661),i=t(14545),O=t(31120),I=t(31844),T=t(93997),f=t(59214),M=t(7772),A=t(81602),b=t(89515),P=t(44302),y=t(537),C=t(17107),d=t(6067),g=t(80268),S=t(63694),B=t(75939),w=t(31465),V=powerbi.common.ArrowVerticalPosition;function v(u,r){if(1&u){var h=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"visual-header-item-container",0)(1,"button",4),f.\u0275\u0275listener("click",function(){f.\u0275\u0275restoreView(h);var x=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(x.resetVisualContainer())}),f.\u0275\u0275element(2,"i",5),f.\u0275\u0275elementEnd()()}if(2&u){var p=f.\u0275\u0275nextContext();f.\u0275\u0275property("dynamicStyle",p.visual.readOnlyState.headerItemContainerStyle),f.\u0275\u0275advance(1),f.\u0275\u0275property("apply-style",p.visual.readOnlyState.headerForegroundStyle)("pbi-tooltip",p.resetTooltipConfig),f.\u0275\u0275attribute("aria-label",p.resetLabel)}}var c=function(){function u(r,h,p,D,x,z,Q,q){this.contextActivityService=r,this.lazyScopedProviderModern=h,this.localizationService=p,this.overlay=D,this.telemetryService=x,this.injector=z,this.visibility=Q,this.visualOverlayPositionService=q,this.resetLabel=this.localizationService.get("InlineExplore_ResetVisualToDefault"),this.resetTooltipConfig={tooltipArrowVerticalPosition:V.bottom,tooltipTitle:this.resetLabel,tooltipShowOnFocus:!0}}return u.prototype.getTitle=function(){return this.localizationService.get(this.isInteractive?"InlineExplore_VisualHeader_Label":"InlineExplore_VisualHeader_Label_NonInteractive")},u.prototype.handleMouseClick=function(){var r=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"PersonalizeVisual",source:"VisualHeader"}});this.isInteractive&&(this.setSpotlight(),this.showExploreMode()),r.resolve()},u.prototype.resetVisualContainer=function(){return(0,e.mG)(this,void 0,void 0,function(){var r;return(0,e.Jh)(this,function(p){switch(p.label){case 0:return r=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"PersonalizeResetVisual",source:"VisualHeader"}}),[4,this.lazyScopedProviderModern.get("persistentState")];case 1:return p.sent().resetVisualContainer(this.visual.contract),this.telemetryService.logChildEvent(this.rootTelemetryEvent,i.iD,{}),r.resolve(),[2]}})})},u.prototype.setSpotlight=function(){this.visibility.set(this.visual.contract,4)},u.prototype.showExploreMode=function(){var r=this,h=this.visualOverlayPositionService.flexibleConnectedTo(this.visual.contract).withPositions([(0,I.Zz)(4,0),(0,I.Iz)(-4,0),(0,I.J7)(4,0),(0,I.Kb)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0),p=this.telemetryService.startEvent(O.l,{overlayType:"Main"});this.rootTelemetryEvent=p.event,this.overlay.open({component:m.i,data:{visual:this.visual.contract,rootEvent:this.rootTelemetryEvent},options:{positionStrategy:h,hasBackdrop:!0,backdropClass:T.L6},closeOnBackdropClick:!0,injector:this.injector}).onClose.pipe((0,n.q)(1)).subscribe(function(){p.resolve(),r.visibility.clearForVisualContainers([r.visual.contract])})},u.\u0275fac=function(h){return new(h||u)(f.\u0275\u0275directiveInject(M.r),f.\u0275\u0275directiveInject(A.H),f.\u0275\u0275directiveInject(b.o),f.\u0275\u0275directiveInject(T._c),f.\u0275\u0275directiveInject(P.y0),f.\u0275\u0275directiveInject(f.Injector),f.\u0275\u0275directiveInject(y.w),f.\u0275\u0275directiveInject(C.z))},u.\u0275cmp=f.\u0275\u0275defineComponent({type:u,selectors:[["visual-container-personalize-visual-button"]],inputs:{visual:"visual",isInteractive:"isInteractive",showReset:"showReset"},decls:4,vars:5,consts:[[3,"dynamicStyle"],["aria-haspopup","true","aria-expanded","false",3,"apply-style","pbiTooltip","click"],[1,"glyphicon","pbi-glyph-barchartverticaledit","glyph-small"],[3,"dynamicStyle",4,"ngIf"],[3,"apply-style","pbi-tooltip","click"],[1,"glyphicon","pbi-glyph-undo","glyph-small"]],template:function(h,p){1&h&&(f.\u0275\u0275elementStart(0,"visual-header-item-container",0)(1,"button",1),f.\u0275\u0275listener("click",function(){return p.handleMouseClick()}),f.\u0275\u0275element(2,"i",2),f.\u0275\u0275elementEnd()(),f.\u0275\u0275template(3,v,3,4,"visual-header-item-container",3)),2&h&&(f.\u0275\u0275property("dynamicStyle",p.visual.readOnlyState.headerItemContainerStyle),f.\u0275\u0275advance(1),f.\u0275\u0275property("apply-style",p.visual.readOnlyState.headerForegroundStyle)("pbiTooltip",p.getTitle()),f.\u0275\u0275attribute("aria-label",p.getTitle()),f.\u0275\u0275advance(2),f.\u0275\u0275property("ngIf",p.showReset))},dependencies:[d.NgIf,g.i,S.V,B.Y,w.s],encapsulation:2,changeDetection:0}),u}()},23700:function(Le,oe,t){t.d(oe,{c:function(){return c}});var e=t(7005),n=t(64450),m=t(23583),i=t(59214),O=t(10242),I=t(26963),T=t(89515),f=t(20019),M=t(42645),A=t(45927),b=t(89718),P=t(87714),y=t(78099),C=t(11719),d=t(16018),g=t(7772),S=t(6067),B=t(63694),w=t(75939),V=t(31465);function v(u,r){if(1&u){var h=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),i.\u0275\u0275listener("click",function(x){i.\u0275\u0275restoreView(h);var z=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(z.pinVisualContainer(x))}),i.\u0275\u0275element(2,"i",3),i.\u0275\u0275elementEnd()()}if(2&u){var p=i.\u0275\u0275nextContext();i.\u0275\u0275property("dynamicStyle",p.visual.readOnlyState.headerItemContainerStyle)("hidden",!p.showPin()),i.\u0275\u0275advance(1),i.\u0275\u0275property("disabled",p.disablePin)("pbiTooltip",p.getPinTileTitle())("apply-style",p.visual.readOnlyState.headerForegroundStyle),i.\u0275\u0275attribute("aria-label",p.getPinTileTitle())}}var c=function(){function u(r,h,p,D,x,z,Q,q,de,se,Ie,fe,re){this.resourceLoader=r,this.localizationService=h,this.explorationNavigation=p,this.filterGenerator=D,this.conceptualSchemaProxy=x,this.explorationSerializer=z,this.promiseFactory=Q,this.dataSources=q,this.viewModeState=de,this.visualPlugin=se,this.pinVisual=Ie,this.eventBridge=fe,this.contextActivityService=re}return u.prototype.pinVisualContainer=function(r){return(0,e.mG)(this,void 0,void 0,function(){var h,p,D,z=this;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:h=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"PinVisual",source:"VisualHeader"}}),p=function(){var Ie,de=z.dataSources.get(),se=z.visual;return z.conceptualSchemaProxy.get(de).then(function(fe){Ie=z.visual.hostServices.getFilters(z.filterGenerator,fe)}).then(function(){return(0,m.H)(se.contract,z.explorationNavigation.getCurrentExploration(),z.visualPlugin,z.resourceLoader,z.promiseFactory,z.explorationSerializer)}).then(function(fe){return z.pinVisual.pinVisualContainer(de,fe,Ie,se.themeCollection,z.explorationNavigation.getCurrentExploration().resourcePackages)})},Q.label=1;case 1:return Q.trys.push([1,5,,6]),this.promptToSaveFirst()?[3,3]:[4,p()];case 2:return Q.sent(),[3,4];case 3:D=this.localizationService.get("ReportContainer_NeedToSaveReportBeforePin"),this.eventBridge.publishToChannel(powerbi.explore.events.saveAsExploration,{promptMessage:D}),Q.label=4;case 4:return h.resolve(),[3,6];case 5:return Q.sent(),h.reject(),[3,6];case 6:return r&&r.stopPropagation&&r.stopPropagation(),[2]}})})},u.prototype.promptToSaveFirst=function(){var r=this.explorationNavigation.getCurrentExploration();return!(!r||r.report)},u.prototype.canPin=function(){return this.viewModeState.getConfig().supportsPinning&&this.pinVisual.canPin(this.visual)},u.prototype.showPin=function(){return this.visual&&this.visual.options.showPin},u.prototype.getPinTileTitle=function(){return this.localizationService.get(this.visual.options.disablePin?"PinTile_NotSupportedTitle":"PinVisual_ToolTip")},u.\u0275fac=function(h){return new(h||u)(i.\u0275\u0275directiveInject(O.l6),i.\u0275\u0275directiveInject(T.o),i.\u0275\u0275directiveInject(f.z),i.\u0275\u0275directiveInject(M.r),i.\u0275\u0275directiveInject(y.i),i.\u0275\u0275directiveInject(A.L),i.\u0275\u0275directiveInject(n.t),i.\u0275\u0275directiveInject(b.D),i.\u0275\u0275directiveInject(C.kc),i.\u0275\u0275directiveInject(I.D),i.\u0275\u0275directiveInject(d.k),i.\u0275\u0275directiveInject(P.J),i.\u0275\u0275directiveInject(g.r))},u.\u0275cmp=i.\u0275\u0275defineComponent({type:u,selectors:[["visual-container-pin-button"]],inputs:{visual:"visual",disablePin:"disablePin"},decls:1,vars:1,consts:[[3,"dynamicStyle","hidden",4,"ngIf"],[3,"dynamicStyle","hidden"],[1,"vcPinBtn",3,"disabled","pbiTooltip","apply-style","click"],[1,"glyphicon","pbi-glyph-pinned","glyph-small"]],template:function(h,p){1&h&&i.\u0275\u0275template(0,v,3,6,"visual-header-item-container",0),2&h&&i.\u0275\u0275property("ngIf",p.canPin())},dependencies:[S.NgIf,B.V,w.Y,V.s],encapsulation:2}),u}()},91697:function(Le,oe,t){t.d(oe,{E:function(){return d}});var e=t(7005),n=t(59214),m=t(90289),i=t(35760),O=t(6067),I=t(45647),T=t(58473),f=t(6093),M=t(67455),A=["backToReportButton"];function b(g,S){1&g&&n.\u0275\u0275element(0,"div",9)}function P(g,S){if(1&g&&n.\u0275\u0275element(0,"div",10),2&g){var B=n.\u0275\u0275nextContext();n.\u0275\u0275property("innerText",B.viewModel.readOnlyState.popOutBarTitle)}}function y(g,S){if(1&g&&n.\u0275\u0275element(0,"div",11),2&g){var B=n.\u0275\u0275nextContext();n.\u0275\u0275property("innerText",B.viewModel.readOnlyState.popOutBarSubtitle)}}function C(g,S){if(1&g&&(n.\u0275\u0275elementStart(0,"div",12),n.\u0275\u0275element(1,"span",13)(2,"span",14),n.\u0275\u0275elementEnd()),2&g){var B=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("innerText",B.viewModel.lastUpdateAttemptTime)}}var d=function(g){function S(){var B=g.call(this)||this;return B.popout=new n.EventEmitter,B.closeButtonRendered=new n.EventEmitter,B.shouldFocusOn$=g.prototype.changes$.call(B,"viewModel").pipe((0,m.U)(function(w){return null!=w.contract.visibility&&8!==w.contract.visibility&&16!==w.contract.visibility})),B}return(0,e.ZT)(S,g),S.prototype.onClosePopOut=function(B){this.popout.emit(B)},S.prototype.ngAfterViewInit=function(){this.closeButtonRendered.emit(this.backToReportButton.nativeElement)},S.\u0275fac=function(w){return new(w||S)},S.\u0275cmp=n.\u0275\u0275defineComponent({type:S,selectors:[["visual-container-pop-out-bar"]],viewQuery:function(w,V){var v;(1&w&&n.\u0275\u0275viewQuery(A,5),2&w)&&(n.\u0275\u0275queryRefresh(v=n.\u0275\u0275loadQuery())&&(V.backToReportButton=v.first))},inputs:{viewModel:"viewModel"},outputs:{popout:"onClosePopOut",closeButtonRendered:"onCloseButtonRendered"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:12,vars:10,consts:[["keyboard-shortcuts","",1,"popOutBar"],["type","button","data-automation-type","backToReportButton",3,"focus-on","click"],["backToReportButton",""],[1,"glyphicon","iconBox","pbi-glyph-chevronleftmedium","glyph-small"],["localize","VisualContainer_PopOut_BackToReportButton",1,"menuItem"],["class","divider",4,"ngIf"],["class","title trimmedTextWithEllipsis",3,"innerText",4,"ngIf"],["class","subtitle trimmedTextWithEllipsis",3,"innerText",4,"ngIf"],["class","visualLastRefreshTime trimmedTextWithEllipsis",4,"ngIf"],[1,"divider"],[1,"title","trimmedTextWithEllipsis",3,"innerText"],[1,"subtitle","trimmedTextWithEllipsis",3,"innerText"],[1,"visualLastRefreshTime","trimmedTextWithEllipsis"],["localize","ReportAppBar_LastRefresh"],[1,"dataUpdatedTime",3,"innerText"]],template:function(w,V){1&w&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"button",1,2),n.\u0275\u0275listener("click",function(c){return V.onClosePopOut(c)}),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275pipe(5,"localize"),n.\u0275\u0275element(6,"i",3)(7,"span",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(8,b,1,0,"div",5),n.\u0275\u0275template(9,P,1,1,"div",6),n.\u0275\u0275template(10,y,1,1,"div",7),n.\u0275\u0275template(11,C,3,1,"div",8),n.\u0275\u0275elementEnd()),2&w&&(n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("focus-on",n.\u0275\u0275pipeBind1(4,6,V.shouldFocusOn$)),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(5,8,"VisualContainer_PopOut_BackToReportButton")),n.\u0275\u0275advance(6),n.\u0275\u0275property("ngIf",V.viewModel.readOnlyState.popOutBarTitle||V.viewModel.readOnlyState.popOutBarSubtitle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",V.viewModel.readOnlyState.popOutBarTitle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",V.viewModel.readOnlyState.popOutBarSubtitle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",V.viewModel.lastUpdateAttemptTime))},dependencies:[O.NgIf,I.X,T.j,f.q,O.AsyncPipe,M.F],styles:['.popOutBar[_ngcontent-%COMP%]{position:absolute;top:20px;left:0;right:0;margin:0;padding:0;height:40px;line-height:40px;list-style-type:none;font-size:12px;overflow:hidden;display:flex;flex-direction:row;align-items:center}.popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{vertical-align:top;text-transform:uppercase;letter-spacing:.04375em}html[data-focus-source="key"][_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:focus, html[data-focus-source="key"][_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px;background-color:transparent}.popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-family:wf_standard-font,helvetica,arial,sans-serif;color:var(--neutral-secondary-color, #666666)}.popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--bold-secondary-font-family, "wf_standard-font_bold", helvetica, arial, sans-serif);color:var(--theme-secondary-alt-color, #444444);max-width:500px;padding-right:5px}.popOutBar[_ngcontent-%COMP%]   .visualLastRefreshTime[_ngcontent-%COMP%]{float:right;margin-left:auto}.popOutBar[_ngcontent-%COMP%]   .menuItem[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:12px}.popOutBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:0;line-height:16px;height:38px;background-color:transparent;color:var(--neutral-secondary-color, #666666);margin-top:1px}.popOutBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.popOutBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-left:12px;margin-right:6px}.popOutBar[_ngcontent-%COMP%]   .iconBox[_ngcontent-%COMP%]{padding:0;margin:0;cursor:pointer}html[dir=rtl][_ngcontent-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .iconBox[_ngcontent-%COMP%]{transform:rotate(90deg)}.popOutBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;font-size:12px;display:inline-block;cursor:default;vertical-align:top;line-height:40px;padding:0 15px;outline:none}.popOutBar[_ngcontent-%COMP%] > div.divider[_ngcontent-%COMP%]{display:inline-block;width:1px;height:30px;background-color:var(--neutral-secondary-alt-color3, #999999);margin-top:5px;padding:0}.popOutBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .popOutBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:top}']}),S}(i.w)},21182:function(Le,oe,t){t.d(oe,{Y:function(){return M}});var e=t(59214),n=t(7772),m=t(89515),i=t(87714),O=t(63694),I=t(75939),T=t(31465),f=powerbi.explore.services.events,M=function(){function A(b,P,y){this.contextActivityService=b,this.localizationService=P,this.eventBridge=y,this.onVisualContainerRefresh=new e.EventEmitter,this.label=this.localizationService.get("VisualContainer_Analyze")}return A.prototype.refreshVisual=function(){var b=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"RefreshVisual",source:"VisualHeader"}});this.eventBridge.publishToChannel(f.userActionTriggered,{source:"UserAction_Refresh"}),this.onVisualContainerRefresh.emit(),b.resolve()},A.\u0275fac=function(P){return new(P||A)(e.\u0275\u0275directiveInject(n.r),e.\u0275\u0275directiveInject(m.o),e.\u0275\u0275directiveInject(i.J))},A.\u0275cmp=e.\u0275\u0275defineComponent({type:A,selectors:[["visual-container-refresh-button"]],inputs:{visual:"visual"},outputs:{onVisualContainerRefresh:"onVisualContainerRefresh"},decls:3,vars:4,consts:[[3,"dynamicStyle"],[3,"pbiTooltip","apply-style","click"],[1,"glyphicon","pbi-glyph-analyze","glyph-small"]],template:function(P,y){1&P&&(e.\u0275\u0275elementStart(0,"visual-header-item-container",0)(1,"button",1),e.\u0275\u0275listener("click",function(){return y.refreshVisual()}),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()()),2&P&&(e.\u0275\u0275property("dynamicStyle",y.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",y.label)("apply-style",y.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",y.label))},dependencies:[O.V,I.Y,T.s],encapsulation:2}),A}()},51504:function(Le,oe,t){t.d(oe,{Q:function(){return D}});var e=t(59214),n=t(78099),m=t(7772),i=t(89718),O=t(87714),I=t(86718),T=t(61034),f=t(89515),M=t(44302),A=t(41844),b=t(6067),P=t(80268),y=t(75939),C=t(31465),d=powerbi.common.ArrowVerticalPosition,g=powerbi.explore.services.events,S=powerbi.explore.services.selectionUtils,B=powerbi.telemetry,w=powerbi.explore.util.VisualContainerUtils,V=powerbi.explore.contracts.VisualRelationshipFilterActionUtil,v=function(z,Q){return{"pbi-glyph-crossfilterfilled":z,"pbi-glyph-crossfilter":Q}};function c(x,z){if(1&x){var Q=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),e.\u0275\u0275listener("click",function(se){e.\u0275\u0275restoreView(Q);var Ie=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ie.setVisualRelationshipFilterAction(se,1))}),e.\u0275\u0275elementEnd()()}if(2&x){var q=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",q.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,v,1===q.filterAction,1!==q.filterAction))("pbi-tooltip",q.filterTooltipConfig)("apply-style",q.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",q.filterTitle)}}var u=function(z,Q){return{"pbi-glyph-crosshighlightfilled":z,"pbi-glyph-crosshighlight":Q}};function r(x,z){if(1&x){var Q=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),e.\u0275\u0275listener("click",function(se){e.\u0275\u0275restoreView(Q);var Ie=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ie.setVisualRelationshipFilterAction(se,2))}),e.\u0275\u0275elementEnd()()}if(2&x){var q=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",q.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,u,2===q.filterAction,2!==q.filterAction))("pbi-tooltip",q.highlightTooltipConfig)("apply-style",q.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",q.highlightTitle)}}var h=function(z,Q){return{"pbi-glyph-disablefilled":z,"pbi-glyph-disable":Q}};function p(x,z){if(1&x){var Q=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),e.\u0275\u0275listener("click",function(se){e.\u0275\u0275restoreView(Q);var Ie=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ie.setVisualRelationshipFilterAction(se,3))}),e.\u0275\u0275elementEnd()()}if(2&x){var q=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",q.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,h,3===q.filterAction,3!==q.filterAction))("pbi-tooltip",q.noneTooltipConfig)("apply-style",q.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",q.noneTitle)}}var D=function(){function x(z,Q,q,de,se,Ie,fe,re,pe){this.conceptualSchemaProxy=z,this.contextActivityService=Q,this.dataSources=q,this.eventBridge=de,this.localizationService=se,this.selection=Ie,this.telemetryService=fe,this.visualAuthoring=re,this.visualRelationship=pe,this.onVisualContainerChanged=new e.EventEmitter,this.filterTitle=this.localizationService.get("VisualRelationships_DataFilter"),this.filterTooltipConfig={tooltipArrowVerticalPosition:d.bottom,tooltipTitle:this.filterTitle,tooltipShowOnFocus:!0},this.highlightTitle=this.localizationService.get("VisualRelationships_HighlightFilter"),this.highlightTooltipConfig={tooltipArrowVerticalPosition:d.bottom,tooltipTitle:this.highlightTitle,tooltipShowOnFocus:!0},this.noneTitle=this.localizationService.get("None"),this.noneTooltipConfig={tooltipArrowVerticalPosition:d.bottom,tooltipTitle:this.noneTitle,tooltipShowOnFocus:!0}}return x.prototype.ngOnInit=function(){var z=this;this.loadVisualRelationshipFilterAction(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(g.selectionChanged,function(){return z.loadVisualRelationshipFilterAction()}).subscribe(g.visualTypeChanged,function(){return z.loadVisualRelationshipFilterAction()}).subscribe(g.explorationSlowDataSourceSettingsLoaded,function(Q,q){return q.isCrossHighlightingDisabledChanged&&z.loadVisualRelationshipFilterAction()})},x.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},x.prototype.setVisualRelationshipFilterAction=function(z,Q){var q=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"SetVisualRelationship",source:"VisualHeader"}});z&&z.stopPropagation&&z.stopPropagation();var de=S.getSelectedVisual(this.selection);this.visual.hostServices.setVisualRelationshipFilterAction(de,this.visual.contract,Q,this.visualAuthoring),this.telemetryService.logEvent(B.EXVisualRelationshipOverride,{sourceVisualType:w.getVisualType(de),targetVisualType:w.getVisualType(this.visual.contract),filterAction:V.toString(Q)}),this.filterAction=Q,this.onVisualContainerChanged.emit(),q.resolve()},x.prototype.loadVisualRelationshipFilterAction=function(){var z=this,Q=S.getSelectedVisual(this.selection);if(Q){var q=this.dataSources.get();this.conceptualSchemaProxy.get(q).then(function(de){var se=z.visual.hostServices.getVisualRelationshipFilterAction(Q,z.visualRelationship,de);0===se&&(se=z.visualRelationship.defaultFilterAction(Q,z.visual.contract)),z.filterAction=se})}},x.prototype.supportsVisualRelationshipFilterAction=function(z){var Q=S.getSelectedVisual(this.selection);return this.visualRelationship.supportsFilterActionTarget(Q,this.visual.contract,z)},x.\u0275fac=function(Q){return new(Q||x)(e.\u0275\u0275directiveInject(n.i),e.\u0275\u0275directiveInject(m.r),e.\u0275\u0275directiveInject(i.D),e.\u0275\u0275directiveInject(O.J),e.\u0275\u0275directiveInject(f.o),e.\u0275\u0275directiveInject(I.z),e.\u0275\u0275directiveInject(M.y0),e.\u0275\u0275directiveInject(A.$),e.\u0275\u0275directiveInject(T.s))},x.\u0275cmp=e.\u0275\u0275defineComponent({type:x,selectors:[["visual-container-relationship-filters"]],inputs:{visual:"visual"},outputs:{onVisualContainerChanged:"onVisualContainerChanged"},decls:3,vars:3,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],[1,"glyphicon","glyph-small","alwaysVisible",3,"ngClass","pbi-tooltip","apply-style","click"]],template:function(Q,q){1&Q&&(e.\u0275\u0275template(0,c,2,8,"visual-header-item-container",0),e.\u0275\u0275template(1,r,2,8,"visual-header-item-container",0),e.\u0275\u0275template(2,p,2,8,"visual-header-item-container",0)),2&Q&&(e.\u0275\u0275property("ngIf",q.supportsVisualRelationshipFilterAction(1)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",q.supportsVisualRelationshipFilterAction(2)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",q.supportsVisualRelationshipFilterAction(3)))},dependencies:[b.NgClass,b.NgIf,P.i,y.Y,C.s]}),x}()},92274:function(Le,oe,t){t.d(oe,{Z:function(){return m}});var e=t(59214),n=t(26904),m=function(){function i(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/visual-container-skittles/visual-container-skittles-ui.module#VisualContainerSkittlesUIModule",this.componentId="VisualContainerSkittlesComponentId"}return i.\u0275fac=function(I){return new(I||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["visual-container-skittles-lazy"]],decls:1,vars:2,consts:[[3,"modulePath","componentId"]],template:function(I,T){1&I&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&I&&e.\u0275\u0275property("modulePath",T.modulePath)("componentId",T.componentId)},dependencies:[n.R],encapsulation:2,changeDetection:0}),i}()},8522:function(Le,oe,t){t.d(oe,{s:function(){return r}});var e=t(31288),n=t(84452),m=t(32531),i=t(69169),O=t(76734),I=t(31844),T=t(57759),f=t(59214),M=t(89515),A=t(89010),b=t(93997),P=t(26963),y=t(64857),C=t(89718),d=t(87714),g=t(22422),S=t(6067),B=t(63694),w=t(75939),V=t(31465),v=powerbi.explore.services.events,c=powerbi.explore.util.VisualContainerUtils;function u(h,p){if(1&h){var D=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2,3),f.\u0275\u0275listener("click",function(Q){f.\u0275\u0275restoreView(D);var q=f.\u0275\u0275reference(2),de=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(de.handleMouseClick(q,Q))})("mouseleave",function(Q){f.\u0275\u0275restoreView(D);var q=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(q.handleMouseLeave(Q))}),f.\u0275\u0275element(3,"i",4),f.\u0275\u0275elementEnd()()}if(2&h){var x=f.\u0275\u0275nextContext();f.\u0275\u0275property("dynamicStyle",x.visual.readOnlyState.headerItemContainerStyle),f.\u0275\u0275advance(1),f.\u0275\u0275property("apply-style",x.visual.readOnlyState.headerForegroundStyle)("pbiTooltip",x.pinTileTitle),f.\u0275\u0275attribute("aria-label",x.ariaLabel)}}var r=function(){function h(p,D,x,z,Q,q,de,se,Ie,fe,re){this.el=p,this.localizationService=D,this.canvasScaleService=x,this.overlay=z,this.injector=Q,this.componentFactoryResolver=q,this.visualPlugin=de,this.featureSwitchService=se,this.dataSources=Ie,this.explorationCapabilities=fe,this.eventBridge=re,this.showTimeout=500,this.close$=new e.xQ}return h.prototype.ngOnDestroy=function(){this.clearShowSmartNarrativeTimeout(),null!=this.subscriptionManager&&this.subscriptionManager.unsubscribeAll(),this.closeStickyOverlay()},h.prototype.ngOnInit=function(){var p=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(v.visibilityChanged,function(){p.closeStickyOverlay()}).subscribe(v.visualContainerChanged,function(){p.isSupported=p.isVisualSupported()}),this.ariaLabel=this.localizationService.get("SmartNarratives_ToolTip"),this.pinTileTitle=this.localizationService.get("SmartNarratives_ToolTip"),this.isSupported=this.isVisualSupported()},h.prototype.ngOnChanges=function(p){(p.visual||p.options)&&(this.isSupported=this.isVisualSupported())},h.prototype.handleMouseClick=function(p,D){this.overlay.isOverlayOpen&&this.overlayRef?this.overlayRef.close():(null==this.overlayRef||!this.sticky)&&(this.clearShowSmartNarrativeTimeout(),this.showSmartNarrative(p,!0))},h.prototype.handleMouseEnter=function(p){this.setShowRestatementTimeout(p)},h.prototype.handleMouseLeave=function(p){var D,x,z;this.clearShowSmartNarrativeTimeout();var Q=null===(z=null===(x=null===(D=this.overlayRef)||void 0===D?void 0:D.componentRef)||void 0===x?void 0:x.location)||void 0===z?void 0:z.nativeElement;null!=Q&&Q.contains(p.relatedTarget)||this.close$.next(!1)},h.prototype.setShowRestatementTimeout=function(p){var D=this;null!=this.showTimer||null!=this.overlayRef||(this.showTimer=setTimeout(function(){D.showTimer=void 0,D.showSmartNarrative(p)},this.showTimeout))},h.prototype.listenForHideIntent=function(){var p=this,D=this.close$.pipe((0,n.b)(1e3)).subscribe(function(x){!x&&!p.sticky&&(p.overlayRef&&(p.overlayRef.close(),p.overlayRef=void 0),D.unsubscribe(),D=null)})},h.prototype.clearShowSmartNarrativeTimeout=function(){this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=void 0)},h.prototype.showSmartNarrative=function(p,D){var x=this;if(null==this.overlayRef||!this.sticky){var z=this.overlayRef;this.sticky=D;var Q=this.injector;if(!Q)throw new Error("Parent element injector undefined when creating smart narrative overlay");var q={visual:this.visual.contract,options:this.options?this.options:{hideExistingOverlays:!0}},de=this.overlay.position().flexibleConnectedTo(p).withPositions([(0,I.Oq)(-4,0),(0,I.hT)(4,0),(0,I.f6)(4,0),(0,I.w3)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0);this.overlayRef=this.overlay.open({component:T.W,data:q,options:{positionStrategy:de,hasBackdrop:D,disposeOnNavigation:!0,backdropClass:"cdk-overlay-transparent-backdrop"},focusElementOnClose:D?p:null,hasCaret:!1,injector:Q,componentFactoryResolver:this.componentFactoryResolver,closeOnBackdropClick:D}),D&&this.overlayRef.onClose.pipe((0,m.q)(1)).subscribe(function(){x.overlayRef=void 0,x.sticky=!1}),this.overlayRef.isPointerWithin$&&this.overlayRef.isPointerWithin$.pipe((0,i.T)(1),(0,O.x)()).subscribe(function(se){x.close$.next(se)}),this.listenForHideIntent(),z&&z.close()}},h.prototype.isVisualSupported=function(){var D=powerbi.explore.services.createVisualPluginOps(this.visualPlugin,this.featureSwitchService).canSummarizeVisual(this.visual.contract.config.singleVisual.visualType);if(!D||c.isSmallMultiplesVisual(this.visual.contract.config.singleVisual))return!1;if(!this.dataSources.get())return!1;var z=this.explorationCapabilities.getCapabilities();return!(!z.insights&&!z.analysisVisuals)&&D},h.prototype.closeStickyOverlay=function(){this.sticky&&(this.sticky=!1,this.close$.next(!1))},h.\u0275fac=function(D){return new(D||h)(f.\u0275\u0275directiveInject(f.ElementRef),f.\u0275\u0275directiveInject(M.o),f.\u0275\u0275directiveInject(A.Z),f.\u0275\u0275directiveInject(b._c),f.\u0275\u0275directiveInject(f.Injector),f.\u0275\u0275directiveInject(f.ComponentFactoryResolver),f.\u0275\u0275directiveInject(P.D),f.\u0275\u0275directiveInject(y.vZ),f.\u0275\u0275directiveInject(C.D),f.\u0275\u0275directiveInject(g.U),f.\u0275\u0275directiveInject(d.J))},h.\u0275cmp=f.\u0275\u0275defineComponent({type:h,selectors:[["visual-container-smart-narrative-button"]],inputs:{visual:"visual",options:"options"},features:[f.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],["cdkmonitorelementfocus","","aria-haspopup","true","aria-expanded","false",1,"vcFilterRestatementBtn",3,"apply-style","pbiTooltip","click","mouseleave"],["overlayOrigin",""],[1,"glyphicon","pbi-glyph-page","glyph-small"]],template:function(D,x){1&D&&f.\u0275\u0275template(0,u,4,4,"visual-header-item-container",0),2&D&&f.\u0275\u0275property("ngIf",x.isSupported)},dependencies:[S.NgIf,B.V,w.Y,V.s]}),h}()},75939:function(Le,oe,t){t.d(oe,{Y:function(){return i}});var e=t(59214),n=t(31465),m=["*"],i=function(){function O(){}return O.\u0275fac=function(T){return new(T||O)},O.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["visual-header-item-container"]],inputs:{dynamicStyle:"dynamicStyle"},ngContentSelectors:m,decls:2,vars:1,consts:[[1,"visualHeaderItemContainer","themeableElement",3,"apply-style"]],template:function(T,f){1&T&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275projection(1),e.\u0275\u0275elementEnd()),2&T&&e.\u0275\u0275property("apply-style",f.dynamicStyle)},dependencies:[n.s],styles:[".visualHeaderItemContainer[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%], .stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]{height:20px;padding-top:1px;margin-left:4px;border:1px solid #ffffff;background-color:#fff}",".exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%], .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]{height:22px;padding-top:1px;margin-left:4px;border:none}.exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button, .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button{width:24px;color:#000;border-radius:4px;background-color:rgba(255,255,255,.75)}.exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button.tooltipInfoButton, .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button.tooltipInfoButton{display:none}"]}),O}()},10664:function(Le,oe,t){t.d(oe,{r:function(){return me}});var e=t(7005),n=t(59214),m=t(72249),i=t(16912),O=t(31970),I=t(93823),T=t(69169),f=t(76199),M=t(14545),A=t(78425),b=t(30351),P=t(95679),y=t(60198),C=t(26963),d=t(91857),g=t(87714),S=t(62087),B=t(86718),w=t(554),V=t(22422),v=t(44536),c=t(64857),u=t(93171),r=t(89515),h=t(70886),p=t(49909),D=t(44302),x=t(20010),z=powerbi.explore.services.events,Q=powerbi.data.getDisplayName,q=powerbi.explore.services.selectionUtils,de=powerbi.explore.viewModels.ViewModelFactory,se=powerbi.explore.util.VisualContainerUtils,Ie=new n.InjectionToken("VisualTypeAboutDialogIdentifier"),fe=function(){function he(G,ce,Fe,je,Oe,J,ue,Me,Se,Ge,nt,st,yt,Ae,Ve,xe,Pe,et,$e,lt,Pt){var Ct=this;this.appSourceResourceService=G,this.eventBridge=ce,this.explorationCapabilities=Fe,this.favoriteVisualLoader=je,this.featureSwitchService=Oe,this.globalEventBridge=J,this.localizationService=ue,this.modernDialogService=Me,this.publicCustomVisualService=Se,this.reportSettingsService=Ge,this.screenReaderService=nt,this.selectionService=st,this.telemetryService=yt,this.trustedVisualService=Ae,this.visualConsent=Ve,this.visualPaneSettingsService=xe,this.visualPluginOps=Pe,this.visualPluginService=et,this.visualPrivilegeService=$e,this.managedCustomVisualsService=lt,this.aboutVisualDialogIdentifier=Pt,this.availableVisualTypesInternal$=new m.X(void 0),this.availableVisualTypes$=this.availableVisualTypesInternal$.pipe((0,T.T)(1)),(0,I.T)(this.eventBridge.on(z.selectionChanged),this.eventBridge.on(z.visualTypeChanged),this.eventBridge.on(z.visualContainerChanged)).pipe().subscribe(function(Ue){var ke,We,ze=(0,e.ev)([],null!==(We=null===(ke=Ct.availableVisualTypesInternal$.value)||void 0===ke?void 0:ke.types)&&void 0!==We?We:[],!0);Ct.updateVisualTypeStates(ze)&&Ct.availableVisualTypesInternal$.next({types:ze,updateSource:"statesUpdateOnly"})}),this.eventBridge.on(z.visualPluginsChanged).subscribe(function(){return(0,e.mG)(Ct,void 0,void 0,function(){return(0,e.Jh)(this,function(Ue){switch(Ue.label){case 0:return[4,this.updateAvailableVisualTypes()];case 1:return Ue.sent(),[2]}})})}),this.eventBridge.on(z.VisualContainerAdded).subscribe(function(Ue){return(0,e.mG)(Ct,void 0,void 0,function(){var ke;return(0,e.Jh)(this,function(We){switch(We.label){case 0:return(ke=se.getVisualType(Ue))?(this.visualPaneSettingsService.addExplorationVisual(ke),[4,this.updateAvailableVisualTypes()]):[3,2];case 1:We.sent(),We.label=2;case 2:return[2]}})})}),this.eventBridge.on(z.addCustomVisual).subscribe(function(Ue){Ct.visualPaneSettingsService.addExplorationVisual(Ue.name),Ct.updateAvailableVisualTypes()})}return he.prototype.initialize=function(G,ce){var je,Fe=this;this.additionalFilter=G,this.customVisualsEnabled=!CustomVisualsUtils.areCustomVisualsDisabled(this.featureSwitchService,null===(je=this.reportSettingsService)||void 0===je?void 0:je.areCustomVisualsDisabled()),this.setCustomVisualActions(),this.trustedVisualService.loadTrustedVisualPlugins().then(function(Oe){Fe.visualPluginService.ensureTrustedVisualPlugins(Oe)}).finally(function(){return(0,e.mG)(Fe,void 0,void 0,function(){return(0,e.Jh)(this,function(Oe){switch(Oe.label){case 0:return[4,this.updateAvailableVisualTypes()];case 1:return Oe.sent(),ce&&ce(),[2]}})})}),this.updateAvailableVisualTypes()},he.prototype.performVisualTypeMenuItemAction=function(G,ce){switch(G){case 0:this.eventBridge.publishToChannel(z.deleteCustomVisuals);break;case 1:this.customVisualsEnabled?this.importVisual():this.showCustomVisualsDisabledDialog();break;case 2:this.eventBridge.publishToChannel(z.downloadVisual);break;case 8:this.restoreAllVisuals();break;case 3:ce&&this.addVisualToFavorites(ce.plugin);break;case 4:ce&&this.removeVisualFromFavorites(ce.plugin);break;case 5:ce&&this.showAboutDialog(ce.plugin,ce.title);break;case 6:ce&&this.unpinVisual(ce.plugin);break;case 7:ce&&this.restoreVisual(ce.plugin)}},he.prototype.performSelectVisualTypeAction=function(G,ce,Fe){var Oe,je=this;void 0===ce&&(ce=!1);var J=G.plugin;if(!1!==this.visualConsent.hasConsent(G.plugin.name)){this.notifyAddVisualToCanvas(J);var ue=Fe||this.getSelectedVisual();if(!ce&&ue){if(this.isVisualTypeEnabled(J,ue)){var Me=se.getVisualType(ue),Se=_.find(null===(Oe=this.availableVisualTypesInternal$.value)||void 0===Oe?void 0:Oe.types,function(Ge){return Ge.plugin.name===Me});this.eventBridge.publishToChannel(z.visualConversion,{visualContainer:ue,newVisualType:J.name,actionAfterConversion:function(){var nt=Se?je.localizationService.format("ChangedVisualType",[Se.title,G.title]):je.localizationService.format("ChangedVisualType_differentSection",[G.title]);je.screenReaderService.alert(nt)}})}}else this.eventBridge.publishToChannel(z.addVisualContainer,{visualType:J.name,telemetrySource:2,shouldSummarize:!0,actionAfterAddition:function(){var nt=je.localizationService.format("CreatedVisualType",[G.title]);je.screenReaderService.alert(nt)}})}else this.showTrustedVisualConsentDialog(G)},he.prototype.importVisual=function(){this.eventBridge.publishToChannel(z.importVisual)},he.prototype.updateAvailableVisualTypes=function(){return(0,e.mG)(this,void 0,void 0,function(){var G;return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.getAvailableVisualTypes()];case 1:return G=ce.sent(),this.updateVisualTypeStates(G),this.availableVisualTypesInternal$.next({types:G,updateSource:"all"}),[2]}})})},he.prototype.updateVisualTypeStates=function(G){if(_.isEmpty(G))return!1;for(var ce=this.getSelectedVisual(),Fe=!1,je=0,Oe=G;je<Oe.length;je++){var J=Oe[je],ue=J.enabled,Me=J.active;J.enabled=this.isVisualTypeEnabled(J.plugin,ce),J.active=this.isVisualTypeActive(J.plugin,ce),Fe=Fe||!!ue!=!!J.enabled||!!Me!=!!J.active}return Fe},he.prototype.getAvailableVisualTypes=function(){return(0,e.mG)(this,void 0,void 0,function(){var G,ce,Fe,je,Oe,J,ue,Me=this;return(0,e.Jh)(this,function(Se){switch(Se.label){case 0:return[4,this.visualPluginService.getConvertibleVisualsAsync()];case 1:for(G=Se.sent(),ce=_.filter(G,function(Ge){return!!Ge&&(!(Me.visualPaneSettingsService.isUnpinnedVisual(Ge.name)&&!Me.visualPaneSettingsService.isExplorationVisual(Ge.name))||void 0)}),Fe=de.getAvailableVisualTypes(ce,this.featureSwitchService,this.visualPaneSettingsService,this.additionalFilter,this.trustedVisualService),je=0,Oe=Fe;je<Oe.length;je++)(J=Oe[je]).plugin.name===powerbi.visuals.plugins.textbox.name&&(ue=this.localizationService.get("SmartNarratives_ToolTip"),J.title=ue,J.tooltipConfig.tooltipTitle=ue);return[2,Fe]}})})},he.prototype.setCustomVisualActions=function(){var G;null!==(G=this.explorationCapabilities.getCapabilities())&&void 0!==G&&G.disableCustomVisualPluginActions||(this.customVisualActions=[],this.featureSwitchService.featureSwitches.customVisualsStore&&this.customVisualActions.push({titleKey:"DownloadVisuals_ContextMenu",action:2}),this.customVisualActions.push({titleKey:"ImportVisuals_ContextMenu",action:1}),this.customVisualActions.push({titleKey:"DeleteVisuals_ContextMenu",action:0}),this.featureSwitchService.featureSwitches.personalVisualizationPaneEnabled&&this.customVisualActions.push({titleKey:"RestoreVisualizationPane_ContextMenu",action:8}))},he.prototype.addVisualToFavorites=function(G){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.favoriteVisualLoader.addVisualToFavorites(G)];case 1:return ce.sent(),this.eventBridge.publishToChannel(z.visualPluginsChanged),[2]}})})},he.prototype.showAboutDialog=function(G,ce){var Fe;return(0,e.mG)(this,void 0,void 0,function(){var je,Oe,J,ue,Me,Se,nt,st,yt,Ae,Ve,xe,Pe;return(0,e.Jh)(this,function(lt){switch(lt.label){case 0:if(this.telemetryService.logEvent(M.nb,{guid:G.name}),!G)return[2];switch(Se=G.publisher,G.source){case 0:return[3,1];case 2:return[3,2];case 1:return[3,4]}return[3,5];case 1:return je=this.localizationService.get("VisualSource_FromFile"),Oe=G.supportUrl&&G.supportUrl.length?G.supportUrl:"https://go.microsoft.com/fwlink/?linkid=2099671",Me=G.developerModeVisual?void 0:this.getWarningVersionsMessage(G.name,G.version),[3,6];case 2:return[4,this.managedCustomVisualsService.isPublicManagedVisualByVisualType(G.name)];case 3:return lt.sent()?(je=this.localizationService.get("VisualSource_FromOrgSource"),Oe=G.supportUrl):G.custom?(je=this.localizationService.get("VisualSource_FromAppSource"),J="https://go.microsoft.com/fwlink/?linkid=2106525"):je=this.localizationService.get("VisualSource_Default"),Oe=G.supportUrl,Me=this.getWarningVersionsMessage(G.name,G.version),[3,6];case 4:return je=this.localizationService.get("VisualSource_FromOrgSource"),Oe=G.supportUrl&&G.supportUrl.length?G.supportUrl:"https://go.microsoft.com/fwlink/?linkid=2100000",[3,6];case 5:Se=this.localizationService.get("AboutVisualDialog_Microsoft"),je=this.localizationService.get("VisualSource_Default"),ue="https://go.microsoft.com/fwlink/?linkid=2100001",lt.label=6;case 6:return(nt=null!==(Fe=G.displayName)&&void 0!==Fe?Fe:Q(G.titleKey,this.localizationService))||(nt=Q(ce,this.localizationService)),st=null,G.custom?[4,this.publicCustomVisualService.isApprovedResourceServerRender(G.name)]:[3,8];case 7:yt=lt.sent(),Ae=this.visualPrivilegeService.getWebAccessParameters(G),Ve=this.visualPrivilegeService.getLocalStoragePrivilege(G),xe=this.visualPrivilegeService.getExportContentPrivilege(G),Pe=this.visualPrivilegeService.getAcquireAADTokenParameters(G),st={certified:yt,webaccess:Ae,localstorage:Ve,exportContent:xe,aadAuthentication:Pe},lt.label=8;case 8:return this.modernDialogService.openHostDialog({bindings:{visualName:nt,supportUrl:Oe,source:je,version:G.version,guid:G.name,appSourceLink:J,publisher:Se,documentation:ue,warning:Me,capabilities:st},componentName:this.aboutVisualDialogIdentifier,dialogName:"AboutVisualDialog"}),[2]}})})},he.prototype.removeVisualFromFavorites=function(G){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(Fe){switch(Fe.label){case 0:return[4,this.modernDialogService.promptHostSimpleDialog("RemoveVisualFromFavoritesWarning",{title:this.localizationService.get("RemoveVisualFromFavoritesWarningTitle"),message:this.localizationService.get("RemoveCustomVisualFromFavoritesWarningMessage"),okButtonText:this.localizationService.get("OK_ButtonText"),cancelButtonText:this.localizationService.get("Cancel_ButtonText")})];case 1:return 1!==Fe.sent()?[3,3]:[4,this.favoriteVisualLoader.removeVisualFromFavorites(G)];case 2:Fe.sent(),this.eventBridge.publishToChannel(z.visualPluginsChanged),Fe.label=3;case 3:return[2]}})})},he.prototype.unpinVisual=function(G){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(Fe){switch(Fe.label){case 0:return[4,this.modernDialogService.promptHostSimpleDialog("UnpinVisualWarning",{title:this.localizationService.get("RemoveVisualFromFavoritesWarningTitle"),message:this.localizationService.get("RemoveVisualFromFavoritesWarningMessage"),okButtonText:this.localizationService.get("OK_ButtonText"),cancelButtonText:this.localizationService.get("Cancel_ButtonText")})];case 1:return 1!==Fe.sent()?[3,3]:[4,this.visualPaneSettingsService.unpinVisual(G)];case 2:Fe.sent(),this.visualPaneSettingsService.addExplorationVisual(G.name),this.eventBridge.publishToChannel(z.visualPluginsChanged),Fe.label=3;case 3:return[2]}})})},he.prototype.restoreVisual=function(G){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.visualPaneSettingsService.restoreVisual(G)];case 1:return ce.sent(),this.eventBridge.publishToChannel(z.visualPluginsChanged),[2]}})})},he.prototype.restoreAllVisuals=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.modernDialogService.promptHostSimpleDialog("RestoreVisualizationPaneWarning",{title:this.localizationService.get("RestoreVisualizationPaneWarningTitle"),message:this.localizationService.get("RestoreVisualizationPaneWarningMessage"),okButtonText:this.localizationService.get("OK_ButtonText"),cancelButtonText:this.localizationService.get("Cancel_ButtonText")})];case 1:return 1!==ce.sent()?[3,3]:[4,this.visualPaneSettingsService.restoreAllVisuals()];case 2:ce.sent(),this.eventBridge.publishToChannel(z.visualPluginsChanged),ce.label=3;case 3:return[2]}})})},he.prototype.getWarningVersionsMessage=function(G,ce){if(this.appSourceResourceService.isNotUpdatedVersion(G,ce))return this.localizationService.format("CustomVisuals_VersionIsNotUpdatedMessage",[this.appSourceResourceService.getVisualVersionFromId(G),ce])},he.prototype.isVisualTypeEnabled=function(G,ce){if(!ce)return!0;var Fe=se.getVisualType(ce),je=this.visualPluginService.capabilities(Fe);return Fe!==G.name&&((null==je?void 0:je.isConvertible)||this.visualPluginOps.isQueryVisual(Fe))},he.prototype.isVisualTypeActive=function(G,ce){return se.getVisualType(ce)===G.name},he.prototype.showTrustedVisualConsentDialog=function(G){return(0,e.mG)(this,void 0,void 0,function(){var ce;return(0,e.Jh)(this,function(Fe){switch(Fe.label){case 0:return[4,this.trustedVisualService.getConsentAndLoadVisuals([G.plugin.name])];case 1:return ce=Fe.sent(),_.isEmpty(ce)||(this.performSelectVisualTypeAction(G),this.visualPluginService.ensureTrustedVisualPlugins(ce),this.eventBridge.publishToChannel(z.visualPluginsChanged),this.globalEventBridge.publishToChannel(powerbi.events.reloadEmptyVisuals,{visualTypes:ce.map(function(je){return je.name})})),[2]}})})},he.prototype.notifyAddVisualToCanvas=function(G){return(0,e.mG)(this,void 0,void 0,function(){var ce,Fe,je,Oe,J,ue,Me;return(0,e.Jh)(this,function(Se){switch(Se.label){case 0:return ce=!1,Fe=!1,je=!1,G.custom?(Oe=G,J=!1,this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?[4,this.publicCustomVisualService.isApprovedResourceByVisualId(Oe.name)]:[3,2]):[3,9];case 1:J=Se.sent(),Se.label=2;case 2:return this.eventBridge.publishToChannel(z.addCustomVisualToCanvas,{visualType:Oe.name,resourcePackageId:Oe.resourcePackageId,isPublic:J}),this.featureSwitchService.featureSwitches.userFavoriteResourcePackagesEnabled?(ue=this.visualPaneSettingsService.isFavoritePublicCustomVisual(Oe.name),(Me=ue)?[3,4]:[4,this.favoriteVisualLoader.isFavoriteResourcePackage(Oe.resourcePackageId)]):[3,5];case 3:Me=Se.sent(),Se.label=4;case 4:ce=Me,Se.label=5;case 5:return this.featureSwitchService.featureSwitches.tenantOutOfBoxVisualsEnabled?[4,this.favoriteVisualLoader.isOutOfBoxResourcePackage(Oe.resourcePackageId)]:[3,7];case 6:Fe=Se.sent(),Se.label=7;case 7:return this.featureSwitchService.featureSwitches.manageMarketplaceVisuals?[4,this.managedCustomVisualsService.isPublicManagedVisualById(Oe.resourcePackageId)]:[3,9];case 8:je=Se.sent(),Se.label=9;case 9:return this.telemetryService.logEvent(M.Cc,{visualType:G.name,isCustom:!!G.custom,isFavorite:ce,isOutOfBox:Fe,isManaged:je}),[2]}})})},he.prototype.getSelectedVisual=function(){return q.getSelectedVisual(this.selectionService)},he.prototype.showCustomVisualsDisabledDialog=function(){this.modernDialogService.promptHostSimpleDialog("ImportCustomVisualsDisabled",{title:this.localizationService.get("ImportCustomVisualsDisabledDialogTitle"),message:this.localizationService.get("ImportCustomVisualsDisabledDialogBody"),additionalMessages:[this.localizationService.get("ImportCustomVisualsDisabledDialogBody_AdditionalMessage")],okButtonText:this.localizationService.get("Close"),cancelButtonText:""})},he.\u0275fac=function(ce){return new(ce||he)(n.\u0275\u0275inject(A.r),n.\u0275\u0275inject(g.J),n.\u0275\u0275inject(V.U),n.\u0275\u0275inject(v.W),n.\u0275\u0275inject(c.vZ),n.\u0275\u0275inject(u.Z),n.\u0275\u0275inject(r.o),n.\u0275\u0275inject(h.x),n.\u0275\u0275inject(b.B),n.\u0275\u0275inject(S.h),n.\u0275\u0275inject(p.g),n.\u0275\u0275inject(B.z),n.\u0275\u0275inject(D.y0),n.\u0275\u0275inject(P.t),n.\u0275\u0275inject(y.f),n.\u0275\u0275inject(x.R),n.\u0275\u0275inject(w.f),n.\u0275\u0275inject(C.D),n.\u0275\u0275inject(d.s),n.\u0275\u0275inject(f.D),n.\u0275\u0275inject(Ie))},he.\u0275prov=n.\u0275\u0275defineInjectable({token:he,factory:he.\u0275fac}),he}(),re=t(67641),pe=t(28774),ge=t(6067),be=t(24696),ae=t(63694),X=t(28958),le=jsCommon.FocusManager,ee=["allVisualTypes"];function N(he,G){if(1&he&&n.\u0275\u0275element(0,"pbi-svg-use-symbol",10),2&he){var ce=n.\u0275\u0275nextContext().$implicit,Fe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("sheet",Fe.core.getVisualIconSheetName(ce))("symbolId",null==ce?null:ce.class)("disabled",Fe.core.isDisabled(ce))}}var F=function(G){return{active:G}},E=function(G,ce){return{disabled:G,isOldIcon:ce}};function k(he,G){if(1&he){var ce=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",5,6),n.\u0275\u0275listener("keydown",function(ue){var Se=n.\u0275\u0275restoreView(ce).index,Ge=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Ge.core.onVisualButtonKeyDown(ue,Se))})("click",function(){var Me=n.\u0275\u0275restoreView(ce).$implicit,Se=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Se.core.performSelectVisualTypeAction(Me))})("mouseover",function(){var Me=n.\u0275\u0275restoreView(ce).$implicit,Se=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Se.core.toggleEffectClasses(Me,!0,!0))})("mouseleave",function(){var Me=n.\u0275\u0275restoreView(ce).$implicit,Se=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Se.core.toggleEffectClasses(Me,!1,!0))})("focus",function(){var Me=n.\u0275\u0275restoreView(ce).$implicit,Se=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Se.core.toggleEffectClasses(Me,!0,!1))})("blur",function(){var Me=n.\u0275\u0275restoreView(ce).$implicit,Se=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Se.core.toggleEffectClasses(Me,!1,!1))})("pbiMenuButtonClick",function(ue){var Se=n.\u0275\u0275restoreView(ce).$implicit,Ge=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Ge.core.selectMenuItem(ue.data,Se))}),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementStart(3,"div",7)(4,"div",8),n.\u0275\u0275template(5,N,1,3,"pbi-svg-use-symbol",9),n.\u0275\u0275elementEnd()()()}if(2&he){var Fe=G.$implicit,je=G.index,Oe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("tabindex",je===n.\u0275\u0275pipeBind1(2,15,Oe.core.visualTypesFocusIndex$)?0:-1)("pbiTooltip",Fe.tooltipConfig.tooltipTitle)("ngClass",n.\u0275\u0275pureFunction1(17,F,Fe.active))("ngStyle",Oe.core.visualStyle(Fe))("pbiMenu",Oe.pbiMenuViewModel(Fe.menuItems))("disabled",Oe.core.disableContextMenu||!Oe.core.showDropdownForCustomVisuals),n.\u0275\u0275attribute("aria-posinset",je+1)("aria-setsize",Oe.core.viewModel.visuals.length)("aria-label",Fe.title)("aria-selected",!!Fe.active),n.\u0275\u0275advance(3),n.\u0275\u0275classMapInterpolate1("visual-icon visual-icon-outer ",Fe.class,""),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(19,E,Oe.core.isDisabled(Fe),!Oe.core.newPaneColorsEnabled||!Oe.core.showDropdownForCustomVisuals)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!(null!=Fe&&Fe.plugin.custom))}}function R(he,G){if(1&he){var ce=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275listener("pbiMenuButtonClick",function(Oe){n.\u0275\u0275restoreView(ce);var J=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(J.core.selectMenuItem(Oe.data,J.visual))}),n.\u0275\u0275element(1,"span",12),n.\u0275\u0275elementEnd()}if(2&he){var Fe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("pbiTooltip",Fe.core.optionsTooltipTitle)("pbiMenu",Fe.core.customVisualMenuItems),n.\u0275\u0275attribute("aria-label",Fe.core.optionsTooltipTitle)}}function W(he,G){if(1&he){var ce=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(ce);var Oe=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Oe.core.importVisual())}),n.\u0275\u0275element(1,"span",12),n.\u0275\u0275elementEnd()}if(2&he){var Fe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("pbiTooltip",Fe.core.optionsTooltipTitle),n.\u0275\u0275attribute("aria-label",Fe.core.optionsTooltipTitle)}}function Z(he,G){if(1&he&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,k,6,22,"button",2),n.\u0275\u0275template(2,R,2,3,"button",3),n.\u0275\u0275template(3,W,2,2,"button",4),n.\u0275\u0275elementEnd()),2&he){var ce=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",ce.core.viewModel.visuals)("ngForTrackBy",ce.core.trackByPluginName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ce.core.showMoreOptionsIcon&&ce.core.showDropdownForCustomVisuals),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ce.core.showMoreOptionsIcon&&!ce.core.showDropdownForCustomVisuals)}}var me=function(){function he(G,ce,Fe,je,Oe,J,ue,Me){var Se=this;this.isFinishedLoading=new n.EventEmitter,this.pbiMenuViewModel=function(Ge){return function(){return Se.convertOldMenuItemToPbiMenu(Ge)}},this.core=new _e(function(){return Se.isFinishedLoading.emit()},{$element:$(G.nativeElement),highContrastCssGenerationService:ce,featureSwitchService:Fe,localizationService:je,explorationCapabilities:Oe,trustedVisual:J,svgProvider:ue,visualTypesService:Me})}return Object.defineProperty(he.prototype,"_allVisualTypeElementRefs",{set:function(ce){this.core.allVisualTypeElementRefs=(null==ce?void 0:ce.toArray())||[]},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"disableMoreOptionsIcon",{get:function(){return this.core.disableMoreOptionsIcon},set:function(ce){this.core.disableMoreOptionsIcon=ce},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"disableContextMenu",{get:function(){return this.core.disableContextMenu},set:function(ce){this.core.disableContextMenu=ce},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"visualPluginFilter",{get:function(){return this.core.visualPluginFilter},set:function(ce){this.core.visualPluginFilter=ce},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"visualContainer",{get:function(){return this.core.visualContainer},set:function(ce){this.core.visualContainer=ce},enumerable:!1,configurable:!0}),he.prototype.ngOnInit=function(){this.core.$onInit()},he.prototype.ngOnDestroy=function(){this.core.$onDestroy()},he.prototype.convertOldMenuItemToPbiMenu=function(G){return{items:G.map(function(Fe){return{text:Fe.text,type:i.iB.Button,data:Fe.action}})}},he.\u0275fac=function(ce){return new(ce||he)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(re.g),n.\u0275\u0275directiveInject(c.vZ),n.\u0275\u0275directiveInject(r.o),n.\u0275\u0275directiveInject(V.U),n.\u0275\u0275directiveInject(P.t),n.\u0275\u0275directiveInject(pe.g),n.\u0275\u0275directiveInject(fe))},he.\u0275cmp=n.\u0275\u0275defineComponent({type:he,selectors:[["visual-types-container-modern"]],viewQuery:function(ce,Fe){var je;(1&ce&&n.\u0275\u0275viewQuery(ee,5,n.ElementRef),2&ce)&&(n.\u0275\u0275queryRefresh(je=n.\u0275\u0275loadQuery())&&(Fe._allVisualTypeElementRefs=je))},inputs:{disableMoreOptionsIcon:"disableMoreOptionsIcon",disableContextMenu:"disableContextMenu",visualPluginFilter:"visualPluginFilter",visualContainer:"visualContainer"},outputs:{isFinishedLoading:"isFinishedLoading"},features:[n.\u0275\u0275ProvidersFeature([fe,{provide:Ie,useValue:O.Ys}])],decls:1,vars:1,consts:[["data-automation-type","visualTypesContainer","role","listbox","class","visual-types-container themeableElement",4,"ngIf"],["data-automation-type","visualTypesContainer","role","listbox",1,"visual-types-container","themeableElement"],["role","option","pbiTooltipCaretSize","small","class","visual-icon-container","pbiMenuActivation","contextmenu",3,"tabindex","pbiTooltip","ngClass","ngStyle","pbiMenu","disabled","keydown","click","mouseover","mouseleave","focus","blur","pbiMenuButtonClick",4,"ngFor","ngForOf","ngForTrackBy"],["class","visual-icon-container more","pbiTooltipCaretSize","small",3,"pbiTooltip","pbiMenu","pbiMenuButtonClick",4,"ngIf"],["class","visual-icon-container more","pbiTooltipCaretSize","small",3,"pbiTooltip","click",4,"ngIf"],["role","option","pbiTooltipCaretSize","small","pbiMenuActivation","contextmenu",1,"visual-icon-container",3,"tabindex","pbiTooltip","ngClass","ngStyle","pbiMenu","disabled","keydown","click","mouseover","mouseleave","focus","blur","pbiMenuButtonClick"],["allVisualTypes",""],[3,"ngClass"],[1,"visual-icon-inner"],[3,"sheet","symbolId","disabled",4,"ngIf"],[3,"sheet","symbolId","disabled"],["pbiTooltipCaretSize","small",1,"visual-icon-container","more",3,"pbiTooltip","pbiMenu","pbiMenuButtonClick"],[1,"visual-icon-inner","glyphicon","pbi-glyph-more"],["pbiTooltipCaretSize","small",1,"visual-icon-container","more",3,"pbiTooltip","click"]],template:function(ce,Fe){1&ce&&n.\u0275\u0275template(0,Z,4,4,"div",0),2&ce&&n.\u0275\u0275property("ngIf",(null==Fe.core.viewModel.visuals?null:Fe.core.viewModel.visuals.length)>0||Fe.core.showMoreOptionsIcon)},dependencies:[ge.NgClass,ge.NgForOf,ge.NgIf,ge.NgStyle,be.R,ae.V,X.l8,ge.AsyncPipe],styles:[".visual-types-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(28px,1fr));row-gap:4px;justify-items:center}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]{background-color:transparent;border:1px solid transparent;margin:1px 3px;width:22px;height:22px;box-sizing:border-box;float:left;transition:none}html[data-focus-source=key][_ngcontent-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%]{color:var(--white-color, #FFF);font-size:16px}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;display:block;background-color:transparent;border:1px solid transparent;box-sizing:border-box}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.more[_ngcontent-%COMP%]:hover   .pbi-glyph-more[_ngcontent-%COMP%]{color:var(--alert-color, #FFF9AE)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--alert-color, #FFF9AE)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811);background-color:rgba(0,0,0,.4)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--alert-color, #FFF9AE)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C);background-color:var(--gray-50, #D2D0CE)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]{margin:0;width:24px;height:24px;box-sizing:border-box}html[data-focus-source=key]   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--fluent-theme-black-color, #000)}html[data-focus-source=key]   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus:hover, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus:hover{background-color:var(--gray-30, #EDEBE9);border-color:var(--fluent-theme-black-color, #000)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:active, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:active{outline:none;border:none;background-color:var(--gray-50, #D2D0CE)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{border:none}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover{border-color:var(--gray-70)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]{border-color:var(--gray-130);background-color:var(--gray-40)}.white-background[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .white-background   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .white-background   .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color)}.compact-visual-types[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .compact-visual-types   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .compact-visual-types   .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(26px,1fr));row-gap:2px}.compact-container[_nghost-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]{width:auto;height:auto;padding:0}.withTopDivider[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{margin-top:3px;border-top:1px solid var(--gray-110);padding-top:3px}"]}),he}(),_e=function(){function he(G,ce){var Fe=this;this.isFinishedLoading=G,this.services=ce,this.optionsTooltipTitle=this.services.localizationService.get("DownloadVisuals_ContextMenu"),this.visualTypesFocusIndex$=new m.X(void 0),this.viewModel={visuals:[]},this.services.visualTypesService.availableVisualTypes$.pipe().subscribe(function(je){Fe.viewModel=powerbi.explore.viewModels.ViewModelFactory.createVisualTypesContainer((0,e.ev)([],je.types,!0));var Oe=_.findIndex(Fe.viewModel.visuals,function(J){return J.active});Fe.visualTypesFocusIndex$.next(Oe>=0?Oe:Math.min(0,Fe.viewModel.visuals.length-1)),Fe.update()}),this.explorationCapabilities=this.services.explorationCapabilities.getCapabilities(),this.newPaneColorsEnabled=this.services.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.showFluentDesign}return he.prototype.$onInit=function(){this.services.visualTypesService.initialize(this.visualPluginFilter,this.isFinishedLoading),this.showDropdownForCustomVisuals=!_.isEmpty(this.services.visualTypesService.customVisualActions),this.showMoreOptionsIcon=!this.disableMoreOptionsIcon&&this.showDropdownForCustomVisuals,this.loadMenuItems(),this.initializeHighContrastRules(),this.services.svgProvider.loadSheet("visualizationPaneIcons_officeUpdate"),this.services.svgProvider.loadSheet("visualizationPaneIcons")},he.prototype.$onDestroy=function(){this.subscriptionManager&&this.subscriptionManager.unsubscribeAll()},he.prototype.getTabIndex=function(G,ce){return null!=_.find(this.viewModel.visuals,function(je){return je.active})?G.active?0:-1:0===ce?0:-1},he.prototype.initializeHighContrastRules=function(){this.services.highContrastCssGenerationService.addRule(".themeableElement .visual-types-container .visual-icon-container.active","{ background-color: @selectedBackgroundColor !important; }"),this.services.highContrastCssGenerationService.addRule(".OfficeIconColors_HighContrast","{ fill: @foregroundColor !important; }"),this.services.highContrastCssGenerationService.addRule("#svgProvider-visualizationPaneIcons_officeUpdate svg symbol .OfficeIconColors_HighContrast","{ fill: currentColor !important; }"),this.services.highContrastCssGenerationService.addRule("#svgProvider-visualizationPaneIcons_officeUpdate svg symbol .OfficeIconColors_HighContrast.active","{ fill: @selectedForegroundColor !important; }"),this.services.highContrastCssGenerationService.addRule(".OfficeIconColors_HighContrast_Off","{ fill: transparent !important;  stroke: transparent !important; }")},he.prototype.onVisualButtonKeyDown=function(G,ce){var Fe,je,Oe,J,ue,Me=this.viewModel.visuals.length;"ArrowLeft"===G.key||"ArrowUp"===G.key?(G.stopPropagation(),this.visualTypesFocusIndex$.next(ue=(ce-1+Me)%Me),le.focus(null===(Fe=this.allVisualTypeElementRefs[ue])||void 0===Fe?void 0:Fe.nativeElement)):"ArrowRight"===G.key||"ArrowDown"===G.key?(G.stopPropagation(),this.visualTypesFocusIndex$.next(ue=(ce+1)%Me),le.focus(null===(je=this.allVisualTypeElementRefs[ue])||void 0===je?void 0:je.nativeElement)):"Home"===G.key?(G.stopPropagation(),this.visualTypesFocusIndex$.next(0),le.focus(null===(Oe=this.allVisualTypeElementRefs[0])||void 0===Oe?void 0:Oe.nativeElement)):"End"===G.key&&(G.stopPropagation(),this.visualTypesFocusIndex$.next(Me-1),le.focus(null===(J=this.allVisualTypeElementRefs[Me-1])||void 0===J?void 0:J.nativeElement))},he.prototype.toggleEffectClasses=function(G,ce,Fe){var je=Fe?jsCommon.DOMConstants.hoverEventName:jsCommon.DOMConstants.focusEventName;this.services.svgProvider.toggleCssClasses(ce,je,this.getVisualIconSheetName(G),G.class)},he.prototype.selectMenuItem=function(G,ce){this.services.visualTypesService.performVisualTypeMenuItemAction(G,ce)},he.prototype.importVisual=function(){this.services.visualTypesService.importVisual()},he.prototype.loadMenuItems=function(){var G=this;this.customVisualMenuItems={items:[]},_.forEach(this.services.visualTypesService.customVisualActions,function(ce){var Fe=G.createCustomVisualMenuItem(G.services.localizationService.get(ce.titleKey),ce.action);G.customVisualMenuItems.items.push(Fe)})},he.prototype.createCustomVisualMenuItem=function(G,ce){return{text:G,type:i.iB.Button,data:ce,checked:!1}},he.prototype.update=function(){var ce=_.find(this.viewModel.visuals,function(Fe){return Fe.active});ce&&this.services.svgProvider.toggleCssClasses(!0,"active",this.getVisualIconSheetName(ce),ce.class),this.currentActiveType&&this.currentActiveType!==ce&&this.services.svgProvider.toggleCssClasses(!1,"active",this.getVisualIconSheetName(this.currentActiveType),this.currentActiveType.class),this.currentActiveType=ce},he.prototype.performSelectVisualTypeAction=function(G){this.services.visualTypesService.performSelectVisualTypeAction(G,!1,this.visualContainer)},he.prototype.visualStyle=function(G){return G.plugin.iconUrl&&(G.plugin.developerModeVisual||G.plugin.custom&&!this.services.trustedVisual.isAutomaticallyImportedVisual(G.plugin.name))?{"background-image":G.plugin.iconUrl,"background-repeat":"round","background-clip":"content-box",padding:"1px"}:null},he.prototype.isDisabled=function(G){return!G.enabled&&!this.newPaneColorsEnabled},he.prototype.getVisualIconSheetName=function(G){return this.newPaneColorsEnabled&&G.class!==powerbi.visuals.plugins.azureMap.name?"visualizationPaneIcons_officeUpdate":"visualizationPaneIcons"},he.prototype.trackByPluginName=function(G,ce){return ce.plugin.name},he}()},10334:function(Le,oe,t){t.d(oe,{Q:function(){return f}});var e=t(6067),n=t(35319),m=t(40989),i=t(15947),I=(t(10664),t(59214)),f=function(){function M(){}return M.\u0275fac=function(b){return new(b||M)},M.\u0275mod=I.\u0275\u0275defineNgModule({type:M}),M.\u0275inj=I.\u0275\u0275defineInjector({imports:[e.CommonModule,m.j,i.Z,n.b]}),M}()},6268:function(Le,oe,t){t.d(oe,{_:function(){return w}});var e=t(93721),n=t(84634),m=t(90289),i='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 479 492" enable-background="new 0 0 479 492" xml:space="preserve">\n<symbol id="100stackedbar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcAreaWithOutline" x="0" y="20.6" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="74.7" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="129.8" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="184" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="241" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcOuterLine" x="0" y="20.6" fill="#D0D2D3" width="313.6" height="39"/>\n  <rect class="hcOuterLine" x="0" y="74.7" fill="#D0D2D3" width="284.9" height="39"/>\n  <rect class="hcOuterLine" x="0" y="129.8" fill="#D0D2D3" width="318.8" height="39"/>\n  <rect class="hcOuterLine" x="0" y="184" fill="#D0D2D3" width="308.6" height="39"/>\n  <rect class="hcOuterLine" x="0" y="241" fill="#D0D2D3" width="278.6" height="39"/>\n  <rect class="hcArea" x="0" y="20.6" opacity="0.5" fill="#A6A8AB" width="211.1" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" opacity="0.5" fill="#A6A8AB" width="186.2" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" opacity="0.5" fill="#A6A8AB" width="211.1" height="39"/>\n  <rect class="hcArea" x="0" y="184" opacity="0.5" fill="#A6A8AB" width="200" height="39"/>\n  <rect class="hcArea" x="0" y="241" opacity="0.5" fill="#A6A8AB" width="184" height="39"/>\n</symbol>\n\n<symbol id="100stackedcolumn">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcAreaWithOutline" x="19" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="83.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="147.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="211.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="275.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="339.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcOuterLine" x="19" y="104.6" fill="#D0D2D3" width="40.9" height="195.5"/>\n  <rect class="hcOuterLine" x="83.1" y="58" fill="#D0D2D3" width="40.9" height="242.1"/>\n  <rect class="hcOuterLine" x="147.1" y="94.6" fill="#D0D2D3" width="40.9" height="205.5"/>\n  <rect class="hcOuterLine" x="211.1" y="99.5" fill="#D0D2D3" width="40.9" height="200.6"/>\n  <rect class="hcOuterLine" x="275.1" y="60.6" fill="#D0D2D3" width="40.9" height="239.5"/>\n  <rect class="hcOuterLine" x="339.1" y="136.5" fill="#D0D2D3" width="40.9" height="163.6"/>\n  <rect class="hcArea" x="19" y="197.6" opacity="0.5" fill="#A6A8AB" width="40.9" height="102.5"/>\n  <rect class="hcArea" x="83.1" y="173.2" opacity="0.5" fill="#A6A8AB" width="40.9" height="126.9"/>\n  <rect class="hcArea" x="147.1" y="192.3" opacity="0.5" fill="#A6A8AB" width="40.9" height="107.8"/>\n  <rect class="hcArea" x="211.1" y="184.7" opacity="0.5" fill="#A6A8AB" width="40.9" height="115.4"/>\n  <rect class="hcArea" x="275.1" y="162.3" opacity="0.5" fill="#A6A8AB" width="40.9" height="137.8"/>\n  <rect class="hcArea" x="339.1" y="206" opacity="0.5" fill="#A6A8AB" width="40.9" height="94.1"/>\n</symbol>\n\n<symbol id="area">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <g>\n    <g>\n      <g>\n        <polygon class="hcArea" fill="#E1E2E3" points="345.1,93.4 287.8,77 230.6,82.1 173.9,211.9 115.1,204.3 56.9,217.5 0.1,172.3 0.1,300\n          399.8,300 399.8,82.3"/>\n      </g>\n    </g>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#D0D2D3" points="115.1,206.7 175,214.5 231.8,84.9 287.3,80 344.6,96.4 399.8,85.2 399.8,81.1 344.8,92.3\n      288.1,76.1 287.7,76 229,81.2 172.5,210.1 114.9,202.7 57.5,215.7 0.1,170.2 0.1,175.3 56.5,220"/>\n  </g>\n</symbol>\n\n<symbol id="bar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcArea" x="0" y="20.6" fill="#D0D2D3" width="179.9" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" fill="#D0D2D3" width="253.4" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" fill="#D0D2D3" width="224.6" height="39"/>\n  <rect class="hcArea" x="0" y="184" fill="#D0D2D3" width="311.1" height="39"/>\n  <rect class="hcArea" x="0" y="241" fill="#D0D2D3" width="367.2" height="39"/>\n</symbol>\n\n<symbol id="kpi">\n     <g id="Creation" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="KPI-Canvas" sketch:type="MSArtboardGroup">\n            <rect class="hcOuterLine" id="BG" fill="#FAFAFA" sketch:type="MSShapeGroup" x="0" y="0" width="400" height="299.441341"></rect>\n            <g id="Rectangle-20-+-Rectangle-21-+-Triangle-3" sketch:type="MSLayerGroup" transform="translate(122.000000, 123.000000)">\n                <rect class="hcArea" id="Rectangle-20" fill="#BABABA" sketch:type="MSShapeGroup" x="0" y="0" width="146" height="24"></rect>\n                <rect class="hcArea" id="Rectangle-21" fill="#DDDDDD" sketch:type="MSShapeGroup" x="32" y="35" width="82" height="10"></rect>\n                <polygon class="hcArea" id="Triangle-3" fill="#DDDDDD" sketch:type="MSShapeGroup" points="173.444444 1 186.888889 23 160 23 "></polygon>\n            </g>\n            <path class="hcAreaWithOutline" d="M-2.30078125,266.449219 L32.9472656,292.931641 L66.9375,285.017578 L100.927734,291.078125 L134.900391,222.228516 L167.779297,219.632812 L198.302734,227.175781 L242.171875,250.173828 L286.412109,226.193359 L316.695312,229.787109 L352.632812,216.943359 L425.914062,225.597656 L425.914062,367.497434 L-34.7301703,367.497434 L-34.7301703,273.284528 L-2.30078125,266.449219 Z" id="Path-2" stroke="#DDDDDD" stroke-width="2" fill="#EAEAEA" sketch:type="MSShapeGroup"></path>\n        </g>\n    </g>\n</symbol>\n\n<symbol id="card">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="0" y="0.3" fill="#A6A6A6" width="8" height="299.6"/>\n  <rect class="hcArea" x="221.6" y="42.2" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="109.7" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="180" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="221.6" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="34.1" y="41.8" opacity="0.5" fill="#A6A8AB" width="142" height="142"/>\n  <rect class="hcArea" x="36.1" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n</symbol>\n\n<symbol id="cardVisual">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="0" y="0.3" fill="#A6A6A6" width="8" height="299.6"/>\n  <rect class="hcArea" x="221.6" y="42.2" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="109.7" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="180" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="221.6" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="34.1" y="41.8" opacity="0.5" fill="#A6A8AB" width="142" height="142"/>\n  <rect class="hcArea" x="36.1" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n</symbol>\n\n<symbol id="clusteredBar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcArea" x="0" y="25.1" fill="#E1E2E3" width="290.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="71.1" fill="#E1E2E3" width="338.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="103.8" fill="#E1E2E3" width="237.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="182.6" fill="#E1E2E3" width="237.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="260.8" fill="#E1E2E3" width="313.1" height="13.5"/>\n  <rect class="hcOuterLine" x="0" y="38.8" fill="#ACACAC" width="211.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="136.5" fill="#E1E2E3" width="284.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="215" fill="#E1E2E3" width="240.1" height="13.5"/>\n  <rect class="hcOuterLine" x="0" y="150.2" fill="#ACACAC" width="336.1" height="13.5"/>\n  <rect class="hcOuterLine" x="0" y="228.4" fill="#ACACAC" width="284.1" height="13.5"/>\n</symbol>\n\n<symbol id="clusteredColumn">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="43.7" y="163.6" fill="#D0D2D3" width="40.9" height="135.7"/>\n  <rect class="hcOuterLine" x="84.4" y="196.8" fill="#ACACAC" width="40.9" height="102.5"/>\n  <rect class="hcArea" x="147.7" y="52.2" fill="#D0D2D3" width="40.9" height="247.1"/>\n  <rect class="hcArea" x="315.4" y="131" fill="#D0D2D3" width="40.9" height="168.3"/>\n  <rect class="hcOuterLine" x="252" y="160.6" fill="#ACACAC" width="40.9" height="138.7"/>\n  <rect class="hcArea" x="211.1" y="103.8" fill="#D0D2D3" width="40.9" height="195.5"/>\n</symbol>\n\n<symbol id="column">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="19.1" y="193.3" fill="#D0D2D3" width="40.9" height="106.9"/>\n  <rect class="hcArea" x="83.1" y="167.8" fill="#D0D2D3" width="40.9" height="132.4"/>\n  <rect class="hcArea" x="147.1" y="187.8" fill="#D0D2D3" width="40.9" height="112.4"/>\n  <rect class="hcArea" x="211.2" y="82.1" fill="#D0D2D3" width="40.9" height="218.1"/>\n  <rect class="hcArea" x="275.2" y="39.9" fill="#D0D2D3" width="40.9" height="260.3"/>\n  <rect class="hcArea" x="339.2" y="122.3" fill="#D0D2D3" width="40.9" height="177.9"/>\n</symbol>\n\n<symbol id="combo">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="20.4" y="189.5" fill="#D0D2D3" width="40.7" height="110.6"/>\n  <rect class="hcArea" x="84.1" y="163.1" fill="#D0D2D3" width="40.7" height="137"/>\n  <rect class="hcArea" x="147.9" y="183.8" fill="#D0D2D3" width="40.7" height="116.4"/>\n  <rect class="hcArea" x="211.6" y="74.4" fill="#D0D2D3" width="40.7" height="225.8"/>\n  <rect class="hcArea" x="275.3" y="30.7" fill="#D0D2D3" width="40.7" height="269.5"/>\n  <rect class="hcArea" x="339" y="116.1" fill="#D0D2D3" width="40.7" height="184.1"/>\n  <polyline class="hcPolyLine" opacity="0.5" fill="none" stroke="#A6A8AB" stroke-width="4" stroke-miterlimit="10" points="399.3,95.6 344.1,106.8\n    287.4,90.5 230.7,95.6 174.6,224.8 116.4,217.1 58.8,230.3 2.4,185.2 "/>\n</symbol>\n\n<symbol id="defaultWatermark">\n  <g>\n    <rect x="0" y="1" opacity="0.5" fill="#F4F4F4" width="400" height="300"/>\n    <path fill="#929497" d="m93.79999 69.79999v47l30.20001 36.09998c10.29999-8.59998 16.79999-21.59998 16.79999-36.09998l0 0c0-25.89999-21.09998-47-47-47z"/>\n    <path fill="#D0D2D3" d="m46.7 116.9c0 22.1 15.3 40.49999 35.6 45.7l11.39999-45.7h-47l0 0 0 0z"/>\n    <path fill="#E1E2E3" d="m93.79999 116.89999l-11.39999 45.69999c3.69998 0.90001 7.39999 1.5 11.39999 1.5 11.5 0 22-4.09999 30.20001-11l-30.20001-36.19999z"/>\n    <path fill="#A6A8AB" d="m93.79999 69.79999c-25.99998 0-46.99998 21-46.99998 47l0 0h46.99998v-47l0 0z"/>\n    <g>\n      <polygon fill="#E1E2E3" points="200.89999389648438 193.5999755859375 167.70001220703125 185.0999755859375 134.29998779296875 187.70001220703125 101.29998779296875 254.9000244140625 67.10000610351562 251 33.30000305175781 257.79998779296875 0.1999969482421875 234.4000244140625 0.1999969482421875 300.5 399.9000244140625 300.5 399.9000244140625 187.9000244140625 349.20001220703125 182.0999755859375 314.1000061035156 194.5999755859375 286.8999938964844 191.0999755859375 242 214.5 "/>\n    </g>\n    <g>\n      <polyline fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" points="399.9000244140625 187.70001220703125 349.20001220703125 182.0999755859375 314.1000061035156 194.5999755859375 286.8999938964844 191.0999755859375 242 214.5 200.89999389648438 193.4000244140625 167.70001220703125 185 134.29998779296875 187.5999755859375 101.29998779296875 254.79998779296875 67.10000610351562 251 33.30000305175781 257.70001220703125 0.1999969482421875 234.4000244140625 "/>\n    </g>\n    <rect x="185.6" y="115.9" fill="#E1E2E3" width="20.7" height="48"/>\n    <rect x="217.8" y="104.4" fill="#E1E2E3" width="20.7" height="59.5"/>\n    <rect x="250.1" y="113.4" fill="#E1E2E3" width="20.7" height="50.5"/>\n    <rect x="282.3" y="66" fill="#E1E2E3" width="20.7" height="97.9"/>\n    <rect x="314.6" y="47" fill="#E1E2E3" width="20.7" height="116.9"/>\n    <rect x="346.8" y="84" fill="#E1E2E3" width="20.7" height="79.9"/>\n    <rect x="185.6" y="129.5" fill="#D0D2D3" width="20.7" height="34.4"/>\n    <rect x="217.8" y="121.2" fill="#D0D2D3" width="20.7" height="42.7"/>\n    <rect x="250.1" y="127.7" fill="#D0D2D3" width="20.7" height="36.1"/>\n    <rect x="282.3" y="93.7" fill="#D0D2D3" width="20.7" height="70.2"/>\n    <rect x="314.6" y="80.1" fill="#D0D2D3" width="20.7" height="83.8"/>\n    <rect x="346.8" y="106.6" fill="#D0D2D3" width="20.7" height="57.2"/>\n    <rect x="185.6" y="145.1" opacity="0.5" fill="#A6A8AB" width="20.7" height="18.7"/>\n    <rect x="217.8" y="140.7" opacity="0.5" fill="#A6A8AB" width="20.7" height="23.2"/>\n    <rect x="250.1" y="144.1" opacity="0.5" fill="#A6A8AB" width="20.7" height="19.7"/>\n    <rect x="282.3" y="125.6" opacity="0.5" fill="#A6A8AB" width="20.7" height="38.2"/>\n    <rect x="314.6" y="118.3" opacity="0.5" fill="#A6A8AB" width="20.7" height="45.6"/>\n    <rect x="346.8" y="132.7" opacity="0.5" fill="#A6A8AB" width="20.7" height="31.1"/>\n  </g>\n</symbol>\n\n<symbol id="donut">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <path class="hcAreaWithOutline" fill="#929497" d="M200.6,55.6v94.5l60.6,72.5c20.7-17.3,33.9-43.4,33.9-72.5v0C295.1,97.9,252.8,55.6,200.6,55.6z"/>\n  <path class="hcAreaWithOutline" fill="#D0D2D3" d="M106.1,150.1c0,44.3,30.5,81.4,71.6,91.7l22.9-91.7H106.1z"/>\n  <path class="hcOuterLine" fill="#E1E2E3" d="M200.6,150.1l-22.9,91.7c7.3,1.8,15,2.8,22.9,2.8c23.1,0,44.2-8.3,60.6-22L200.6,150.1z"/>\n  <path class="hcOuterLine" fill="#A6A8AB" d="M200.6,55.6c-52.2,0-94.5,42.3-94.5,94.5v0h94.5V55.6z"/>\n  <circle class="hcOuterLine" fill="#F4F4F4" cx="200.6" cy="151" r="53.4"/>\n</symbol>\n\n<symbol id="funnel">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g>\n    <g>\n      <g>\n        <rect class="hcArea" x="46.5" y="59.7" fill="#D0D2D3" width="317.6" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="82.7" y="97.9" fill="#D0D2D3" width="245.2" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="141.2" y="136.2" fill="#D0D2D3" width="128.3" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="181.2" y="174.4" fill="#D0D2D3" width="48.3" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="194.1" y="212.6" fill="#D0D2D3" width="23.4" height="34"/>\n      </g>\n    </g>\n  </g>\n</symbol>\n\n<symbol id="filledMap">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g>\n    <defs>\n      <rect id="SVGID_1_" x="0.2" y="0" width="401.4" height="302.1"/>\n    </defs>\n    <clipPath id="SVGID_2_">\n      <use xlink:href="#SVGID_1_"  overflow="visible"/>\n    </clipPath>\n    <path class="hcArea2" clip-path="url(#SVGID_2_)" fill="#E1E2E3" d="M49.4-9.3l18.3,44.6l-97.2,30.3c-2.2,0.7-3.4,3-2.7,5.2c0.6,1.8,2.2,2.9,4,2.9\n      c0.4,0,0.8-0.1,1.2-0.2l57.4-17.9l-1.9,32.9l-59.3-4c-2.3-0.2-4.3,1.6-4.4,3.9c-0.2,2.3,1.6,4.3,3.9,4.4l59.4,4l-6.3,111\n      l-50.9-26.4c-2-1.1-4.5-0.3-5.6,1.8c-1.1,2-0.3,4.5,1.8,5.6l56.6,29.4c0,0,0,0,0,0l21.2,11l-71,60c-1.1,0.9-1.6,2.3-1.4,3.7\n      c0.2,1.4,1,2.6,2.2,3.2l62.9,31.8c0.6,0.3,1.2,0.4,1.9,0.4c1.5,0,3-0.8,3.7-2.3c1-2,0.2-4.5-1.8-5.6l-57.3-29l68.8-58.1l20.9,10.9\n      l-4.6,79.7c-0.1,2.3,1.6,4.2,3.9,4.4c0.1,0,0.2,0,0.2,0c2.2,0,4-1.7,4.1-3.9l4.3-76l39,20.2l-41.7,53c-1.4,1.8-1.1,4.4,0.7,5.8\n      c0.8,0.6,1.7,0.9,2.6,0.9c1.2,0,2.4-0.5,3.3-1.6L180.7,206l54.3,26.3l-44.4,89.9c-1,2.1-0.2,4.5,1.9,5.6c0.6,0.3,1.2,0.4,1.8,0.4\n      c1.5,0,3-0.8,3.7-2.3l44.4-90l40.4,19.6l-34.1,66.7c-1,2-0.2,4.5,1.8,5.6c0.6,0.3,1.2,0.5,1.9,0.5c1.5,0,3-0.8,3.7-2.3l34.2-66.8\n      l63.2,30.6l-2.9,34c-0.2,2.3,1.5,4.3,3.8,4.5c0.1,0,0.2,0,0.4,0c2.1,0,3.9-1.6,4.1-3.8l2.9-34.6L400,295c2.2-0.5,3.6-2.8,3-5\n      c-0.5-2.2-2.8-3.6-5-3l-35.5-5.9l4.3-51H399c2.3,0,4.1-1.9,4.1-4.1c0-2.3-1.9-4.1-4.1-4.1h-48.8l-32.4-16.4l1.2-2.4\n      c0.1-0.3,0.2-0.5,0.3-0.8l3.4-12.9l76.1,2.9c0.1,0,0.1,0,0.2,0c2.2,0,4.1-1.8,4.1-4c0.1-2.3-1.7-4.2-4-4.3l-74.2-2.8l14.3-54\n      c14.8,3.5,31.6,5.8,50.3,5.8c3.2,0,6.4-0.1,9.6-0.2c2.3-0.1,4.1-2,4-4.3c-0.1-2.3-2-4.1-4.3-4c-21.6,0.9-40.8-1.5-57.4-5.5\n      l4.7-17.8c14.6,3.3,27.6,4.2,37.1,4.2c9.7,0,15.8-0.9,16.3-1c2.3-0.3,3.8-2.5,3.5-4.7c-0.3-2.3-2.4-3.8-4.7-3.5\n      c-0.2,0-21.4,3.1-48.3-2.7l5.8-76.7l42.9,3.3c2.3,0.2,4.3-1.5,4.5-3.8c0.2-2.3-1.5-4.3-3.8-4.5l-45.4-3.5l-17.5-31.4\n      c-1.5-1.5-3.9-1.7-5.6-0.3l-62.7,64.2c-9.9-13.8-17.7-30.2-23.5-48.9c-0.7-2.2-3-3.4-5.2-2.7c-2.2,0.7-3.4,3-2.7,5.2\n      c6.5,20.9,15.2,37.9,25.2,51.6l-19.1,16.1c-2.6-1.8-33.6-24.6-44.4-76.8c-0.5-2.2-2.7-3.7-4.9-3.2c-2.2,0.5-3.7,2.7-3.2,4.9\n      c0.7,3.3,1.4,6.5,2.3,9.5l-80.5,25.1c-11.6-10.9-7.7-34.5-7.7-34.8c0.4-2.3-1.1-4.4-3.4-4.8c-2.3-0.4-4.4,1.1-4.8,3.4\n      c-0.2,1.1-4.1,24.4,7.2,38.9l-27.8,8.7c0,0,0,0,0-0.1L55.8-15.6c-0.8-1.8-2.7-2.9-4.7-2.5 M307.8,206.7l-7,13.6l-40.7-20.2l10.9-22\n      l16,9.2c0.6,0.3,1.2,0.5,1.9,0.6l25.4,1l-2.8,10.7l-2.2,4.3 M286.3,71.9c6.9,5.7,13.9,10.4,20.9,14.3c-0.1,0.2-0.3,0.4-0.4,0.6\n      l-8.1,16.4c-12.3-6.2-20.8-12.1-25-15.3l12.4-15.8C286.2,72.1,286.2,72,286.3,71.9z M268.5,94.5c4.5,3.5,13.4,9.8,26.4,16.3\n      l-42.2,85.6l-46.3-23.1L268.5,94.5z M316.5,180.6l-26.2-1l-15.6-9l27.7-56.2c8.3,3.8,17.9,7.4,28.8,10.4L316.5,180.6z M333.4,116.7\n      c-10.2-2.9-19.3-6.4-27.2-9.9l8-16.3c0.1-0.2,0.1-0.4,0.2-0.6c6.4,3.1,12.7,5.5,18.7,7.4c1.7,0.5,3.4,1,5,1.5L333.4,116.7z\n       M333.1-14.8l14.6,28.5l-5.8,77.7c-2.1-0.6-4.1-1.2-6.2-1.9c-25.4-8.2-46.3-22.3-62.4-42.3L333.1-14.8z M280.2,66.5\n      c-0.2,0.2-0.4,0.4-0.6,0.6l-82.9,105.2l0,0l-18.4,23.4l-51.4-24.9L267,52.3C271.2,57.5,275.6,62.3,280.2,66.5z M86.8,160.6\n      l24.9,12.1l-26.9,22.7L86.8,160.6z M87.4,151.6l3-52.7l8.4-4.6l2.2,3.5v14.7c0,2.3,1.9,4.1,4.1,4.1h27.7c1.1,0,2.1-0.4,2.9-1.1\n      L165.6,87l20.7,22.7l-67.6,57.1L87.4,151.6z M184.9,47.6l4,5.6l-57.7,55.1h-21.9V96.6c0-0.8-0.2-1.6-0.6-2.2l-2.6-4L184.9,47.6z\n       M236.3,67.4l-43.7,36.9l-21-23.1l25.7-24.5c1.5-1.4,1.7-3.7,0.5-5.4l-5.5-7.7l16.2-8.8C219.5,53.4,231.5,63.7,236.3,67.4z\n       M204.5,27.5L90.9,89.1l3-53.3L194.9,4.3C197.7,13,201,20.7,204.5,27.5z M38.8,53l46.7-14.6l-3.1,53.8l-45.7-3.1L38.8,53z\n       M29.8,212l6.5-114.6l45.7,3.1l-5.8,102.2l-24.4,20.6L29.8,212z M59.7,227.5l15.8-13.4L74.3,235L59.7,227.5z M126.1,261.9\n      l-43.7-22.7l1.9-32.5l35.7-30.2l53.1,25.7L126.1,261.9z M185.9,199.3l15.2-19.3l47.9,23.8l-10.4,21L185.9,199.3z M246.1,228.5\n      l10.3-21l40.6,20.2l-10.4,20.4L246.1,228.5z M294.1,251.7l12.3-24c0,0,0,0,0,0l0,0l7.7-15l33.3,16.9c0.6,0.3,1.2,0.4,1.9,0.4h9.3\n      l-4.3,50.8L294.1,251.7z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="119.4,172.5 81.5,203.8 79.7,244.4 127.5,265.1 178.4,199.4 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M127.5,270.4c-0.7,0-1.4-0.1-2.1-0.4l-47.8-20.7c-2-0.9-3.3-2.9-3.2-5.1l1.8-40.5c0.1-1.5,0.8-2.9,1.9-3.8\n      l37.9-31.3c1.6-1.3,3.7-1.6,5.6-0.7l59,26.9c1.5,0.7,2.6,2,2.9,3.5c0.4,1.6,0,3.2-1,4.5l-50.9,65.7\n      C130.7,269.6,129.1,270.4,127.5,270.4z M85.2,240.9l40.7,17.6l44.3-57.1l-50-22.7l-33.5,27.7L85.2,240.9z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M301.3,108.4l-30.6,62.9L289,183l30.9,0.6l16-61.9C336,121.7,324,121,301.3,108.4z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M320,188.9C319.9,188.9,319.9,188.9,320,188.9l-31-0.6c-1,0-1.9-0.3-2.8-0.8l-18.3-11.7\n      c-2.3-1.5-3.1-4.4-1.9-6.8l30.6-62.9c0.6-1.3,1.8-2.3,3.2-2.8c1.4-0.4,2.9-0.3,4.2,0.4c20.9,11.7,32.2,12.6,32.4,12.6\n      c1.6,0.1,3,0.9,4,2.2c0.9,1.3,1.2,2.9,0.9,4.4l-16,61.9C324.5,187.3,322.4,188.9,320,188.9z M290.6,177.7l25.2,0.5l13.5-52.3\n      c-5.3-1.3-14-4.1-25.7-10.2l-26.1,53.6L290.6,177.7z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="99.7,90.8 104.9,98.1 104.9,111.3 132,111.3 192.9,53.8 185.9,42.8 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M132,116.6h-27.1c-2.9,0-5.3-2.4-5.3-5.3V99.8l-4.3-5.9c-0.9-1.2-1.2-2.8-0.9-4.3c0.3-1.5,1.3-2.8,2.6-3.5\n      l86.3-47.9c1.9-1,4.2-0.8,5.8,0.5l6.9,10.9c1.2,1,1.9,2.4,2,3.9c0.1,1.5-0.5,3-1.6,4.1l-60.8,57.5C134.7,116,133.4,116.6,132,116.6\n      z M110.2,106h19.7l54.9-51.9l-2.4-1.9l-74.9,40.4l1.7,2.4c0.7,0.9,1,2,1,3.1V106z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="4.8,91.4 30.6,92.8 24.6,213.1 4.8,201.8 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M24.6,218.4c-0.9,0-1.8-0.2-2.6-0.7L2.2,206.4c-1.7-0.9-2.7-2.7-2.7-4.6V91.4c0-1.4,0.6-2.8,1.6-3.8\n      c1.1-1,2.5-1.5,3.9-1.4l25.8,1.3c2.9,0.1,5.2,2.6,5,5.5l-5.9,120.3c-0.1,1.8-1.1,3.5-2.7,4.4C26.4,218.1,25.5,218.4,24.6,218.4z\n       M10.1,198.7l9.7,5.5L25,97.8L10.1,97V198.7z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="240.1,229.5 255.4,202.2 301.3,225.5 287.4,251.5 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M287.4,256.8c-0.8,0-1.5-0.2-2.2-0.5l-47.3-22c-1.3-0.6-2.4-1.8-2.8-3.2s-0.3-2.9,0.4-4.2l15.3-27.3\n      c1.4-2.5,4.5-3.4,7.1-2.1l45.9,23.3c1.3,0.6,2.2,1.8,2.7,3.2c0.4,1.4,0.3,2.9-0.4,4.1l-14,26C291.1,255.8,289.3,256.8,287.4,256.8z\n       M247.6,227.1l37.5,17.4l9-16.7l-36.5-18.5L247.6,227.1z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="358.4,272.1 364.6,226.4 396.5,226.4 397,271.7 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M358.4,277.4c-1.5,0-3-0.7-4-1.8c-1-1.2-1.5-2.7-1.3-4.2l6.2-45.7c0.4-2.6,2.6-4.6,5.3-4.6h31.9\n      c2.9,0,5.3,2.4,5.3,5.3l0.4,45.3c0,2.9-2.3,5.3-5.3,5.4L358.4,277.4C358.4,277.4,358.4,277.4,358.4,277.4z M369.2,231.7l-4.8,35\n      l27.1-0.3l-0.3-34.7H369.2z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M198.6,5c0,0,6.2,34.2,43.5,62.6L314,5.4L198.6,5z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M242.1,72.9c-1.1,0-2.3-0.4-3.2-1.1c-38.5-29.3-45.2-64.4-45.5-65.8c-0.3-1.6,0.1-3.2,1.2-4.4\n      c1-1.2,2.5-1.9,4.1-1.9L314,0.1c2.2,0,4.2,1.4,5,3.5c0.8,2.1,0.2,4.4-1.5,5.9l-71.9,62.1C244.6,72.4,243.4,72.9,242.1,72.9z\n       M205.7,10.3c3.5,10.3,13,31.4,36.3,50.3l57.8-49.9L205.7,10.3z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M56.3,5l15,31.3l37-11.5c0,0-3.1-4.4-7.9-20.3L56.3,5z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M71.2,41.5c-2,0-3.9-1.1-4.8-3l-15-31.3c-0.8-1.6-0.7-3.5,0.3-5.1s2.6-2.5,4.4-2.5l44.1-0.4c0,0,0,0,0.1,0\n      c2.3,0,4.4,1.5,5.1,3.7c4.4,14.4,7.2,18.8,7.3,18.9c1,1.4,1.2,3.1,0.6,4.7c-0.5,1.6-1.9,2.8-3.5,3.3l-37,11.5\n      C72.3,41.5,71.8,41.5,71.2,41.5z M64.6,10.2L74,29.8l26.7-8.3c-1.2-2.7-2.6-6.5-4.3-11.7L64.6,10.2z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M397.4,21.9l-1.6,78.5c-29.3,4.7-49.9-4.7-49.9-4.7L353,17l-8.4-12h53.2L397.4,21.9z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M379.4,107c-21.2,0-35.1-6.2-35.7-6.4c-2.1-0.9-3.3-3.1-3.1-5.3l6.9-76.8l-7.3-10.4\n      c-1.1-1.6-1.3-3.8-0.4-5.5c0.9-1.8,2.7-2.9,4.7-2.9h53.2c1.4,0,2.8,0.6,3.8,1.6c1,1,1.5,2.4,1.5,3.9L402.7,22l-1.6,78.5\n      c-0.1,2.6-1.9,4.7-4.5,5.2C391,106.6,385.2,107,379.4,107z M351.6,92.2c5,1.6,14.9,4.2,27.8,4.2c3.7,0,7.5-0.2,11.2-0.6l1.5-74\n      l0.3-11.4h-37.5l2.5,3.6c0.7,1,1.1,2.3,0.9,3.5L351.6,92.2z"/>\n  </g>\n</symbol>\n\n<symbol id="azureMap">\n  <g>\n    <path d="M123.06 0L0 195.304l154.077-59.735L123.06 0z" fill="#555555"/>\n    <path d="M98.188 39.47l76.356 185.14L123.06 0 98.188 39.47z" fill="#8e8e8e"/>\n    <path d="M93.768 158.95l46.294-17.948 34.482 83.608-80.776-65.66z" fill="#101010"/>\n  </g>\n</symbol>\n\n<symbol id="gauge">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <path class="hcOuterLine" fill="#E1E2E3" d="M200,82.3c-73.7,0-133.4,59.7-133.4,133.4h51.6c0-45.2,36.6-81.8,81.8-81.8s81.8,36.6,81.8,81.8h51.6\n    C333.4,142,273.7,82.3,200,82.3z"/>\n  <path class="hcArea" fill="#A6A8AB" d="M94.4,134.3C77,156.8,66.7,185,66.7,215.7h51.6c0-18.9,6.4-36.2,17.1-50.1L94.4,134.3z"/>\n</symbol>\n\n<symbol id="line">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <g>\n    <polygon class="hcArea" fill="#D0D2D3" points="115.1,206.7 175,214.5 231.8,84.9 287.3,80 344.6,96.4 399.8,85.2 399.8,81.1 344.8,92.3\n      288.1,76.1 287.7,76 229,81.2 172.5,210.1 114.9,202.7 57.5,215.7 0.1,170.2 0.1,175.3 56.5,220 \t"/>\n  </g>\n</symbol>\n\n<symbol id="map">\n  <g>\n    <defs>\n      <rect id="SVGID_1_" x="0.9" y="0.2" width="399.1" height="299.6"/>\n    </defs>\n    <clipPath id="SVGID_2_">\n      <use xlink:href="#SVGID_1_"  overflow="visible"/>\n    </clipPath>\n    <path class="hcArea2" clip-path="url(#SVGID_2_)" fill="#E1E2E3" d="M54.1-9.8l19.8,48.3L-31.3,71.3c-2.4,0.7-3.7,3.3-2.9,5.6\n      c0.6,1.9,2.4,3.2,4.3,3.2c0.4,0,0.9-0.1,1.3-0.2l62.1-19.4l-2,35.6l-64.1-4.4c-2.5-0.2-4.6,1.7-4.8,4.2c-0.2,2.5,1.7,4.6,4.2,4.8\n      L31,105l-6.8,120.1l-55-28.5c-2.2-1.1-4.9-0.3-6.1,1.9c-1.1,2.2-0.3,4.9,1.9,6.1l61.3,31.8c0,0,0,0,0,0l22.9,11.9l-76.8,64.9\n      c-1.2,1-1.7,2.5-1.6,4c0.2,1.5,1.1,2.8,2.4,3.5l68.1,34.4c0.6,0.3,1.3,0.5,2,0.5c1.6,0,3.2-0.9,4-2.5c1.1-2.2,0.2-4.9-2-6l-62-31.4\n      l74.4-62.9l22.7,11.8l-4.9,86.3c-0.1,2.5,1.8,4.6,4.2,4.7c0.1,0,0.2,0,0.3,0c2.4,0,4.3-1.8,4.5-4.2l4.7-82.2l42.2,21.9l-45.2,57.3\n      c-1.5,1.9-1.2,4.8,0.7,6.3c0.8,0.6,1.8,1,2.8,1c1.3,0,2.6-0.6,3.5-1.7l102.9-130.5l58.8,28.5l-48,97.3c-1.1,2.2-0.2,4.9,2,6\n      c0.6,0.3,1.3,0.5,2,0.5c1.7,0,3.2-0.9,4-2.5l48-97.4l43.7,21.2l-36.9,72.2c-1.1,2.2-0.3,4.9,2,6c0.7,0.3,1.4,0.5,2,0.5\n      c1.6,0,3.2-0.9,4-2.4l37-72.3l68.4,33.1l-3.1,36.8c-0.2,2.5,1.6,4.6,4.1,4.9c0.1,0,0.3,0,0.4,0c2.3,0,4.3-1.8,4.5-4.1l3.2-37.5\n      l41.3,5.7c2.4-0.6,3.9-3,3.3-5.4c-0.6-2.4-3-3.9-5.4-3.3l-38.4-6.4l4.7-55.2h34.8c2.5,0,4.5-2,4.5-4.5s-2-4.5-4.5-4.5h-52.8\n      l-35.1-17.8l1.4-2.6c0.1-0.3,0.3-0.6,0.3-0.9l3.7-14l82.3,3.1c0.1,0,0.1,0,0.2,0c2.4,0,4.4-1.9,4.5-4.3c0.1-2.5-1.8-4.6-4.3-4.7\n      l-80.3-3l15.5-58.4c16,3.8,34.2,6.3,54.4,6.3c3.4,0,6.9-0.1,10.4-0.2c2.5-0.1,4.4-2.2,4.3-4.7c-0.1-2.5-2.2-4.4-4.7-4.3\n      c-23.3,1-44.1-1.6-62.1-6l5.1-19.3c15.8,3.6,29.9,4.5,40.2,4.5c10.5,0,17.1-1,17.7-1c2.5-0.4,4.1-2.7,3.8-5.1\n      c-0.4-2.5-2.7-4.1-5.1-3.8c-0.3,0-23.2,3.3-52.3-2.9l6.2-83l46.4,3.6c2.5,0.2,4.6-1.7,4.8-4.1c0.2-2.5-1.7-4.6-4.1-4.8L383.6,9\n      l-18.9-34c-1.6-1.7-4.2-1.8-6.1-0.4l-67.8,69.5c-10.7-15-19.2-32.6-25.5-52.9c-0.7-2.4-3.3-3.7-5.6-3c-2.4,0.7-3.7,3.2-3,5.6\n      c7,22.7,16.5,41,27.2,55.9l-20.7,17.5c-2.8-2-36.3-26.7-48-83.1c-0.5-2.4-2.9-4-5.3-3.5c-2.4,0.5-4,2.9-3.5,5.3\n      c0.7,3.6,1.6,7,2.5,10.3l-87.1,27.2c-12.6-11.8-8.4-37.4-8.3-37.6c0.4-2.4-1.2-4.8-3.6-5.2c-2.5-0.4-4.8,1.2-5.2,3.6\n      c-0.2,1.2-4.4,26.4,7.8,42.1l-30.1,9.4c0,0,0,0,0-0.1L61-16.7c-0.8-2-2.9-3.1-5-2.7 M333.7,223.9l-7.5,14.7l-44-21.9l11.8-23.8\n      l17.3,10c0.6,0.4,1.3,0.6,2.1,0.6l27.4,1l-3.1,11.6l-2.4,4.6 M310.5,78c7.4,6.2,15.1,11.3,22.6,15.4c-0.2,0.2-0.3,0.4-0.4,0.7\n      l-8.8,17.8c-13.3-6.7-22.5-13.1-27-16.5l13.4-17.1C310.3,78.2,310.4,78.1,310.5,78z M291.2,102.5c4.9,3.8,14.6,10.6,28.6,17.7\n      l-45.7,92.6L224,187.8L291.2,102.5z M343.1,195.6l-28.4-1.1l-16.9-9.7l30-60.8c9,4.1,19.4,8,31.2,11.3L343.1,195.6z M361.4,126.5\n      c-11.1-3.1-20.9-6.9-29.4-10.7l8.7-17.7c0.1-0.2,0.2-0.4,0.2-0.6c7,3.4,13.8,6,20.2,8.1c1.8,0.6,3.6,1.1,5.4,1.6L361.4,126.5z\n       M361.1-15.8L376.9,15l-6.3,84c-2.2-0.6-4.5-1.3-6.8-2c-27.5-8.8-50.1-24.2-67.6-45.8L361.1-15.8z M303.8,72.2\n      c-0.2,0.2-0.4,0.4-0.6,0.6l-89.7,113.8l0,0l-19.9,25.3l-55.7-27L289.5,56.9C294.1,62.5,298.9,67.6,303.8,72.2z M94.6,174l26.9,13\n      l-29.1,24.6L94.6,174z M95.2,164.3l3.3-57.1l9.1-4.9l2.4,3.8V122c0,2.5,2,4.5,4.5,4.5h29.9c1.2,0,2.3-0.4,3.1-1.2l32.3-30.9\n      l22.4,24.6L129,180.7L95.2,164.3z M200.7,51.7l4.3,6.1l-62.5,59.7h-23.7v-12.7c0-0.9-0.2-1.7-0.7-2.4l-2.8-4.4L200.7,51.7z\n       M256.3,73.2L209,113.1l-22.8-25L214,61.6c1.6-1.5,1.9-4,0.6-5.8l-5.9-8.3l17.6-9.5C238.2,58.1,251.1,69.2,256.3,73.2z M221.9,30\n      L99,96.7l3.3-57.7L211.5,4.9C214.6,14.3,218.1,22.7,221.9,30z M42.7,57.6l50.5-15.8L89.9,100l-49.4-3.4L42.7,57.6z M32.9,229.6\n      l7.1-124l49.4,3.4L83,219.6l-26.4,22.3L32.9,229.6z M65.2,246.4l17.1-14.5L81,254.6L65.2,246.4z M137,283.6l-47.3-24.5l2-35.2\n      l38.6-32.6l57.5,27.8L137,283.6z M201.8,215.9l16.5-20.9l51.8,25.8l-11.2,22.8L201.8,215.9z M267,247.5l11.2-22.7l43.9,21.8\n      l-11.3,22L267,247.5z M318.9,272.6l13.3-26c0,0,0,0,0,0l0,0l8.3-16.3l36.1,18.3c0.6,0.3,1.3,0.5,2,0.5h10.1l-4.6,55L318.9,272.6z"\n      />\n  </g>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="45.5" cy="62.9" r="18.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="158.8" cy="177.3" r="12.8"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="228.2" cy="235" r="12.8"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="297.6" cy="157.2" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="20.8" cy="230.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="382.6" cy="250.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="374.7" cy="22.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="240.9" cy="111.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="182.7" cy="26" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="268.6" cy="95.6" r="13.6"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.0954" stroke-miterlimit="10" cx="63.2" cy="124.9" r="11.3"/>\n</symbol>\n\n<symbol id="matrix">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcOuterLine" x="0.3" y="0" fill="#E1E2E3" width="92.8" height="300"/>\n  <line class="hcNoStroke" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="93.1" y1="0" x2="93.1" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="199.7" y1="0.5" x2="199.7" y2="299.8"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="298.6" y1="0" x2="298.6" y2="300"/>\n  <rect class="hcArea" x="14.7" y="46.4" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="46.4" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="46.4" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="46.4" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="79.7" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="79.7" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="79.7" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="79.7" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="114" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="114" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="114" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="114" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="148.5" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="148.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="148.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="148.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="182.3" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="182.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="182.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="182.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="215.3" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="215.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="215.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="215.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="248.6" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="248.6" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="248.6" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="248.6" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="281.5" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="281.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="281.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="281.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="0" y="0" fill="#D0D2D3" width="399.8" height="30.4"/>\n</symbol>\n\n<symbol id="multiRowCard">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="22" y="21" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcArea" x="22" y="91" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcArea" x="22" y="160.3" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcArea" x="22" y="231" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="35.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="46.2" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="105.4" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="116.1" fill="#D0D2D3" width="46.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="174.7" fill="#ACACAC" width="65.8" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="185.4" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="245.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="256.2" fill="#D0D2D3" width="28.2" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="35.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="46.2" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="105.4" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="116.1" fill="#D0D2D3" width="46.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="174.7" fill="#ACACAC" width="65.8" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="185.4" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="245.5" fill="#ACACAC" width="39.3" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="256.2" fill="#D0D2D3" width="28.2" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="35.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="46.2" fill="#D0D2D3" width="75.4" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="105.4" fill="#ACACAC" width="37.7" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="116.1" fill="#D0D2D3" width="87.4" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="174.7" fill="#ACACAC" width="28.2" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="185.4" fill="#D0D2D3" width="56.4" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="245.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="256.2" fill="#D0D2D3" width="87.4" height="7.7"/>\n</symbol>\n\n<symbol id="pie">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <path class="hcAreaWithOutline" fill="#929497" d="M200,55.3v94.8l60.8,72.7c20.8-17.4,34-43.5,34-72.7v0C294.8,97.7,252.3,55.3,200,55.3z"/>\n  <path class="hcAreaWithOutline" fill="#D0D2D3" d="M105.2,150.1c0,44.4,30.6,81.7,71.8,92l23-92H105.2z"/>\n  <path class="hcOuterLine" fill="#E1E2E3" d="M200,150.1l-23,92c7.4,1.8,15.1,2.8,23,2.8c23.1,0,44.3-8.3,60.8-22.1L200,150.1z"/>\n  <path class="hcOuterLine" fill="#A6A8AB" d="M200,55.3c-52.3,0-94.8,42.4-94.8,94.8v0H200V55.3z"/>\n</symbol>\n\n<symbol id="scatterplot">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="133.9" y1="0.4" x2="133.3" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="266.9" y1="0.4" x2="266.6" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="149.8" x2="400" y2="150"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="74.9" cy="214.1" r="36.2"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="186" cy="94" r="12.9"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="266.9" cy="124.1" r="17.2"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="310.4" cy="193.8" r="26.3"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="214.5" cy="176.3" r="18.6"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="137" cy="150.2" r="12.9"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="346.4" cy="68.1" r="12.9"/>\n</symbol>\n\n<symbol id="shapeMap">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g>\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#EEEEEE" d="M379.2,0H400v10.75l-14.2-1.5c-1.672-0.266-2.738-1.016-3.2-2.25\n      L379.2,0z M218.775,0h39c7.22,18.663,16.17,35.087,26.85,49.275L261.85,68.55C243.634,49.55,229.275,26.7,218.775,0z M0,62V0\n      h57.725L73.15,38.875L0,62z M78.175,300H1.25l55.925-47.325L80.2,264.775L78.175,300z M231.05,300h-96.475l60.575-76.7\n      l59.575,28.851L231.05,300z M400,206.675v34.575h-18.5l-37.15-18.025l1.825-3.475l3.875-14.825L400,206.675z M400,142.875v55.05\n      l-47.675-1.649l15.725-59.95C378.267,138.94,388.917,141.123,400,142.875z M361.275,125.875c-10.32-2.924-20.153-6.332-29.5-10.225\n      l9.5-19.175c7.915,3.922,16.273,7.272,25.074,10.05L361.275,125.875z M326.425,238.75L281.6,217.025L293.45,193.1l17.3,9.15\n      c1.639,0.954,3.472,1.454,5.5,1.5l24.4,0.85l-3.7,14.15L326.425,238.75z M304.65,71.4L192.9,212.875l-56.4-27.3l153.325-129.75\n      C294.472,61.398,299.414,66.59,304.65,71.4z M121.25,187.5l-30.1,25.475L93.375,174L121.25,187.5z M39.55,105.2l49.6,3.2\n      l-6.375,111.65L56.25,242.475l-24.7-12.949L39.55,105.2z M258.45,244.65l-57.976-28.101l17.075-21.625L270.4,220.5L258.45,244.65z"\n      />\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M369.4,0l7.024,14.975L371,99.15\n      c-30.688-8.892-55.647-25.2-74.875-48.925L345.425,0H369.4z M400,114.05v20.15c-10.34-1.591-20.281-3.575-29.825-5.95l5-19.175\n      C383.115,111.174,391.39,112.833,400,114.05z M333.675,0l-42.85,43.325C281.736,30.743,274.086,16.301,267.875,0H333.675z\n       M353.45,300H304l10.05-19.1L353.45,300z M240.55,300l21.825-44.15l43.9,21.275L294.25,300H240.55z M0,212.95V102.675l30.925,1.975\n      l-7.75,120.475L0,212.95z M111.975,0H196.1l-75.025,23.725C115.636,18.07,112.603,10.162,111.975,0z M0,290.075v-67.4l49.175,25.8\n      L0,290.075z M124.1,300H86.175l1.775-31.15l42.95,22.525L124.1,300z M392.025,300l5.225-49.85H400V300H392.025z M384.275,300H372.7\n      l-54.75-26.525l22.524-42.875l37.551,18.226c1.563,0.898,3.389,1.34,5.475,1.325h6L384.275,300z M359.175,133.9l-16.25,62.05\n      L316,195l-18.6-9.875l30.75-62.15C337.978,127.132,348.319,130.773,359.175,133.9z M295.35,96.425l15.5-19.625\n      c7.126,5.878,14.751,11.103,22.875,15.675l-9.774,19.75C313.812,107.567,304.277,102.3,295.35,96.425z M199.925,51.6l4.575,5.9\n      l-62,59.75h-25.3l0.75-11.25c-0.098-2.051-0.498-3.617-1.2-4.7L114.3,98L199.925,51.6z M40.075,97l2.575-39.975L93,41.1\n      l-3.375,59.075L40.075,97z M80.75,255.325l-16.475-8.65L82.1,231.6L80.75,255.325z M136.325,284.5L88.5,259.4l2-34.9l39-33\n      l58.075,28.125L136.325,284.5z M310.175,269.7L266.1,248.35l11.95-24.149l44.65,21.649L310.175,269.7z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#F8F8F8" d="M66.725,0h36.325c0.458,11.727,3.549,20.561,9.275,26.5\n      L81.15,36.35L66.725,0z M0,94.425V70.5l33.8-10.675L31.45,96.45L0,94.425z M400,19.825V105.1\n      c-6.929-0.898-13.62-2.106-20.075-3.625l5.351-83.225L400,19.825z M223.075,29.2l-125.3,67.925l3.35-58.6L211.05,3.775\n      C214.647,12.659,218.656,21.134,223.075,29.2z M207.675,47.4l19.7-10.7c8.162,13.625,17.57,26,28.225,37.125l-46.875,39.65\n      l-23.3-25.825L213.5,60.6c1.147-1.6,1.364-3.2,0.65-4.8L207.675,47.4z M320.35,119.525l-46.399,93.8l-51.3-24.851l67.675-85.7\n      C299.695,108.996,309.704,114.579,320.35,119.525z M179.125,93.725l22.925,25.4l-73.775,62.45L93.9,164.925l3.3-57.625l9.7-5.275\n      l2.95,3.975l-1,15.1c0.133,3.4,1.916,5.15,5.35,5.25h28.65c1.682,0.015,3.099-0.568,4.25-1.75L179.125,93.725z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#D9D9D9" d="M400,10.75v9.075l-14.725-1.575l-5.351,83.225\n      c6.455,1.519,13.146,2.727,20.075,3.625v8.95c-8.61-1.217-16.885-2.875-24.825-4.975l-5,19.175\n      c9.544,2.375,19.485,4.359,29.825,5.95v8.675c-11.083-1.752-21.733-3.935-31.95-6.55l-15.725,59.95L400,197.925v8.75l-49.95-1.75\n      l-3.875,14.825l-1.825,3.475l37.15,18.025H400v8.9h-2.75L392.025,300h-7.75l5.225-49.85h-6c-2.086,0.015-3.911-0.427-5.475-1.325\n      L340.475,230.6l-22.524,42.875L372.7,300h-19.25l-39.4-19.1L304,300h-9.75l12.025-22.875l-43.9-21.275L240.55,300h-9.5\n      l23.675-47.85L195.15,223.3L134.575,300H124.1l6.8-8.625L87.95,268.85L86.175,300h-8l2.025-35.225l-23.025-12.101L1.25,300H0\n      v-9.925l49.175-41.601L0,222.675v-9.725l23.175,12.175l7.75-120.475L0,102.675v-8.25l31.45,2.025l2.35-36.625L0,70.5V62\n      l73.15-23.125L57.725,0h9L81.15,36.35l31.175-9.85c-5.726-5.939-8.818-14.773-9.275-26.5h8.925\n      c0.627,10.162,3.661,18.07,9.1,23.725L196.1,0h22.675c10.5,26.7,24.858,49.55,43.074,68.55l22.775-19.275\n      c-10.68-14.188-19.63-30.612-26.85-49.275h10.1c6.211,16.301,13.861,30.743,22.95,43.325L333.675,0h11.75l-49.3,50.225\n      C315.353,73.95,340.312,90.258,371,99.15l5.425-84.175L369.4,0h9.8l3.399,7c0.462,1.234,1.528,1.984,3.2,2.25L400,10.75z\n       M361.275,125.875l5.074-19.35c-8.801-2.778-17.159-6.128-25.074-10.05l-9.5,19.175\n      C341.122,119.543,350.955,122.951,361.275,125.875z M359.175,133.9c-10.855-3.126-21.197-6.768-31.024-10.925l-30.75,62.15L316,195\n      l26.925,0.95L359.175,133.9z M326.425,238.75l10.525-20l3.7-14.15l-24.4-0.85c-2.028-0.046-3.861-0.546-5.5-1.5l-17.3-9.15\n      L281.6,217.025L326.425,238.75z M304.65,71.4c-5.236-4.81-10.179-10.001-14.825-15.575L136.5,185.575l56.4,27.3L304.65,71.4z\n       M295.35,96.425c8.928,5.875,18.462,11.142,28.601,15.8l9.774-19.75c-8.124-4.572-15.749-9.797-22.875-15.675L295.35,96.425z\n       M223.075,29.2c-4.419-8.066-8.428-16.541-12.025-25.425l-109.925,34.75l-3.35,58.6L223.075,29.2z M207.675,47.4l6.476,8.4\n      c0.714,1.6,0.497,3.2-0.65,4.8l-28.075,27.05l23.3,25.825l46.875-39.65c-10.654-11.125-20.063-23.5-28.225-37.125L207.675,47.4z\n       M199.925,51.6L114.3,98l2.45,3.3c0.703,1.083,1.103,2.649,1.2,4.7l-0.75,11.25h25.3l62-59.75L199.925,51.6z M320.35,119.525\n      c-10.646-4.946-20.654-10.529-30.024-16.75l-67.675,85.7l51.3,24.851L320.35,119.525z M179.125,93.725L147.1,124.6\n      c-1.151,1.182-2.568,1.765-4.25,1.75H114.2c-3.434-0.1-5.217-1.85-5.35-5.25l1-15.1l-2.95-3.975l-9.7,5.275l-3.3,57.625\n      l34.375,16.65l73.775-62.45L179.125,93.725z M40.075,97l49.55,3.175L93,41.1L42.65,57.025L40.075,97z M121.25,187.5L93.375,174\n      l-2.225,38.975L121.25,187.5z M39.55,105.2l-8,124.325l24.7,12.949l26.525-22.425L89.15,108.4L39.55,105.2z M136.325,284.5\n      l51.25-64.875L129.5,191.5l-39,33l-2,34.9L136.325,284.5z M80.75,255.325L82.1,231.6l-17.825,15.075L80.75,255.325z M258.45,244.65\n      l11.95-24.15l-52.851-25.575l-17.075,21.625L258.45,244.65z M310.175,269.7L322.7,245.85L278.05,224.2L266.1,248.35L310.175,269.7z\n      "/>\n  </g>\n</symbol>\n\n<symbol id="slicer">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="11.8" y="17.7" fill="#D0D2D3" width="34.7" height="15.3"/>\n  <rect class="hcArea" x="34.1" y="57" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="55" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcOuterLine" x="12.8" y="79" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="105" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="103" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="129" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="127" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="153" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="151" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="177" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="175" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="201" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="199" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="225" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="223" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="249" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="247" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="273" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="271" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="81.7" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <line class="hcGridLine" fill="none" stroke="#D0D2D3" stroke-miterlimit="10" x1="3" y1="44.3" x2="397" y2="44.3"/>\n</symbol>\n\n<symbol id="stackedarea">\n  <rect id="XMLID_263_" class="hcOuterLine" x="0" y="0" opacity="0.5" fill="#F1F2F2" width="400" height="300"/>\n  <line id="XMLID_262_" class="hcNoStroke" opacity="0.5" fill="#F4F4F4" x1="0" y1="38" x2="400" y2="38"/>\n  <line id="XMLID_261_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="75.4" x2="400" y2="75.4"/>\n  <line id="XMLID_260_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="112.8" x2="400" y2="112.8"/>\n  <line id="XMLID_259_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="150.3" x2="400" y2="150.3"/>\n  <line id="XMLID_258_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="400" y1="187.7" x2="0" y2="187.7"/>\n  <line id="XMLID_257_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="225.1" x2="400" y2="225.1"/>\n  <line id="XMLID_256_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="262.6" x2="400" y2="262.6"/>\n  <polygon id="XMLID_242_" class="hcOuterLine" fill="#A6A8AB" points="0,107.5 83.6,96.9 139.6,113 200,97.1 265.8,116.6 336,107.7 400,116.3 400,199.3\n\t  0,199.3 "/>\n  <polygon id="XMLID_239_" class="hcOuterLine" fill="#D0D2D3" points="0,157.6 60.4,153 132.4,169.6 216.9,159 279.1,177.7 334.2,162.7 400,172.5 400,253.2\n\t  0,253.2 "/>\n  <polygon id="XMLID_236_" class="hcOuterLine" fill="#E1E2E3" points="0,224.1 69.3,241.5 156,219.5 252,241.5 332,219.5 400,227.8 400,300 0,300 "/>\n  <polyline id="XMLID_138_" class="hcOuterLine" fill="none" stroke="#797A7A" stroke-width="4" stroke-miterlimit="10" points="0,107.5 83.6,96.9 139.6,113 200,97.1 265.8,116.6 336,107.7 400,116.3 "/>\n  <polyline id="XMLID_294_" class="hcOuterLine" fill="none" stroke="#929497" stroke-width="4" stroke-miterlimit="10" points="0,157.6 60.4,153 132.4,169.6 216.9,159 279.1,177.7 334.2,162.7 400,172.5 "/>\n  <polyline id="XMLID_301_" class="hcOuterLine" fill="none" stroke="#A6A8AB" stroke-width="4" stroke-miterlimit="10" points="0,224.1 69.3,241.5 156,219.5 252,241.5 332,219.5 400,227.8 "/>\n </symbol>\n\n<symbol id="stackedbar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcArea" x="0" y="20.6" fill="#E1E2E3" width="179.9" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" fill="#E1E2E3" width="253.4" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" fill="#E1E2E3" width="224.6" height="39"/>\n  <rect class="hcArea" x="0" y="184" fill="#E1E2E3" width="311.1" height="39"/>\n  <rect class="hcArea" x="0" y="241" fill="#E1E2E3" width="367.2" height="39"/>\n  <rect class="hcArea" x="0" y="20.6" fill="#D0D2D3" width="138.7" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" fill="#D0D2D3" width="195.3" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" fill="#D0D2D3" width="173.1" height="39"/>\n  <rect class="hcArea" x="0" y="184" fill="#D0D2D3" width="239.8" height="39"/>\n  <rect class="hcArea" x="0" y="241" fill="#D0D2D3" width="283" height="39"/>\n  <rect class="hcArea" x="0" y="20.6" opacity="0.5" fill="#A6A8AB" width="90.2" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" opacity="0.5" fill="#A6A8AB" width="127" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" opacity="0.5" fill="#A6A8AB" width="112.5" height="39"/>\n  <rect class="hcArea" x="0" y="184" opacity="0.5" fill="#A6A8AB" width="155.9" height="39"/>\n  <rect class="hcArea" x="0" y="241" opacity="0.5" fill="#A6A8AB" width="184" height="39"/>\n</symbol>\n\n<symbol id="stackedcolumn">\n  <rect x="0.2" y="-0.1" fill="#F4F4F4" width="400.1" height="300"/>\n  <line fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0.2" y1="73.4" x2="400.2" y2="73.4"/>\n  <line fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0.2" y1="147.9" x2="400.2" y2="147.9"/>\n  <line fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0.2" y1="222.3" x2="400.2" y2="222.3"/>\n  <rect x="19.3" y="193.2" fill="#E1E2E3" width="40.9" height="106.9"/>\n  <rect x="83.3" y="167.7" fill="#E1E2E3" width="40.9" height="132.4"/>\n  <rect x="147.3" y="187.7" fill="#E1E2E3" width="40.9" height="112.4"/>\n  <rect x="211.3" y="82" fill="#E1E2E3" width="40.9" height="218.1"/>\n  <rect x="275.4" y="39.8" fill="#E1E2E3" width="40.9" height="260.3"/>\n  <rect x="339.4" y="122.3" fill="#E1E2E3" width="40.9" height="177.9"/>\n  <rect x="19.3" y="219.2" fill="#D0D2D3" width="40.9" height="80.9"/>\n  <rect x="83.3" y="199.9" fill="#D0D2D3" width="40.9" height="100.2"/>\n  <rect x="147.3" y="215.1" fill="#D0D2D3" width="40.9" height="85"/>\n  <rect x="211.3" y="129.8" fill="#D0D2D3" width="40.9" height="170.3"/>\n  <rect x="275.4" y="103.2" fill="#D0D2D3" width="40.9" height="197"/>\n  <rect x="339.4" y="165.6" fill="#D0D2D3" width="40.9" height="134.6"/>\n  <rect x="19.3" y="254" opacity="0.5" fill="#A6A8AB" width="40.9" height="46.1"/>\n  <rect x="83.3" y="243" opacity="0.5" fill="#A6A8AB" width="40.9" height="57.1"/>\n  <rect x="147.3" y="251.6" opacity="0.5" fill="#A6A8AB" width="40.9" height="48.5"/>\n  <rect x="211.3" y="206.1" opacity="0.5" fill="#A6A8AB" width="40.9" height="94.1"/>\n  <rect x="275.4" y="187.8" opacity="0.5" fill="#A6A8AB" width="40.9" height="112.3"/>\n  <rect x="339.4" y="223.4" opacity="0.5" fill="#A6A8AB" width="40.9" height="76.7"/>\n</symbol>\n\n<symbol id="table">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="0" y="0" fill="#D0D2D3" width="399.8" height="30.1"/>\n  <rect class="hcArea" x="14.4" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="64.8" x2="400" y2="64.8"/>\n  <rect class="hcArea" x="14.4" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="98.6" x2="399.3" y2="98.6"/>\n  <rect class="hcArea" x="14.4" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="132.7" x2="400" y2="132.7"/>\n  <rect class="hcArea" x="14.4" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="166.2" x2="400" y2="166.2"/>\n  <rect class="hcArea" x="14.4" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="198.8" x2="400" y2="198.8"/>\n  <rect class="hcArea" x="14.4" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="231.7" x2="400" y2="231.7"/>\n  <rect class="hcArea" x="14.4" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="265.4" x2="400" y2="265.4"/>\n  <rect class="hcArea" x="14.4" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n</symbol>\n\n<symbol id="tree">\n  <rect class="hcOuterLine" x="204.3" y="0" fill="#E1E2E3" width="195.3" height="150"/>\n  <rect class="hcAreaWithOutline" x="0" y="0" fill="#D0D2D3" width="204.3" height="150"/>\n  <rect class="hcOuterLine" x="0" y="150" fill="#E1E2E3" width="180.9" height="79.6"/>\n  <rect class="hcAreaWithOutline" x="0" y="229.6" fill="#A6A8AB" width="180.9" height="70.4"/>\n  <rect class="hcOuterLine" x="180.9" y="150" fill="#F4F4F4" width="121.1" height="103.8"/>\n  <rect class="hcAreaWithOutline" x="302" y="150" opacity="0.5" fill="#A6A8AB" width="97.7" height="103.8"/>\n  <rect class="hcOuterLine" x="180.9" y="253.8" fill="#E1E2E3" width="218.8" height="46.2"/>\n</symbol>\n\n<symbol id="waterfall">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="75.3" y="128" fill="#D0D2D3" width="44" height="89.1"/>\n  <rect class="hcArea"x="143.8" y="27.1" fill="#D0D2D3" width="44" height="103"/>\n  <rect class="hcArea"x="212.3" y="27.1" fill="#D0D2D3" width="44" height="205.3"/>\n  <rect class="hcArea"x="280.8" y="230.2" fill="#D0D2D3" width="44" height="55"/>\n  <rect class="hcArea"x="349.2" y="283.1" fill="#D0D2D3" width="44" height="16.5"/>\n  <rect class="hcArea"x="6.9" y="214.9" fill="#D0D2D3" width="44" height="84.7"/>\n  <rect class="hcArea"x="50.8" y="214.9" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="119.3" y="128" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="187.8" y="27.1" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="256.3" y="230.2" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="324.7" y="283.1" fill="#D0D2D3" width="24.5" height="2.1"/>\n</symbol>\n\n<symbol id="scriptvisual">\n\t<rect x="0" y="0" fill="#F4F4F4" width="400" height="100"/>\n\t<rect x="0" y="100" fill="#FFFFFF" width="400" height="100"/>\n\t<rect x="0" y="200" fill="#F4F4F4" width="400" height="100"/>\n\t<path fill="#E1E2E3" d="M138.8,90h-65.5v-8h65.5V90z"/>\n\t<path fill="#E1E2E3" d="M22.3,81l-8.2-9.7l25.1-21.2l-25.1-21.3l8.2-9.7l35.9,30.3v1.4L22.3,81z"/>\n\t<path fill="#E1E2E3" d="M168.2,193.4h-14.5v-14.5h14.5V193.4z"/>\n\t<path fill="#E1E2E3" d="M199.3,160.2v33.4h-16v-87.2h36.3c3,0,6,0.5,9.1,1.5c3.1,1.1,5.9,2.6,8.4,4.8c2.5,2.1,4.6,4.9,6.2,8.3\n\t\tc1.6,3.4,2.4,7.5,2.4,12.3c0,3.6-0.4,6.6-1.3,9.4c-0.8,2.8-2,5.1-3.5,7.2c-1.5,2-3.2,3.8-5.2,5.2c-1.9,1.4-4,2.5-6.2,3.3l18.5,35.1\n\t\th-17.2l-16.6-33.4h-14.9V160.2z M217.2,145.5c1.4,0,2.8-0.2,4.3-0.5c1.5-0.4,2.9-1.1,4.2-2c1.2-1,2.4-2.2,3.2-3.7\n\t\tc0.8-1.5,1.2-3.5,1.2-5.9c0-2.4-0.4-4.4-1.2-5.9c-0.9-1.6-1.9-2.8-3.2-3.8c-1.2-1-2.6-1.6-4.2-2c-1.5-0.4-2.9-0.6-4.3-0.6h-18v24.3\n\t\tL217.2,145.5L217.2,145.5z"/>\n</symbol>\n\n<symbol id="pythonvisual">\n\t<rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="100"/>\n\t<rect class="hcOuterLine" x="0" y="100" fill="#FFFFFF" width="400" height="100"/>\n\t<rect class="hcOuterLine" x="0" y="200" fill="#F4F4F4" width="400" height="100"/>\n\t<path class="hcArea" fill="#E1E2E3" d="M22.3,81l-8.2-9.7l25.1-21.2l-25.1-21.3l8.2-9.7l35.9,30.3v1.4L22.3,81z"/>\n  <g transform="scale(0.8, 0.8) translate(142, 65)">\n    <path class="hcArea2"\n        style="fill:#E1E2E3;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;visibility:visible;display:inline;overflow:visible"\n        d="M 99.75,67.46875 C 71.718268,67.468752 73.46875,79.625 73.46875,79.625 L 73.5,92.21875 L 100.25,92.21875 L 100.25,96 L 62.875,96 C 62.875,96 44.9375,93.965724 44.9375,122.25 C 44.937498,150.53427 60.59375,149.53125 60.59375,149.53125 L 69.9375,149.53125 L 69.9375,136.40625 C 69.9375,136.40625 69.433848,120.75 85.34375,120.75 C 101.25365,120.75 111.875,120.75 111.875,120.75 C 111.875,120.75 126.78125,120.99096 126.78125,106.34375 C 126.78125,91.696544 126.78125,82.125 126.78125,82.125 C 126.78125,82.124998 129.04443,67.46875 99.75,67.46875 z M 85,75.9375 C 87.661429,75.937498 89.8125,78.088571 89.8125,80.75 C 89.812502,83.411429 87.661429,85.5625 85,85.5625 C 82.338571,85.562502 80.1875,83.411429 80.1875,80.75 C 80.187498,78.088571 82.338571,75.9375 85,75.9375 z "\n        id="path8615" />\n    <path class="hcArea2"\n        id="path8620"\n        d="M 100.5461,177.31485 C 128.57784,177.31485 126.82735,165.1586 126.82735,165.1586 L 126.7961,152.56485 L 100.0461,152.56485 L 100.0461,148.7836 L 137.4211,148.7836 C 137.4211,148.7836 155.3586,150.81787 155.3586,122.53359 C 155.35861,94.249323 139.70235,95.252343 139.70235,95.252343 L 130.3586,95.252343 L 130.3586,108.37734 C 130.3586,108.37734 130.86226,124.03359 114.95235,124.03359 C 99.042448,124.03359 88.421098,124.03359 88.421098,124.03359 C 88.421098,124.03359 73.514848,123.79263 73.514848,138.43985 C 73.514848,153.08705 73.514848,162.6586 73.514848,162.6586 C 73.514848,162.6586 71.251668,177.31485 100.5461,177.31485 z M 115.2961,168.8461 C 112.63467,168.8461 110.4836,166.69503 110.4836,164.0336 C 110.4836,161.37217 112.63467,159.2211 115.2961,159.2211 C 117.95753,159.2211 120.1086,161.37217 120.1086,164.0336 C 120.10861,166.69503 117.95753,168.8461 115.2961,168.8461 z "\n        style="fill:#E1E2E3;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;visibility:visible;display:inline;overflow:visible" />\n  </g>\n</symbol>\n\n<symbol id="visioVisual">\n  <rect x="0" y="0" width="400" height="300" style="fill:#f4f4f4" />\n  <g transform="translate(-99.772966,-149.88962)">\n    <rect x="345.18201" y="266.92099" transform="matrix(-0.7071,0.7071,-0.7071,-0.7071,794.8842,218.5744)" width="13.983" height="13.983" id="rect4171" style="fill:#a6a8ab" />\n    <path d="m 220,227.412 0,145.176 90.435,17.412 0,-180 L 220,227.412 Z m 50.302,108.264 -15.251,-0.554 -18.794,-70.533 14.875,0.18 11.474,48.627 c 0.146,0.602 0.275,1.183 0.391,1.746 0.129,-0.618 0.271,-1.243 0.421,-1.871 l 11.512,-48.217 14.851,0.177 -19.479,70.445 z" style="fill:#a6a8ab" />\n    <path d="m 338.261,306.957 0,13.912 10.435,0 0,-30.709 -11.029,-11.029 -20.274,0 0,24.348 17.391,0 c 1.921,0 3.477,1.555 3.477,3.478" style="fill:#a6a8ab" />\n    <path d="m 376.521,230.87 -59.13,0 0,41.304 16.797,0 16.756,-16.752 c 0.336,-0.343 0.781,-0.513 1.229,-0.513 0.445,0 0.894,0.17 1.236,0.513 l 17.256,17.262 c 0.679,0.676 0.679,1.783 0,2.459 l -15.014,15.021 0,34.185 c 0,1.923 -1.556,3.479 -3.479,3.479 l -13.913,0 0,10.435 c 0,1.923 -1.556,3.479 -3.479,3.479 l -17.391,0 0,27.392 58.797,0 c 2.106,0 3.812,-3.193 3.812,-5.299 l 0,-129.487 c 0.002,-2.11 -1.37,-3.478 -3.477,-3.478" style="fill:#a6a8ab" />\n    <polygon points="317.392,334.782 331.305,334.782 331.305,327.826 331.305,320.869 331.305,310.435 317.392,310.435 " style="fill:#a6a8ab" />\n  </g>\n</symbol>\n\n<symbol id="ribbon">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M64.642,247.169c0,0,1.199,0.312,3.219,0.09C65.837,246.993,64.642,247.169,64.642,247.169z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M123.897,240.718c2.53,0.326,4.058,0.006,4.058,0.006S126.486,240.223,123.897,240.718z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M233.476,235.959c0,0-1.221-0.088-3.23,0.25C232.257,236.296,233.476,235.959,233.476,235.959z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M170.163,240.724c0,0,1.045,0.24,2.791,0.078C171.192,240.569,170.163,240.724,170.163,240.724z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#D0D2D3" d="M67.861,247.259c5.631-0.62,17.651-5.409,27.929-32.763\n    c-14.13-24.423-31.148-22.512-31.148-22.512H22.433v55.185h42.209C64.642,247.169,65.837,246.993,67.861,247.259z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#D0D2D3" d="M172.954,240.801c-1.746,0.163-2.791-0.078-2.791-0.078h-42.209c0,0-1.528,0.32-4.058-0.006\n    c-5.385,1.03-15.622,6.374-27.599,29.532c-0.28,0.541-0.559,1.073-0.837,1.595c0.28,0.533,0.559,1.072,0.837,1.628\n    c14.44,28.857,31.656,26.303,31.656,26.303h42.209c0,0,19.623,3.06,30.908-31.153l0,0\n    C190.339,245.761,178.283,241.505,172.954,240.801z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#BCBEBF" d="M335.358,213.967h42.209v85.808h-42.209l-59.674,0h-42.209c0,0-17.217,2.612-31.656-29.525\n    c-0.249-0.554-0.498-1.095-0.749-1.628c8.574-25.994,22.823-31.343,29.175-32.413c2.011,0.087,3.23-0.25,3.23-0.25h42.209\n    c0,0,21.015,0.295,29.437-10.848C313.543,213.967,335.358,213.967,335.358,213.967z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#BCBEBF" d="M67.861,247.259c-2.02,0.222-3.219-0.09-3.219-0.09H22.433v52.605h42.209\n    c0,0,13.485,4.616,30.819-27.93C85.031,252.002,73.372,247.984,67.861,247.259z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#BCBEBF" d="M123.897,240.718c2.589-0.495,4.058,0.006,4.058,0.006h42.209c0,0,1.029-0.155,2.791,0.078\n    c5.789-0.539,19.302-5.515,28.139-38.431v0c-12.263-23.359-30.929-23.363-30.929-23.363h-42.209c0,0-17.577-4.662-31.633,34.056\n    c-0.177,0.486-0.354,0.961-0.532,1.433c0.476,0.823,0.949,1.674,1.418,2.558C107.198,235.888,118.143,239.976,123.897,240.718z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#B2B2B2" d="M123.897,240.718c-5.754-0.741-16.699-4.83-26.689-23.663\n    c-0.469-0.884-0.942-1.735-1.418-2.558c-10.278,27.354-22.298,32.143-27.929,32.763c5.511,0.725,17.17,4.743,27.6,24.585\n    c0.278-0.522,0.557-1.054,0.837-1.595C108.275,247.091,118.512,241.747,123.897,240.718z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#B2B2B2" d="M230.246,236.209c-5.541-0.24-17.102-3.706-25.78-26.346\n    c-1.048-2.734-2.181-5.222-3.374-7.493v0c-8.836,32.916-22.35,37.892-28.139,38.431c5.33,0.703,17.386,4.959,28.117,27.82\n    C209.644,242.627,223.894,237.279,230.246,236.209z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#E1E2E3" d="M335.358,129.225h42.209V24.001h-42.209c0,0-22.303-0.416-31.726,21.046\n    s-27.948,18.54-27.948,18.54h-42.209c0,0-22.044,1.959-32.816,13.804c-10.772,11.845-30.497,12.829-30.497,12.829h-42.209\n    c0,0-18.557-0.045-32.423,10.911c-13.156,10.395-30.89,10.395-30.89,10.395H22.433v80.459h42.209c0,0,23.238-1.338,32.227-6.606\n    c11.174-6.547,31.086-6.372,31.086-6.372h42.209c0,0,20.992-0.409,29.512-7.828c12.867-11.204,33.8-8.966,33.8-8.966h42.209\n    c0,0,20.543,1.101,30.534-16.879S335.358,129.225,335.358,129.225z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#D0D2D3" d="M275.685,162.213c0,0,20.543,1.101,30.534-16.879s29.14-16.109,29.14-16.109h42.209v84.742\n    h-42.209c0,0-21.816,0-30.237,11.143c-8.421,11.143-29.437,10.848-29.437,10.848h-42.209c0,0-1.221-0.088-3.23,0.25\n    c-5.541-0.24-17.102-3.706-25.78-26.346c-1.048-2.734-2.181-5.222-3.374-7.493c11.502-42.844,32.384-40.157,32.384-40.157H275.685"/>\n  <rect class="hcOuterLine" x="22.433" y="111.525" fill="#DDDDDD" width="42.209" height="80.459"/>\n  <rect class="hcOuterLine" x="22.433" y="191.984" fill="#D0D2D3" width="42.209" height="55.185"/>\n  <rect class="hcOuterLine" x="22.433" y="247.169" fill="#BCBEBF" width="42.209" height="52.605"/>\n  <rect class="hcOuterLine" x="127.955" y="90.219" fill="#DDDDDD" width="42.209" height="88.788"/>\n  <rect class="hcOuterLine" x="127.955" y="179.007" fill="#BCBEBF" width="42.209" height="61.717"/>\n  <rect class="hcOuterLine" x="127.955" y="240.724" fill="#D0D2D3" width="42.209" height="59.051"/>\n  <rect class="hcOuterLine" x="233.476" y="63.586" fill="#DDDDDD" width="42.209" height="98.627"/>\n  <rect class="hcOuterLine" x="233.476" y="162.213" fill="#D0D2D3" width="42.209" height="73.746"/>\n  <rect class="hcOuterLine" x="233.476" y="235.959" fill="#BCBEBF" width="42.209" height="63.816"/>\n  <rect class="hcOuterLine" x="335.358" y="24.001" fill="#DDDDDD" width="42.209" height="105.224"/>\n  <rect class="hcOuterLine" x="335.358" y="129.225" fill="#D0D2D3" width="42.209" height="84.742"/>\n  <rect class="hcOuterLine" x="335.358" y="213.967" fill="#BCBEBF" width="42.209" height="85.808"/>\n</symbol>\n\n<symbol id="keyDrivers">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g style="transform: scale(15)">\n    <rect class="hcArea" x="0" y="2" opacity="0.8" fill="#D0D2D3" width="20" height="1"/>\n    <rect class="hcArea" x="0" y="6" opacity="0.8" fill="#D0D2D3" width="13" height="1"/>\n    <rect class="hcArea" x="0" y="10" opacity="0.8" fill="#D0D2D3" width="9" height="1"/>\n    <rect class="hcArea" x="0" y="14" opacity="0.8" fill="#D0D2D3" width="4" height="1"/>\n    <circle class="hcArea" fill="#898989" cx="21.5" cy="2.5" r="1.75"/>\n    <circle class="hcArea" fill="#ACACAC" cx="14.5" cy="6.5" r="1.75"/>\n    <circle class="hcArea" fill="#ACACAC" cx="10.5" cy="10.5" r="1.75"/>\n    <circle class="hcArea" fill="#ACACAC" cx="5.5" cy="14.5" r="1.75"/>\n    <g style="transform: translate(5px, -1px)">\n      <path class="hcArea" opacity="0.8" fill="#BEBEBE" d="M18,19h-1v-1h-1v1c0,0.136,0.026,0.265,0.078,0.387\n        s0.124,0.229,0.215,0.32s0.198,0.163,0.32,0.215S16.864,20,17,20h1c0.141,0,0.271-0.026,0.391-0.078s0.226-0.124,0.316-0.215\n        s0.163-0.196,0.215-0.316S19,19.141,19,19v-1h-1V19z"/>\n      <path class="hcArea" fill="#CBCBCB" d="M15.711,17.234c0.104,0.114,0.179,0.233,0.223,0.355S16,17.849,16,18h1h1h1\n        c0-0.297,0.099-0.555,0.297-0.773c0.224-0.25,0.397-0.515,0.52-0.793S20,15.844,20,15.5s-0.065-0.668-0.195-0.973\n        s-0.309-0.57-0.535-0.797s-0.492-0.405-0.797-0.535S17.844,13,17.5,13c-0.349,0-0.676,0.065-0.98,0.195s-0.569,0.308-0.793,0.531\n        s-0.401,0.488-0.531,0.793S15,15.151,15,15.5c0,0.344,0.062,0.655,0.184,0.934S15.481,16.979,15.711,17.234z"/>\n      <rect class="hcArea2" x="17" y="18" fill="#DBDBDB" width="1" height="1"/>\n    </g>\n  </g>\n</symbol>\n\n<symbol id="decompositionTree">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g style="transform: scale(10);">\n    <rect class="hcHide" style="fill:#f8f8f8;" width="40" height="30"/>\n    <path class="hcArea" style="fill:#bebebe;isolation:isolate;" d="M34.64,27.07H33.21V25.64H31.79v1.43a1.26,1.26,0,0,0,.11.55,1.31,1.31,0,0,0,.3.46,1.62,1.62,0,0,0,.46.31,1.5,1.5,0,0,0,.55.11h1.43a1.47,1.47,0,0,0,.56-.11,1.57,1.57,0,0,0,.45-.31,1.39,1.39,0,0,0,.31-.45,1.47,1.47,0,0,0,.11-.56V25.64H34.64Z"/>\n    <rect class="hcArea2" style="fill:#dbdbdb;" x="33.21" y="25.64" width="1.43" height="1.43"/>\n    <path class="hcArea" style="fill:#cbcbcb;" d="M31.37,24.55a1.41,1.41,0,0,1,.32.51,1.76,1.76,0,0,1,.1.58h4.28a1.56,1.56,0,0,1,.43-1.1,4.57,4.57,0,0,0,.74-1.13,3.41,3.41,0,0,0,.26-1.34,3.45,3.45,0,0,0-.28-1.39,3.49,3.49,0,0,0-1.9-1.9,3.62,3.62,0,0,0-2.79,0,3.54,3.54,0,0,0-1.89,1.89,3.47,3.47,0,0,0-.28,1.4,3.41,3.41,0,0,0,.26,1.34A4.31,4.31,0,0,0,31.37,24.55Z"/>\n    <path class="hcArea2" style="fill:none;stroke:#dbdbdb;stroke-miterlimit:10;stroke-width:0.83px;" d="M10.5,12.28c.68-.34,1.85.39,2.66,1.88.56,1,.87,1.78,1.45,3s1.18,3.09,2.89,3.09"/>\n    <path class="hcArea2" style="fill:none;stroke:#dbdbdb;stroke-miterlimit:10;stroke-width:0.83px;" d="M10.5,12.21c.68.35,1.85-.38,2.66-1.87.56-1,.87-1.78,1.45-3s1.18-3.09,2.89-3.09"/>\n    <line class="hcArea2" style="fill:none;stroke:#dbdbdb;stroke-miterlimit:10;stroke-width:0.83px;" x1="11.16" y1="12.25" x2="17.5" y2="12.25"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="17.5" y="10.5" width="10" height="3.5"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="1.5" y="10.5" width="10" height="3.5"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="17.5" y="2.5" width="10" height="3.5"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="17.5" y="18.5" width="10" height="3.5"/>\n  </g>\n</symbol>\n\n</svg>',O=t(59214),I=t(32473),T=t(64857),f=t(93667),M=t(89515),A=t(22994),b=t(22422),P=t(26963),y=t(6067),C=t(45647);function d(V,v){if(1&V&&(O.\u0275\u0275elementStart(0,"div",3),O.\u0275\u0275element(1,"i",4)(2,"span",5),O.\u0275\u0275elementEnd()),2&V){var c=O.\u0275\u0275nextContext();O.\u0275\u0275advance(2),O.\u0275\u0275propertyInterpolate("localize",c.emptyVisualMessageKey)}}var B="</svg>",w=function(){function V(v,c,u,r,h,p,D){this.domSanitizer=v,this.featureSwitchService=c,this.gettingStarted=u,this.localizationService=r,this.notificationBarService=h,this.explorationCapabilities=p,this.visualPlugin=D,this.emptyVisualMessageKey=c.featureSwitches.onObject?"Select_Fields_To_Populate_Visual_OnObject":"Select_Fields_To_Populate_Visual"}return V.prototype.ngOnInit=function(){var v=this;this.blankCanvasWatermarkEnabled=!this.explorationCapabilities.getCapabilities().disableBlankCanvasWatermark,this.isSchemaEmpty$=this.gettingStarted.currentState$.pipe((0,e.h)(function(c){return 0===c||2===c}),(0,n.b)(function(c){return v.updateDataWarningNotification(0===c)}),(0,m.U)(function(c){return 0===c})),this.updateWatermark(this.visualType)},V.prototype.ngOnDestroy=function(){this.notificationId&&this.notificationBarService.hide(this.notificationId)},V.prototype.updateDataWarningNotification=function(v){v?this.notificationId||this.displayMessageOnNotificationBar():this.notificationId&&(this.notificationBarService.hide(this.notificationId),this.notificationId=null)},V.prototype.displayMessageOnNotificationBar=function(){this.blankCanvasWatermarkEnabled&&(this.notificationId=this.notificationBarService.notify({message:this.localizationService.get("Need_Data_To_Build_Visual"),notificationType:6}))},V.prototype.ngOnChanges=function(v){v.visualType&&!v.visualType.firstChange&&this.updateWatermark(v.visualType.currentValue)},V.prototype.updateWatermark=function(v){var c=this.visualPlugin.getPlugin(v);this.svgVisualKey=c&&c.watermarkKey||"defaultWatermark";var u="\n                ".concat('<svg id="Layer_1" x="0px" y="0px" viewBox="0 0 400 300" enable-background="new 0 0 400 300" xml:space="preserve" ng-bind-html="$ctrl.innerSvgContent">',"\n                    ").concat(V.parseTemplateCacheToSVG(this.svgVisualKey,B,"</symbol>"),"\n                ").concat(B);this.svgContent=this.domSanitizer.bypassSecurityTrustHtml(u)},V.parseTemplateCacheToSVG=function(v,c,u){var r=i.indexOf('id="'+v),p=i.substring(r+(v.length+6),i.indexOf(c)),D=p.indexOf(u);return p.substring(0,D)},V.\u0275fac=function(c){return new(c||V)(O.\u0275\u0275directiveInject(I.H7),O.\u0275\u0275directiveInject(T.vZ),O.\u0275\u0275directiveInject(f.c),O.\u0275\u0275directiveInject(M.o),O.\u0275\u0275directiveInject(A.S),O.\u0275\u0275directiveInject(b.U),O.\u0275\u0275directiveInject(P.D))},V.\u0275cmp=O.\u0275\u0275defineComponent({type:V,selectors:[["visual-watermark"]],inputs:{visualType:"visualType"},features:[O.\u0275\u0275NgOnChangesFeature],decls:4,vars:5,consts:[[1,"visualWatermark"],["class","warning",4,"ngIf"],[1,"watermark",3,"innerHTML"],[1,"warning"],[1,"icon","glyphicon","pbi-glyph-info","glyph-small"],[3,"localize"]],template:function(c,u){1&c&&(O.\u0275\u0275elementStart(0,"div",0),O.\u0275\u0275template(1,d,3,1,"div",1),O.\u0275\u0275pipe(2,"async"),O.\u0275\u0275element(3,"div",2),O.\u0275\u0275elementEnd()),2&c&&(O.\u0275\u0275advance(1),O.\u0275\u0275property("ngIf",!O.\u0275\u0275pipeBind1(2,3,u.isSchemaEmpty$)&&u.blankCanvasWatermarkEnabled),O.\u0275\u0275advance(2),O.\u0275\u0275property("innerHTML",u.svgContent,O.\u0275\u0275sanitizeHtml),O.\u0275\u0275attribute("data-svg-visual-key",u.svgVisualKey))},dependencies:[y.NgIf,C.X,y.AsyncPipe],styles:['visual-watermark{width:100%;height:100%}visual-watermark .visualWatermark{display:flex;flex-direction:column;height:100%;background:var(--white-color, #FFF)}visual-watermark .visualWatermark .warning{display:flex;height:10%;margin:8px;color:var(--gray-180, #252423)}visual-watermark .visualWatermark .warning i.glyphicon{padding-right:8px}visual-watermark .visualWatermark .warning span{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}visual-watermark .visualWatermark .watermark{height:90%;z-index:1;flex-grow:1}visual-watermark .visualWatermark .watermark>svg{width:100%;height:100%}\n'],encapsulation:2}),V}()},27316:function(Le,oe,t){t.d(oe,{y:function(){return z}});var e=t(7005),n=t(59214),m=t(92119),i=t(76199),O=t(64450),I=t(21453),T=t(30351),f=t(60850),M=t(95679),A=t(26963),b=t(63232),P=t(41603),y=t(87714),C=t(64857),d=t(82372),g=t(1866),S=t(23057),B=t(44302),w=t(41770),V=t(28774),v=t(93171),c=t(98174),u=t(6067),r=t(6093),h=powerbi.visualHost.controllers.VisualComponentCore,p=powerbi.common.Watcher,D=["visualElement"],x=function(q,de,se,Ie){return{customPadding:q,"disable-events":de,"allow-deferred-rendering":se,"disable-events-format-mode":Ie}},z=function(){function Q(q,de,se,Ie,fe,re,pe,ge,be,ae,X,le,ee,N,F,E,k,R,W,Z,me){this.approvedResourceService=q,this.publicCustomVisualService=de,this.eventBridge=se,this.featureSwitchService=Ie,this.ngZone=fe,this.moduleLoader=re,this.es6PromiseFactory=pe,this.renderingSynchronizer=ge,this.telemetryService=be,this.certifiedEventsService=ae,this.themeService=X,this.trustedVisual=le,this.visualPlugin=ee,this.visualSandbox=N,this.visualStylePresetService=F,this.visualWarningTelemetryService=E,this.svgProvider=k,this.ref=R,this.globalEventBridge=W,this.managedCustomVisualsService=Z,this.timeoutService=me,this.visualReady=new n.EventEmitter,this.useOnPushChangeDetection=!1,this.pendingChanges={},this.applyDeferredRenderingClass=!0,this.destroyed=!1}return Q.prototype.ngOnChanges=function(q){var de;!this.core||(q.viewModel&&(this.core.viewModel=q.viewModel.currentValue),q.allowDeferredRendering&&(this.core.allowDeferredRendering=q.allowDeferredRendering.currentValue,this.updateApplyDeferredRenderingClass(null===(de=this.viewModel)||void 0===de?void 0:de.type)),q.currentZone&&(this.core.currentZone=q.currentZone.currentValue),(q.supportsKeyboardNavigation||q.inheritFocusNavMode)&&this.manageKeyboardNavigation(),q.subSelections&&this.core.onSubSelectionsChanged(this.subSelections),q.formatMode&&this.core.onFormatModeChanged(this.formatMode),q.pendingChanges&&this.core.setPendingChanges(this.pendingChanges))},Q.prototype.manageKeyboardNavigation=function(){this.supportsKeyboardNavigation?(this.ariaHidden=void 0,this.focusNavMode=this.inheritFocusNavMode?void 0:"Group",this.keyboardShortcuts=this.inheritFocusNavMode?void 0:"ctrl-ArrowRight scoped"):(this.ariaHidden=this.supportsScreenReader?"false":"true",this.focusNavMode=void 0,this.keyboardShortcuts=void 0)},Q.prototype.ngAfterViewInit=function(){this.initCore()},Q.prototype.ngOnDestroy=function(){this.destroyed=!0,this.core&&this.core.$onDestroy()},Q.prototype.ngDoCheck=function(){var q=this;if(this.core){if(!this.watcher){this.watcher=new p;var de=function(Ie,fe,re){q.core&&!re&&!q.destroyed&&(q.core.$onDestroy(),q.core=void 0,q.initCore())};this.watcher.add("type",function(){return q.viewModel&&{type:q.viewModel.type,themeCollection:q.viewModel.themeCollection}},function(se,Ie,fe){q.updateApplyDeferredRenderingClass(se.type),de(0,0,fe)},{mode:2}),this.watcher.add("viewModel",function(){return q.viewModel},function(se,Ie,fe){!fe&&se&&Ie&&Ie.visualInitialized&&se.visual===Ie.visual?se.visualInitialized=!0:de(0,0,fe)})}this.watcher.doCheck(),this.core.$doCheck()}},Q.prototype.updateApplyDeferredRenderingClass=function(q){this.applyDeferredRenderingClass=!1!==this.allowDeferredRendering&&!(q&&this.visualPlugin.isCustomVisual(q))},Object.defineProperty(Q.prototype,"supportsCustomPadding",{get:function(){var de;return null===(de=this.featureSwitchService)||void 0===de?void 0:de.featureSwitches.vcPadding},enumerable:!1,configurable:!0}),Q.prototype.initCore=function(){var q=this,se={approvedResourceService:this.approvedResourceService,publicCustomVisualService:this.publicCustomVisualService,eventBridge:this.eventBridge,featureSwitchService:this.featureSwitchService,globalEventBridge:this.globalEventBridge,managedCustomVisualsService:this.managedCustomVisualsService,moduleLoader:this.moduleLoader,run:this.visualZone?function(fe){return q.visualZone.run(fe)}:this.ngZone&&function(Ie){return q.ngZone.runOutsideAngular(Ie)},promiseFactory:this.es6PromiseFactory,renderingSynchronizer:this.renderingSynchronizer,svgProvider:this.svgProvider,telemetryService:this.telemetryService,certifiedEventsService:this.certifiedEventsService,themeService:this.themeService,timeoutService:this.timeoutService,trustedVisual:this.trustedVisual,visualPlugin:this.visualPlugin,visualSandbox:this.visualSandbox,visualStylePresetService:this.visualStylePresetService,visualWarningTelemetryService:this.visualWarningTelemetryService};this.core=new h($(this.visualElement.nativeElement),se,function(){return q.visualReady.emit()}),this.core.viewModel=this.viewModel,this.core.allowDeferredRendering=this.allowDeferredRendering,this.core.currentZone=this.currentZone,this.core.formatMode=this.formatMode,this.manageKeyboardNavigation(),this.core.$onInit().then(function(){q.useOnPushChangeDetection&&q.ref.markForCheck()}),this.ref.detectChanges()},Q.\u0275fac=function(de){return new(de||Q)(n.\u0275\u0275directiveInject(I.E),n.\u0275\u0275directiveInject(T.B),n.\u0275\u0275directiveInject(y.J,8),n.\u0275\u0275directiveInject(C.vZ),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(d.m),n.\u0275\u0275directiveInject(O.t),n.\u0275\u0275directiveInject(g.d),n.\u0275\u0275directiveInject(B.y0),n.\u0275\u0275directiveInject(f.R),n.\u0275\u0275directiveInject(w.f),n.\u0275\u0275directiveInject(M.t),n.\u0275\u0275directiveInject(A.D),n.\u0275\u0275directiveInject(b.s),n.\u0275\u0275directiveInject(P.A),n.\u0275\u0275directiveInject(S.n),n.\u0275\u0275directiveInject(V.g),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(v.Z),n.\u0275\u0275directiveInject(i.D),n.\u0275\u0275directiveInject(c.X))},Q.\u0275cmp=n.\u0275\u0275defineComponent({type:Q,selectors:[["visual-modern"]],viewQuery:function(de,se){var Ie;(1&de&&n.\u0275\u0275viewQuery(D,5),2&de)&&(n.\u0275\u0275queryRefresh(Ie=n.\u0275\u0275loadQuery())&&(se.visualElement=Ie.first))},inputs:{viewModel:"viewModel",allowDeferredRendering:"allowDeferredRendering",currentZone:"currentZone",visualZone:"visualZone",supportsKeyboardNavigation:"supportsKeyboardNavigation",supportsScreenReader:"supportsScreenReader",focusNavMode:"focusNavMode",inheritFocusNavMode:"inheritFocusNavMode",keyboardShortcuts:"keyboardShortcuts",subSelections:"subSelections",formatMode:"formatMode",enablePointerEventsFormatMode:"enablePointerEventsFormatMode",useOnPushChangeDetection:"useOnPushChangeDetection",pendingChanges:"pendingChanges"},outputs:{visualReady:"visualReady"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:12,consts:[[3,"keyboard-shortcuts","ngClass"],["visualElement",""]],template:function(de,se){1&de&&n.\u0275\u0275element(0,"div",0,1),2&de&&(n.\u0275\u0275classMapInterpolate1("visual visual-",se.core&&se.core.viewModel&&se.core.viewModel.type,""),n.\u0275\u0275property("keyboard-shortcuts",se.keyboardShortcuts)("ngClass",n.\u0275\u0275pureFunction4(7,x,se.supportsCustomPadding,se.core&&se.core.disableEvents,se.applyDeferredRenderingClass,se.formatMode&&!se.enablePointerEventsFormatMode)),n.\u0275\u0275attribute("aria-hidden",se.ariaHidden)("focus-nav-mode",se.focusNavMode))},dependencies:[u.NgClass,r.q],styles:[".exploreHost.landingController   .visualContainer.preventVisualScrolling[_nghost-%COMP%]     svg.svgScrollable, .exploreHost.landingController   .visualContainer.preventVisualScrolling   [_nghost-%COMP%]     svg.svgScrollable{pointer-events:none!important}.exploreHost.landingController[_nghost-%COMP%]   .visual.visual-PBI_CV_3C80B1F2_09AF_4123_8E99_C3CBC46B23E0[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .visual.visual-PBI_CV_3C80B1F2_09AF_4123_8E99_C3CBC46B23E0[_ngcontent-%COMP%]{overflow:hidden}@supports (-webkit-touch-callout: none){.exploreHost.landingController[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container .scroll-element, .exploreHost.landingController   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container .scroll-element{display:none}}.exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody[_nghost-%COMP%]     .slicer-header-wrapper, .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody   [_nghost-%COMP%]     .slicer-header-wrapper{margin-right:30px}.exploreHost.landingController.phoneLandscapeLayout   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody[_nghost-%COMP%]     .slicer-header-wrapper, .exploreHost.landingController.phoneLandscapeLayout   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody   [_nghost-%COMP%]     .slicer-header-wrapper{margin-right:45px}.exploreHost.landingController.inFocus.phonePortraitLayout[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.phonePortraitLayout   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.phoneLandscapeLayout[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.phoneLandscapeLayout   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.tabletPortraitLayout[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.tabletPortraitLayout   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen{height:calc(100% + 10px)!important;margin:-5px}"]}),(0,e.gn)([(0,m.CN)("ngOnChanges")],Q.prototype,"ngOnChanges",null),(0,e.gn)([(0,m.CN)("ngAfterViewInit")],Q.prototype,"ngAfterViewInit",null),(0,e.gn)([(0,m.CN)("ngDoCheck")],Q.prototype,"ngDoCheck",null),Q}()},50425:function(Le,oe,t){t.d(oe,{I:function(){return i}});var e=t(7005),n=t(7467),m=t(59214),i=function(O){function I(T,f){return O.call(this,"visualizationPane",T,f)||this}return(0,e.ZT)(I,O),I.\u0275fac=function(f){return new(f||I)(m.\u0275\u0275directiveInject(m.ElementRef),m.\u0275\u0275directiveInject(m.Injector))},I.\u0275dir=m.\u0275\u0275defineDirective({type:I,selectors:[["visualization-pane"]],inputs:{viewModel:"viewModel"},features:[m.\u0275\u0275InheritDefinitionFeature]}),I}(n.iB)},31465:function(Le,oe,t){t.d(oe,{s:function(){return n}});var e=t(59214),n=function(){function m(i){this.elementRef=i}return m.prototype.ngAfterContentInit=function(){var i=this.jQueryElement=$(this.elementRef.nativeElement);this.applyStyle.addElement(i)},m.prototype.ngOnDestroy=function(){this.applyStyle.removeElement($(this.elementRef.nativeElement))},m.prototype.ngAfterContentChecked=function(){this.applyStyle.isDirty()&&this.applyStyle.apply(this.jQueryElement)},m.\u0275fac=function(O){return new(O||m)(e.\u0275\u0275directiveInject(e.ElementRef))},m.\u0275dir=e.\u0275\u0275defineDirective({type:m,selectors:[["","apply-style",""]],inputs:{applyStyle:["apply-style","applyStyle"]}}),m}()},35906:function(Le,oe,t){t.d(oe,{o:function(){return n}});var e=t(59214),n=function(){function m(i,O){this.elementRef=i,this.injector=O}return m.prototype.ngAfterViewInit=function(){$(this.elementRef.nativeElement).data(powerbi.common.angularInjectorController,this.injector)},m.\u0275fac=function(O){return new(O||m)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Injector,1))},m.\u0275dir=e.\u0275\u0275defineDirective({type:m,selectors:[["","downgrade-injector-patcher",""]]}),m}()},31970:function(Le,oe,t){t.d(oe,{Dx:function(){return i},HY:function(){return n},LW:function(){return m},Nn:function(){return b},O3:function(){return M},Px:function(){return A},Xr:function(){return O},Ys:function(){return e},al:function(){return T},hV:function(){return C},nb:function(){return P},nc:function(){return I},tH:function(){return f},xZ:function(){return y}});var e="AboutVisualDialog",n="ChangeDetectionMeasureDialog",m="DSVariablesDialog",i="ThemeDialog",O="QnaFeedbackDialog",I="TrySampleDatasetDialog",T="CheckboxDialog",f="DeleteCustomVisualsDialog",M="DeleteVisualWarningDialog",A="EsriConsentDialog",b="ConditionalFormattingDialog",P="SparklinesDialog",y="ExportDataDialogComponent",C="DataBarsDialog"},93149:function(Le,oe,t){t.d(oe,{B:function(){return n}});var e=powerbi.data.SQExprUtils,n=function(){function m(i,O,I,T,f){this.setting=i,this.contract=O,this.sort=I,this.undoRedo=T,this.visualAuthoringOperations=f,this.sortDelay=500}return m.prototype.resetSortSettings=function(i,O,I){this.setting.defaultSortBehavior=I,this.setting.sortableFields=i,this.setting.sortGroups=O},m.prototype.toggleSortDirection=function(i,O,I){var T=this;this.executeSort("VisualContainerToggleSortDirection",function(){return T.applySortDirection(O,I),i&&!i.active&&(i.active=!0),T.applyActiveSortableFieldsToQuery(),!0})},m.prototype.toggleSort=function(i,O,I){var T=this;this.executeSort("VisualContainerToggleSort",function(){return O&&(i.sortDirection=O),T.toggleSortByField(i,I),!0})},m.prototype.applySortByFields=function(i){var O=this;this.sortPromise&&clearTimeout(this.sortPromise);var I=this.contract.config.singleVisual.query;if(!this.isSortSupported(I,i))return[];this.resetSortableFieldsStatus(this.setting.sortableFields,!0);var T=this.findMatchingSortableFields(i);return this.sortPromise=setTimeout(function(){O.undoRedo.register("VisualContainerApplySort",function(){for(var f=[],M=0,A=T;M<A.length;M++)for(var b=A[M],P=0,y=b.exprs;P<y.length;P++)f.push({expr:y[P].expr,direction:b.sortDirection});var d=O.contract;return O.sort.resetSort(I),O.visualAuthoringOperations.setOrderBy(d,f),O.sortPromise=void 0,!0})},this.sortDelay),T},m.prototype.isSortSupported=function(i,O){if(i.hasVisualCalcExpressions())for(var I=i.getUniqueQueryFields(),T=0,f=O;T<f.length;T++)for(var M=f[T],A=0,b=I;A<b.length;A++){var P=b[A];if(P.queryName&&P.queryName===M.queryName&&e.isMeasure(P.expr))return!1}return!0},m.prototype.executeSort=function(i,O){var I=this;this.sortPromise&&clearTimeout(this.sortPromise),this.sortPromise=setTimeout(function(){I.undoRedo.register(i,O),I.sortPromise=void 0},this.sortDelay)},m.prototype.applySortDirection=function(i,O){if(!_.isEmpty(O.fields))for(var I=0,T=O.fields;I<T.length;I++)T[I].sortDirection=i},m.prototype.toggleSortByField=function(i,O){var I=_.find(this.setting.sortGroups,function(f){return i.groupKey===f.key});if(I){var T=i.active;T?(this.visualAuthoringOperations.removeOrderBy(this.contract,i.exprs.map(function(f){return f.expr}),O),i.active=!1):(this.resetSortableFieldsStatus(I.fields,!1),i.active=!T,this.applyActiveSortableFieldsToQuery())}},m.prototype.findMatchingSortableFields=function(i){var O=[],I=this.setting.sortableFields;if(_.isEmpty(I)||_.isEmpty(i))return[];for(var T=0,f=I;T<f.length;T++){for(var M=f[T],A=!1,b=null,P=function(B){var w=_.findIndex(i,function(v){return v.queryName===B.name}),V=i[w];if(!V)return A=!1,"break";if(null==b)b=V.sortDirection;else if(b!==V.sortDirection)return A=!1,"break";A=!0,M.orderByIndex=w},y=0,C=M.exprs;y<C.length&&"break"!==P(C[y]);y++);A&&(M.sortDirection=b,M.active=!0,O.push(M))}return _.sortBy(O,function(S){return S.orderByIndex})},m.prototype.areAllSortDescriptorsIncluded=function(i,O){for(var I=0,T=i;I<T.length;I++){for(var f=T[I],M=!1,A=0,b=O;A<b.length;A++){for(var y=0,C=b[A].exprs;y<C.length;y++)if(C[y].name===f.queryName){M=!0;break}if(M)break}if(!M)return!1}return!0},m.prototype.resetSortableFieldsStatus=function(i,O){if(i)for(var I=0,T=i;I<T.length;I++){var f=T[I];f.active=!1,O&&(f.sortDirection=void 0)}},m.prototype.applyActiveSortableFieldsToQuery=function(){var i=this.buildOrderByFromActiveSortableFields();this.applyOrderByToQuery(i)},m.prototype.buildOrderByFromActiveSortableFields=function(){var i=[];if(!this.setting.sortGroups)return i;for(var O=0,I=this.setting.sortGroups;O<I.length;O++)for(var f=0,M=I[O].fields;f<M.length;f++){var A=M[f];A.active&&i.push.apply(i,this.sort.createSortDefinitions(A))}return i},m.prototype.applyOrderByToQuery=function(i){var O=this.contract;this.sort.resetSort(O.config.singleVisual.query),this.visualAuthoringOperations.setOrderBy(O,i)},m}()},51701:function(Le,oe,t){t.d(oe,{J:function(){return Wi}});var e=t(13851),n=t(6067),m=t(67555),i=t(53842),O=t(55858),I=t(2889),T=t(3044),f=t(18479),M=t(66293),A=t(34833),b=t(42684),P=t(97470),y=t(80041),C=t(38588),d=t(68174),g=t(54764),S=t(40421),B=t(57858),w=t(36501),V=t(8259),v=t(81721),c=t(89835),u=t(7005),r=t(52676),h=t(93460),p={loadChildren:function(){return t.e("performance-pane").then(t.bind(t,10382)).then(function(Ee){return Ee.PerformancePaneModule})}};h.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUI/performance-pane.module#PerformancePaneModule",p.loadChildren);var D={loadChildren:function(){return t.e("user-emulation").then(t.bind(t,5971)).then(function(Ee){return Ee.UserEmulationModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/user-emulation/user-emulation.module#UserEmulationModule",D.loadChildren);var x={loadChildren:function(){return Promise.all([t.e(7),t.e("personalize-visual")]).then(t.bind(t,13547)).then(function(Ee){return Ee.PersonalizeVisualModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule",x.loadChildren);var z={loadChildren:function(){return t.e("drill-through").then(t.bind(t,52910)).then(function(Ee){return Ee.DrillThroughModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/drill-through/drill-through.module#DrillThroughModule",z.loadChildren);var Q={loadChildren:function(){return t.e("bookmark-on-load").then(t.bind(t,80956)).then(function(Ee){return Ee.BookmarkOnLoadModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/bookmark-on-load/bookmark-on-load.module#BookmarkOnLoadModule",Q.loadChildren);var q={loadChildren:function(){return t.e("visual-host-tooltip-actions-provider").then(t.bind(t,27276)).then(function(Ee){return Ee.VisualHostTooltipActionsProviderModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/visual-host-tooltip-actions-provider/visual-host-tooltip-actions-provider.module#VisualHostTooltipActionsProviderModule",q.loadChildren);var de={loadChildren:function(){return t.e("field-picker-modern").then(t.bind(t,96659)).then(function(Ee){return Ee.FieldPickerModernModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/field-picker-modern/field-picker-modern.module#FieldPickerModernModule",de.loadChildren);var se={loadChildren:function(){return t.e("field-list").then(t.bind(t,82054)).then(function(Ee){return Ee.FieldListModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/field-list/field-list.module#FieldListModule",se.loadChildren);var Ie={loadChildren:function(){return t.e("visual-container-skittles").then(t.bind(t,76855)).then(function(Ee){return Ee.VisualContainerSkittlesModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/visual-container-skittles/visual-container-skittles.module#VisualContainerSkittlesModule",Ie.loadChildren);var fe={loadChildren:function(){return t.e("visual-recommendation-provider").then(t.bind(t,86042)).then(function(Ee){return Ee.VisualRecommendationProviderModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/visual-recommendation/visual-recommendation-provider.module#VisualRecommendationProviderModule",fe.loadChildren);var re={loadChildren:function(){return t.e("pane-switcher").then(t.bind(t,70788)).then(function(Ee){return Ee.PaneSwitcherModule})}};h.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUI/pane-switcher.module#PaneSwitcherModule",re.loadChildren);var pe={loadChildren:function(){return t.e("customize-pane").then(t.bind(t,57246)).then(function(Ee){return Ee.CustomizePaneModule})}};h.E.addLazyLoadForLegacyMapping("./lazy-modules/customize-pane/customize-pane.module#CustomizePaneModule",pe.loadChildren);var ge=(0,u.ev)([{path:"dummy-performance-pane",loadChildren:p.loadChildren},{path:"dummy-personalize-visual",loadChildren:x.loadChildren},{path:"dummy-drill-through",loadChildren:z.loadChildren},{path:"dummy-bookmark-on-load",loadChildren:Q.loadChildren},{path:"dummy-user-emulation",loadChildren:D.loadChildren},{path:"dummy-visual-host-tooltip-actions-provider",loadChildren:q.loadChildren},{path:"dummy-field-picker-modern",loadChildren:de.loadChildren},{path:"dummy-field-list",loadChildren:se.loadChildren},{path:"dummy-visual-container-skittles",loadChildren:Ie.loadChildren},{path:"dummy-visual-recommendation",loadChildren:fe.loadChildren},{path:"dummy-pane-switcher",loadChildren:re.loadChildren},{path:"dummy-customize-pane",loadChildren:pe.loadChildren}],r.r,!0),be=t(16765),ae=t(15634),X=t(19725),le=t(68115),ee=t(92119),N=t(46637),F=t(35319),E=t(25304),k=t(79824),R=t(15947),W=t(49042),Z=t(49948),me=t(3860),_e=t(29248),he=t(5791),G=t(26493),ce=t(44302),Fe=t(15760),je=t(3754),Oe=t(28928),J=t(96604),ue=t(50417),Me=t(12427),st=(t(73140),t(73555),t(10778),t(82344)),Ve=(t(36009),t(39706),t(91656)),Pe=(t(77235),t(59214)),Ct=(t(26904),t(8062),t(87311),t(57115)),Ue=t(42165),ke=t(78145),l=(t(24854),t(88661),t(51200),t(50938),t(89934),t(4963)),te=(t(12361),t(29129),t(95521),t(57759),t(78480),t(36157)),Ce=t(53004),ye=t(78285),we=t(86919),Te=t(63471),De=t(70557),Re=t(72227);function Ze(He,Ee){if(1&He&&Pe.\u0275\u0275element(0,"mat-icon",4),2&He){var Ne=Pe.\u0275\u0275nextContext();Pe.\u0275\u0275property("fontIcon","pbi-glyph-"+Ne.selectedOption.icon.glyph)}}function Ye(He,Ee){if(1&He&&Pe.\u0275\u0275element(0,"mat-icon",4),2&He){var Ne=Pe.\u0275\u0275nextContext().$implicit;Pe.\u0275\u0275property("fontIcon","pbi-glyph-"+Ne.icon.glyph)}}function qe(He,Ee){if(1&He&&(Pe.\u0275\u0275elementStart(0,"mat-option",5),Pe.\u0275\u0275template(1,Ye,1,1,"mat-icon",2),Pe.\u0275\u0275elementStart(2,"span"),Pe.\u0275\u0275text(3),Pe.\u0275\u0275elementEnd()()),2&He){var Ne=Ee.$implicit;Pe.\u0275\u0275property("value",Ne),Pe.\u0275\u0275advance(1),Pe.\u0275\u0275property("ngIf",Ne.icon&&Ne.icon.glyph),Pe.\u0275\u0275advance(2),Pe.\u0275\u0275textInterpolate(Ne.displayName)}}var at=function(Ee){return{newPaneColors:Ee,"property-pane-select-menu":!0,"pbi-modern-select-panel":!0,themeableElement:!0}},it=function(){function He(){this.selectionChange=new Pe.EventEmitter}return He.prototype.ngOnChanges=function(Ee){var Ne=this;(Ee.options||Ee.selectedValue)&&(this.selectedOption=this.options.find(function(Je){return Je.value===Ne.selectedValue}))},He.prototype.onSelectionChange=function(Ee){this.selectionChange.emit(Ee.value.value)},He.\u0275fac=function(Ne){return new(Ne||He)},He.\u0275cmp=Pe.\u0275\u0275defineComponent({type:He,selectors:[["property-pane-select-menu"]],inputs:{disabled:"disabled",options:"options",selectedValue:"selectedValue",newPaneColors:"newPaneColors",labelId:"labelId"},outputs:{selectionChange:"selectionChange"},features:[Pe.\u0275\u0275NgOnChangesFeature],decls:6,vars:10,consts:[[1,"themeableElement","pbi-modern-select",3,"value","disabled","panelClass","aria-labelledby","disableOptionCentering","valueChange","selectionChange"],[1,"property-pane-select-menu-option"],["class","glyph-small",3,"fontIcon",4,"ngIf"],["class","property-pane-select-menu-option",3,"value",4,"ngFor","ngForOf"],[1,"glyph-small",3,"fontIcon"],[1,"property-pane-select-menu-option",3,"value"]],template:function(Ne,Je){1&Ne&&(Pe.\u0275\u0275elementStart(0,"mat-select",0),Pe.\u0275\u0275listener("valueChange",function(ot){return Je.selectedOption=ot})("selectionChange",function(ot){return Je.onSelectionChange(ot)}),Pe.\u0275\u0275elementStart(1,"mat-select-trigger",1),Pe.\u0275\u0275template(2,Ze,1,1,"mat-icon",2),Pe.\u0275\u0275elementStart(3,"span"),Pe.\u0275\u0275text(4),Pe.\u0275\u0275elementEnd()(),Pe.\u0275\u0275template(5,qe,4,3,"mat-option",3),Pe.\u0275\u0275elementEnd()),2&Ne&&(Pe.\u0275\u0275property("value",Je.selectedOption)("disabled",Je.disabled)("panelClass",Pe.\u0275\u0275pureFunction1(8,at,Je.newPaneColors))("aria-labelledby",Je.labelId)("disableOptionCentering",!0),Pe.\u0275\u0275advance(2),Pe.\u0275\u0275property("ngIf",Je.selectedOption.icon&&Je.selectedOption.icon.glyph),Pe.\u0275\u0275advance(2),Pe.\u0275\u0275textInterpolate(Je.selectedOption.displayName),Pe.\u0275\u0275advance(1),Pe.\u0275\u0275property("ngForOf",Je.options))},dependencies:[n.NgForOf,n.NgIf,A.Hw,y.gD,y.$L,Re.ey],styles:[".mat-select[_ngcontent-%COMP%]{height:24px;padding:4px 8px!important;display:flex;align-items:center}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger{flex-grow:1}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger .property-pane-select-menu-option{padding:0}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger .property-pane-select-menu-option span{overflow:hidden;text-overflow:ellipsis}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger .property-pane-select-menu-option .mat-icon{height:16px;line-height:16px;width:inherit;margin-right:8px;vertical-align:middle}  .mat-select-panel.property-pane-select-menu{padding-top:4px;padding-bottom:4px}  .mat-select-panel.property-pane-select-menu .property-pane-select-menu-option{padding-left:8px;padding-right:8px;height:28px}  .mat-select-panel.property-pane-select-menu .property-pane-select-menu-option .mat-option-text{line-height:initial}  .mat-select-panel.property-pane-select-menu .property-pane-select-menu-option .mat-icon{height:16px;line-height:16px;width:inherit;margin-right:8px;vertical-align:middle}"],changeDetection:0}),He}(),Et=(t(54902),t(99875),t(51978),t(68335),t(49541),t(290),t(27316)),Ft=t(92482),tt=t(30829),Bt=t(5373),Ut=t(5553),Rt=t(89010),Gt=t(47258),Qt=t(50884),jt=t(78652),Xt=t(50612),pn=t(12242),dn=t(75216),hn=t(22422),gn=t(15841),vn=t(78144),fn=t(24898),mn=t(44536),Cn=jsCommon.FocusManager,_n=function(){function He(){this.focusManager=Cn.getInstance()}return He.prototype.focusOnGroup=function(Ee,Ne,Je,Qe,ot){this.focusManager.focusOnGroupByIndex(Ee,Ne,Je,Qe,ot)},He.\u0275prov=Pe.\u0275\u0275defineInjectable({token:He,factory:He.\u0275fac=function(Ne){return new(Ne||He)},providedIn:"root"}),He}(),yn=t(78381),Pn=t(26286),ie=t(3662),j=t(6862),K=t(28440),Y=t(8576),Be=t(6624),Ke=t(79382),Xe=t(64700),gt=t(25113),ht=t(43533),_t=t(16018),Wt=t(48801),$t=t(47704),Yt=t(59017),Zt=t(73972),tn=t(41359),qt=t(52393),nn=t(12517),on=t(43134),rn=t(10920),Jt=t(90289),Kn=t(31970),Gn=t(41770),Qn=t(70886),Dn=t(64857),Nt=jsCommon.Color,wn=powerbi.data.DataViewTransform,zt=powerbi.explore.constants.ExploreCanvasConstants,An=powerbi.explore.FilterUtils,In=powerbi.visuals.Units.FontSize,ln=powerbi.Fill.isFill,Dt=powerbi.explore.contracts.Section.objectDescriptors,Tn=powerbi.explore.util.ThemeUtils,At=powerbi.explore.contracts.VisualContainer.CommonObjectDescriptors,$n=powerbi.visuals.VisualBorderUtil,Vn=powerbi.explore.viewModels.VisualContainer,Zn=powerbi.explore.util.VisualTooltipStyleUtils,Jn={title:"ThemeDialog_Title",commit:"Apply",cancel:"Cancel_ButtonText",sections:[{name:"ThemeDialog_Section_Colors",subSections:[{name:"ThemeDialog_Section_Colors",subSections:[{name:"Name",description:"ThemeDialog_SubSection_Name_Desc"},{name:"ColorPicker_ThemeColors"},{name:"Waterfall_SentimentColors",description:"ThemeDialog_SubSection_SentimentColors_Desc"},{name:"ThemeDialog_SubSection_DivergentColors",description:"ThemeDialog_SubSection_DivergentColors_Desc"}]},{name:"Advanced",description:"ThemeDialog_SubSection_AdvancedColors_Desc"}]},{name:"Text",subSections:[{name:"Visual_General",description:"ThemeDialog_SubSection_General_Desc"},{name:"Title",description:"ThemeDialog_SubSection_Title_Desc"},{name:"ThemeDialog_SubSection_CardsKPIs",description:"ThemeDialog_SubSection_CardsKPIs_Desc"},{name:"ThemeDialog_SubSection_TabHeaders",description:"ThemeDialog_SubSection_TabHeaders_Desc"}]},{name:"Insert_Group_Visuals",subSections:[{name:"Visual_Background"},{name:"Visual_Border"},{name:"ThemeDialog_SubSection_Header",description:"ThemeDialog_SubSection_Header_Desc"},{name:"Tooltip",description:"ThemeDialog_SubSection_Tooltip_Desc"}]},{name:"Page",subSections:[{name:"PagePropertyPane_Outspace",description:"ThemeDialog_SubSection_Wallpaper_Desc"},{name:"PagePropertyPane_PageBackground",description:"ThemeDialog_SubSection_PageBackground_Desc"}]},{name:"Exploration_FilterPane",subSections:[{name:"Exploration_FilterPane",subSections:[{name:"Background_Color"},{name:"Transparency"},{name:"PagePropertyPane_OutspacePane_ForegroundColor"},{name:"ThemeDialog_SubSection_TitleFontSize",description:"ThemeDialog_SubSection_TitleFontSize_Desc"},{name:"Visual_Qna_HeaderFontSize",description:"ThemeDialog_SubSection_HeaderFontSize_Desc"},{name:"Checkbox_Apply_Color_Title",description:"Checkbox_Apply_Color_Description"}]},{name:"ThemeDialog_SubSection_AvailableFilterCards",description:"ThemeDialog_SubSection_AvailableFilterCards_Desc",subSections:[{name:"Background_Color"},{name:"Transparency"},{name:"PagePropertyPane_OutspacePane_ForegroundColor"},{name:"ThemeDialog_SubSection_FontSize"}]},{name:"ThemeDialog_SubSection_AppliedFilterCards",description:"ThemeDialog_SubSection_AppliedFilterCards_Desc",subSections:[{name:"Background_Color"},{name:"Transparency"},{name:"PagePropertyPane_OutspacePane_ForegroundColor"},{name:"ThemeDialog_SubSection_FontSize"}]}]}]},Xn=function(){function He(Ee,Ne,Je,Qe){this.telemetryService=Ee,this.themeService=Ne,this.modernDialogService=Je,this.featureSwitchService=Qe,this._visualObjectDescriptors={background:{properties:{color:At.background.properties.color,transparency:At.background.properties.transparency}},border:{properties:{show:At.border.properties.show,color:At.border.properties.color,radius:At.border.properties.radius}},visualTooltip:{properties:{titleFontColor:At.visualTooltip.properties.titleFontColor,valueFontColor:At.visualTooltip.properties.valueFontColor,background:At.visualTooltip.properties.background,themedTitleFontColor:At.visualTooltip.properties.themedTitleFontColor,themedValueFontColor:At.visualTooltip.properties.themedValueFontColor,themedBackground:At.visualTooltip.properties.themedBackground,actionFontColor:At.visualTooltip.properties.actionFontColor}},visualHeader:{properties:{background:At.visualHeader.properties.background,border:At.visualHeader.properties.border,transparency:At.visualHeader.properties.transparency,foreground:At.visualHeader.properties.foreground}}},this._sectionObjectDescriptors={background:{properties:{color:Dt.background.properties.color,transparency:Dt.background.properties.transparency,image:Dt.background.properties.image}},outspace:{properties:{color:Dt.outspace.properties.color,transparency:Dt.outspace.properties.transparency,image:Dt.background.properties.image}},outspacePane:{properties:{backgroundColor:Dt.outspacePane.properties.backgroundColor,transparency:Dt.outspacePane.properties.transparency,foregroundColor:Dt.outspacePane.properties.foregroundColor,titleSize:Dt.outspacePane.properties.titleSize,headerSize:Dt.outspacePane.properties.headerSize,checkboxAndApplyColor:Dt.outspacePane.properties.checkboxAndApplyColor}},filterCard:{properties:{backgroundColor:Dt.filterCard.properties.backgroundColor,transparency:Dt.filterCard.properties.transparency,foregroundColor:Dt.filterCard.properties.foregroundColor,textSize:Dt.filterCard.properties.textSize}}},this.themeDialogToken=Kn.Dx}return He.prototype.show=function(Ee){var Je,Ne=this;this.customThemeName=null===(Je=Ee.themeCollection.customTheme)||void 0===Je?void 0:Je.name;var Qe={bindings:{dataViewModel:this.generateViewModel(Ee.themeCollection,Ee.useEnhancedTooltips),dialogViewModel:this.buildDialogNavigationStructureViewModel()},dialogName:"ThemeDialog",componentName:this.themeDialogToken,config:{minWidth:750,panelClass:["hasNavigatableDialog"]}},ot=this.modernDialogService.openHostDialog(Qe);return(0,nn.D)(ot).pipe((0,on.P)(),(0,rn.b)(function(rt){return rt.afterClosed()}),(0,Jt.U)(function(rt){if(Ne.sendThemeDialogClosedTelemetryEvent(rt),rt&&!_.isEmpty(rt))return Ne.updateCustomTheme(rt)}))},He.prototype.buildDialogNavigationStructureViewModel=function(){return Jn},He.prototype.generateViewModel=function(Ee,Ne){var Je=this.themeService.getVisualStyle(Ee),Qe=this.featureSwitchService.featureSwitches.baseThemeUpdate&&!Tn.isBaseThemeCurrent(Ee),ot=this.themeService.getVisualObjects(Ee,"*",void 0,this.visualObjectDescriptors),rt=this.themeService.getVisualObjects(Ee,"page",void 0,this.sectionObjectDescriptors),ft=wn.evaluateMetadataOnceDataViewObjectDefinitions(ot,this.visualObjectDescriptors,Je,this.featureSwitchService.featureSwitches).dataViewObjects||{},mt=wn.evaluateMetadataOnceDataViewObjectDefinitions(rt,Dt,Je,this.featureSwitchService.featureSwitches).dataViewObjects||{},Vt=powerbi.visuals.visualBackgroundHelper.getDefaultColor();Vt.solid.color=jsCommon.Color.normalizeToHexString(Vt.solid.color);var Lt=_.defaults(ft.background,{color:Vt,transparency:powerbi.visuals.visualBackgroundHelper.getDefaultTransparency()}),It=_.defaults(ft.border,$n.getDefaultValues()),dt=this.generateTooltipStyles(Je,Ne,ft.visualTooltip),ut=Nt.hexString(Vn.VisualHeaderBackgroundColor),Ot=_.defaults(ft.visualHeader,{background:{solid:{color:ut}},border:{solid:{color:ut}},foreground:{solid:{color:Je.colorPalette.foreground.value}},transparency:Vn.VisualHeaderTransparency}),St=mt&&mt.background;St&&ln(St.color)&&(St.color=St.color.solid.color);var xt=mt&&mt.outspace;xt&&ln(xt.color)&&(xt.color=xt.color.solid.color);var wt=mt&&mt.outspacePane;wt&&(ln(wt.backgroundColor)&&(wt.backgroundColor=wt.backgroundColor.solid.color),ln(wt.foregroundColor)&&(wt.foregroundColor=wt.foregroundColor.solid.color));var Kt=this.canvasBackground=_.defaults(mt.background,{color:zt.DefaultCanvasBackgroundColor,transparency:zt.DefaultCanvasBackgroundTransparency}),On=_.defaults(mt.outspace,{color:zt.DefaultCanvasOutspaceColor,transparency:zt.DefaultCanvasOutspaceTransparency}),un=_.defaults(mt.outspacePane,{backgroundColor:Je.colorPalette.background.value&&jsCommon.Color.normalizeToHexString(Je.colorPalette.background.value),transparency:zt.DefaultOutspacePaneTransparency,foregroundColor:Je.colorPalette.foreground.value&&jsCommon.Color.normalizeToHexString(Je.colorPalette.foreground.value),titleSize:zt.DefaultOutspacePaneTitleSizePt,headerSize:zt.DefaultOutspacePaneHeaderSizePt,checkboxAndApplyColor:zt.DefaultOutspacePaneCheckboxAndApplyColor}),bn=An.getFilterCardStyle(mt,!0,Je),Sn=An.getFilterCardStyle(mt,!1,Je);bn.fontSize=_.toString(In.createFromCSS(bn.fontSize).pt),Sn.fontSize=_.toString(In.createFromCSS(Sn.fontSize).pt);var xn={foreground:Je.colorPalette.foreground,foregroundNeutralSecondary:Je.colorPalette.foregroundNeutralSecondary,backgroundLight:Je.colorPalette.backgroundLight,foregroundNeutralTertiary:Je.colorPalette.foregroundNeutralTertiary,background:Je.colorPalette.background,backgroundNeutral:Je.colorPalette.backgroundNeutral};xn=_.mapValues(xn,function(Hi){return{value:Nt.normalizeToHexString(Hi.value)}});var En=Je.colorPalette.dataColors,Fn=En.getGradientColors(),ji={minColor:Fn.minColor,midColor:Fn.midColor,maxColor:Fn.maxColor},Nn={baseThemeUpdateAvailable:Qe,dataColors:this.dataColors=En.getBaseColors(),themeColors:xn,gradientColors:ji,sentimentColors:En.getSentimentColors(),textClasses:Je.textClasses,visualContainer:{background:Lt,border:It,tooltips:dt,header:Ot},page:{background:Kt,wallpaper:On,filterPane:un,filterCards:{available:Sn,applied:bn}},useEnhancedTooltips:!!Ne};if(this.customThemeName){var Hn=this.themeService.getThemeJson(this.customThemeName).name;Hn!==He.defaultCustomThemeName&&(Nn.name=Hn)}return Nn},Object.defineProperty(He.prototype,"visualObjectDescriptors",{get:function(){return this._visualObjectDescriptors},enumerable:!1,configurable:!0}),Object.defineProperty(He.prototype,"sectionObjectDescriptors",{get:function(){return this._sectionObjectDescriptors},enumerable:!1,configurable:!0}),He.prototype.updateCustomTheme=function(Ee){var Ne=_.keys(Ee);if(this.featureSwitchService.featureSwitches.baseThemeUpdate&&1===Ne.length&&"updateBaseTheme"===_.first(Ne))return{customTheme:void 0,updateBaseTheme:!0};var Je=Ee.name||He.defaultCustomThemeName,Qe=this.themeService.getThemeJson(this.customThemeName)||powerbi.common.parseCustomVisualTheme('{ "name": "'.concat(Je,'" }'));return null!=Ee.name&&(Qe.name=Je),Ee.textClasses&&(Qe.textClasses=_.merge(Qe.textClasses,this.generateTextClasses(Ee.textClasses))),Ee.dataColors&&(Qe.dataColors=this.mergeDataColors(Ee.dataColors)),Ee.themeColors&&_.assign(Qe,_.mapValues(Ee.themeColors,function(rt){return rt&&rt.value})),Ee.sentimentColors&&_.assign(Qe,_.mapValues(Ee.sentimentColors,function(rt){return rt&&rt.value})),Ee.gradientColors&&_.assign(Qe,this.generateGradientColors(Ee.gradientColors)),(Ee.page||Ee.visualContainer)&&(Qe.visualStyles=_.mergeWith(Qe.visualStyles,this.generateVisualContainerObjects(Ee.visualContainer),this.generatePageObjects(Ee.page),function(ft,mt){if(_.isArray(ft)&&_.isArray(mt)){for(var Vt=function(Ot){var St=_.find(ft,function(xt){return xt.$id===Ot.$id});null==St?ft.push(Ot):_.merge(St,Ot)},Lt=0,It=mt;Lt<It.length;Lt++)Vt(It[Lt]);return ft}})),{customTheme:_.omitBy(Qe,_.isNil),updateBaseTheme:Ee.updateBaseTheme}},He.prototype.getPropertyCount=function(Ee){return Ee?_.keys(Ee).length:0},He.prototype.getThemeSentimentAndGradientColorCount=function(Ee){if(Ee){var Ne=0;if(Ee.dataColors){var Je=_.filter(Ee.dataColors,function(Qe){return Qe&&void 0!==Qe.value});_.isEmpty(Je)||(Ne=Je.length)}return Ne+=this.getPropertyCount(Ee.sentimentColors),(Ne+=this.getPropertyCount(Ee.gradientColors))||void 0}},He.prototype.getTextFontPropertyCount=function(Ee,Ne){if(Ee&&Ee.textClasses){var Je=0,Qe=Ee.textClasses;return Qe.label&&Qe.label[Ne]&&Je++,Qe.title&&Qe.title[Ne]&&Je++,Qe.callout&&Qe.callout[Ne]&&Je++,Qe.header&&Qe.header[Ne]&&Je++,Je||void 0}},He.prototype.getVisualPropertyChangeCount=function(Ee){if(Ee&&Ee.visualContainer){var Ne=Ee.visualContainer,Je=0;return Je+=this.getPropertyCount(Ne.background),Je+=this.getPropertyCount(Ne.border),Je+=this.getPropertyCount(Ne.header),(Je+=this.getPropertyCount(Ne.tooltips))||void 0}},He.prototype.getPagePropertyCount=function(Ee,Ne){if(Ee&&Ee.page){var Je=Ee.page,Qe=0;return Ne?(Qe+=this.getPropertyCount(Je.wallpaper),Qe+=this.getPropertyCount(Je.background)):(Qe+=this.getPropertyCount(Je.filterPane),Je.filterCards&&(Qe+=this.getPropertyCount(Je.filterCards.applied),Qe+=this.getPropertyCount(Je.filterCards.available))),Qe||void 0}},He.prototype.sendThemeDialogClosedTelemetryEvent=function(Ee){this.telemetryService.logEvent(powerbi.telemetry.EXThemeDialogClosed,{themeSentimentDivergentColorsCount:this.getThemeSentimentAndGradientColorCount(Ee),advancedColorCount:Ee&&Ee.themeColors&&_.keys(Ee.themeColors).length,textFontSizeCount:this.getTextFontPropertyCount(Ee,"fontSize"),textFontFaceCount:this.getTextFontPropertyCount(Ee,"fontFace"),textFontColorCount:this.getTextFontPropertyCount(Ee,"color"),visualPropertyChangeCount:this.getVisualPropertyChangeCount(Ee),pagePropertyChangeCount:this.getPagePropertyCount(Ee,!0),filterPanePropertyChangeCount:this.getPagePropertyCount(Ee,!1),isOldThemeTextClassesAccessed:Ee&&Ee.isOldThemeTextClassesAccessed})},He.prototype.generateTextClassesBySection=function(Ee){var Ne={};return Ee.color&&(Ne.color=Ee.color.value),_.defaults(Ne,Ee)},He.prototype.generateTextClasses=function(Ee){if(Ee){var Ne={};return Ee.label&&(Ne.label=this.generateTextClassesBySection(Ee.label)),Ee.callout&&(Ne.callout=this.generateTextClassesBySection(Ee.callout)),Ee.title&&(Ne.title=this.generateTextClassesBySection(Ee.title)),Ee.header&&(Ne.header=this.generateTextClassesBySection(Ee.header)),Ne}},He.prototype.mergeDataColors=function(Ee){if(Ee){var Ne=[];return _.assignWith(Ne,this.dataColors,Ee,function(Je,Qe){return Qe||Je}),_.map(Ne,function(Je){return Je&&Je.value})}},He.prototype.generateGradientColors=function(Ee){if(Ee){var Ne={};for(var Je in Ee){var Qe=Ee[Je].value;switch(Je){case"minColor":Ne.minimum=Qe;break;case"midColor":Ne.center=Qe;break;case"maxColor":Ne.maximum=Qe}}return Ne}},He.prototype.generatePageObjects=function(Ee){var Ne={};if(_.isEmpty(Ee))return Ne;if((Ee.background||Ee.wallpaper)&&(Ne.page={"*":{}}),Ee.background){var Je=Ee.background.color;Ne.page["*"].background=[{color:Je&&{solid:{color:Je}},transparency:Ee.background.transparency}]}if(Ee.wallpaper){var Qe=Ee.wallpaper.color;Ne.page["*"].outspace=[{color:Qe&&{solid:{color:Qe}},transparency:Ee.wallpaper.transparency}]}var ot=Ee.filterPane,rt=Ee.filterCards;if((rt||ot)&&(Ne["*"]={"*":{}}),ot){var ft=ot.backgroundColor,mt=ot.foregroundColor,Vt=ot.checkboxAndApplyColor;Ne["*"]["*"].outspacePane=[{backgroundColor:ft&&{solid:{color:ft}},transparency:ot.transparency,foregroundColor:mt&&{solid:{color:mt}},titleSize:ot.titleSize,headerSize:ot.headerSize,checkboxAndApplyColor:Vt&&{solid:{color:Vt}}}]}if(rt){var Lt=Ne["*"]["*"].filterCard=[],It=rt.applied;if(It){var dt={$id:zt.Applied},Ot=void 0,St=It.foregroundColor;(ut=It.backgroundColor)&&!Nt.isHexString(ut)&&(Ot=Nt.getTransparencyFromString(ut),ut=Nt.normalizeToHexString(ut)),dt.backgroundColor=ut&&{solid:{color:ut}},dt.foregroundColor=St&&{solid:{color:St}},null!=It.fontSize&&!isNaN(+It.fontSize)&&(dt.textSize=+It.fontSize),_.isNumber(Ot)&&(dt.transparency=Ot),Lt.push(dt)}var ut,xt=rt.available;if(xt)dt={$id:zt.Available},St=xt.foregroundColor,Ot=void 0,(ut=xt.backgroundColor)&&!Nt.isHexString(ut)&&(Ot=Nt.getTransparencyFromString(ut),ut=Nt.normalizeToHexString(ut)),dt.backgroundColor=ut&&{solid:{color:ut}},dt.foregroundColor=St&&{solid:{color:St}},null!=xt.fontSize&&!isNaN(+xt.fontSize)&&(dt.textSize=+xt.fontSize),_.isNumber(Ot)&&(dt.transparency=Ot),Lt.push(dt)}return Ne},He.prototype.generateVisualContainerObjects=function(Ee){var Ne={};if(_.isEmpty(Ee))return Ne;Ne["*"]={"*":{}};var Je=Ne["*"]["*"],Qe=Ee.background;Qe&&(Je.background=[{color:(ot=Qe.color)&&{solid:{color:ot.solid.color}},transparency:Qe.transparency}],Ne.page={"*":{background:[{color:{solid:{color:this.canvasBackground.color}},transparency:this.canvasBackground.transparency}]}});var rt=Ee.border;if(rt){var ft=rt.color;Je.border=[{color:ft&&{solid:{color:ft.solid.color}},show:rt.show,radius:rt.radius}]}var mt=Ee.header;if(mt){var Vt=mt.background,Lt=mt.foreground,It=mt.border;Je.visualHeader=[{background:Vt&&{solid:{color:Vt.solid.color}},foreground:Lt&&{solid:{color:Lt.solid.color}},transparency:mt.transparency,border:It&&{solid:{color:It.solid.color}}}]}var dt=Ee.tooltips;if(dt){var ot,ut=dt.titleFontColor,Ot=dt.valueFontColor,St=dt.themedTitleFontColor,xt=dt.themedValueFontColor,wt=dt.themedBackground,Kt=dt.actionFontColor;Je.visualTooltip=[{titleFontColor:ut&&{solid:{color:ut.solid.color}},valueFontColor:Ot&&{solid:{color:Ot.solid.color}},background:(ot=dt.background)&&{solid:{color:ot.solid.color}},themedTitleFontColor:St&&{solid:{color:St.solid.color}},themedValueFontColor:xt&&{solid:{color:xt.solid.color}},themedBackground:wt&&{solid:{color:wt.solid.color}},actionFontColor:Kt&&{solid:{color:Kt.solid.color}}}],Je.visualHeaderTooltip=[{titleFontColor:ut&&{solid:{color:ut.solid.color}},themedTitleFontColor:St&&{solid:{color:St.solid.color}},background:ot&&{solid:{color:ot.solid.color}},themedBackground:wt&&{solid:{color:wt.solid.color}}}]}return Ne},He.prototype.generateTooltipStyles=function(Ee,Ne,Je){var Qe=Zn.getVisualTooltipStyles(Ee,Ne,!1,Je),ot={solid:{color:Qe.titleFontProperties.color}},rt={solid:{color:Qe.valueFontProperties.color}},mt=Qe.background;return Ne?{themedTitleFontColor:ot,themedValueFontColor:rt,themedBackground:mt,actionFontColor:Qe.actionFontProperties?{solid:{color:Qe.actionFontProperties.color}}:void 0}:{titleFontColor:ot,valueFontColor:rt,background:mt}},He.defaultCustomThemeName=Tn.CustomThemeName,He.\u0275fac=function(Ne){return new(Ne||He)(Pe.\u0275\u0275inject(ce.y0),Pe.\u0275\u0275inject(Gn.f),Pe.\u0275\u0275inject(Qn.x),Pe.\u0275\u0275inject(Dn.vZ))},He.\u0275prov=Pe.\u0275\u0275defineInjectable({token:He,factory:He.\u0275fac,providedIn:"root"}),He}(),Yn=t(11719),qn=t(41844),ei=t(86455),Bn=t(23700),Ln=t(21182),Rn=t(51504),kn=t(75939),ti=t(20010),ni=t(56577),ii=t(10664),oi=function(){function He(){}return He.\u0275fac=function(Ne){return new(Ne||He)},He.\u0275mod=Pe.\u0275\u0275defineNgModule({type:He}),He.\u0275inj=Pe.\u0275\u0275defineInjector({providers:[(0,tt.tp)("bookmarkService",Bt.F),(0,tt.te)("bookmarkPlay",{component:st.d}),(0,tt.tp)("canvasKeyHandler",Ut.Z),(0,tt.tp)("canvasScale",Rt.Z),(0,tt.te)("canvasVisualHeaderIcon",{component:Ve.f}),(0,tt.tp)("canvasWheelHandler",Gt.H),(0,tt.tp)("changeDetectionMeasure",Qt.C),(0,tt.Y2)("commandStore",Ft.D),(0,tt.tp)("deleteVisual",jt.K),(0,tt.te)("dotGrid",{component:Ct.L}),(0,tt.tp)("drillToDetails",pn.M),(0,tt.tp)("dropdown",dn.V),(0,tt.tp)("explorationCapabilities",hn.U),(0,tt.Y2)("explorationExtensibilityService",gn.W),(0,tt.te)("downgradedExplorationFooterModern",{component:ke.H}),(0,tt.te)("explorationPaneHeader",{component:gt.m}),(0,tt.te)("explorationPaneDowngraded",{component:Xe.V}),(0,tt.te)("explorationPaneSectionDowngraded",{component:ht.i}),(0,tt.Y2)("exportToExcelProxy",fn.U),(0,tt.tp)("formFactor",yn.F),(0,tt.Y2)("favoriteVisualLoader",mn.W),(0,tt.Y2)("focus",_n),(0,tt.tp)("groupAuthoring",Pn.RD),(0,tt.Y2)("highContrastThemeGenerationService",ie.S),(0,tt.te)("instancePickerModern",{component:K.O}),(0,tt.tp)("importVisual",j.W),(0,tt.tp)("layoutAuthoring",Y.U),(0,tt.Y2)("visualPaneSettingsService",ti.R),(0,tt.te)("filterRestatement",{component:l.W}),(0,tt.te)("iconSetPicker",{component:te.V}),(0,tt.te)("iconSetPickerInput",{component:Ce.Z}),(0,tt.Y2)("modernScopedRootRegistrar",$t.v_),(0,tt.te)("downgradedOutspacePane",{component:ye.t}),(0,tt.tp)("panesVisibility",Ke.r),(0,tt.te)("paneSwitcherLazy",{component:we.A}),(0,tt.te)("penAnnotation",{component:Te.S}),(0,tt.te)("performancePaneLazy",{component:De.C}),(0,tt.tp)("pinVisual",_t.k),(0,tt.te)("propertyPaneSelectMenu",{component:it}),(0,tt.tp)("showValueAsService",Zt.P),(0,tt.Y2)("settingsService",Yt.g),(0,tt.tp)("sparklinesService",tn.s),(0,tt.te)("svgUseSymbol",{component:qt.k}),(0,tt.Y2)("themeDialogService",Xn),(0,tt.fp)("upgradedInstancePicker",{bindings:{mode:"<",filter:"<",model:"="},template:'<instance-picker ng-model="$ctrl.model" mode="$ctrl.mode" filter="$ctrl.filter"></instance-picker>'}),(0,tt.tp)("viewModeState",Yn.kc),(0,tt.tp)("visualAuthoring",qn.$),(0,tt.te)("visualContainerPinButton",{component:Bn.c}),(0,tt.te)("visualContainerRefreshButton",{component:Ln.Y}),(0,tt.te)("visualContainerRelationshipFilters",{component:Rn.Q}),(0,tt.te)("downgradedVisualHeaderItemContainer",{component:kn.Y}),(0,tt.te)("downgradedVisualModern",{component:Et.y}),(0,tt.tp)("visualSync",ni.M),(0,tt.te)("visualTypesContainerModern",{component:ii.r}),(0,tt.te)("durationPicker",{component:Ue.w}),(0,tt.Y2)("layoutInsertionHelper",Be.m),(0,tt.Y2)("resourcePackageCopyService",Wt.V),(0,tt.tp)("exportData",vn.I),(0,tt.tp)("visualContainerCopy",ei.w)],imports:[Xt.M]}),He}(),ri=t(86242),ai=t(64450),li=new Pe.InjectionToken("ExplorationDataReaderExtensionCanEditSchemas"),ci={provide:ri.rc,useFactory:function(He,Ee){var Ne=He.get(li,!1),Je={};return powerbi.explore.dataReaderPlugins.registerExplorationDataReaderExtension(Je,Ee,Ne),Je},deps:[Pe.Injector,ai.t]},ui=t(47217),pi=t(72914),xi=(t(86036),t(72201),t(32928),t(76313),t(37985),t(52416),t(79393),t(76302),t(45168),t(9934),t(6651),t(8522),t(91697),t(92274),t(10334)),Fi=(t(6268),t(82944)),Di=t(46797),wi=t(40989),Ai=t(89874),Un=function(){function He(){}return He.\u0275fac=function(Ne){return new(Ne||He)},He.\u0275mod=Pe.\u0275\u0275defineNgModule({type:He}),He.\u0275inj=Pe.\u0275\u0275defineInjector({providers:[(0,tt.te)("iconPicker",{component:Ai.I})],imports:[n.CommonModule,le._,Di.Q,wi.j,be.v]}),He}(),an=t(53300),Ht=t(93721),en=t(84634),zn=t(55240),Wn=t(59189),jn=t(79201),Ii=t(32531),Ti=t(36686),Vi=t(98822),Bi=t(29150),kt=t(83022),Li=t(7772),Ri=t(98729);function cn(He){var Ne=He.parameters;return He.featureSwitches&&Ne&&Ne.powerBISpinnerImprovements}var Ui=function(){function He(Ee,Ne,Je){var Qe=this;this.contextActivityService=Ee,this.spinnerStoreService=Ne,this.featureSwitchService=Je,this.initializeReportSpinnerActivity$=(0,e.GW)(function(){return Qe.contextActivityService.getActivityStream().pipe((0,an.n)(function(ot){return!cn(Qe.featureSwitchService)}),(0,e.l4)(kt.TV),(0,Ht.h)(function(ot){var rt=ot.properties;return"Open Report"===rt.name||"Get Conceptual Schema"===rt.name||"Get Exploration"===rt.name}),(0,en.b)(function(ot){null==Qe.loadingScreenActivity&&"Open Report"===ot.properties.name&&(Qe.loadingScreenActivity=Qe.contextActivityService.createActivity({name:"Loading Screen"})),Qe.spinnerStoreService.addActivity(),"Open Report"===ot.properties.name?(Qe.currentOpenReport=ot.properties.rootId,Qe.spinnerStoreService.setProgressPercent(0),Qe.spinnerStoreService.showLoadingBar()):Qe.partOneComplete=!1}))},{dispatch:!1}),this.endSpinnerActivity$=(0,e.GW)(function(){return Qe.contextActivityService.getActivityStream().pipe((0,an.n)(function(ot){return!cn(Qe.featureSwitchService)}),(0,e.l4)(kt.TH,kt.xq,kt.Gb),(0,Ht.h)(function(ot){var rt=ot.properties;return("Get Conceptual Schema"===rt.name||"Get Exploration"===rt.name||"Render"===rt.name)&&rt.rootId===Qe.currentOpenReport}),(0,e.IC)(function(){return Qe.spinnerStoreService.activityState$}),(0,en.b)(function(ot){ot[1].max>0&&Qe.spinnerStoreService.endActivity()}),(0,Jt.U)(function(ot){return ot[0]}),(0,Ht.h)(function(ot){var rt=ot.properties;return"Get Conceptual Schema"===rt.name||"Get Exploration"===rt.name}),(0,en.b)(function(ot){Qe.partOneComplete&&Qe.spinnerStoreService.setProgressPercent(30),Qe.partOneComplete=!0}))},{dispatch:!1}),this.endAllSpinnerActivities$=(0,e.GW)(function(){return Qe.contextActivityService.getActivityStream().pipe((0,an.n)(function(ot){return!cn(Qe.featureSwitchService)}),(0,e.l4)(kt.TH,kt.xq,kt.Gb),(0,Ht.h)(function(ot){var rt=ot.properties;return"Open Report"===rt.name&&rt.rootId===Qe.currentOpenReport}),(0,e.IC)(function(){return Qe.spinnerStoreService.activityState$}),(0,en.b)(function(ot){ot[1].max>0&&Qe.endLoadingSession()}))},{dispatch:!1}),this.vcPrimerStartedActivity$=(0,e.GW)(function(){return Qe.contextActivityService.getActivityStream().pipe((0,an.n)(function(ot){return!cn(Qe.featureSwitchService)}),(0,e.l4)(kt.TV),(0,Ht.h)(function(ot){var rt=ot.properties;return"Visual Container Prerun Setup"===rt.name&&rt.rootId===Qe.currentOpenReport}),(0,Jt.U)(function(ot){var rt=ot.properties,ft=0,mt=0;return rt.visualsToPrime>0&&(mt=rt.visualsToPrime,ft=Math.floor(mt*Qe.featureSwitchService.parameters.deferVCLoading_loadFinishThreshold),Qe.spinnerStoreService.addManyActivities(ft)),Qe.spinnerStoreService.endActivity(),(0===ft||0===mt)&&Qe.endLoadingSession(ft,mt),[ft,mt]}),(0,Ht.h)(function(ot){return ot[0]>0&&ot[1]>0}),(0,zn.zg)(function(ot){var rt=ot[0],ft=ot[1];Qe.spinnerStoreService.showLoadingBar();var mt=Qe.currentOpenReport,Vt=3*rt,Lt=Qe.contextActivityService.getActivityStream().pipe((0,e.l4)(kt.TH,kt.xq,kt.Gb),(0,Ht.h)(function(dt){var ut=dt.properties;return("Render"===ut.name||"Query"===ut.name||"Visual Container Module Load"===ut.name)&&ut.rootId===Qe.currentOpenReport}),(0,Wn.R)(function(dt){return dt+1},0),(0,e.IC)(function(){return Qe.spinnerStoreService.activityState$}),(0,en.b)(function(dt){var ut=dt[0],St=30+ut/Vt*70;St>dt[1].progress&&Qe.spinnerStoreService.setProgressPercent(St),ut===Vt&&Qe.endLoadingSession(rt,ft)}),(0,jn.o)(function(dt){return dt[0]<=Vt&&dt[1].loadingBarVisible&&Qe.currentOpenReport===mt})),It=Qe.contextActivityService.getActivityStream().pipe((0,e.l4)(kt.TV),(0,Ht.h)(function(dt){var ut=dt.properties;return"Visual Container Primed"===ut.name&&ut.rootId===Qe.currentOpenReport}),(0,Wn.R)(function(dt){return dt+1},0),(0,an.n)(function(dt){return dt<ft}),(0,Ii.q)(1),(0,zn.zg)(function(dt){var ut=Qe.featureSwitchService.parameters.deferVCLoading_timeoutLimit;if(0===ut)return Qe.endLoadingSession(rt,ft,!0),(0,Ti.of)(void 0);var Ot=ut/7;Ot=Math.max(Ot,100);var St=ut/Ot;return(0,Vi.F)(Ot).pipe((0,e.IC)(function(){return Qe.spinnerStoreService.activityState$}),(0,jn.o)(function(xt){return xt[1].loadingBarVisible&&xt[0]<=St&&Qe.currentOpenReport===mt}),(0,en.b)(function(xt){var wt=xt[0],un=30+wt*Ot/ut*70;un>xt[1].progress&&Qe.spinnerStoreService.setProgressPercent(un),wt===St&&Qe.endLoadingSession(rt,ft,!0)}))}));return(0,Bi.aj)([Lt,It])}))},{dispatch:!1}),this.partOneComplete=!1}return He.prototype.endLoadingSession=function(Ee,Ne,Je){this.spinnerStoreService.resetState(),this.currentOpenReport=void 0,this.loadingScreenActivity&&(this.loadingScreenActivity.setProperty("timeoutReached",Je),this.loadingScreenActivity.setProperty("primeThreshold",Ee),this.loadingScreenActivity.setProperty("visualsToPrimeCount",Ne),this.loadingScreenActivity.resolve(),this.loadingScreenActivity=void 0)},He.\u0275fac=function(Ne){return new(Ne||He)(Pe.\u0275\u0275inject(Li.r),Pe.\u0275\u0275inject(Ri.Y),Pe.\u0275\u0275inject(Dn.vZ))},He.\u0275prov=Pe.\u0275\u0275defineInjectable({token:He,factory:He.\u0275fac}),He}(),zi=t(89515),Wi=function(){function He(Ee){this.subscription=Ee.loaded$.subscribe(function(Ne){Ne&&powerbi.explore.services.VisualHostServices.initialize(Ee)})}return He.prototype.ngOnDestroy=function(){this.subscription||this.subscription.unsubscribe()},He.\u0275fac=function(Ne){return new(Ne||He)(Pe.\u0275\u0275inject(zi.o))},He.\u0275mod=Pe.\u0275\u0275defineNgModule({type:He}),He.\u0275inj=Pe.\u0275\u0275defineInjector({providers:[ui.p7,pi.xW,ci],imports:[n.CommonModule,g.S,Fi.p,S.O,oi,m._t,e.sQ.forFeature([Ui]),B.F,w.A3,O.u5,V.L,Un,v.InformationProtectionUICommonModule,c.N,c.N.withLazyScopedServices([{serviceName:"bookmarkOnLoad",modulePath:"./lazy-modules/bookmark-on-load/bookmark-on-load.module#BookmarkOnLoadModule"}]),c.N.withLazyScopedServices([{serviceName:"insightsAnalysisDefinitionBuilder",modulePath:"@powerbi/Insights/insights.module#InsightsModule"}]),c.N.withLazyScopedServices([{serviceName:"insightsAnalysisResultHandler",modulePath:"@powerbi/Insights/insights.module#InsightsModule"}]),c.N.withLazyScopedServices([{serviceName:"insightsAnalysisModern",modulePath:"@powerbi/Insights/insights.module#InsightsModule"}]),c.N.withLazyScopedServices([{serviceName:"insightsLauncher",modulePath:"@powerbi/InsightsUI/module#InsightsUIModule"}]),c.N.withLazyScopedServices([{serviceName:"insightsPaneStateManager",modulePath:"@powerbi/InsightsUI/module#InsightsUIModule"}]),c.N.withLazyScopedServices([{serviceName:"customVisualsStore",modulePath:"@powerbi/CustomVisualsGallery/modules/custom-visuals-store.module#CustomVisualsStoreModule"}]),c.N.withLazyScopedServices([{serviceName:"customVisualsStoreMetadata",modulePath:"@powerbi/CustomVisualsGallery/modules/custom-visuals-store.module#CustomVisualsStoreModule"}]),c.N.withLazyScopedServices([{serviceName:"drillthrough",modulePath:"./lazy-modules/drill-through/drill-through.module#DrillThroughModule"}]),c.N.withLazyScopedServices([{serviceName:"qnaPopoutBuilderModern",modulePath:"@powerbi/QnaReportContainer/module#QnaReportContainerModule"}]),c.N.withLazyScopedServices([{serviceName:"quickCalcModern",modulePath:"@powerbi/DaxTemplate/quick-calc.module#QuickCalcModule"}]),c.N.withLazyScopedServices([{serviceName:"persistentState",modulePath:"@powerbi/ExplorationPersistentState/exploration-persistent-state.module#ExplorationPersistentStateModule"}]),c.N.withLazyScopedServices([{serviceName:"originalExplorationState",modulePath:"@powerbi/ExplorationPersistentState/exploration-persistent-state.module#ExplorationPersistentStateModule"}]),c.N.withLazyScopedServices([{serviceName:"dirtyStateHandler",modulePath:"@powerbi/ExplorationPersistentState/exploration-persistent-state.module#ExplorationPersistentStateModule"}]),c.N.withLazyScopedServices([{serviceName:"personalBookmarks",modulePath:"@powerbi/WebBookmarks/web-bookmarks.module#WebBookmarksModule"}]),c.N.withLazyScopedServices([{serviceName:"visualRecommendationService",modulePath:"./lazy-modules/visual-recommendation/visual-recommendation-provider.module#VisualRecommendationProviderModule"}]),c.N.withLazyScopedServices([{serviceName:"authoringVisualRecommendationInterop",modulePath:"./lazy-modules/visual-recommendation/visual-recommendation-provider.module#VisualRecommendationProviderModule"}]),c.N.withLazyScopedServices([{serviceName:"smartNarrativesSummarization",modulePath:"@powerbi/SmartNarratives/smart-narratives.module#SmartNarrativesModule"}]),c.N.withLazyScopedServices([{serviceName:"smartNarratives",modulePath:"@powerbi/SmartNarratives/smart-narratives.module#SmartNarrativesModule"}]),c.N.withLazyScopedServices([{serviceName:"zIndexService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),c.N.withLazyScopedServices([{serviceName:"bookmarkAuthoringService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),c.N.withLazyScopedServices([{serviceName:"tabOrderService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),c.N.withLazyScopedServices([{serviceName:"canvasListOrderingService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),c.N.withLazyScopedServices([{serviceName:"conditionalFormattingDialogLauncherService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),c.N.withLazyScopedServices([{serviceName:"dataBarsDialogLauncherService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),c.N.withLazyScopedServices([{serviceName:"automatedInsightsQuery",modulePath:"@powerbi/AutomatedInsights/automated-insights-lazy.module#AutomatedInsightsLazyModule"}]),c.N.withLazyScopedServices([{serviceName:"visualHostTooltipActionsProvider",modulePath:"./lazy-modules/visual-host-tooltip-actions-provider/visual-host-tooltip-actions-provider.module#VisualHostTooltipActionsProviderModule"}]),c.N.withLazyScopedServices([{serviceName:"connectToDataService",modulePath:"@powerbi/ConnectToDataDialog/connect-to-data-dialog.module#ConnectToDataDialogModule"}]),c.N.withLazyScopedServices([{serviceName:"explorationAuthoring",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),c.N.withLazyScopedServices([{serviceName:"fieldWellModernService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),c.N.withLazyScopedServices([{serviceName:"exportVisualData",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),c.N.withLazyScopedServices([{serviceName:"userEmulationService",modulePath:"./lazy-modules/user-emulation/user-emulation.module#UserEmulationModule"}]),c.N.withLazyScopedServices([{serviceName:"visualContainerSkittlesService",modulePath:"./lazy-modules/visual-container-skittles/visual-container-skittles.module#VisualContainerSkittlesModule"}]),c.N.withLazyScopedServices([{serviceName:"formattingStore",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),c.N.withLazyScopedServices([{serviceName:"formattingStoreLegacy",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),c.N.withLazyScopedServices([{serviceName:"formattingModelService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),c.N.withLazyScopedServices([{serviceName:"formattingService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),be.v,f.ot,ae.x,M.p9,T.To,A.Ps,b.c,P.Fk,y.LD,C.dp,X.d,Fe.z,_e.b,le._,ee.gd,N.U,F.b,k.K,E.x,R.Z,W.J,Z.O,me.Zz,O.UX,I.ym,i.Bz.forChild(ge),G.a,ce.e3,je.T6,Oe.g,d.xg,J.D,xi.Q,ue.c,Me._,he.w,Un,he.w]}),He}()},95195:function(Le,oe,t){t.d(oe,{H:function(){return we}});var e=t(7005),n=t(58802),m=t(59214),i=t(78099),O=t(89718),I=t(43801),T=t(89515),f=t(44302),M=t(41844),A=t(57644),b=t(26963),P=powerbi.data,y=powerbi.explore,d=powerbi.visuals,g=d.AnomalyDetectionObjectConstants,S=d.AnomalyDetectionTransformConstants,B=d.cartesianRoleNames,w=P.DataViewObjectDefinitions,V=d.ForecastHelper,v=P.ScalarKeyUtils.isScalarKeySupportedForRole,c=powerbi.visuals.AnomalyDetectionVisualPlugin.isSingleDateColumn,u=powerbi.visuals.plugins,r=d.referenceLineObjectName,h=y.util.VisualContainerUtils,p=function(){function Te(De,Re,Ze,Ye,qe,at,it,pt){this.conceptualSchemaProxy=De,this.dataSourcesService=Re,this.localizationService=Ze,this.telemetryService=Ye,this.undoRedoService=qe,this.visualAuthoringService=at,this.visualAuthoringOperations=it,this.visualPluginService=pt}return Te.prototype.supportsAnalyticsObject=function(De,Re){return(0,e.mG)(this,void 0,void 0,function(){var Ze,Ye,qe;return(0,e.Jh)(this,function(at){switch(at.label){case 0:return at.trys.push([0,2,,3]),Ze=this.dataSourcesService.get(),_.isEmpty(Ze)?[2,!1]:[4,this.conceptualSchemaProxy.get(Ze)];case 1:return Ye=at.sent(),[2,this.supportsAnalyticsAuthoring(De,Re,Ye)];case 2:return qe=at.sent(),this.telemetryService.logEvent(powerbi.telemetry.EXAnalyticsLoadSchemaError,{message:qe}),[2,!1];case 3:return[2]}})})},Te.prototype.addAnalyticsObject=function(De,Re){var Ze=this;if(De&&Re){var Ye=h.getVisualQuery(De),qe=this.getCartesianYRoleName(De);if(qe){var at=Ye.getQueryRefByProjectionIndex(qe,0);if(at){var pt={id:"1",metadata:at},ct=h.getObjectDefinitions(De);ct&&w.getObjectDefinition(ct,g.capabilityObjectName,pt)||this.undoRedoService.register("addAnalyticsObject",function(){return Ze.setAnalyticsObjectProperties(De,pt,Re),Ze.visualAuthoringService.raiseVisualContainerChanged(De),!0})}}}},Te.prototype.getCartesianYRoleName=function(De){var Re=h.getVisualCapabilities(De,this.visualPluginService),Ze=_.find(Re.dataRoles,function(Ye){return 1===Ye.cartesianKind});if(Ze)return Ze.name},Te.prototype.setAnalyticsObjectProperties=function(De,Re,Ze){var Ye,qe;switch(Ze){case g.capabilityObjectName:Ye={algorithm:S.transformPluginName,parameters:[{name:g.sensitivitySliceName,expr:P.SQExprBuilder.double(S.defaultSensitivityValue)}]},qe=P.SQExprBuilder.text(P.getDisplayName(P.createDisplayNameGetter("Visual_AnomalyDetection"),this.localizationService)+" "+Re.id);break;case V.forecastObjectName:Ye={algorithm:"Forecast",parameters:[{name:"Unit",expr:P.SQExprBuilder.integer(7)},{name:"ForecastLength",expr:P.SQExprBuilder.integer(10)},{name:"IgnoreLast",expr:P.SQExprBuilder.integer(0)},{name:"ConfidenceLevel",expr:P.SQExprBuilder.double(.95)}]},qe=P.SQExprBuilder.text(P.getDisplayName(P.createDisplayNameGetter("Visual_Forecast"),this.localizationService)+" "+Re.id)}this.visualAuthoringOperations.addProperty(De,{objectName:Ze,propertyName:S.transformPropertyName},Re,Ye),this.visualAuthoringOperations.addProperty(De,{objectName:Ze,propertyName:"show"},Re,P.SQExprBuilder.boolean(!0)),this.visualAuthoringOperations.addProperty(De,{objectName:Ze,propertyName:"displayName"},Re,qe)},Te.prototype.supportsAnalyticsAuthoring=function(De,Re,Ze){if(!(De&&Re&&Ze&&this.supportedAnalyticsVisualType(De,Re)))return!1;var Ye=h.getObjectDefinitions(De);switch(Re){case g.capabilityObjectName:if(Ye&&(Ye[V.forecastObjectName]||Ye[r]))return!1;break;case V.forecastObjectName:if(Ye&&Ye[g.capabilityObjectName])return!1}var qe=h.getVisualQuery(De);if(!qe)return!1;var at=qe.tryGetExprs(B.category);return c(at,Ze)||v(Ze,qe.defn,qe.projections,B.category)},Te.prototype.supportedAnalyticsVisualType=function(De,Re){var Ze=h.getVisualType(De);switch(Re){case g.capabilityObjectName:case V.forecastObjectName:return Ze===u.lineChart.name;default:return!1}},Te.\u0275fac=function(Re){return new(Re||Te)(m.\u0275\u0275inject(i.i),m.\u0275\u0275inject(O.D),m.\u0275\u0275inject(T.o),m.\u0275\u0275inject(f.y0),m.\u0275\u0275inject(I.z),m.\u0275\u0275inject(M.$),m.\u0275\u0275inject(A.Q),m.\u0275\u0275inject(b.D))},Te.\u0275prov=m.\u0275\u0275defineInjectable({token:Te,factory:Te.\u0275fac}),Te}(),D=t(41897),x=t(50512),z=t(5373),Q=t(5553),q=t(89010),de=t(47258),se=t(74569),Ie=t(50884),fe=t(51387),re=t(45384),pe=t(75216),ge=t(75011),be=t(78652),ae=t(12242),X=t(78144),le=t(22422),ee=t(67613),N=t(30496),F=t(79860),E=t(84638),k=t(78381),R=t(26286),W=t(6862),Z=t(63007),me=t(8576),_e=t(81602),he=t(72914),G=t(86942),ce=t(16018),Fe=t(62095),je=t(47217),Oe=t(64992),J=t(64857),ue=t(19060),Me=t(88578),Se=t(25256),Ge=t(76588),st={provide:Se.b,useFactory:function(Te,De,Re,Ze,Ye,qe,at){var it=qe.get(Se.m,null);return it?m.Injector.create({providers:[it],parent:qe}).get(Se.b):powerbi.explore.services.createScriptVisualsService(Re,Te,De,Ze,at,Ye)},deps:[J.vZ,T.o,b.D,Me.a,ue.E,m.Injector,[new m.Optional,Ge.X]]},yt=t(73972),Ae=t(41359),Ve=t(11719),xe=t(709),Pe=t(86455),et=t(94689),$e=t(32584),lt=t(37687),Pt=t(85999),Ct=t(17107),Ue=t(56577),ke=t(68335),We=t(54772),ze=t(22152),ve=t(20019),a=t(61465),o=t(93667),l=t(12820),s=t(96175),L=t(90750),U=t(56043),H=t(79382),ne=t(97147),te=t(98713),Ce=t(70886),ye=function(){function Te(De,Re,Ze,Ye,qe){this.dataSources=De,this.dialogService=Re,this.explorationNavigation=Ze,this.localizationService=Ye,this.visualAuthoring=qe}return Te.prototype.showMapConversionDialog=function(){return(0,e.mG)(this,void 0,void 0,function(){var De,Re;return(0,e.Jh)(this,function(qe){switch(qe.label){case 0:return De=this.localizationService.get("AzureMapVisual_ConversionDialog_Message"),Re=De.split(/\{\d\}/),[4,this.dialogService.showConfirmationDialog({title:this.localizationService.get("AzureMapVisual_ConversionDialog_Title"),message:"",additionalMessages:[[Re[0],{segmentStr:this.localizationService.get("AzureMapVisual_ConversionDialog_OK"),bold:!0},Re[1],{segmentStr:this.localizationService.get("Generic_LearnMore"),link:{url:"https://learn.microsoft.com/azure/azure-maps/power-bi-visual-migrate-from-bing-maps",isExternal:!0}}]],okButtonText:this.localizationService.get("AzureMapVisual_ConversionDialog_OK"),cancelButtonText:this.localizationService.get("NoThanks")},{width:"500px",autoFocus:!0,disableClose:!0}).afterClosed().toPromise()];case 1:return 1===qe.sent()&&this.upgradeAllMapVisuals(),[2]}})})},Te.prototype.hasMapOrFilledMapVisual=function(De){if(!_.isEmpty(De.sections))for(var Re=0,Ze=De.sections;Re<Ze.length;Re++){var qe=Ze[Re].visualContainers;if(!_.isEmpty(qe))for(var at=0,it=qe;at<it.length;at++){var ct=it[at].config.singleVisual.visualType;if("map"===ct||"filledMap"===ct)return!0}}return!1},Te.prototype.upgradeAllMapVisuals=function(){var Re=(0,e.ev)((0,e.ev)([],this.explorationNavigation.getAllVisualContainers("map"),!0),this.explorationNavigation.getAllVisualContainers("filledMap"),!0);this.visualAuthoring.convertMultiple(Re,this.dataSources.get(),"azureMap")},Te.\u0275fac=function(Re){return new(Re||Te)(m.\u0275\u0275inject(O.D),m.\u0275\u0275inject(Ce.x),m.\u0275\u0275inject(ve.z),m.\u0275\u0275inject(T.o),m.\u0275\u0275inject(M.$))},Te.\u0275prov=m.\u0275\u0275defineInjectable({token:Te,factory:Te.\u0275fac}),Te}(),we=(0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)([],ze.K,!0),a.H,!0),s.t,!0),L.K,!0),te.W,!0),U.V,!0),[n.w,p,D.Z,x.G,ye,z.F,Q.Z,q.Z,de.H,se.w,{provide:se.Z,useValue:ke.f},Ie.C,fe.e,re.L,be.K,ae.M,pe.V,X.I,le.U,ee.I,{provide:ve.z,useExisting:ee.I},N.j,je.L_,he.z_,ge.Sn,F.x,E.I,k.F,o.c,l.eE,R.wG,W.W,Z.Y,me.U,he.tC,G.F,H.r,ce.k,Fe.I,_e.H,Oe.cW,st,yt.P,Ae.s,ne._,Ve.kc,A.Q,{provide:xe.t,useExisting:M.$},M.$,Pe.w,$e.p,et.s,Pt.k,lt.K,Ct.z,Ue.M,We.g],!1)},58802:function(Le,oe,t){t.d(oe,{w:function(){return w}});var e=t(7005),n=t(75982),m=t(59214),i=t(78099),O=t(39907),I=t(89718),T=t(48568),f=t(64857),M=t(41770),A=t(26963),b=powerbi.visuals.dataQueryVisualRoles,P=powerbi.data.DataViewObjectDefinitions,y=powerbi.data.DataViewTransform,C=powerbi.data.InlineSubqueryRewriter,d=powerbi.data.SemanticQuery,g=powerbi.data.SQExprBuilder,S=powerbi.explore.contracts.VisualQuery,B=powerbi.visuals.plugins.dataQueryVisual.name,w=function(){function v(c,u,r,h,p,D,x){this.conceptualSchemaProxy=c,this.dataProxy=u,this.dataSources=r,this.featureSwitchService=h,this.themeService=p,this.visualPlugin=D,this.visualQueryGenerator=x}return v.prototype.getValues=function(c,u){return(0,e.mG)(this,void 0,void 0,function(){var r,h,p,D,x,z;return(0,e.Jh)(this,function(q){switch(q.label){case 0:return(r=u&&u.executionOptions&&u.executionOptions.performanceActivity)&&(h=r.createChildActivity({name:"Query",component:n.I})),[4,this.generateQuery(c,u,h)];case 1:return(p=q.sent()).error?(null==h||h.reject(),[2,{error:p.error}]):[4,this.runQuery(p,u,h)];case 2:return(D=q.sent()).error?(null==h||h.reject(),[2,{error:D.error}]):(h&&h.resolve(),(x=this.generateDataView(r,D.result,p)).error?[2,{error:x.error}]:[2,{result:(z=x.result).table.rows,columns:z.table.columns}])}})})},v.prototype.generateDataQuery=function(c,u){return(0,e.mG)(this,void 0,void 0,function(){var r;return(0,e.Jh)(this,function(h){switch(h.label){case 0:return[4,this.generateQuery(c,u)];case 1:return[2,{query:(r=h.sent()).options&&r.options.query&&r.options.query.command,error:r.error,warnings:r.warnings}]}})})},v.prototype.generateQuery=function(c,u,r){return(0,e.mG)(this,void 0,void 0,function(){var h,p,D,x,z,Q,q,se,Ie,fe,pe,be,ae,ee,N,F;return(0,e.Jh)(this,function(k){switch(k.label){case 0:for(h=d.create(),p=0,D=c;p<D.length;p++)h=h.addSelect(D[p]);for(x=new C(h),h=x.rewrite(),z=new S(h,{},[]),Q=0,q=h.select();Q<q.length;Q++)z.add(q[Q].expr,b.values);if(u&&u.sort&&z.orderBy(u.sort),se={visualType:B,query:z,objects:{}},u&&null!=u.top){if(!_.isInteger(u.top)||u.top<=0)return[2,{options:void 0,error:new V}];P.setValue(se.objects,powerbi.visuals.dataQueryVisualOverrideDataReductionIdentifier,null,g.integer(u.top))}if(u&&u.suppressJoinPredicate)for(Ie=0,fe=u.suppressJoinPredicate;Ie<fe.length;Ie++)pe=z.defn.selectNameOf(fe[Ie]),P.setValue(se.objects,powerbi.visuals.dataQueryVisualSuppressJoinPredicateIdentifier,{metadata:pe},g.boolean(!0));be=this.dataSources.get(),k.label=1;case 1:return k.trys.push([1,3,,4]),[4,this.conceptualSchemaProxy.get(be)];case 2:return ae=k.sent(),[3,4];case 3:return[2,{options:void 0,error:k.sent()}];case 4:N={config:se,dataSources:be,schema:ae,additionalFilters:u&&u.filters,executionMetricsKind:ee=u&&u.executionOptions&&u.executionOptions.performanceActivity?3:0,performanceActivity:r},k.label=5;case 5:return k.trys.push([5,7,,8]),[4,this.visualQueryGenerator.execute((0,e.pi)((0,e.pi)({},N),{executionMetricsKind:ee}))];case 6:if((F=k.sent()).error)throw F.error;return[2,F];case 7:return[2,{options:void 0,error:k.sent()}];case 8:return[2]}})})},v.prototype.runQuery=function(c,u,r){return(0,e.mG)(this,void 0,void 0,function(){var h;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),h=u&&u.executionOptions?(0,e.pi)((0,e.pi)({},c.options),{query:(0,e.pi)((0,e.pi)((0,e.pi)({},c.options.query),u.executionOptions),{performanceActivity:r})}):c.options,[4,this.dataProxy.execute(h)];case 1:return[2,{result:x.sent()}];case 2:return[2,{error:x.sent()}];case 3:return[2]}})})},v.prototype.generateDataView=function(c,u,r){var h;c&&(h=c.createChildActivity({name:"Data View Transform",component:n.I}));try{var p=this.visualPlugin.capabilities(B),D=y.apply({prototype:u.dataReaderResult.dataView,objectDescriptors:p.objects,dataViewMappings:p.dataViewMappings,dataRoles:p.dataRoles,drillCapabilities:p.drilldown,expandCollapseCapabilties:p.expandCollapse,transforms:r.transforms,colorAllocatorFactory:powerbi.visuals.createColorAllocatorFactory(),visualStyle:this.themeService.getVisualStyle(void 0),featureSwitches:this.featureSwitchService.featureSwitches});return h&&h.resolve(),{result:D.dataViews[0]}}catch(x){return h&&h.reject(),{error:x}}},v.\u0275fac=function(u){return new(u||v)(m.\u0275\u0275inject(i.i),m.\u0275\u0275inject(O.d),m.\u0275\u0275inject(I.D),m.\u0275\u0275inject(f.vZ),m.\u0275\u0275inject(M.f),m.\u0275\u0275inject(A.D),m.\u0275\u0275inject(T.S))},v.\u0275prov=m.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),V=function(){function v(){this.code="INVALID_DATA_REDUCTION"}return v.prototype.getDetails=function(){},v}()},41897:function(Le,oe,t){t.d(oe,{Z:function(){return q}});var e=t(7005),n=t(72249),m=t(31288),i=t(8703),O=t(98822),I=t(33827),T=t(37946),f=t(14545),M=t(2135),A=t(33193),b=t(59214),P=t(70886),y=t(87714),C=t(20019),d=t(13922),g=t(64857),S=t(78381),B=t(8576),w=t(26963),V=t(22994),v=t(89515),c=t(11719),u=t(44302),r=powerbi.visuals.ActionButtonType,h=powerbi.explore.contracts,p=powerbi.data.DataViewObjectDefinitions,D=powerbi.data.DataViewObjectDescriptors,x=powerbi.explore.services.events,z=powerbi.explore.util.VisualContainerUtils,Q=powerbi.explore.contracts.VisualLink,q=function(){function de(se,Ie,fe,re,pe,ge,be,ae,X,le,ee,N,F,E){var k=this;if(this.dialogService=se,this.eventBridge=Ie,this.explorationNavigationService=fe,this.featureSwitchService=re,this.formFactorProvider=pe,this.layoutAuthoringService=ge,this.visualPlugin=be,this.notificationBarService=ae,this.localizationService=X,this.viewModeStateService=le,this.runningVisualService=ee,this.telemetryService=N,this.reportViewSettingsService=F,this.standardizedEventsService=E,this.notificationShowing=!1,this.notificationDismissed=!1,this.canDisplayModal=!1,this.haveUnfilteredChanges=!1,this.applyAllSlicersEnabled$=new n.X(this.buttonExists()),this.applyAllSlicers$=new m.xQ,this.clearAllSlicers$=new m.xQ,this.destroy$=new i.t,this.standardizedTelemetryFeatureNames=["ApplyAllSlicersButton"],this.featureSwitchService.featureSwitches.applyAllSlicersButton){this.subscriptionManager=Ie.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(x.sectionChanged,function(){return(0,e.mG)(k,void 0,void 0,function(){return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return[4,this.update(!0)];case 1:return[2,Z.sent()]}})})}),this.subscriptionManager.subscribe(x.createActionButton,function(Z,me){return(0,e.mG)(k,void 0,void 0,function(){var _e,he;return(0,e.Jh)(this,function(G){switch(G.label){case 0:return me.iconType===r.applyAllSlicers&&(_e=this.telemetryService.logEvent(f.$s),this.standardizedEventsService&&this.standardizedEventsService.logEvent(_e,this.standardizedTelemetryFeatureNames,!0)),me.iconType===r.clearAllSlicers&&(he=this.telemetryService.logEvent(f.zc),this.standardizedEventsService&&this.standardizedEventsService.logEvent(he,this.standardizedTelemetryFeatureNames,!0)),[4,this.update()];case 1:return G.sent(),[2]}})})}),this.subscriptionManager.subscribe(x.applyAllSlicersClicked,function(){return k.apply()});var R=new m.xQ;if(R.pipe((0,I.D)(function(){return(0,O.F)(10)}),(0,T.R)(this.destroy$)).subscribe(function(){return(0,e.mG)(k,void 0,void 0,function(){return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return[4,this.update()];case 1:return[2,Z.sent()]}})})}),this.subscriptionManager.subscribe(x.visualContainerChanged,function(){return R.next()}),this.subscriptionManager.subscribe(x.deleteVisualContainer,function(){return R.next()}),this.subscriptionManager.subscribe(x.undoRedoStackUpdated,function(){return R.next()}),this.reportViewSettingsService){var W=this.reportViewSettingsService.getReportViewSettings({reportSettings:!1,userSettings:!1}).userSettings;this.canDisplayModal=!(null==W||!W.showModalApplyAllSlicers)}}}return de.prototype.ngOnDestroy=function(){var se;null===(se=this.subscriptionManager)||void 0===se||se.unsubscribeAll(),this.destroy$.next(),this.destroy$.complete()},de.prototype.apply=function(){if(this.enabled()){this.applyAllSlicers$.next(!0);var se=this.telemetryService.logEvent(f.o_);this.standardizedEventsService&&this.standardizedEventsService.logEvent(se,this.standardizedTelemetryFeatureNames,!0)}},de.prototype.apply$=function(){return this.applyAllSlicers$},de.prototype.clear=function(){this.clearAllSlicers$.next(!0);var se=this.telemetryService.logEvent(f.$);this.standardizedEventsService&&this.standardizedEventsService.logEvent(se,this.standardizedTelemetryFeatureNames,!0)},de.prototype.clear$=function(){return this.clearAllSlicers$},de.prototype.enabled=function(){return this.applyAllSlicersEnabled$.getValue()},de.prototype.enabled$=function(){return this.applyAllSlicersEnabled$},de.prototype.buttonExists=function(){var se=this.explorationNavigationService.getCurrentSection();if(_.isEmpty(se)||_.isEmpty(se.visualContainers))return!1;var Ie=this.layoutAuthoringService.visualsInLayout(se,this.formFactorProvider.getCurrentLayout());if(_.isEmpty(Ie))return!1;for(var fe=0,re=Ie;fe<re.length;fe++){var pe=re[fe];if(this.visualHasApplyAllSlicersVisualLink(pe)&&this.visualIsVisible(pe)&&this.visualIsInVisibleGroup(pe,se.visualContainerGroups))return!0}return!1},de.prototype.shouldButtonsBeEnabled=function(){var se,Ie=this.getVisualContainersInCurrentLayout();if(_.isEmpty(Ie))return!1;for(var fe=0,re=Ie;fe<re.length;fe++){var pe=re[fe];if(this.visualIsSlicer(pe)&&(null===(se=this.runningVisualService.getVisual(pe))||void 0===se?void 0:se.getHasUnappliedFilterChanges()))return!0}return!1},de.prototype.update=function(se){return(0,e.mG)(this,void 0,void 0,function(){var Ie,fe;return(0,e.Jh)(this,function(re){switch(re.label){case 0:return Ie=this.buttonExists(),fe=this.individualApplyButtonEnabled(),this.shouldShowNotificationBanner(Ie,fe)&&this.showNotificationBanner(),!this.enabled()||Ie||fe||!this.isEditMode()||se?[3,2]:[4,this.showSlicerBehaviorWarningDialog(se)];case 1:re.sent(),this.apply(),re.label=2;case 2:return this.enabled()&&!Ie&&fe&&this.clearNotificationBanner(),this.applyAllSlicersEnabled$.next(Ie),[2]}})})},de.prototype.individualApplyButtonEnabled=function(){var se,Ie=this.explorationNavigationService.getCurrentExploration();return null===(se=null==Ie?void 0:Ie.slowDataSourceSettings)||void 0===se?void 0:se.isSlicerSelectionsButtonEnabled},de.prototype.isEditMode=function(){return 1===this.viewModeStateService.getMode()},de.prototype.showNotificationBanner=function(){var se=this;this.notificationId=this.notificationBarService.notify({message:this.localizationService.get("ReportAppBar_ApplyAllSlicers_NotificationSuggestion"),notificationType:6,onDismiss:function(){return se.clearNotificationBanner()}}),this.notificationShowing=!0},de.prototype.clearNotificationBanner=function(){this.notificationBarService.hide(this.notificationId),this.notificationDismissed=!0,this.notificationShowing=!1},de.prototype.shouldShowNotificationBanner=function(se,Ie){return!this.notificationShowing&&!this.enabled()&&se&&Ie&&!this.notificationDismissed&&this.isEditMode()},de.prototype.showSlicerBehaviorWarningDialog=function(se){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(re){switch(re.label){case 0:return!this.canDisplayModal||se?[2]:[4,this.dialogService.showConfirmationDialog({title:this.localizationService.get("ApplyAllSlicers_WarningDialog_Title"),message:this.localizationService.get("ApplyAllSlicers_WarningDialog_Message"),okButtonText:this.localizationService.get("ModalDialogButtonText_Ok"),cancelButtonText:this.localizationService.get("Paused_Visual_Dont_Show_Again")},{autoFocus:!0}).afterClosed().toPromise()];case 1:return 2===re.sent()&&this.disableWarningDialog(),[2]}})})},de.prototype.disableWarningDialog=function(){this.reportViewSettingsService&&this.reportViewSettingsService.getUserSettingService().setShowModalApplyAllSlicers(!1),this.canDisplayModal=!1},de.prototype.visualIsSlicer=function(se){var Ie=z.getSingleVisualConfig(se),fe=this.visualPlugin.capabilities(null==Ie?void 0:Ie.visualType);return null!==D.findFilterOutput(null==fe?void 0:fe.objects)},de.prototype.visualHasApplyAllSlicersVisualLink=function(se){var Ie=z.getContainerObjectDefinitions(se),fe=p.getValue(Ie,{objectName:"visualLink",propertyName:"type"},void 0),re=p.getValue(Ie,{objectName:"visualLink",propertyName:"show"},void 0);return(null==fe?void 0:fe.value)===Q.ApplyAllSlicers&&(null==re?void 0:re.value)},de.prototype.visualIsVisible=function(se){var Ie,fe=z.getSingleVisualConfig(se);return"hidden"!==(null===(Ie=null==fe?void 0:fe.display)||void 0===Ie?void 0:Ie.mode)&&0!==(null==se?void 0:se.visibility)},de.prototype.visualIsInVisibleGroup=function(se,Ie){var fe=!0;return h.traverseVisualContainerGroups(Ie,function(re,pe){fe&&h.isVisualContainerGroup(re)&&pe&&re.children.find(function(ge){return ge.name===se.name})&&(fe=!1)}),fe},de.prototype.getVisualContainersInCurrentLayout=function(){var se=this.explorationNavigationService.getCurrentSection();if(_.isEmpty(se)||_.isEmpty(se.visualContainers))return[];var Ie=this.layoutAuthoringService.visualsInLayout(se,this.formFactorProvider.getCurrentLayout());return _.isEmpty(Ie)?[]:Ie},de.\u0275fac=function(Ie){return new(Ie||de)(b.\u0275\u0275inject(P.x),b.\u0275\u0275inject(y.J),b.\u0275\u0275inject(C.z),b.\u0275\u0275inject(g.vZ),b.\u0275\u0275inject(S.F),b.\u0275\u0275inject(B.U),b.\u0275\u0275inject(w.D),b.\u0275\u0275inject(V.S),b.\u0275\u0275inject(v.o),b.\u0275\u0275inject(c.kc),b.\u0275\u0275inject(d.s),b.\u0275\u0275inject(u.y0),b.\u0275\u0275inject(M.a,8),b.\u0275\u0275inject(A.S,8))},de.\u0275prov=b.\u0275\u0275defineInjectable({token:de,factory:de.\u0275fac}),de}()},5373:function(Le,oe,t){t.d(oe,{F:function(){return v}});var e=t(7005),n=t(72249),m=t(59214),i=t(78099),O=t(89718),I=t(87714),T=t(20019),f=t(43801),M=t(30496),A=t(44302),b=t(11719),P=powerbi.explore,y=P.services,C=P.contracts,d=powerbi.telemetry,g=C.BookmarkExtensions,S=C.BookmarkActions,B=powerbi.explore.services.events,w=powerbi.ItemGroupingManager,V=powerbi.PbiPromise,v=function(){function c(u,r,h,p,D,x,z,Q){var q=this;this.conceptualSchemaProxy=u,this.dataSources=r,this.eventBridge=h,this.explorationNavigation=p,this.explorationStateApplier=D,this.telemetryService=x,this.undoRedoService=z,this.viewModeState=Q,this.bookmarkActionValues=Object.values(S),this.undoRedoService.registerSideEffect({run:function(se){(_.isEmpty(se)||!q.isBookmarkAction(se))&&null!=q.getActiveBookmark()&&q.setActiveBookmark(null)}}),this.bookmarksSubject=new n.X([]),this.activeBookmarkSubject=new n.X(null),this.bookmarks$=this.bookmarksSubject.asObservable(),this.activeBookmark$=this.activeBookmarkSubject.asObservable(),this.eventBridge.createChannelSubscriptionManager().subscribe(B.explorationLoaded,function(){var de=q.explorationNavigation.getCurrentExploration();q.activeBookmarkSubject.next(de.activeBookmark?de.activeBookmark:null),q.emitUpdatedBookmarks()}),this.emitUpdatedBookmarks()}return c.prototype.isBookmarkAction=function(u){return this.bookmarkActionValues.includes(u)},c.prototype.getBookmarks=function(){var u=this.explorationNavigation.getCurrentExploration();return null==u?[]:(null==u.bookmarks&&(u.bookmarks=[]),u.bookmarks)},c.prototype.setBookmarks=function(u){this.explorationNavigation.getCurrentExploration().bookmarks=u,this.emitUpdatedBookmarks()},c.prototype.getActiveBookmark=function(){var u=this.explorationNavigation.getCurrentExploration();return u?u.activeBookmark:null},c.prototype.setActiveBookmark=function(u){var r=this.explorationNavigation.getCurrentExploration();r&&(r.activeBookmark=u),this.activeBookmarkSubject.next(u)},c.prototype.getAllBookmarks=function(){return w.flattenItems(this.getBookmarks(),g.isStateBookmark)},c.prototype.getBookmarkGroups=function(){return this.getBookmarks().filter(g.isBookmarkGroup)},c.prototype.apply=function(u){return(0,e.mG)(this,void 0,V,function(){var r,h,p,D=this;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return h=this.getBookmark(u),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return p=x.sent(),this.undoRedoService.register(S.Apply,function(){D.setActiveBookmark(h),r=D.applyBookmarkState(h,p)}),[2,r]}})})},c.prototype.applyBookmark=function(u,r){return(0,e.mG)(this,void 0,V,function(){var h,p,D=this;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return p=x.sent(),this.undoRedoService.register(S.Apply,function(){h=D.applyBookmarkState(u,p,r)}),[2,h]}})})},c.prototype.applyByName=function(u){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var r;return(0,e.Jh)(this,function(h){switch(h.label){case 0:return(r=w.find(u,this.getBookmarks()))&&g.isStateBookmark(r)?[4,this.apply(r)]:[3,2];case 1:return[2,h.sent()];case 2:return[2,null]}})})},c.prototype.setPlayMode=function(u){var h=this.viewModeState.getViewState();u&&0===h.bookmarkView||!u&&null==h.bookmarkView||(u?(h.bookmarkView=0,this.telemetryService.logEvent(d.EXBookmarkPlay)):h.bookmarkView=void 0,this.eventBridge.publishToChannel(y.events.bookmarkViewStateChanged))},c.prototype.getBookmarkListToPlay=function(u){var r=this.getParentBookmarkList(u);return w.flattenItems(r,g.isStateBookmark)},c.prototype.emitUpdatedBookmarks=function(){this.bookmarksSubject.next(this.getAllBookmarks())},c.prototype.getBookmark=function(u){return"number"==typeof u?this.getBookmarks()[u]:u},c.prototype.applyBookmarkState=function(u,r,h){var p={clearUnmatchedData:!0,suppressDataSourceVariables:!0};if(_.assign(p,h),!g.isBookmarkGroup(u)){u.options&&(p.suppressData=u.options.suppressData,p.suppressActiveSection=u.options.suppressActiveSection,p.suppressDisplay=u.options.suppressDisplay,u.options.applyOnlyToTargetVisuals&&(p.targetVisualNames=u.options.targetVisualNames));var D=this.applyState(u.explorationState,r,p);return this.eventBridge.publishToChannel(y.events.bookmarkApplied,{bookmarkName:u.name}),this.telemetryService.logEvent(d.EXBookmarkApply,{bookmarkName:u.name}),D}},c.prototype.applyState=function(u,r,h){return this.explorationStateApplier.applyDirty(u,r,h)},c.prototype.getParentBookmarkList=function(u){var r=this.getBookmarks();if(u){var h=w.getSiblingList(u,this.getBookmarks());h&&(r=h)}return r},c.\u0275fac=function(r){return new(r||c)(m.\u0275\u0275inject(i.i),m.\u0275\u0275inject(O.D),m.\u0275\u0275inject(I.J),m.\u0275\u0275inject(T.z),m.\u0275\u0275inject(M.j),m.\u0275\u0275inject(A.y0),m.\u0275\u0275inject(f.z),m.\u0275\u0275inject(b.kc))},c.\u0275prov=m.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}()},5553:function(Le,oe,t){t.d(oe,{Z:function(){return S}});var e=t(31288),n=t(59214),m=t(99944),i=t(87714),O=t(86718),I=t(43801),T=t(537),f=t(64857),M=t(78381),A=t(8576),b=t(44302),P=t(11719),y=t(41844),C=t(74569),d=jsCommon.BrowserUtils,g=powerbi.explore.util.CanvasDisplayUtility,S=function(){function B(w,V,v,c,u,r,h,p,D,x,z,Q){this.canvasZoomService=Q,this.fullScreenShortcutPressed$=new e.xQ,this.service=powerbi.explore.services.createCanvasKeyHandlerService(w,r,v,D,p,x,V,z,c,u,h)}return B.prototype.getVisualInteractivityDisabled=function(){return this.service.getVisualInteractivityDisabled()},B.prototype.setVisualInteractivityDisabled=function(w){this.service.setVisualInteractivityDisabled(!!w)},B.prototype.getFullScreenShortcutPressed$=function(){return this.fullScreenShortcutPressed$.asObservable()},B.prototype.onKeyDown=function(w,V){if(this.isOnlyCtrlOrMeta(w)&&this.isTargetDisplayAreaContainer(w))switch(w.which){case 187:return this.canvasZoomService.zoomIn(),this.preventStopAndReturnFalse(w);case 189:return this.canvasZoomService.zoomOut(),this.preventStopAndReturnFalse(w)}if(this.isCtrlOrMetaShift(w))switch(w.which){case 49:return this.canvasZoomService.fitToPage(),this.preventStopAndReturnFalse(w);case 50:return this.canvasZoomService.actualSize(),this.preventStopAndReturnFalse(w);case 51:return this.canvasZoomService.fitToWidth(),this.preventStopAndReturnFalse(w);case 70:return this.fullScreenShortcutPressed$.next(),this.preventStopAndReturnFalse(w)}return this.service.onKeyDown(w,V)},B.prototype.preventStopAndReturnFalse=function(w){return w&&(w.preventDefault(),w.stopPropagation()),!1},B.prototype.isOnlyCtrlOrMeta=function(w){return d.isCtrlOrMeta(w)&&!w.altKey&&!w.shiftKey},B.prototype.isCtrlOrMetaShift=function(w){return d.isCtrlOrMeta(w)&&!w.altKey&&w.shiftKey},B.prototype.isTargetDisplayAreaContainer=function(w){var V=w.target;return V&&$(V).closest(g.DisplayAreaContainerNameSelector.selector).length>0},B.\u0275fac=function(V){return new(V||B)(n.\u0275\u0275inject(m.Yv),n.\u0275\u0275inject(i.J),n.\u0275\u0275inject(f.vZ),n.\u0275\u0275inject(M.F),n.\u0275\u0275inject(A.U),n.\u0275\u0275inject(O.z),n.\u0275\u0275inject(b.y0),n.\u0275\u0275inject(I.z),n.\u0275\u0275inject(P.kc),n.\u0275\u0275inject(y.$),n.\u0275\u0275inject(T.w),n.\u0275\u0275inject(C.w))},B.\u0275prov=n.\u0275\u0275defineInjectable({token:B,factory:B.\u0275fac}),B}()},89010:function(Le,oe,t){t.d(oe,{Z:function(){return M}});var e=t(59214),n=t(87714),m=t(20019),i=t(537),O=t(64857),I=t(78381),T=t(81092),f=t(11719),M=function(){function A(b,P,y,C,d,g,S){this.legacyService=powerbi.explore.services.createCanvasScaleService(b,P,y,C,S,g,d)}return A.prototype.setDisplayAreaScaleFactor=function(b){return this.legacyService.setDisplayAreaScaleFactor(b)},A.prototype.setWallpaperScaleFactor=function(b){return this.legacyService.setWallpaperScaleFactor(b)},A.prototype.getDisplayAreaScaleFactor=function(){return this.legacyService.getDisplayAreaScaleFactor()},A.prototype.getWallpaperScaleFactor=function(){return this.legacyService.getWallpaperScaleFactor()},A.prototype.getDisplayOption=function(){return this.legacyService.getDisplayOption()},A.prototype.setDisplayOption=function(b){return this.legacyService.setDisplayOption(b)},A.prototype.setCanvasZoom=function(b){return this.legacyService.setCanvasZoom(b)},A.prototype.getCanvasZoom=function(){return this.legacyService.getCanvasZoom()},Object.defineProperty(A.prototype,"overrideDisplayOption",{get:function(){return this.legacyService.overrideDisplayOption},set:function(P){this.legacyService.overrideDisplayOption=P},enumerable:!1,configurable:!0}),A.\u0275fac=function(P){return new(P||A)(e.\u0275\u0275inject(n.J),e.\u0275\u0275inject(m.z),e.\u0275\u0275inject(O.vZ),e.\u0275\u0275inject(I.F),e.\u0275\u0275inject(T.F),e.\u0275\u0275inject(f.kc),e.\u0275\u0275inject(i.w))},A.\u0275prov=e.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac}),A}()},47258:function(Le,oe,t){t.d(oe,{H:function(){return O}});var e=t(59214),n=t(74569),m=jsCommon.BrowserUtils,i=powerbi.explore.util.CanvasDisplayUtility,O=function(){function I(T){this.canvasZoomService=T}return I.prototype.onMouseWheel=function(T){this.isTargetDisplayAreaContainer(T)&&(this.isZoomInWheelEvent(T)&&(this.preventStop(T),this.canvasZoomService.zoomIn()),this.isZoomOutWheelEvent(T)&&(this.preventStop(T),this.canvasZoomService.zoomOut()))},I.prototype.preventStop=function(T){T.preventDefault(),T.stopPropagation()},I.prototype.isZoomInWheelEvent=function(T){return this.isOnlyCtrlOrMeta(T)&&T.deltaY<0},I.prototype.isZoomOutWheelEvent=function(T){return this.isOnlyCtrlOrMeta(T)&&T.deltaY>0},I.prototype.isOnlyCtrlOrMeta=function(T){return m.isCtrlOrMeta(T)&&!T.altKey&&!T.shiftKey},I.prototype.isTargetDisplayAreaContainer=function(T){var f=T.target;return f&&$(f).closest(i.DisplayAreaContainerNameSelector.selector).length>0},I.\u0275fac=function(f){return new(f||I)(e.\u0275\u0275inject(n.w))},I.\u0275prov=e.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac}),I}()},74569:function(Le,oe,t){t.d(oe,{Z:function(){return T},w:function(){return f}});var e=t(59214),n=t(72249),m=t(87714),i=t(64857),O=t(78381),I=powerbi.explore.services.events,T=new e.InjectionToken("canvasZoomServiceInjectionToken"),f=function(){function M(A,b,P,y){this.eventBridge=A,this.featureSwitchService=b,this.formFactorProvider=P,this.canvasZoomConfig=y,this.zoomScale$=new n.X(this.canvasZoomConfig.midZoomScale)}return M.prototype.getZoomScale=function(){return this.zoomScale$.asObservable()},M.prototype.getCurrentZoomLevel=function(){return this.zoomScale$.value},M.prototype.zoomIn=function(){var A=this.canvasZoomConfig.zoomScaleStepAmount,b=this.zoomScale$.getValue(),P=Math.floor(10*b)/10+A;this.setZoomScale(P)},M.prototype.zoomOut=function(){var A=this.canvasZoomConfig.zoomScaleStepAmount,b=this.zoomScale$.getValue(),P=Math.ceil(10*b)/10-A;this.setZoomScale(P)},M.prototype.fitToPage=function(){this.eventBridge.publishToChannel(I.canvasDisplayChanged,1)},M.prototype.fitToWidth=function(){this.eventBridge.publishToChannel(I.canvasDisplayChanged,2)},M.prototype.actualSize=function(){this.eventBridge.publishToChannel(I.canvasDisplayChanged,3)},M.prototype.resetZoomScale=function(){this.setZoomScale(this.canvasZoomConfig.midZoomScale)},M.prototype.setZoomScale=function(A,b){if(void 0===b&&(b=!0),this.featureSwitchService.featureSwitches.newZoomControl&&0===this.formFactorProvider.getCurrentLayout()){var y=this.canvasZoomConfig,C=y.minZoomScale,d=y.maxZoomScale,g=Math.round(100*A)/100;g>=C&&g<=d&&(this.zoomScale$.next(g),b&&this.eventBridge.publishToChannel(I.canvasZoomChanged,g))}},M.\u0275fac=function(b){return new(b||M)(e.\u0275\u0275inject(m.J),e.\u0275\u0275inject(i.vZ),e.\u0275\u0275inject(O.F),e.\u0275\u0275inject(T))},M.\u0275prov=e.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},50884:function(Le,oe,t){t.d(oe,{C:function(){return y}});var e=t(7005),n=t(68785),m=t(31970),i=t(59214),O=t(78099),I=t(89718),T=t(49470),f=t(14178),M=t(70886),A=t(89515),b=t(49909),P=powerbi.data.SQExpr,y=function(){function C(d,g,S,B,w,V,v,c){this.conceptualSchemaProxy=d,this.dataSources=g,this.dialogService=S,this.localizationService=B,this.screenReaderService=w,this.displayNameService=V,this.dataSourcesSerializer=v,this.modelAuthoring=c}return C.prototype.showDialog=function(d){return(0,e.mG)(this,void 0,void 0,function(){var g,S,B;return(0,e.Jh)(this,function(v){switch(v.label){case 0:return[4,this.getFirstEditableSchema()];case 1:if(g=v.sent(),!this.modelAuthoring||!g)return[2];S=g?g.name:"",v.label=2;case 2:return v.trys.push([2,5,,6]),[4,this.dialogService.openHostDialog({bindings:{selectedMeasure:d&&P.isMeasure(d)?d:void 0,dataSources:this.dataSourcesSerializer.serializeDataSources(this.getDsrDataSource())},componentName:m.HY,config:{minWidth:"720px",panelClass:["no-padding"]},dialogName:"ChangeDetectionMeasureDialog"})];case 3:return[4,v.sent().afterClosed().toPromise()];case 4:return B=v.sent(),[3,6];case 5:return v.sent(),[3,6];case 6:return B?(B.schemaName=S,[4,this.applyChangeDetectionMeasure(B)]):[3,8];case 7:v.sent(),v.label=8;case 8:return[2]}})})},C.prototype.hasExistingChangeDetectionMeasure=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(d){switch(d.label){case 0:return[4,this.getChangeDetectionEntity()];case 1:return[2,!!d.sent()]}})})},C.prototype.supportsChangeDetectionMeasure=function(){return(0,e.mG)(this,void 0,void 0,function(){var d;return(0,e.Jh)(this,function(g){switch(g.label){case 0:return[4,this.getFirstEditableSchema()];case 1:return[2,(d=g.sent())&&d.capabilities.supportsFastRefresh]}})})},C.prototype.getChangeDetectionEntity=function(){return this.getFirstEditableSchema().then(function(d){return d?d.entities.find(function(g){return g.properties&&g.properties.find(function(S){return S.measure&&S.measure.changeDetectionMetadata})}):void 0})},C.prototype.getFirstEditableSchema=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(S){switch(S.label){case 0:if(!this.dataSources||!this.dataSources.get())return[2,void 0];S.label=1;case 1:return S.trys.push([1,3,,4]),[4,this.conceptualSchemaProxy.get(this.getDsrDataSource())];case 2:return[2,S.sent().schemas.find(function(B){return B.capabilities.canEditChangeDetectionMeasure})];case 3:return S.sent(),[2,void 0];case 4:return[2]}})})},C.prototype.getDsrDataSource=function(){if(this.dataSources&&this.dataSources.get())return this.dataSources.get().filter(function(d){return d.type===powerbi.common.constants.dsrDataReaderType})},C.prototype.applyChangeDetectionMeasure=function(d){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(g){switch(g.label){case 0:return d.isNew?[4,this.createNewChangeDetectionMeasure(d.schemaName,d.entityName,d.measureName,d.expression,d.duration)]:[3,2];case 1:return g.sent(),[3,4];case 2:return[4,this.updateExistingChangeDetectionMetadata(d.schemaName,d.entityName,d.measureName,d.duration)];case 3:g.sent(),g.label=4;case 4:return[2]}})})},C.prototype.createNewChangeDetectionMeasure=function(d,g,S,B,w){return(0,e.mG)(this,void 0,void 0,function(){var u,r;return(0,e.Jh)(this,function(h){switch(h.label){case 0:return[4,this.applyModelAuthoringChanges({changes:[{newMeasureCreated:{schema:d,entity:g,name:S,expression:B}},{setChangeDetectionMetadata:{schema:d,entity:g,measureName:S,refreshInterval:w}}]},!0)];case 1:return h.sent(),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 2:return u=h.sent(),r=powerbi.data.SQExprBuilder.fieldExpr({measure:{schema:d,entity:g,name:S}}),this.screenReaderService.alert(this.localizationService.format("CreatedItem",this.displayNameService.getDisplayName(r,u,void 0))),[2]}})})},C.prototype.updateExistingChangeDetectionMetadata=function(d,g,S,B){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(v){switch(v.label){case 0:return[4,this.applyModelAuthoringChanges({changes:[{setChangeDetectionMetadata:{schema:d,entity:g,measureName:S,refreshInterval:B}}]},!0)];case 1:return v.sent(),[2]}})})},C.prototype.applyModelAuthoringChanges=function(d,g){return void 0===g&&(g=!1),(0,e.mG)(this,void 0,void 0,function(){var S;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return B.trys.push([0,2,,6]),[4,this.modelAuthoring.apply(d)];case 1:return B.sent(),[3,6];case 2:return S=B.sent(),g?[4,this.applyModelAuthoringChanges(d)]:[3,4];case 3:return B.sent(),[3,5];case 4:throw S;case 5:return[3,6];case 6:return[2]}})})},C.\u0275fac=function(g){return new(g||C)(i.\u0275\u0275inject(O.i),i.\u0275\u0275inject(I.D),i.\u0275\u0275inject(M.x),i.\u0275\u0275inject(A.o),i.\u0275\u0275inject(b.g),i.\u0275\u0275inject(T.O),i.\u0275\u0275inject(f._),i.\u0275\u0275inject(n.S,8))},C.\u0275prov=i.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac}),C}()},75011:function(Le,oe,t){t.d(oe,{$O:function(){return i},GO:function(){return n},Sn:function(){return I},c9:function(){return m}});var e=t(59214),n=new e.InjectionToken("ScopedChangeDetectionRefreshServiceOverrideToken"),m=function(){function T(){}return T.\u0275prov=e.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac=function(M){return new(M||T)}}),T}(),i=function(){function T(){}return T.prototype.resumeAsync=function(){return Promise.resolve()},T.prototype.stop=function(){},Object.defineProperty(T.prototype,"autoRefreshKind",{get:function(){return 0},enumerable:!1,configurable:!0}),T.prototype.getRefreshStats=function(){return{adminConfig:void 0,effectiveRefreshInterval:0,lastRefreshTimestamp:void 0}},T}(),I={provide:m,useFactory:function(T){var f=T.get(n,null);return f?e.Injector.create([f],T).get(m):new i},deps:[e.Injector]}},45384:function(Le,oe,t){t.d(oe,{L:function(){return d},W:function(){return y}});var e=t(7005),n=t(59214),m=t(78099),i=t(89718),O=t(67281),I=t(43801),T=t(22422),f=t(41844),M=powerbi.visuals.decompositionTreeRoles,A=powerbi.Promise,b=powerbi.data.SQExpr,P=powerbi.explore.util.VisualContainerUtils;function y(g,S,B){return function(g,S){if(!g||!b.isMeasure(g)&&!b.isAggregation(g))return!1;var B=g.getTargetSchemaName();if(S.schema(B).isExtensionSchema)return!1;var V=g.getMetadata(S);return!(!V||!V.type||!V.type.numeric&&!V.type.integer)}(g,B)&&(!!S.insights||!!S.analysisVisuals)&&_.every(B.schemas,function(w){var V;return(null===(V=w.capabilities.insights)||void 0===V?void 0:V.supportsDecomposition)&&!w.capabilities.supportsDataSourceVariables})}var d=function(){function g(S,B,w,V,v,c){this.conceptualSchemaProxy=S,this.dataSources=B,this.decompositionAuthoringCore=w,this.explorationCapabilities=V,this.undoRedoService=v,this.visualAuthoringService=c}return g.prototype.isSupported=function(){return(0,e.mG)(this,void 0,A,function(){var S;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return S=B.sent(),_.some(S.schemas,function(w){return!w.capabilities.supportsInstanceFilters||w.isMultiDimensionalModel})?[2,!1]:[2,!0]}})})},g.prototype.isDecompositionAnalysisSupported=function(S){return(0,e.mG)(this,void 0,A,function(){var B,w,V,v;return(0,e.Jh)(this,function(c){switch(c.label){case 0:return(B=P.getVisualQuery(S))?(w=B.tryGetExpr(M.analyze,0),V=this.explorationCapabilities.getCapabilities(),[4,this.conceptualSchemaProxy.get(this.dataSources.get())]):[2,!1];case 1:return v=c.sent(),[2,y(w,V,v)]}})})},g.prototype.isTopNPerLevelSupported=function(){return(0,e.mG)(this,void 0,A,function(){var S;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return S=B.sent(),[2,_.every(S.schemas,function(w){return w.capabilities&&w.capabilities.supportsTopNPerLevel})]}})})},g.prototype.addLevelAndExpandNode=function(S,B,w){var V=this;this.updateVisualContainer(S,function(){var v=V.decompositionAuthoringCore.getDecompositionRole(S);V.decompositionAuthoringCore.clearAILevelsInformation(S,v),V.decompositionAuthoringCore.appendLevelAndExpandNode(S,v,w,B),"Could not expand to ".concat(w)},"ExpandToNewLevel")},g.prototype.addAILevelAndExpandNode=function(S,B,w,V){var v=this;this.updateVisualContainer(S,function(){var c=v.decompositionAuthoringCore.getDecompositionRole(S),u=v.decompositionAuthoringCore.getPinnedLevelsCount(S,c),r=_.first(B.metadata),h=-1;r&&-1===(h=v.decompositionAuthoringCore.findProjectionIndex(S,c,r))||h<u-1||v.decompositionAuthoringCore.expandNode(S,c,B)&&(V&&v.decompositionAuthoringCore.setFirstActiveAILevel(S,c,h+1),v.decompositionAuthoringCore.setAILevelInformation(S,c,h+1,w))},"ExpandToAILevel")},g.prototype.updateLevel=function(S,B,w){var V=this,v=this.decompositionAuthoringCore.getDecompositionRole(S);this.updateVisualContainer(S,function(){return V.decompositionAuthoringCore.replaceLevel(S,v,B,w)},"UpdateLevel")},g.prototype.updateAILevel=function(S,B,w){var V=this,v=this.decompositionAuthoringCore.getDecompositionRole(S),c=this.decompositionAuthoringCore.findProjectionIndex(S,v,B),u=this.decompositionAuthoringCore.getExpansionStateLevel(S,v,c);u&&(u.isLocked||u.AIInformation&&this.updateVisualContainer(S,function(){var r=V.decompositionAuthoringCore.getFirstActiveAILevel(S,v);V.decompositionAuthoringCore.setAILevelInformation(S,v,c,w),V.decompositionAuthoringCore.setFirstActiveAILevel(S,v,Math.max(Math.min(c,r),0))},"UpdateAIMethod"))},g.prototype.removeLevel=function(S,B){var w=this,V=this.decompositionAuthoringCore.getDecompositionRole(S),v=this.decompositionAuthoringCore.findProjectionIndex(S,V,B),c=this.decompositionAuthoringCore.getExpansionStateLevel(S,V,v);c&&(c.isLocked||this.updateVisualContainer(S,function(){w.decompositionAuthoringCore.removeLevel(S,V,B),"Cannot remove level ".concat(B)},"RemoveLevel"))},g.prototype.toggleLockedLevels=function(S,B){var w=this,V=this.decompositionAuthoringCore.getDecompositionRole(S),v=this.decompositionAuthoringCore.findProjectionIndex(S,V,B),c=this.decompositionAuthoringCore.getExpansionStateLevel(S,V,v);c&&this.updateVisualContainer(S,function(){c.isLocked?w.decompositionAuthoringCore.unlockLevels(S,V,v):w.decompositionAuthoringCore.lockLevels(S,V,v+1)},"LockLevels")},g.prototype.toggleNode=function(S,B){var w=this,V=this.decompositionAuthoringCore.getDecompositionRole(S);this.updateVisualContainer(S,function(){return w.decompositionAuthoringCore.toggleNode(S,V,B)},"ToggleNode")},g.prototype.clearAILevels=function(S,B){var w=this,V=this.decompositionAuthoringCore.getDecompositionRole(S),v=this.decompositionAuthoringCore.findProjectionIndex(S,V,B);-1!==v&&this.updateVisualContainer(S,function(){return w.decompositionAuthoringCore.clearAILevelsInformation(S,V,v)},"ClearAILevels")},g.prototype.updateVisualContainer=function(S,B,w){w?this.undoRedoService.register(w,B):B(),this.visualAuthoringService.raiseVisualContainerChanged(S)},g.\u0275fac=function(B){return new(B||g)(n.\u0275\u0275inject(m.i),n.\u0275\u0275inject(i.D),n.\u0275\u0275inject(O.e),n.\u0275\u0275inject(T.U),n.\u0275\u0275inject(I.z),n.\u0275\u0275inject(f.$))},g.\u0275prov=n.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g}()},78652:function(Le,oe,t){t.d(oe,{K:function(){return b}});var e=t(7005),n=t(59214),m=t(70886),i=t(87714),O=t(43801),I=t(44302),T=t(95679),f=t(26963),M=powerbi.explore.services.events,A=powerbi.explore.viewModels.ViewModelFactory,b=function(){function P(y,C,d,g,S,B){this.dialogService=y,this.eventBridge=C,this.telemetryService=d,this.trustedVisualService=g,this.visualPluginService=S,this.undoRedoService=B}return P.prototype.deleteCustomVisuals=function(y){return(0,e.mG)(this,void 0,void 0,function(){var C,d,S=this;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return C=_.filter(A.getCustomVisualTypes(this.visualPluginService.getConvertibleVisuals()),function(w){var V=w.plugin;return!S.trustedVisualService.isAutomaticallyImportedVisual(V.name)&&void 0===V.favoriteId}),this.getCustomVisualsTileCounts(y,C),[4,this.selectVisualsToDelete(C)];case 1:return(d=B.sent())&&d.length>0?[4,this.confirm(d)]:[3,3];case 2:B.sent()&&this.deleteVisuals(y,d),B.label=3;case 3:return[2]}})})},P.prototype.selectVisualsToDelete=function(y){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(g){switch(g.label){case 0:return[4,this.dialogService.openHostDialog({dialogName:"DeleteCustomVisualsDialog",componentName:"DeleteCustomVisualsDialog",bindings:y,config:{panelClass:["delete-custom-visuals"],width:"750px",minWidth:500}})];case 1:return[4,g.sent().afterClosed().toPromise()];case 2:return[2,g.sent()]}})})},P.prototype.confirm=function(y){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(g){switch(g.label){case 0:return[4,this.dialogService.openHostDialog({dialogName:"DeleteVisualWarningDialog",componentName:"DeleteVisualWarningDialog",bindings:y,config:{panelClass:["delete-visual-warning-dialog"],width:"650px",minWidth:500}})];case 1:return[4,g.sent().afterClosed().toPromise()];case 2:return[2,g.sent()]}})})},P.prototype.deleteVisuals=function(y,C){var d=this;this.undoRedoService.register("DeleteCustomVisual",function(){C.forEach(function(g){var S=g.plugin.name;d.telemetryService.logEvent(powerbi.telemetry.EXDeleteCustomViz,{customVisualName:S}),d.visualPluginService.removePlugin(S),_.remove(y.resourcePackages,function(B){return B.name===S}),_.remove(y.publicCustomVisuals,function(B){return B===S}),d.eventBridge.publishToChannel(M.deleteCustomVisual,{visual:g.plugin})}),d.eventBridge.publishToChannel(M.visualPluginsChanged)})},P.prototype.getCustomVisualsTileCounts=function(y,C){C.forEach(function(d){d.tileCount=0,y.sections.forEach(function(g){for(var S=0,B=g.visualContainers;S<B.length;S++)B[S].config.singleVisual.visualType===d.plugin.name&&(d.tileCount+=1)}),d.selected=!1})},P.\u0275fac=function(C){return new(C||P)(n.\u0275\u0275inject(m.x),n.\u0275\u0275inject(i.J),n.\u0275\u0275inject(I.y0),n.\u0275\u0275inject(T.t),n.\u0275\u0275inject(f.D),n.\u0275\u0275inject(O.z))},P.\u0275prov=n.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},12242:function(Le,oe,t){t.d(oe,{M:function(){return P}});var e=t(59214),n=t(78099),m=t(45927),i=t(87714),O=t(20019),I=t(42645),T=t(537),f=t(86718),M=t(43801),A=t(26963),b=t(57644),P=function(){function y(C,d,g,S,B,w,V,v,c,u){this.legacyService=powerbi.drillDetailsModuleFactory().create(C,d,c,v,V,S,w,g,B,u)}return y.prototype.drillToDetails=function(C,d,g){this.legacyService.drillToDetails(C,d,g)},y.prototype.generateDetailsTable=function(C,d,g,S){return this.legacyService.generateDetailsTable(C,d,g,S)},y.prototype.getDetailsTableTargetMeasures=function(C){return this.legacyService.getDetailsTableTargetMeasures(C)},y.prototype.clear=function(){this.legacyService.clear()},y.prototype.getContext=function(){return this.legacyService.getContext()},y.prototype.setContext=function(C){this.legacyService.setContext(C)},y.prototype.hasContext=function(){return this.legacyService.hasContext()},y.prototype.clearContext=function(){this.legacyService.clearContext()},y.\u0275fac=function(d){return new(d||y)(e.\u0275\u0275inject(n.i),e.\u0275\u0275inject(m.L),e.\u0275\u0275inject(i.J),e.\u0275\u0275inject(O.z),e.\u0275\u0275inject(I.r),e.\u0275\u0275inject(T.w),e.\u0275\u0275inject(f.z),e.\u0275\u0275inject(M.z),e.\u0275\u0275inject(A.D),e.\u0275\u0275inject(b.Q))},y.\u0275prov=e.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}()},75216:function(Le,oe,t){t.d(oe,{V:function(){return i}});var e=t(7005),n=t(59214),m=t(36886),i=function(){function O(I){this.dropdown=new jsCommon.Lazy(function(){return I.getService("dropdown")})}return O.prototype.showContextMenu=function(I,T,f,M,A,b,P,y){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(C){switch(C.label){case 0:return[4,this.dropdown.getValue()];case 1:return C.sent().showContextMenu(I,T,f,M,A,b,P,y),[2]}})})},O.prototype.hide=function(I){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(T){switch(T.label){case 0:return[4,this.dropdown.getValue()];case 1:return T.sent().hide(I),[2]}})})},O.prototype.showMenu=function(I,T,f,M,A,b,P){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(y){switch(y.label){case 0:return[4,this.dropdown.getValue()];case 1:return[2,y.sent().showMenu(I,T,f,M,A,b,P)]}})})},O.prototype.hideAll=function(I){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(T){switch(T.label){case 0:return[4,this.dropdown.getValue()];case 1:return T.sent().hideAll(I),[2]}})})},O.prototype.isDropdownRegistered=function(I){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(T){switch(T.label){case 0:return[4,this.dropdown.getValue()];case 1:return[2,T.sent().isDropdownRegistered(I)]}})})},O.\u0275fac=function(T){return new(T||O)(n.\u0275\u0275inject(m.H))},O.\u0275prov=n.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac,providedIn:"root"}),O}()},22422:function(Le,oe,t){t.d(oe,{U:function(){return I}});var e=t(89153),n=t(8703),m=t(59214),i=t(88578),O=t(64857),I=function(){function T(f,M,A){this.capabilitiesSubject=new n.t(1),this.capabilities$=this.capabilitiesSubject.asObservable(),this.service=powerbi.explore.services.createExplorationCapabilitiesService(f,M),A&&this.setCapabilities(A)}return T.prototype.setCapabilities=function(f){this.service.setCapabilities(f),this.capabilitiesSubject.next(this.getCapabilities())},T.prototype.getCapabilities=function(){return this.service.getCapabilities()},T.\u0275fac=function(M){return new(M||T)(m.\u0275\u0275inject(i.a),m.\u0275\u0275inject(O.vZ),m.\u0275\u0275inject(e.m,8))},T.\u0275prov=m.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T}()},15841:function(Le,oe,t){t.d(oe,{W:function(){return n}});var e=t(59214),n=function(){function m(){this.commandsDisplayOverride={}}return m.prototype.setExtensions=function(i){this.extensions=i},m.prototype.getExtensions=function(){return this.extensions},m.prototype.getGroups=function(){var i;return(null===(i=this.extensions)||void 0===i?void 0:i.groups)||[]},m.prototype.getCommandExtensions=function(){var i;return(null===(i=this.extensions)||void 0===i?void 0:i.commands)||[]},m.prototype.executeCustomCommand=function(i,O,I,T){i.publishToChannel(powerbi.explore.services.events.visualCustomCommand,{visualContainer:O,command:I,dataPointsDescriptions:T})},m.prototype.getCommandsDisplayOptions=function(i){return this.commandsDisplayOverride[i]||{}},m.prototype.setCommandDisplayOption=function(i,O,I){this.commandsDisplayOverride[i]=this.commandsDisplayOverride[i]||{},this.commandsDisplayOverride[i][O]=I},m.\u0275prov=e.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac=function(O){return new(O||m)},providedIn:"root"}),m}()},67613:function(Le,oe,t){t.d(oe,{I:function(){return b}});var e=t(7005),n=t(72249),m=t(20019),i=t(59214),O=t(7772),I=t(87714),T=t(86718),f=t(91845),M=t(78381),A=t(44302),b=function(P){function y(C,d,g,S,B,w){var V=P.call(this)||this;return V.legacyService=powerbi.explore.services.createExplorationNavigationService(C,d,g,S,B,w,new n.X([]),new n.X(null)),V}return(0,e.ZT)(y,P),y.prototype.registerExplorationViewModel=function(C){this.legacyService.registerExplorationViewModel(C)},y.prototype.updateActiveSection=function(C){return this.legacyService.updateActiveSection(C)},y.prototype.updateExplorationActiveSectionIndex=function(C){this.legacyService.updateExplorationActiveSectionIndex(C)},y.prototype.goto=function(C,d){this.legacyService.goto(C,d)},y.prototype.getCurrentSection=function(){return this.legacyService.getCurrentSection()},y.prototype.getAllSections=function(){return this.legacyService.getAllSections()},y.prototype.getAllVisualContainers=function(C){return this.legacyService.getAllVisualContainers(C)},y.prototype.getCurrentExploration=function(){return this.legacyService.getCurrentExploration()},y.prototype.getCurrentExploreCanvas=function(){return this.legacyService.getCurrentExploreCanvas()},y.prototype.getSectionByName=function(C){return this.legacyService.getSectionByName(C)},y.prototype.loadExploration=function(C,d,g){this.legacyService.loadExploration(C,d,g)},y.prototype.startExplorationSession=function(C){this.legacyService.startExplorationSession(C)},y.prototype.updateExplorationTelemetryData=function(C){this.legacyService.updateExplorationTelemetryData(C)},y.prototype.getExplorationTelemetryData=function(){return this.legacyService.getExplorationTelemetryData()},y.prototype.showExplorationMask=function(){this.legacyService.showExplorationMask()},y.prototype.hideExplorationMask=function(){this.legacyService.hideExplorationMask()},y.prototype.back=function(){this.legacyService.back()},y.prototype.getCurrentZone=function(){return this.legacyService.getCurrentZone()},Object.defineProperty(y.prototype,"sections$",{get:function(){return this.legacyService.sections$},enumerable:!1,configurable:!0}),y.prototype.emitUpdatedSections=function(){this.legacyService.emitUpdatedSections()},Object.defineProperty(y.prototype,"currentSection$",{get:function(){return this.legacyService.currentSection$},enumerable:!1,configurable:!0}),y.\u0275fac=function(d){return new(d||y)(i.\u0275\u0275inject(O.r),i.\u0275\u0275inject(I.J),i.\u0275\u0275inject(T.z),i.\u0275\u0275inject(M.F),i.\u0275\u0275inject(A.y0),i.\u0275\u0275inject(f.Z))},y.\u0275prov=i.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}(m.z)},30496:function(Le,oe,t){t.d(oe,{j:function(){return f}});var e=t(59214),n=t(39907),m=t(99593),i=t(20019),O=t(56577),I=powerbi.common.constants.dsrDataReaderType,T=powerbi.explore.util.VisualContainerUtils,f=function(){function M(A,b,P,y){this.dataProxy=A,this.explorationStateManager=b,this.explorationNavigation=P,this.visualSyncService=y}return M.prototype.applyDirty=function(A,b,P){if(A){P.stopDataQueries&&this.dataProxy.stopCommunication(I);try{var y=this.explorationStateManager.apply(A,b,P);if(this.syncFilterState(y),P.clearQueryCaches){var C=this.explorationNavigation.getCurrentExploration();T.clearExplorationQueryCaches(C)}return y}finally{P.stopDataQueries&&this.dataProxy.resumeCommunication(I)}}},M.prototype.syncFilterState=function(A){if(A)for(var b=0,P=A.visualContainers;b<P.length;b++){var y=P[b];y.config.singleVisual.syncGroup&&this.visualSyncService.syncFilterState(y)}},M.\u0275fac=function(b){return new(b||M)(e.\u0275\u0275inject(n.d),e.\u0275\u0275inject(m.J),e.\u0275\u0275inject(i.z),e.\u0275\u0275inject(O.M))},M.\u0275prov=e.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},47217:function(Le,oe,t){t.d(oe,{K3:function(){return M},L_:function(){return y},p7:function(){return A}});var e=t(59214),n=t(10242),m=t(64857),i=t(41218),O=t(64450),I=t(26963),T=t(63232);function f(C,d,g,S){var B=C.get(i.m,null),w=C.get(T.s,null);return powerbi.explore.services.createExplorationVisualPluginService(d,g,S,B,w)}function M(C,d,g,S){return f(C,g,S,d)}var A={provide:I.D,useFactory:M,deps:[e.Injector,n.bh,m.vZ,O.t]},b=new e.InjectionToken("ScopedExplorationVisualPluginServiceOverrideToken"),y={provide:I.D,useFactory:function(C,d,g,S){var B=C.get(b,null);return B?e.Injector.create([B],C).get(I.D):f(C,d,g,S)},deps:[e.Injector,m.vZ,O.t,n.l6]}},64992:function(Le,oe,t){t.d(oe,{H$:function(){return B},cW:function(){return V}});var e=t(7005),n=t(59214),m=t(76199),i=t(21453),O=t(22422),I=t(64857),T=t(68554),f=t(89515),M=t(62087),A=t(9266),b=t(22588),P=t(20019),y=t(49854),C=t(95679),d=t(26963),g=t(69582),S=function(){function v(c,u,r,h,p,D,x,z,Q,q,de,se,Ie){this.legacyService=(0,g.I)(r,Q,x,p,h,z,c,D,u,q,de,se,Ie)}return v.prototype.validate=function(c,u,r){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(h){return[2,this.legacyService.validate(c,u,r)]})})},v.prototype.shouldBlockVisualQuery=function(c){return this.legacyService.shouldBlockVisualQuery&&this.legacyService.shouldBlockVisualQuery(c)},v.\u0275fac=function(u){return new(u||v)(n.\u0275\u0275inject(i.E),n.\u0275\u0275inject(O.U),n.\u0275\u0275inject(I.vZ),n.\u0275\u0275inject(f.o),n.\u0275\u0275inject(M.h),n.\u0275\u0275inject(A.o),n.\u0275\u0275inject(b.k),n.\u0275\u0275inject(C.t),n.\u0275\u0275inject(d.D),n.\u0275\u0275inject(m.D),n.\u0275\u0275inject(P.z),n.\u0275\u0275inject(y.o),n.\u0275\u0275inject(T.U,8))},v.\u0275prov=n.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),B=new n.InjectionToken("ScopedVisualValidatorServiceOverrideToken"),V={provide:g.R,useFactory:function(v,c,u,r,h,p,D,x,z,Q,q,de,se,Ie){var fe=v.get(B,null);return fe?n.Injector.create([fe],v).get(g.R):new S(c,u,r,h,p,D,x,z,Q,q,de,se,Ie)},deps:[n.Injector,i.E,O.U,I.vZ,f.o,M.h,A.o,b.k,C.t,d.D,m.D,P.z,y.o,[T.U,new n.Optional]]}},96960:function(Le,oe,t){t.d(oe,{G:function(){return O}});var e=t(7005),n=t(59214),m=t(70886),i=t(89515),O=function(){function I(T,f){this.modernDialogService=T,this.localizationService=f}return I.prototype.show=function(T,f,M,A,b,P,y,C,d){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var g,B;return(0,e.Jh)(this,function(v){switch(v.label){case 0:return g=this.create(T,f,M,A,b,P,y,C,d),B={dialogName:"ExportData",componentName:"ExportDataDialogComponent",bindings:{viewModel:g},config:{width:"652px",height:"600px",maxHeight:"100%",maxWidth:"100%",minHeight:256,minWidth:320,autoFocus:!0,panelClass:["no-padding","no-border"],ariaLabel:this.localizationService.get("ModalDialog_ExportDataTitleTwo")}},[4,this.modernDialogService.openHostDialog(B)];case 1:return[4,v.sent().afterClosed().toPromise()];case 2:return[2,v.sent()]}})})},I.prototype.create=function(T,f,M,A,b,P,y,C,d){var g=0===M,S=[this.localizationService.get("ModalDialog_ExportDataSummarized"),this.localizationService.get("ModalDialog_ExportDataUnderlying")];return b&&S.push(this.localizationService.get("ModalDialog_ExportDataMatrixVisual")),{options:S,isExlFormatDisabled:!(g&&f),hasMeasuresForUnderlyingData:A,isExportMatrixVisualDataSupported:b,exportDataMode:P,isCsvFormatDisabled:!T,exportXlsxUnsupportedType:M,isExploreAuthorized:y,artifactId:C,model:d}},I.\u0275fac=function(f){return new(f||I)(n.\u0275\u0275inject(m.x),n.\u0275\u0275inject(i.o))},I.\u0275prov=n.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac,providedIn:"root"}),I}()},78144:function(Le,oe,t){t.d(oe,{I:function(){return B}});var e=t(73856),n=t(64450),m=t(59214),i=t(84543),O=t(89515),I=t(78099),T=t(26963),f=t(554),M=t(49470),A=t(64857),b=t(53216),P=t(81602),y=t(12242),C=powerbi.data.services.SemanticQuerySerializer,d=powerbi.explore.QueryProjectionBuilderCoreUtils,g=powerbi.common.constants.onPremiseVSName,S=new Map([["MipClientLabelDisabled","ExportData_FailureMessage_DisabledLabel"],["MipClientBadInput","ExportData_FailureMessage_DeletedLabel"],["MipClientServiceDisabled","ExportData_FailureMessage_LabelServiceInternalError"],["MipClientUnsupportedProtection","ExportData_FailureMessage_AdHocLabel"],["MipClientInternalError","ExportData_FailureMessage_LabelServiceInternalError"]]),B=function(){function w(V,v,c,u,r,h,p,D,x,z,Q){this.notificationToastService=v,this.localizationService=c,this.conceptualSchemaProxy=u,this.visualPluginService=r,this.visualPluginOps=h,this.featureSwitchService=p,this.displayNameService=D,this.fileSaver=x,this.lazyScoped=z,this.drillToDetails=Q,this.promiseFactory=V}return w.prototype.exportTileDataToCsv=function(V){var v=this,c=V.contract,u=V.config,r=powerbi.dataServices.TileUtils.getVisualType(u),h=this.getDataSources(V),p=this.promiseFactory.defer(),D=this.localizationService,x=this.notificationToastService,z=x.notify({title:D.get("ExportData_LoadingTitle"),message:D.get("ExportData_LoadingMessage"),notificationType:3});return this.conceptualSchemaProxy.get(h).then(function(Q){x.hide(z);var q=powerbi.dataServices.ContractUtils.convertToSemanticQueryWithDataShapeBinding(c.query),de=C.deserializeQuery(q.defn),se=u.visualContainer.elements,Ie=se&&se.length>0?se[0].DataRoles:null,fe=v.visualPluginService.getPlugin(r),re=d.createProjectionBuilderFromDataRoles(fe,Ie,de,Q);if(v.visualPluginService.capabilities(r)){var be={objects:u.visualContainer.$visualContainer.config.singleVisual.objects,visualType:r,query:new powerbi.explore.contracts.VisualQuery(de,re.build(q.shape),[])};v.exportVisualDataToCsv(u.visualContainer.heading1,{data:V.visual.data,dataTransforms:V.visual.dataTransforms},h,v.mockVisualContainer(be),null).then(function(ae){p.resolve(ae)},function(ae){p.reject(ae)})}},function(){x.hide(z)}),p.promise},w.prototype.exportVisualDataToCsv=function(V,v,c,u,r){var h=this.localizationService,D=this.notificationToastService.notify({title:h.get("ExportData_LoadingTitle"),message:h.get("ExportData_LoadingMessage"),notificationType:3,sticky:!0}),x=this.lazyScoped.get("exportVisualData").then(function(z){return z.exportToCsv(V,v,c,u,r)});return this.handleExportDataResult(x,D,"Csv")},w.prototype.exportVisualDataToExcel=function(V,v,c,u,r,h,p,D){var x=this,z=this.localizationService,Q=this.notificationToastService,q=this.promiseFactory.defer(),de=Q.notify({title:z.get("ExportData_LoadingTitle"),message:z.get("ExportData_LoadingMessage"),notificationType:3,sticky:!0});return this.conceptualSchemaProxy.get(c).then(function(se){var fe=u;if(1===h){var re=x.drillToDetails.generateDetailsTable(u.config.singleVisual,se,p,!0);if(!re)return void q.reject({blob:null,errorDetails:{errorType:4}});fe=x.mockVisualContainer(re)}x.promiseFactory.resolve(powerbi.dataServices.utils.generateFiltersDescription(se,r,fe.config.singleVisual,x.visualPluginService,x.displayNameService,x.localizationService)).then(function(pe){x.lazyScoped.get("exportVisualData").then(function(ge){return ge.exportToExcel(V,v,c,fe,r,pe,h,D)}).then(function(ge){q.resolve(ge)},function(ge){q.reject(ge)})},function(){q.reject({blob:null,errorDetails:{errorType:5}})})},function(){q.reject({blob:null,errorDetails:{errorType:3}})}),this.handleExportDataResult(q.promise,de,"Xlsx")},w.prototype.mockVisualContainer=function(V){var v={name:jsCommon.Utility.generateGuid(),config:{singleVisual:V},layouts:jsCommon.ArrayExtensions.createWithId(),filters:[]};return v.layouts.push({id:0,position:{x:0,y:0,width:0,height:0}}),v},w.prototype.canExportTileData=function(V){if(!this.featureSwitchService.featureSwitches.exportToCsvEnabled||V.contract.type!==powerbi.dataServices.contracts.TileType.composite)return!1;var c=V.visual.type;if(!this.visualPluginService.getPlugin(c)||!V.data||!this.visualPluginOps.isQueryVisual(c))return!1;try{var p=powerbi.dataServices.ContractUtils.convertToSemanticQueryWithDataShapeBinding(V.contract.query).defn;if(!p||!p.Version||p.Version<powerbi.data.SemanticQueryVersions.Version2)return!1}catch(D){return!1}return!0},w.prototype.getExportDataToExcelUnsupportedType=function(V,v){var c=V.config.singleVisual,u=c.objects,p=this.featureSwitchService.featureSwitches.insightApps;return u&&u.forecast?3:u&&u.clustering?2:this.visualPluginService.isScriptVisual(c.visualType)?4:e.CI.isActionAllowed(v,p,8)?0:5},w.prototype.areExploreOperationsAuthorized=function(V){return!!V&&e.CI.areExploreOperationsAuthorized(V)},w.prototype.isDataModelASOnPremises=function(V){return V&&V.vsName&&V.vsName===g},w.prototype.getDataSources=function(V){var v=V.contract,c=powerbi.explore.contracts.createDataSourceArray();c.push({type:"dsr",id:v.modelId,name:v.modelName,dsr:{schemaName:v.modelName,vsName:V.dataSet.vsName,dbName:V.dataSet.dbName,modelId:v.modelId}});var r=powerbi.explore.constants.ExplorationSchemaName,h={type:powerbi.explore.dataReaderPlugins.ExplorationDataReaderType,id:v.id,name:r,extends:v.modelName,exploration:{schemaName:r,extends:v.modelName,getModelExtensions:function(){return V.config.visualContainer.$modelExtensions},getDataSourceVariables:function(){return V.config.visualContainer.dataSourceVariables}}};return c.push(h),c},w.prototype.saveResult=function(V){switch(V.format){case 0:this.fileSaver.saveAs(V.blob,V.fileName,{type:"text/csv;charset=utf-8;"});break;case 1:this.fileSaver.saveAs(V.blob,V.fileName,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;"})}},w.prototype.handleExportDataResult=function(V,v,c){var u=this,r=this.promiseFactory.defer(),h=this.localizationService,p=this.notificationToastService;return V.then(function(D){null!=D.errorDetails?(p.notify({title:h.get("ExportData_FailureTitle"),message:h.get("ExportData_FailureMessage_default_".concat(c)),notificationType:2}),r.reject(D)):(p.notify(D.isPartialResult?{title:h.get("ExportData_PartialDataTitle"),message:h.get("ExportData_PartialDataMessage"),notificationType:5}:{title:h.get("ExportData_Success_Header"),message:h.get("ExportData_Success"),notificationType:4,duration:8e3}),u.saveResult(D),r.resolve(D))},function(D){var x=null==D?void 0:D.errorDetails,z="ExportData_FailureMessage_default_".concat(c),Q=null;_.isEmpty(x)?"Unexpected export error: ".concat(JSON.stringify(D,Object.getOwnPropertyNames(D))):x.errorCode&&S.get(D.errorDetails.errorCode)?z=S.get(D.errorDetails.errorCode):6===x.errorType?z="ExportData_EmptyColumnName":3===x.errorType?z="ExportData_SchemaLoadingFailure":0===x.errorType?z="ExportData_QueryGenerationFailure":5===x.errorType?z="ExportData_GenerateFiltersDescriptionFailure":4===x.errorType?z="ExportData_GenerateDetailsTableFailure":1===x.errorType?z="ExportData_NoData":2===x.errorType?z="ExportData_QueryError":7===x.errorType?(z="ExportData_UnhandledExtensionSchema",Q={displayText:h.get("Generic_LearnMore"),href:"https://go.microsoft.com/fwlink/?linkid=2227980"}):"NetworkConnectionIssue"===x.errorMessage&&0===x.status&&(z="ServerError_NetworkConnectionIssue"),p.notify({title:h.get("ExportData_ExportFailureTitle"),message:h.get(z),notificationType:2,learnMoreLink:Q}),r.reject(D)}).finally(function(){return p.hide(v)}),r.promise},w.\u0275fac=function(v){return new(v||w)(m.\u0275\u0275inject(n.t),m.\u0275\u0275inject(i.Q),m.\u0275\u0275inject(O.o),m.\u0275\u0275inject(I.i),m.\u0275\u0275inject(T.D),m.\u0275\u0275inject(f.f),m.\u0275\u0275inject(A.vZ),m.\u0275\u0275inject(M.O),m.\u0275\u0275inject(b.m),m.\u0275\u0275inject(P.H),m.\u0275\u0275inject(y.M))},w.\u0275prov=m.\u0275\u0275defineInjectable({token:w,factory:w.\u0275fac}),w}()},24898:function(Le,oe,t){t.d(oe,{U:function(){return n}});var e=t(59214),n=function(){function m(){}return m.prototype.exportToExcel=function(i,O){},m.\u0275prov=e.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac=function(O){return new(O||m)},providedIn:"root"}),m}()},44536:function(Le,oe,t){t.d(oe,{W:function(){return b}});var e=t(18897),n=t(58873),m=t(64450),i=t(44302),O=t(59214),I=t(20010),T=t(64857),f=t(30351),M=t(9266),A=powerbi.common.contracts.FavoriteType,b=function(){function P(y,C,d,g,S,B,w,V){this.promiseFactory=y,this.telemetryService=C,this.favoritesHttpService=d,this.orgStoreCustomVisualsService=g,this.visualPaneSettingsService=S,this.featureSwitchService=B,this.publicCustomVisualService=w,this.resourcePackagesService=V}return P.prototype.reset=function(y){_.forEach(y.getVisuals(),function(C){if(C.custom){var d=C;d.favoriteId=void 0,d.resourcePackageId=void 0,d.isOutOfBox=!1}})},P.prototype.ensureFavoriteVisualResources=function(y){var g,S,C=this,d=[];if(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps){var B=this.visualPaneSettingsService.getFavoritePublicCustomVisuals().then(function(V){g=V});d.push(B)}var w=this.ensureFavoritesLoaded().then(function(V){S=V});return d.push(w),this.promiseFactory.allSettled(d).then(function(){return C.ensureFavoriteVisualResourcesWithPublicCvs(S,y,g)})},P.prototype.ensureFavoriteVisualResourcesWithPublicCvs=function(y,C,d){var g=_.map(y,function(B){return B.favoriteObject}),S=this.getResourcePackagesToRegister(g,d);return this.telemetryService.logEvent(powerbi.telemetry.SettingsFavoriteResourcePackages,{favoriteResourcePackageAction:"Get",favoriteResourcePackagePayload:_.join(_.map(g,function(B){return B.name}))}),this.resourcePackagesService.registerPackages(S),C.ensurePlugins(S).then(function(){for(var B=0,w=y;B<w.length;B++){var V=w[B],v=V.favoriteObject,c=C.getPlugin(v.name);c.favoriteId=V.id,c.resourcePackageId=v.id}})},P.prototype.ensureOutOfBoxVisuals=function(y){var C=this;return this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?this.orgStoreCustomVisualsService.getOrgCustomVisuals().then(function(d){return C.ensureOutOfBoxVisualsWithPublicCvs(y,C.getPublicOutOfBoxVisualsFromGalleryItems(d))}):this.ensureOutOfBoxVisualsWithPublicCvs(y)},P.prototype.getPublicOutOfBoxVisualsFromGalleryItems=function(y){return _.map(_.filter(y,function(C){return C.customVisualContract.isOutOfBox&&C.customVisualContract.isPublicVisual}),function(C){return C.customVisualContract.name})},P.prototype.ensureOutOfBoxVisualsWithPublicCvs=function(y,C){var d=this;return this.favoritesHttpService.getOutOfBoxVisuals(null).then(function(S){var B=d.getResourcePackagesToRegister(S,C);return d.telemetryService.logEvent(powerbi.telemetry.SettingsOutOfBoxVisuals,{outOfBoxVisuals:_.join(_.map(B,function(w){return w.name}))}),d.resourcePackagesService.registerPackages(B),y.ensurePlugins(B).then(function(){for(var w=0,V=B;w<V.length;w++){var v=V[w],c=y.getPlugin(v.name);c.isOutOfBox=!0,c.resourcePackageId=v.id}})})},P.prototype.getResourcePackagesToRegister=function(y,C){var d=y;if(C&&C.length>0){var g=this.publicCustomVisualService.createPublicResourcePackagesByName(C);d=g;for(var S=function(u){var r=_.find(d,function(h){return h.name===u.name});r?B.featureSwitchService.featureSwitches.stopPublicRpsPopulation||(_.remove(d,function(h){return h.name===u.name}),r.id=u.id,d.push(r)):d.push(u)},B=this,w=0,V=y;w<V.length;w++)S(V[w])}return d},P.prototype.addVisualToFavorites=function(y){var C=this,d=[];if(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps){var g=this.publicCustomVisualService.getPublicVisualTypes([y.name]).then(function(w){if(w[0])return C.visualPaneSettingsService.addFavoritePublicCustomVisual(y)});d.push(g)}if(y.resourcePackageId<0)return this.promiseFactory.all(d);var S=this.telemetryService.startEvent(powerbi.telemetry.SettingsFavoriteResourcePackages,{favoriteResourcePackageAction:"Add",favoriteResourcePackagePayload:y.name}),B=this.favoritesHttpService.addFavoriteResourcePackage(y.resourcePackageId,y.name,S.event).then(function(w){y.favoriteId=w.id,C.favoritesLoaded=!1,S.resolve()}).catch(function(){S.reject()});return d.push(B),this.promiseFactory.allSettled(d)},P.prototype.removeVisualFromFavorites=function(y){var C=this,d=[];if(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps){var g=this.publicCustomVisualService.getPublicVisualTypes([y.name]).then(function(V){if(V[0])return C.visualPaneSettingsService.removeFavoritePublicCustomVisual(y)});d.push(g)}if(y.resourcePackageId<0)return this.promiseFactory.all(d);var S={id:y.favoriteId,favoriteType:A.ResourcePackage,uniqueId:void 0,getPermissions:void 0},B=this.telemetryService.startEvent(powerbi.telemetry.SettingsFavoriteResourcePackages,{favoriteResourcePackageAction:"Remove",favoriteResourcePackagePayload:y.name}),w=this.favoritesHttpService.deleteFavorite(S,B.event).then(function(){y.favoriteId=void 0,C.favoritesLoaded=!1,B.resolve()}).catch(function(){B.reject()});return d.push(w),this.promiseFactory.allSettled(d)},P.prototype.isFavoriteVisual=function(y){return this.isFavoriteResourcePackage(y.resourcePackageId)},P.prototype.isFavoriteResourcePackage=function(y){return this.ensureFavoritesLoaded().then(function(C){return _.some(C,function(d){return d.favoriteId===y})})},P.prototype.isOutOfBoxVisual=function(y){return this.isOutOfBoxResourcePackage(y.resourcePackageId)},P.prototype.isOutOfBoxResourcePackage=function(y){return this.ensureOutOfBoxVisualsLoaded().then(function(C){return _.some(C,function(d){return d.id===y})})},P.prototype.ensureFavoritesLoaded=function(){var y=this;return this.favoritesLoaded||this.favoritesLoadInProgress||(this.favoritesLoadInProgress=!0,this.favoritesPromise=this.promiseFactory.defer(),this.favoritesHttpService.getFavoriteResourcePackages(null).then(function(C){y.favoritesLoaded=!0,y.favoritesPromise.resolve(C)}).catch(function(){y.favoritesLoaded=!1,y.favoritesPromise.reject()}).finally(function(){y.favoritesLoadInProgress=!1})),this.favoritesPromise.promise},P.prototype.ensureOutOfBoxVisualsLoaded=function(){var y=this;return this.outOfBoxLoaded||this.outOfBoxLoadInProgress||(this.outOfBoxLoadInProgress=!0,this.outOfBoxPromise=this.promiseFactory.defer(),this.favoritesHttpService.getOutOfBoxVisuals(null).then(function(C){y.outOfBoxLoaded=!0,y.outOfBoxPromise.resolve(C)}).catch(function(){y.outOfBoxLoaded=!1,y.outOfBoxPromise.reject()}).finally(function(){y.outOfBoxLoadInProgress=!1})),this.outOfBoxPromise.promise},P.\u0275fac=function(C){return new(C||P)(O.\u0275\u0275inject(m.t),O.\u0275\u0275inject(i.y0),O.\u0275\u0275inject(e.R),O.\u0275\u0275inject(n.T),O.\u0275\u0275inject(I.R),O.\u0275\u0275inject(T.vZ),O.\u0275\u0275inject(f.B),O.\u0275\u0275inject(M.o))},P.\u0275prov=O.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}()},79860:function(Le,oe,t){t.d(oe,{x:function(){return f}});var e=t(7005),n=t(59214),m=t(78099),i=t(89718),O=t(64857),I=t(89515),T=powerbi.explore.viewModels,f=function(){function M(A,b,P,y){this.conceptualSchemaProxy=A,this.dataSources=b,this.featureSwitchService=P,this.localizationService=y}return M.prototype.getViewModel=function(A,b,P){return void 0===A&&(A=this.dataSources.get()),void 0===b&&(b=!0),void 0===P&&(P=!1),(0,e.mG)(this,void 0,void 0,function(){var y;return(0,e.Jh)(this,function(C){switch(C.label){case 0:return b||this.conceptualSchemaProxy.clearCache(),[4,this.conceptualSchemaProxy.get(A)];case 1:return y=C.sent(),[2,T.FieldListViewModelMerger.mergeModel(void 0,y,T.createFieldListViewModelFactory(this.localizationService,this.featureSwitchService,P),void 0,!1,!0,!0)]}})})},M.\u0275fac=function(b){return new(b||M)(n.\u0275\u0275inject(m.i),n.\u0275\u0275inject(i.D),n.\u0275\u0275inject(O.vZ),n.\u0275\u0275inject(I.o))},M.\u0275prov=n.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},84638:function(Le,oe,t){t.d(oe,{I:function(){return T}});var e=t(59214),n=t(49470),m=t(42645),i=t(26963),O=powerbi.explore.services.FilterBuilder,I=powerbi.explore.util.VisualContainerUtils,T=function(){function f(M,A,b){this.displayNameService=M,this.filterGenerator=A,this.visualPlugin=b}return f.prototype.getContextualFilterRestatements=function(M,A){if(_.isEmpty(A.filters))return[];for(var b=new O(A),P=0,y=A.filters;P<y.length;P++){var d=y[P].filter;d&&b.addVisualFilter({filter:d})}var g=b.getFilters();return this.getFilterRestatementResult(M,A,g)},f.prototype.getVisualFilterRestatements=function(M,A,b,P){var y=this.filterGenerator.calculateVisualContainerFilter(M,A,P,b,!1,!0);return this.getFilterRestatementResult(b,P,y)},f.prototype.getFilterRestatement=function(M,A,b,P){return this.displayNameService.getFilterRestatementForOverlay(M,A,b,null,P)},f.prototype.getFilterRestatementResult=function(M,A,b){var P=this,y=I.getVisualCapabilities(A,this.visualPlugin);return _.chain(b.dataFiltersUnmerged).concat(b.highlightFiltersUnmerged).without(void 0).filter(function(C){return!C.isHidden}).map(function(C){var d;return P.getFilterRestatement(C,M,y,null===(d=A.config)||void 0===d?void 0:d.singleVisual)}).flatten().without(void 0).sortBy("fieldName").value()},f.\u0275fac=function(A){return new(A||f)(e.\u0275\u0275inject(n.O),e.\u0275\u0275inject(m.r),e.\u0275\u0275inject(i.D))},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac}),f}()},78381:function(Le,oe,t){t.d(oe,{F:function(){return P}});var e=t(7005),n=t(72249),m=t(59214),i=t(87714),O=t(86718),I=t(78555),T=t(64857),f=t(81602),M=t(44302),A=t(11719),b=powerbi.common.helpers.TelemetryHelper,P=function(){function y(C,d,g,S,B,w,V){this.eventBridge=C,this.featureSwitchService=d,this.lazyScoped=g,this.selection=S,this.servicePauser=B,this.telemetry=w,this.viewModeState=V,this.canvasLayout$=new n.X(0),this.canvasLayoutCapabilities=this.initializeLayoutCapabilities()}return Object.defineProperty(y.prototype,"currentLayout$",{get:function(){return this.canvasLayout$.asObservable()},enumerable:!1,configurable:!0}),y.prototype.getCurrentLayout=function(){return this.canvasLayout$.value},y.prototype.getCurrentLayoutCapabilities=function(){return this.canvasLayoutCapabilities[this.canvasLayout$.value]},y.prototype.changeFormFactor=function(C,d,g){return void 0===g&&(g=!0),(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(S){switch(S.label){case 0:return this.canvasLayout$.value===C?[3,2]:(this.telemetry.logEvent(powerbi.telemetry.EXChangeCanvasLayout,{sourceLayout:b.getTelemetryCanvasLayout(this.canvasLayout$.value),targetLayout:b.getTelemetryCanvasLayout(C),viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())}),g&&this.selection.clearSelection(),[4,this.applyFormFactor(C,d)]);case 1:S.sent(),S.label=2;case 2:return[2]}})})},y.prototype.applyFormFactor=function(C,d){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(S){switch(S.label){case 0:return this.isMobileFormattingSupported()?[4,this.applyAuthoringMobileState(C,d)]:[3,2];case 1:S.sent(),S.label=2;case 2:return this.setCurrentLayout(C),this.updateExploreCanvas(d),this.updateViewModeState(),this.eventBridge.publishToChannel(powerbi.explore.services.events.formFactorChanged,{layout:C}),[2]}})})},y.prototype.isMobileFormattingSupported=function(){return this.featureSwitchService.featureSwitches.mobileAuthoringFormattingUI&&1===this.viewModeState.getMode()},y.prototype.updateExploreCanvas=function(C){var d=C.exploration.contract;C.exploration.exploreCanvas=powerbi.explore.viewModels.ViewModelFactory.convertSectionToExploreCanvas(d,d.sections[d.activeSectionIndex],this.canvasLayout$.value)},y.prototype.applyAuthoringMobileState=function(C,d){return(0,e.mG)(this,void 0,void 0,function(){var g,B;return(0,e.Jh)(this,function(w){switch(w.label){case 0:return[4,this.lazyScoped.get("mobileVcObjectsProxy")];case 1:return(g=w.sent()).isSupported()?1!==C?[3,4]:[4,this.lazyScoped.get("mobileStateAuthoringService")]:[2];case 2:return[4,w.sent().load(d.exploration.contract)];case 3:return w.sent(),d.exploration.contract=g.wrap(d.exploration.contract),[3,5];case 4:B=g.unwrap(),d.exploration.contract=null!=B?B:d.exploration.contract,w.label=5;case 5:return[2]}})})},y.prototype.setCurrentLayout=function(C){this.canvasLayout$.next(C),0===C?this.servicePauser.resume():this.servicePauser.pause()},y.prototype.updateViewModeState=function(){var C=this.getCurrentLayoutCapabilities();this.viewModeState.updateConfig(function(d){d.displayOptions.showMobilePane=C.canShowMobilePageVisualsPane()})},y.prototype.initializeLayoutCapabilities=function(){var C,d=this,g=function(){return 1===d.viewModeState.getMode()},B=((C={})[0]={canMoveMultipleVisuals:_.stubTrue,canShowCanvasBackground:_.stubTrue,canShowCanvasBackdrop:_.stubFalse,canShowCanvasOutspace:_.stubTrue,canShowCodePane:_.stubTrue,canShowVisualContainerHeader:_.stubTrue,canShowVisualContainerHeaderInset:_.stubFalse,canShowMobilePageVisualsPane:_.stubFalse,canShowLayoutGrid:g,canRemoveVisualFromLayout:_.stubFalse,canCutCopyPaste:_.stubTrue,canDelete:_.stubTrue,canPassUnhandledKeysToSelectedVisual:_.stubTrue,canAddRemoveSections:g,canShowVisualToolbar:g},C[1]={canMoveMultipleVisuals:g,canShowCanvasBackground:_.stubTrue,canShowCanvasBackdrop:g,canShowCanvasOutspace:_.stubTrue,canShowCodePane:_.stubFalse,canShowVisualContainerHeader:function(){return 0===d.viewModeState.getMode()},canShowVisualContainerHeaderInset:_.stubTrue,canShowMobilePageVisualsPane:g,canShowLayoutGrid:g,canRemoveVisualFromLayout:g,canCutCopyPaste:_.stubFalse,canDelete:_.stubFalse,canPassUnhandledKeysToSelectedVisual:_.stubTrue,canAddRemoveSections:_.stubFalse,canShowVisualToolbar:g},C[2]={canMoveMultipleVisuals:_.stubFalse,canShowCanvasBackground:_.stubTrue,canShowCanvasBackdrop:_.stubTrue,canShowCanvasOutspace:_.stubTrue,canShowCodePane:_.stubFalse,canShowVisualContainerHeader:_.stubFalse,canShowVisualContainerHeaderInset:_.stubFalse,canShowMobilePageVisualsPane:_.stubTrue,canShowLayoutGrid:_.stubFalse,canRemoveVisualFromLayout:_.stubTrue,canCutCopyPaste:_.stubFalse,canDelete:_.stubFalse,canPassUnhandledKeysToSelectedVisual:_.stubTrue,canAddRemoveSections:_.stubFalse,canShowVisualToolbar:_.stubFalse},C);return jsCommon.FreezeUtility.deepFreeze(B),B},y.\u0275fac=function(d){return new(d||y)(m.\u0275\u0275inject(i.J),m.\u0275\u0275inject(T.vZ),m.\u0275\u0275inject(f.H),m.\u0275\u0275inject(O.z),m.\u0275\u0275inject(I._),m.\u0275\u0275inject(M.y0),m.\u0275\u0275inject(A.kc))},y.\u0275prov=m.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}()},26286:function(Le,oe,t){t.d(oe,{RD:function(){return i},wG:function(){return A}});var e=t(59214),n=t(44302),m=powerbi.telemetry,i=function(){function b(P){this.telemetryService=P,this.visual=new O,this.telemetry=new I(this.telemetryService),this.core=new T}return b.prototype.openGroupDialog=function(P){},b.\u0275fac=function(y){return new(y||b)(e.\u0275\u0275inject(n.y0))},b.\u0275prov=e.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}(),O=function(){function b(){}return b.prototype.canGroup=function(P,y,C){return!1},b.prototype.group=function(P,y,C,d,g){return null},b}(),I=function(){function b(P){this.telemetryService=P}return b.prototype.logGroupActionTelemetry=function(P,y,C,d,g){},b.prototype.logBinBySizeActionTelemetry=function(P,y,C,d,g){},b.prototype.logBinByCountActionTelemetry=function(P,y,C,d,g,S){},b.prototype.logGroupsErrorTelemetry=function(P,y,C,d){},b.prototype.logGroupsDeleteTelemetry=function(P,y,C){},b.prototype.logGroupsUsageTelemetry=function(P,y,C,d,g,S){var B=this;P.then(function(w){var V=y.getConceptualProperty(w);if(V){var v=y.getTargetEntity().entity,c=powerbi.explore.utils.GroupUtils.getGroupMode(v,V,null);0!==c&&B.telemetryService.logEvent(m.EXGroupsUsage,{visualType:C,role:d,sourceRole:g,action:S,groupType:2===c?"Bin":"List"})}})},b}(),T=function(){function b(){}return b.prototype.validateGroupDefinition=function(P,y){return!1},b.prototype.validateGroupCount=function(P,y){return!1},b.prototype.applyModelChanges=function(P,y,C){return new powerbi.Promise(function(d,g){return g(void 0)})},b}(),f=new e.InjectionToken("GroupAuthoringServiceOverrideToken"),A={provide:i,useFactory:function(b,P){var y=b.get(f,null);return y?e.Injector.create([y],b).get(i):new i(P)},deps:[e.Injector,n.y0]}},3662:function(Le,oe,t){t.d(oe,{S:function(){return T}});var e=t(59214),n=t(22558),m=t(67641),O="foreground",I="background",T=function(){function f(M,A){this.themeServiceBase=M,this.highContrastCssGenerationService=A}return f.prototype.applyHighContrastStyle=function(M){var A=M.name;if(this.themeServiceBase.isThemeLoaded(A)){var b=this.themeServiceBase.getVisualStyle({highContrastTheme:M});this.highContrastCssGenerationService.applyHighContrastTheme(A,{foregroundColor:b.colorPalette[O].value,backgroundColor:b.colorPalette[I].value,linkColor:b.colorPalette.hyperlink.value,buttonBackgroundColor:b.colorPalette[I].value,buttonForegroundColor:b.colorPalette.foregroundButton.value,disabledTextColor:(b.colorPalette.disabledText||b.colorPalette[O]).value,selectedBackgroundColor:b.colorPalette.foregroundSelected.value,selectedForegroundColor:b.colorPalette[I].value})}},f.prototype.removeHighContrastStyle=function(){this.highContrastCssGenerationService.removeHighContrastStyle()},f.\u0275fac=function(A){return new(A||f)(e.\u0275\u0275inject(n.T),e.\u0275\u0275inject(m.g))},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"}),f}()},54772:function(Le,oe,t){t.d(oe,{g:function(){return f}});var e=t(7005),n=t(59214),m=t(11719),i=t(70886),O=t(64857),I=t(89515),T=jsCommon.FocusGroupNavigation,f=function(){function M(A,b,P,y,C){this.viewModeState=A,this.dialogService=b,this.zone=P,this.featureSwitchService=y,this.localizationService=C}return M.prototype.startListening=function(){var A=this;this.zone.runOutsideAngular(function(){return $(document).on("keypress",$.proxy(A.onKeypress,A))})},M.prototype.stopListening=function(){$(document).off("keypress",this.onKeypress)},M.prototype.show=function(){var A={title:this.localizationService.get("HotkeyDialog_Title"),modulePath:"@powerbi/ExploreUIDialogs/hotkey-dialog.module#HotkeyDialogModule",componentId:"HotkeyDialogComponentId",inputArgs:{viewMode:this.viewModeState.getMode(),useNewControls:this.featureSwitchService.featureSwitches.accessibilityTopLevelNav},hideCancelButton:!0,hideOkButton:!0};return this.dialogService.openHostDialog({bindings:A,componentName:"SimpleTemplateDialogComponent",config:{hasBackdrop:!0,autoFocus:!0},dialogName:"SimpleTemplateDialogComponent"})},M.prototype.onKeypress=function(A){return(0,e.mG)(this,void 0,void 0,function(){var P;return(0,e.Jh)(this,function(C){switch(C.label){case 0:return"?"!==String.fromCharCode(A.charCode)||T.canHandleKeyEvents(A.target)?[2]:(P=document.activeElement,[4,this.show()]);case 1:return C.sent().afterClosed().subscribe(function(){P&&P.nodeType===Node.ELEMENT_NODE&&P.focus()}),[2]}})})},M.\u0275fac=function(b){return new(b||M)(n.\u0275\u0275inject(m.kc),n.\u0275\u0275inject(i.x),n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(O.vZ),n.\u0275\u0275inject(I.o))},M.\u0275prov=n.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},6862:function(Le,oe,t){t.d(oe,{W:function(){return v}});var e=t(7005),n=t(59214),m=t(13574),i=t(90196),O=t(87714),I=t(70886),T=t(89515),f=t(84543),M=t(44302),A=t(26963),b=t(85862),P=t(21453),y=t(64386),C=t(5293),d=t(64857),g=powerbi.contracts.ResourcePackageItemType,S=powerbi.explore.util.ResourcePackageUtils,B=powerbi.explore.services.events,v=function(){function c(u,r,h,p,D,x,z,Q,q,de,se,Ie,fe){this.localFileService=u,this.eventBridge=r,this.modernDialogService=h,this.localizationService=p,this.notificationToast=D,this.telemetryService=x,this.upload=z,this.visualPluginService=Q,this.promiseFactory=q,this.httpService=de,this.featureSwitchService=se,this.pbivizFileService=Ie,this.approvedResourceService=fe}return c.prototype.importWithDialog=function(u){var r=this,h=this.promiseFactory.defer(),p=h.promise.then(function(D){return r.handleImport(u,D)});return this.localFileService.chooseLocalFile(h,".pbiviz"),p},c.prototype.handleImport=function(u,r){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var h,p,D;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?[4,this.pbivizFileService.getVisualTypeFromFile(r)]:[3,8];case 1:return p=x.sent(),!this.featureSwitchService.featureSwitches.checkPbivizFileContentOnImport||p?this.approvedResourceService&&this.approvedResourceService.isApprovedResource(p)?[4,this.pbivizFileService.getPublicResourcePackageFromFile(r,p)]:[3,5]:[3,7];case 2:return h=x.sent(),this.featureSwitchService.featureSwitches.stopPublicRpsPopulation?[3,4]:[4,this.postFile(r)];case 3:D=x.sent(),h?h.id=D.id:h=D,x.label=4;case 4:return[3,7];case 5:return[4,this.postFile(r)];case 6:h=x.sent(),x.label=7;case 7:return[3,10];case 8:return[4,this.postFile(r)];case 9:h=x.sent(),x.label=10;case 10:return h?(powerbi.localStorageService.getData("VISUAL_DEVELOPER_MODE_ENABLED")?this.showImportFromFileOptionDialog(h,u):this.import(u,h),[2]):(this.showImportErrorDialog(),[2])}})})},c.prototype.showImportFromFileOptionDialog=function(u,r){var h=this,p=this.promiseFactory.defer(),D=this.localizationService;return this.approvedResourceService&&!this.approvedResourceService.isApprovedResource(u.name)?(this.import(r,u).then(function(){return p.resolve()}),p.promise):(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps&&(u.isPublic=!0),this.modernDialogService.promptHostSimpleDialog("ImportVisualWarning",{title:D.get("ImportCustomVisualCdnOverrideTitle"),message:D.get("ImportCustomVisualCdnOverrideBody"),okButtonText:D.get("ImportCustomVisualCdnOverrideFromFile"),cancelButtonText:D.get("ImportCustomVisualCdnOverrideFromAppsource"),additionalMessages:[D.get("ImportCustomVisualCdnOverrideVersion"),D.get("ImportCustomVisualCdnOverrideWarning")]}).then(function(x){1===x&&(u.developerModeVisual=!0,h.telemetryService.logEvent(powerbi.telemetry.EXCdnVisualOverride,{customVisualName:u.name})),h.import(r,u).then(function(){return p.resolve()})}),p.promise)},c.prototype.showImportErrorDialog=function(){var u=this.localizationService;this.modernDialogService.promptHostSimpleDialog("ImportVisualError",{title:u.get("ImportVisual_ErrorDialogHeader"),message:u.get("ImportVisual_ErrorDialogMessage"),okButtonText:u.get("ImportVisual_Close")})},c.prototype.import=function(u,r,h){var p=this;return h||(h=r),this.visualPluginService.ensurePlugins([r],!0).then(function(){r.isPublic?(S.ensurePublicCustomVisuals(u),_.remove(u.publicCustomVisuals,function(x){return x===r.name}),u.publicCustomVisuals.push(r.name),p.featureSwitchService.featureSwitches.stopPublicRpsPopulation||(S.ensureResourcePackages(u),_.remove(u.resourcePackages,function(x){return x.name===h.name}),u.resourcePackages.push(h))):(S.ensureResourcePackages(u),_.remove(u.resourcePackages,function(x){return x.name===r.name}),u.resourcePackages.push(r)),p.eventBridge.publishToChannel(B.addCustomVisual,r),p.eventBridge.publishToChannel(B.visualPluginsChanged),p.notificationToast.hide(p.toastNotificationId),p.toastNotificationId=void 0;var D=p.promiseFactory.defer();return D.resolve(),D.promise})},c.prototype.notifyWhenLoadingCustomVisual=function(u,r,h){this.toastNotificationId=this.notificationToast.notify({title:this.localizationService.get(u),message:this.localizationService.get(h),notificationType:3})},c.prototype.postFile=function(u){var r=this,h=this.httpService.powerbiRequestOptions();h.retryCount=0,h.headers[powerbi.common.constants.uploadFileSizeHeaderName]=u.size.toString(),this.notifyWhenLoadingCustomVisual("ImportCustomVisualLoadingTitle",0,"PleaseWaitUntilReady");var p=this.telemetryService.startEvent(powerbi.telemetry.EXImportCustomViz,{fileName:u.name,resourcePackageId:-1,resourcePackageName:""});return this.upload.post("/powerbi/content/visual",[u],h).then(function(D){var x=D.data;null==x.type&&(x.type=0);for(var z=0,Q=x.items;z<Q.length;z++){var q=Q[z];null==q.type&&(q.type=g.CustomVisualJavascript)}return p.event.info.resourcePackageId=x.id,p.event.info.resourcePackageName=x.name,p.resolve(),x},function(D){r.showImportErrorDialog();var z={errorCode:"Import of custom visual failed -> code: ".concat(D&&D.error?D.error.code:"-1")};return p.reject(z),null})},c.\u0275fac=function(r){return new(r||c)(n.\u0275\u0275inject(m.W),n.\u0275\u0275inject(O.J),n.\u0275\u0275inject(I.x),n.\u0275\u0275inject(T.o),n.\u0275\u0275inject(f.Q),n.\u0275\u0275inject(M.y0),n.\u0275\u0275inject(i.g),n.\u0275\u0275inject(A.D),n.\u0275\u0275inject(y.O),n.\u0275\u0275inject(C.M),n.\u0275\u0275inject(d.vZ),n.\u0275\u0275inject(b.L),n.\u0275\u0275inject(P.E))},c.\u0275prov=n.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac}),c}()},63007:function(Le,oe,t){t.d(oe,{Y:function(){return V}});var e=t(59214),n=t(7772),m=t(87714),i=t(43801),O=t(64857),I=t(89515),T=t(44302),f=t(11719),M=powerbi.DataViewScopeIdentity,A=powerbi.explore.FilterExpressionMetadataUtils,b=powerbi.explore.contracts.FilterType,P=powerbi.explore.FilterUtils,y=powerbi.explore.services.IncludeExcludeSQExprVisitor,C=powerbi.data.Selector,d=powerbi.data.SemanticFilter,g=powerbi.data.SQExpr,S=powerbi.data.SQExprBuilder,B=powerbi.data.SQExprUtils,w=powerbi.explore.util.VisualContainerUtils,V=function(){function v(c,u,r,h,p,D,x){this.contextActivityService=c,this.eventBridge=u,this.featureSwitchService=r,this.localizationService=h,this.telemetry=p,this.undoRedo=D,this.viewModeState=x}return v.prototype.setFilter=function(c,u,r,h){var Q,p=this,D=_.map(u,function(de){return C.convertSelectorsByColumnToSelector(de)}),x=_.find(r.filters,function(de){return de.howCreated===c}),z=2;h&&r.config&&r.config.singleVisual&&(Q=A.getSelectorsByColumnMetadata(u,r.config.singleVisual,h)),x||(x={howCreated:c,name:P.getNextFilterName(r.filters),type:3===c?b.Include:b.Exclude,filterExpressionMetadata:Q},z=1);var q=x.filter;3===c?q=this.getIncludeFilter(D):(q=this.getExcludeFilter(q,D),2===z&&(Q||x.filterExpressionMetadata)&&(x.filterExpressionMetadata=A.mergeFilterExpressionMetadata(x.filterExpressionMetadata,Q))),this.undoRedo.register("UpdateIncludeExcludeFilter",function(){x.filter=q;var se,de={container:r,scopeType:0};1===z&&(P.add(de.container,x),p.telemetry.logEvent(powerbi.telemetry.EXAddFilter,{filterType:3===c?"Include":"Exclude",filterScopeType:"Visual",fieldKind:"Entity",drillToDetailsMode:w.hasGroupByItemsInQuery(r),viewMode:powerbi.explore.util.getTelemetryViewMode(p.viewModeState.getMode())})),p.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(se=P.createChangeFilterActivity(p.contextActivityService,"Include Exclude Filter")),P.notifyFilterContainerChangedByUser(p.eventBridge,{filter:x,changeType:z,scope:de,changeFilterActivity:se}),se&&se.resolve()})},v.prototype.buildViewModel=function(c,u,r,h,p){for(var x=[],z=0,Q=c?c.where():[];z<Q.length;z++){var de=Q[z].condition,se=new y(r,h,p);de.accept(se),x.push.apply(x,se.dataPoints||[])}return{points:x,filter:c,displayName:P.getDisplayNameForIncludeExcludeFilters(this.localizationService,u,x.length),restatement:this.getRestatement(x)}},v.prototype.updateFilterContainer=function(c,u){var r=this,h=c.contract,D=this.buildFilter(u,h.type);this.undoRedo.register("UpdateIncludeExcludeFilter",function(){var z,x=c.getFilterContainerScope();h.filter=D,r.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(z=P.createChangeFilterActivity(r.contextActivityService,"Include Exclude Filter")),P.notifyFilterContainerChangedByUser(r.eventBridge,{filter:h,changeType:2,scope:x,changeFilterActivity:z}),z&&z.resolve()})},v.prototype.isIncludeExcludeSupported=function(c,u,r){if(r)for(var p=0,D=_.map(r,function(N){return C.convertSelectorsByColumnToSelector(N)});p<D.length;p++)for(var Q=0,q=C.toScopeIdentities(D[p]);Q<q.length;Q++)if(g.isNot(q[Q].expr))return!1;if(c&&c.config&&c.config.singleVisual){var fe=c.config.singleVisual.query;if(fe){if(u){var re=u.schema(void 0);if(re&&re.capabilities&&re.capabilities.supportsMultiTableTupleFilters)return!0}for(var ge=void 0,be=0,ae=fe.defn.select();be<ae.length;be++){var le=ae[be].expr;if(!B.isMeasure(le)){var ee=(le=powerbi.data.VariationRewriter.run(le,u)).getTargetEntity();if(ge){if(!g.equals(ge,ee))return!1}else ge=ee}}return!0}}return!1},v.prototype.buildFilter=function(c,u){for(var r,h=c.points[0],p=S.inValues(h.columns,[h.values]),D=1;D<c.points.length;D++)r=S.inValues((h=c.points[D]).columns,[h.values]),p=S.or(p,r);return u===b.Exclude&&(p=S.not(p)),d.fromSQExpr(p)},v.prototype.getRestatement=function(c){for(var u=[],r=0,h=c;r<h.length;r++)u.push(h[r].text);return u.join(this.localizationService.get("ListJoin_Separator"))},v.prototype.getIncludeFilter=function(c){var u=C.filterExprsFromSelectors(c);return M.filterFromExprs(u,!1)},v.prototype.getExcludeFilter=function(c,u){var r=C.filterExprsFromSelectors(u);if(c){var h=_.find(c.where(),function(de){return 16===de.condition.kind});if(h){for(var D=h.condition.arg,x=0,z=r;x<z.length;x++){var q=powerbi.data.ScopeIdentityExtractor.getInExpr(z[x]);D=S.or(D,q)}return D=S.not(D),d.fromSQExpr(D)}}return M.filterFromExprs(r,!0)},v.\u0275fac=function(u){return new(u||v)(e.\u0275\u0275inject(n.r),e.\u0275\u0275inject(m.J),e.\u0275\u0275inject(O.vZ),e.\u0275\u0275inject(I.o),e.\u0275\u0275inject(T.y0),e.\u0275\u0275inject(i.z),e.\u0275\u0275inject(f.kc))},v.\u0275prov=e.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}()},8576:function(Le,oe,t){t.d(oe,{A:function(){return ge},U:function(){return be}});var e=t(7005),n=t(59214),m=jsCommon.EnumExtensions,i=powerbi.visuals.shapes.Rect;function A(ae,X){if(C(X,ae)){var le=i.bottom(X),ee=le-ae.top;ae.top=le,ae.height-=ee}}function b(ae,X){C(ae,X)&&(ae.height=X.top-ae.top)}function P(ae,X){if(d(ae,X)){var le=i.right(X),ee=le-ae.left;ae.left=le,ae.width-=ee}}function y(ae,X){d(X,ae)&&(ae.width=X.left-ae.left)}function C(ae,X){return i.containsPoint(ae,i.topRight(X),!0)||i.containsPoint(ae,i.topLeft(X),!0)||i.containsPoint(X,i.bottomRight(ae),!0)||i.containsPoint(X,i.bottomLeft(ae),!0)}function d(ae,X){return i.containsPoint(ae,i.bottomRight(X),!0)||i.containsPoint(ae,i.topRight(X),!0)||i.containsPoint(X,i.topLeft(ae),!0)||i.containsPoint(X,i.bottomLeft(ae),!0)}var g=t(41844),S=t(87714),B=t(86718),w=t(43801),V=t(22422),v=t(67613),c=t(78381),u=t(44302),h=(powerbi,powerbi.explore),p=h.services.selectionUtils,D=powerbi.telemetry,x=h.contracts.traverseVisualContainerGroups,z=h.viewModels,Q=h.util.CanvasDisplayUtility,q=h.constants.ExploreCanvasConstants,de=h.services,se=powerbi.ItemGroupingManager,Ie=z.ViewModelFactory,fe=h.util.VisualContainerUtils,re=h.contracts.isVisualContainer,pe=h.contracts.isVisualContainerGroup,ge=new n.InjectionToken("groupingLayoutManagers"),be=function(){function ae(X,le,ee,N,F,E,k,R,W){var Z=this;this.eventBridge=X,this.explorationCapabilities=le,this.explorationNavigation=ee,this.formFactorProvider=N,this.selectionService=F,this.telemetryService=E,this.undoRedo=k,this.injector=R,this.groupingLayoutManagersLazy=_.map(W,function(me){return new jsCommon.Lazy(function(){return new me(Z)})}),this.visualAuthoringLazyLoader=new jsCommon.Lazy(function(){return Z.injector.get(g.$)})}return Object.defineProperty(ae.prototype,"visualAuthoring",{get:function(){return this._visualAuthoring||this.visualAuthoringLazyLoader.getValue()},enumerable:!1,configurable:!0}),ae.prototype.groupCanvasItems=function(X){var le=this.formFactorProvider.getCurrentLayout();if(X&&!(X.length<2)&&1!==le){var ee=this.explorationNavigation.getCurrentExploreCanvas(),N=this.visualAuthoring.groupVisualContainers(ee,X);this.getGroupingLayoutManager(N.contract.groupMode).onCreateGroup(N)}},ae.prototype.ungroupCanvasItems=function(X){var le=this.explorationNavigation.getCurrentExploreCanvas(),ee=this.visualAuthoring.ungroupVisualContainers(le,X);this.getGroupingLayoutManager(ee.contract.groupMode).onUngroup(ee)},ae.prototype.canMergeCanvasItems=function(){var X=this,le=p.getSelectedCanvasItems(this.selectionService),ee=le.filter(function(F){return pe(F)});return!(_.isEmpty(ee)||le.length<2)&&_.every(le,function(F){if(re(F)){for(var E=F.parentGroup;E;){if(_.includes(ee,E))return!1;E=E.parentGroup}return!0}var k=!1;return x(F.children,function(R){return k=k||p.isCanvasItemSelected(R,X.selectionService)}),!k})},ae.prototype.mergeCanvasItemContainers=function(X){var le=_.find(X,function(N){return h.contracts.isVisualContainerGroup(N)}),ee=[];_.forEach(X,function(N){N!==le&&(h.contracts.isVisualContainerGroup(N)?ee.push.apply(ee,N.children):ee.push(N))}),this.moveCanvasItemsInTree(ee,_.last(le.children),!0,!0)},ae.prototype.moveCanvasItemInTree=function(X,le,ee,N){void 0===N&&(N=!1),this.moveCanvasItemsInTree([X],le,ee,N)},ae.prototype.moveCanvasItemsInTree=function(X,le,ee,N){void 0===N&&(N=!1);for(var F=this.explorationNavigation.getCurrentExploreCanvas(),E=_.map(X,function(G){return G.parentGroup&&G.parentGroup.name}),k=_.map(E,function(G){return G&&se.find(G,F.visualContainerGroups)}),R=this.visualAuthoring.moveCanvasItemsInTree(F,X,le,ee,N),W=0;W<R.length;W++){var Z=R[W],me=Z.parentGroup&&Z.parentGroup.name;if(E[W]!==me){if(E[W]){var _e=se.find(E[W],F.visualContainerGroups);_e?z.isVisualContainerGroup(_e)&&this.removeCanvasItemFromGroup(_e,Z):this.getGroupingLayoutManager(k[W].contract.groupMode).onRemoveChild(k[W],Z,!1)}if(me){var he=se.find(me,F.visualContainerGroups);z.isVisualContainerGroup(he)&&this.addCanvasItemToGroup(he,Z,W===R.length-1)}}}},ae.prototype.addLayoutToVisualContainer=function(X,le,ee){var N=this.formFactorProvider.getCurrentLayout();le.layouts.push({id:N,position:ee});var F=Ie.convertVisualContainer(this.explorationNavigation.getCurrentExploration(),X.contract,le,N);X.visualContainers.push(F),X.visualContainerGroups=(0,e.ev)((0,e.ev)([],X.visualContainerGroups,!0),[F],!1)},ae.prototype.removeLayoutFromSelectedVisuals=function(X){var le=this;this.undoRedo.register("RemoveLayoutFromSelectedVisuals",function(){for(var ee=_.map(le.selectionService.getSelectedElements(),function(R){return R.canvasItem}),N=le.formFactorProvider.getCurrentLayout(),F=0,E=ee;F<E.length;F++)ae.removeLayoutFromOneVisualContainer(N,X,E[F]);le.selectionService.clearSelection(),le.eventBridge.publishToChannel(de.events.canvasChanged)})},ae.prototype.removeLayoutFromVisualContainer=function(X,le){var ee=this;this.undoRedo.register("RemoveLayoutFromVisualContainer",function(){var N=ee.formFactorProvider.getCurrentLayout();ae.removeLayoutFromOneVisualContainer(N,X,le),_.find(ee.selectionService.getSelectedElements(),function(E){return E.canvasItem===le})&&ee.selectionService.clearSelection(),ee.eventBridge.publishToChannel(de.events.canvasChanged)})},ae.prototype.removeLayoutFromSection=function(X,le,ee){var N=this,F=0,E=X.visualContainers;this.undoRedo.register("RemoveLayoutsFromVisualContainers",function(){for(var k=0,R=E;k<R.length;k++)_.remove(R[k].layouts,function(Z){return Z.id===le}).length>0&&F++;N.selectionService.clearSelection(),N.eventBridge.publishToChannel(de.events.sectionLayoutRemoved)}),1===le&&this.telemetryService.logEvent(D.EXRemoveMobileCanvasVisuals,{reportId:ee.reportId,numberOfVisualsRemoved:F})},ae.prototype.moveCanvasItemFromContract=function(X,le){var ee=this.explorationNavigation.getCurrentExploreCanvas(),N=se.find(X.name,ee.visualContainerGroups);z.isVisualContainerGroup(N)&&this.updateGroupSize(N,{width:le.width,height:le.height},!1),this.moveCanvasItem(N,le)},ae.prototype.moveCanvasItem=function(X,le,ee){void 0===ee&&(ee=!1),X.position=le,X.updateViewState();var N=this.formFactorProvider.getCurrentLayout();!ee&&X.parentGroup&&0===N&&this.getGroupingLayoutManager(X.parentGroup.contract.groupMode).onUpdateGroupChildren(X.parentGroup);var F=X.contract;this.eventBridge.publishToChannel(de.events.canvasItemContainerPositionChanged,{affectContainer:function(k){return k===F},changedItems:[F]})},ae.prototype.updateGroupSize=function(X,le,ee){this.getGroupingLayoutManager(X.contract.groupMode).onUpdateGroup(X,le,ee)},ae.prototype.addCanvasItemToGroup=function(X,le,ee){this.getGroupingLayoutManager(X.contract.groupMode).onAddChild(X,le,ee)},ae.prototype.removeCanvasItemFromGroup=function(X,le){this.getGroupingLayoutManager(X.contract.groupMode).onRemoveChild(X,le)},ae.prototype.alignSelectedVisuals=function(X,le,ee){1===ee.length?this.alignSingleVisualContainer(X,le,ee[0]):this.alignMultipleVisualContainers(X,le,ee)},ae.prototype.visualsInLayout=function(X,le){return _.filter(X.visualContainers,function(ee){return _.some(ee.layouts,function(N){return N.id===le})})},ae.prototype.getLayoutForNewVisualContainer=function(X,le,ee){var N=this.formFactorProvider.getCurrentLayout(),F=Q.getAutoLayoutVisualVCHeader(this.formFactorProvider,this.explorationCapabilities),E=_.map(X,function(R){var W=Q.visualPositionToRect(R.layouts.withId(N).position);return W.top-=F,W.height+=F,W}),k=this.getLayoutForNewVisualContainerWithRects(E,le,ee);return k.top+=F,k.height-=F,Q.rectToVisualPosition(k)},ae.prototype.getLayoutForNewVisualContainerWithRects=function(X,le,ee){return function(ae,X,le,ee,N,F,E,k){var R,W,Z,me;if(!_.isEmpty(ae))for(var _e=0,he=ae;_e<he.length;_e++){var G=he[_e],ce=i.bottom(G),Fe=i.right(G);G.top<=X.y&&ce>=X.y?Fe<X.x?R=!R||Fe>i.right(R)?G:R:G.left>X.x&&(W=!W||G.left<W.left?G:W):G.left<=X.x&&Fe>=X.x&&(ce<X.y?Z=!Z||ce>i.bottom(Z)?G:Z:G.top>X.y&&(me=!me||G.top<me.top?G:me))}var je=function(ae,X,le,ee,N,F,E,k,R){var Z,W={left:0,top:0,width:0,height:0},me=!1;return X&&le?(W.left=Math.max(i.right(X),le.left),W.top=Math.max(X.top,i.bottom(le)),W.width=i.right(le)-W.left,W.height=i.bottom(X)-W.top,Z=10,me=!!ee):X&&N?(W.left=Math.max(i.right(X),N.left),W.top=X.top,W.width=i.right(N)-W.left,W.height=Math.min(i.bottom(X),N.top)-W.top,Z=6,me=!!ee):ee&&le?(W.left=le.left,W.top=Math.max(ee.top,i.bottom(le)),W.width=Math.min(ee.left,i.right(le))-W.left,W.height=i.bottom(ee)-W.top,Z=9):ee&&N?(W.left=N.left,W.top=ee.top,W.width=Math.min(ee.left,i.right(N))-W.left,W.height=Math.min(i.bottom(ee),N.top)-W.top,Z=5):X?(W.left=Math.max(i.right(X)+R,ae.x-X.width/2),W.top=X.top,W.width=X.width,W.height=X.height,Z=14,me=!!ee):le?(W.left=le.left,W.top=Math.max(i.bottom(le)+R,ae.y-le.height/2),W.width=le.width,W.height=le.height,Z=11):ee?(W.left=Math.min(ee.left-R,ae.x+ee.width/2)-ee.width,W.top=ee.top,W.width=ee.width,W.height=ee.height,Z=13):N?(W.left=N.left,W.top=Math.min(N.top-R,ae.y+N.height/2)-N.height,W.width=N.width,W.height=N.height,Z=7):(W.left=ae.x,ae.x+E>F.width&&(W.left=F.width-E),W.top=ae.y,ae.y+k>F.height&&(W.top=F.height-k),W.width=E,W.height=k,Z=15),W.height=Math.min(i.bottom(F)-W.top,W.height),W.width=Math.min(i.right(F)-W.left,W.width),{result:W,flexibleDirection:Z,trimHorizontally:me}}(X,R,Z,W,me,le,F,E,k),Oe=je.result,J=je.flexibleDirection;return function(ae,X,le){if(!_.isEmpty(ae))for(var ee=0,N=ae;ee<N.length;ee++){var F=N[ee];le?(P(X,F),y(X,F),A(X,F),b(X,F)):(A(X,F),b(X,F),P(X,F),y(X,F))}}(ae,Oe,je.trimHorizontally),function(ae,X,le,ee){var N=m.hasFlag(X,1),F=m.hasFlag(X,2),E=m.hasFlag(X,4),k=m.hasFlag(X,8);if(ae.width<le){var R=le-ae.width;ae.width=le,N&&F?ae.left-=R/2:N&&(ae.left-=R)}ae.height<ee&&(R=ee-ae.height,ae.height=ee,E&&k?ae.top-=R/2:E&&(ae.top-=R))}(Oe,J,ee,N),function(ae,X,le,ee){ae.left=Math.max(X.left,ae.left),i.right(ae)>X.width&&(ae.width=X.width-ae.left,ae.width<le&&(ae.left=Math.max(X.left,X.width-le),ae.width=Math.min(X.width,le))),ae.top=Math.max(ae.top,X.top),i.bottom(ae)>X.height&&(ae.height=X.height-ae.top,ae.height<ee&&(ae.top=Math.max(X.top,X.height-ee),ae.height=Math.min(X.height,ee)))}(Oe,le,ee,N),Oe}(X,le,{left:0,top:0,width:ee.width,height:ee.height},q.AutoLayoutMinSpaceWidth,q.AutoLayoutMinSpaceHeight,q.AutoLayoutMaxSpaceWidth,q.AutoLayoutMaxSpaceHeight,q.AutoLayoutVisualPadding)},ae.prototype.getAbsolutePositionToCanvas=function(X){var le=this.formFactorProvider.getCurrentLayout(),ee=X.contract.parentGroup,N=ee&&ee.layouts.withId(le);return fe.getAbsoluteVisualContainerPosition(X.position,le,ee=N?ee:void 0)},ae.prototype.getRelativePositionToParentGroup=function(X,le){var ee=this.formFactorProvider.getCurrentLayout();return fe.getGroupRelativeVisualContainerPosition(X,le.contract,ee)},ae.prototype.alignMultipleVisualContainers=function(X,le,ee){var N=this;this.undoRedo.register("AlignMultipleVisualContainers",function(){var F=_.map(ee,function(G){return N.getAbsolutePositionToCanvas(G)});switch(X){case 3:var E=_.min(_.map(F,function(G){return G.y}));N.moveContainersHelper(ee,function(G){return G.y=ae.clampYValue(E,G.height,le)},!0);break;case 4:var R=_.sumBy(F,function(G){return G.y+G.height/2})/F.length;N.moveContainersHelper(ee,function(G){return G.y=ae.clampYValue(R-G.height/2,G.height,le)},!0);break;case 5:var W=_.max(_.map(F,function(G){return G.y+G.height}));N.moveContainersHelper(ee,function(G){return G.y=ae.clampYValue(W-G.height,G.height,le)},!0);break;case 0:var Z=_.min(_.map(F,function(G){return G.x}));N.moveContainersHelper(ee,function(G){return G.x=ae.clampXValue(Z,G.width,le)},!0);break;case 1:var _e=_.sumBy(F,function(G){return G.x+G.width/2})/F.length;N.moveContainersHelper(ee,function(G){return G.x=ae.clampXValue(_e-G.width/2,G.width,le)},!0);break;case 2:var he=_.max(_.map(F,function(G){return G.x+G.width}));N.moveContainersHelper(ee,function(G){return G.x=ae.clampXValue(he-G.width,G.width,le)},!0);break;case 6:N.distributeSpace(ee,F,!0,le);break;case 7:N.distributeSpace(ee,F,!1,le)}})},ae.prototype.alignSingleVisualContainer=function(X,le,ee){var N=this;this.undoRedo.register("AlignSingleVisualContainer",function(){var F=ee.position,E=le.width,k=le.height;if(ee.parentGroup){var R=ee.parentGroup.position;R&&(E=R.width,k=R.height)}switch(X){case 3:N.moveContainersHelper([ee],function(he){return he.y=0},!1);break;case 4:case 7:var W=k/2-F.height/2;N.moveContainersHelper([ee],function(he){return he.y=W},!1);break;case 5:var Z=k-F.height;N.moveContainersHelper([ee],function(he){return he.y=Z},!1);break;case 0:N.moveContainersHelper([ee],function(he){return he.x=0},!1);break;case 1:case 6:var me=E/2-F.width/2;N.moveContainersHelper([ee],function(he){return he.x=me},!1);break;case 2:var _e=E-F.width;N.moveContainersHelper([ee],function(he){return he.x=_e},!1)}})},ae.prototype.distributeSpace=function(X,le,ee,N){for(var F=this,E=ee?"x":"y",k=ee?"width":"height",R=ee?ae.clampXValue:ae.clampYValue,W=_.min(_.map(le,function(J){return J[E]})),Z=_.max(_.map(le,function(J){return J[E]+J[k]})),_e=_.reduce(le,function(J,ue){return J-ue[k]},Z-W)/(X.length-1),G=W,ce=0,Fe=_.sortBy(X,function(J){return F.getAbsolutePositionToCanvas(J)[E]});ce<Fe.length;ce++){var je=Fe[ce],Oe=this.getAbsolutePositionToCanvas(je);Oe[E]=R(G,Oe[k],N),G+=Oe[k]+_e,Oe=this.getRelativePositionToParentGroup(Oe,je),this.moveCanvasItem(je,Oe)}},ae.prototype.moveContainersHelper=function(X,le,ee){for(var N=0,F=X;N<F.length;N++){var E=F[N],k=ee?this.getAbsolutePositionToCanvas(E):E.position;le(k),ee&&(k=this.getRelativePositionToParentGroup(k,E)),this.moveCanvasItem(E,k)}},ae.prototype.getGroupingLayoutManager=function(X){return this.groupingLayoutManagersLazy[X].getValue()},ae.clampXValue=function(X,le,ee){return X<0?0:le+X>ee.width?ee.width-le:X},ae.clampYValue=function(X,le,ee){return X<0?0:le+X>ee.height?ee.height-le:X},ae.removeLayoutFromOneVisualContainer=function(X,le,ee){var N=_.find(le.visualContainers,function(F){return F.contract===ee});if(N)return ee.layouts.withId(X),_.pull(le.visualContainers,N),le.visualContainerGroups=_.without(le.visualContainerGroups,N),_.remove(ee.layouts,function(F){return F.id===X}).length>0},ae.\u0275fac=function(le){return new(le||ae)(n.\u0275\u0275inject(S.J),n.\u0275\u0275inject(V.U),n.\u0275\u0275inject(v.I),n.\u0275\u0275inject(c.F),n.\u0275\u0275inject(B.z),n.\u0275\u0275inject(u.y0),n.\u0275\u0275inject(w.z),n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(ge,8))},ae.\u0275prov=n.\u0275\u0275defineInjectable({token:ae,factory:ae.\u0275fac}),ae}()},6624:function(Le,oe,t){t.d(oe,{m:function(){return n}});var e=t(59214),n=function(){function m(){this.service=powerbi.explore.services.createLayoutInsertionHelper()}return m.prototype.getEmptySpaces=function(i,O){return this.service.getEmptySpaces(i,O)},m.prototype.getNonOverlapingRects=function(i,O){return this.service.getNonOverlapingRects(i,O)},m.prototype.getIntersectingRectangle=function(i,O){return this.service.getIntersectingRectangle(i,O)},m.\u0275prov=e.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac=function(O){return new(O||m)},providedIn:"root"}),m}()},72914:function(Le,oe,t){t.d(oe,{LD:function(){return T},tC:function(){return b},xW:function(){return f},z_:function(){return A}});var e=t(59214),n=t(89090),m=t(87714),i=t(44302),O=t(14545),T=new e.InjectionToken("LoadProgressNotificationConfigurationInjectionToken"),f={provide:n.W,useFactory:function(y){return{decrementDelayInMilliseconds:1e3,ignoreShouldTrackLoadProgressCheck:!1,loadProgressNotificationActions:{completionFn:function(){return y.publishToChannel(powerbi.common.events.printSectionReady)},cancelFn:function(){}}}},deps:[m.J]},A={provide:n.W,useFactory:function(P,y){var C=P.get(T,null);return C?e.Injector.create([C],P).get(n.W):{decrementDelayInMilliseconds:1e3,ignoreShouldTrackLoadProgressCheck:!1,loadProgressNotificationActions:{completionFn:function(){return y.publishToChannel(powerbi.common.events.printSectionReady)},cancelFn:function(){}}}},deps:[e.Injector,m.J,i.y0]},b=function(){function P(y,C,d){this.ngZone=y,this.config=C,this.telemetryService=d,this.counter=0,this.decrementDelayInMilliseconds=C.decrementDelayInMilliseconds,this.ignoreShouldTrackLoadProgressCheck=C.ignoreShouldTrackLoadProgressCheck,this.loadProgressLogsEnabled=!!C.loadProgressLogsEnabled,this.reset()}return P.prototype.beginLoad=function(y,C){this.counter++,this.loadProgressLogsEnabled&&y&&this.telemetryService.logEvent(O.tJ,{visualType:C,visualName:y,isBeginLoad:!0,counterValue:this.counter})},P.prototype.endLoad=function(y,C){var d=this;this.trackableHost&&!this.shouldTrackProgress&&this.counter>0&&(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress()),(this.shouldTrackProgress||this.counter>0)&&this.ngZone.runOutsideAngular(function(){setTimeout(function(){d.counter--,d.loadProgressLogsEnabled&&y&&d.telemetryService.logEvent(O.tJ,{visualType:C,visualName:y,isBeginLoad:!1,counterValue:d.counter}),0===d.counter&&d.shouldTrackProgress&&d.ngZone.run(function(){return d.invokeCompletionCallback()})},d.decrementDelayInMilliseconds,!1)})},P.prototype.reset=function(){this.trackableHost?(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress(),this.shouldTrackProgress||this.invokeCompletionCallback()):this.shouldTrackProgress=!1,this.loadProgressLogsEnabled&&this.telemetryService.logEvent(O.Iw,{counterValue:this.counter})},P.prototype.cancelTracking=function(){this.loadProgressLogsEnabled&&this.telemetryService.logEvent(O.qd),this.config.loadProgressNotificationActions.cancelFn()},P.prototype.register=function(y){var C=this,d={};return this.trackableHost=y,this.registerTrackableHostContext=d,function(){C.registerTrackableHostContext===d?(C.trackableHost=void 0,C.registerTrackableHostContext=void 0):"De-registered a loadProgressNotification trackableHost when ".concat(C.registerTrackableHostContext?"another":"none"," is registered")}},P.prototype.invokeCompletionCallback=function(){this.config.loadProgressNotificationActions.completionFn()},P.\u0275fac=function(C){return new(C||P)(e.\u0275\u0275inject(e.NgZone),e.\u0275\u0275inject(n.W),e.\u0275\u0275inject(i.y0))},P.\u0275prov=e.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},79382:function(Le,oe,t){t.d(oe,{r:function(){return B}});var e=t(8703),n=t(72249),m=t(29150),i=t(89027),O=t(37946),I=t(93721),T=t(76734),f=t(2135),M=t(14545),A=t(59214),b=t(74569),P=t(87714),y=t(64857),C=t(78381),d=t(89515),g=t(44302),B=function(){function V(v,c,u,r,h,p,D){this.canvasZoom=v,this.eventBridge=c,this.featureSwitchService=u,this.formFactor=r,this.localizationService=h,this.telemetryService=p,this.reportViewSettingsService=D,this.visiblePanesCount=0,this.onDestroy$=new e.t(1),this.panes$=new n.X({}),this.stateToRestore=[],this.paneSelectors={};var x=this.featureSwitchService.featureSwitches,q=x.alwaysShowPaneSwitcher;if(!x.onObject||x.disableOnObjectPaneSwitcher||!this.reportViewSettingsService)return this.alwaysDockSidebar$=new n.X(!1),void(this.alwaysDockBuildPane$=new n.X(!1));var se=this.reportViewSettingsService.getUserSettingService();this.alwaysDockBuildPane$=new n.X(se.getAlwaysDockBuildPaneSidebar()),this.monitorAlwaysDockBuildPane(),q?(this.alwaysDockSidebar$=new n.X(se.getAlwaysDockSidebar()),this.monitorAlwaysShowPaneSwitcher()):this.alwaysDockSidebar$=new n.X(!1)}return V.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0)},V.prototype.monitorAlwaysDockBuildPane=function(){var v=this,c=this.reportViewSettingsService.getUserSettingService();this.reportViewSettingsService.getReportViewSettingsChanged().userSettings$.pipe((0,i.M)(this.alwaysDockBuildPane$),(0,O.R)(this.onDestroy$),(0,I.h)(function(r){var h=r[0];return"alwaysDockBuildPaneSidebar"===h.propertyName&&h.value!==r[1]})).subscribe(function(r){v.setAlwaysDockBuildPane(r[0].value)}),(0,m.aj)([this.alwaysDockBuildPane$,this.panes$]).pipe((0,O.R)(this.onDestroy$),(0,I.h)(function(r){return void 0!==r[1][0]}),(0,T.x)(function(r,h){return r[0]===h[0]})).subscribe(function(r){var h=r[0];c.getAlwaysDockBuildPaneSidebar()!==h&&c.setAlwaysDockBuildPaneSidebar(h)})},V.prototype.monitorAlwaysShowPaneSwitcher=function(){var v=this,c=this.reportViewSettingsService.getUserSettingService();this.reportViewSettingsService.getReportViewSettingsChanged().userSettings$.pipe((0,i.M)(this.alwaysDockSidebar$),(0,O.R)(this.onDestroy$),(0,I.h)(function(r){var h=r[0];return"alwaysDockSidebar"===h.propertyName&&h.value!==r[1]})).subscribe(function(r){v.setAlwaysDockSidebar(r[0].value)}),this.alwaysDockSidebar$.pipe((0,O.R)(this.onDestroy$),(0,T.x)()).subscribe(function(r){c.getAlwaysDockSidebar()!==r&&c.setAlwaysDockSidebar(r)})},V.prototype.getPanes$=function(){return this.panes$.asObservable()},V.prototype.showPaneSwitcher=function(){var v=this.alwaysDockSidebar$.value;return!(!this.isPaneSwitcherSupported()||!v)||!(!this.isPaneSwitcherSupported()||0===this.visiblePanesCount)&&(this.visiblePanesCount>1||!_.find(this.panes$.value,function(u){return u.isPaneVisible}).isPaneExpanded)},V.prototype.registerPaneContainer=function(v){this.paneContainerSelector=v},V.prototype.registerPane=function(v,c,u,r){var h=this;void 0===r&&(r=!1);var p=this.panes$.value,D=p[v];if(D){if(!r)return;D.isPaneVisible!==c.isPaneVisible&&(this.visiblePanesCount+=c.isPaneVisible?1:-1)}else c.isPaneVisible&&this.visiblePanesCount++;c.optionsSetting={showOptions:!1},this.featureSwitchService.featureSwitches.onObject&&(c.optionsSetting={showOptions:!0,getDropdownItems:function(){return h.getPaneDropdownItems(v,c.title)},clickHandler:function(z){h.performPaneAction(v,z)}},c.disableClose=!this.allowUserClose(v)),p[v]=c,this.panes$.next(p),this.paneSelectors[w(v)]=u},V.prototype.togglePaneExpansion=function(v,c){if(void 0===c&&(c=!0),void 0!==this.isPaneVisible(v)){var r=!this.getPaneExpansion(v);return r&&this.saveState(),this.setPaneExpansion(v,r,c),r||this.saveState(),r}},V.prototype.togglePaneVisibility=function(v,c){void 0===c&&(c=!1);var u=this.isPaneVisible(v);void 0!==u&&this.setPaneVisibility(v,!u,c)},V.prototype.allowUserClose=function(v){return 0!==v&&1!==v},V.prototype.closePane=function(v){this.isPaneVisible(v)&&this.setPaneVisibility(v,!1),this.logPaneStatus()},V.prototype.isPaneExpanded=function(v){if(this.panes$.value[v])return this.getPaneExpansion(v)},V.prototype.isPaneVisible=function(v){var c=this.panes$.value;if(c[v])return c[v].isPaneVisible},V.prototype.updatePaneTitle=function(v,c){var u=this.panes$.value;!u[v]||(u[v].title=c,this.panes$.next(u))},V.prototype.addToPaneSwitcher=function(v,c){void 0===c&&(c=!1);var u=this.panes$.value;if(u[v]){var r=!!u[v].isDisabled!=!!c;if(u[v].isDisabled=c,u[v].isPaneVisible){if(c&&u[v].isPaneExpanded)u[v].isPaneExpanded=!1;else if(!r)return}else u[v].isPaneExpanded=!1,u[v].isPaneVisible=!0,this.visiblePanesCount++;this.panes$.next(u),this.logPaneStatus()}},V.prototype.setPaneDisabledState=function(v,c){if(void 0!==this.isPaneVisible(v)){var r=this.panes$.value;r[v].isDisabled!==c&&(r[v].isDisabled=c,c&&(r[v].isPaneExpanded=!1),this.panes$.next(r))}},V.prototype.setPaneExpansion=function(v,c,u){void 0===u&&(u=!1);var r=this.panes$.value;if(c&&!r[v].isPaneVisible&&this.setPaneVisibility(v,!0),this.isPaneSwitcherSupported()&&c&&u){var h=this.panes$.value;for(var p in h)h[p].isPaneExpanded=!1;this.panes$.next(h)}r[v].isPaneExpanded=c,this.panes$.next(r),this.logPaneStatus()},V.prototype.setPaneVisibility=function(v,c,u,r){void 0===u&&(u=!1),void 0===r&&(r=!0);var h=this.panes$.value;if("".concat(w(v)," pane not registered"),this.isPaneVisible(v)!==c){if(c&&this.saveState(),this.isPaneSwitcherSupported()&&c&&r){var p=this.panes$.value;for(var D in p)p[D].isPaneExpanded=!1}h[v].isPaneVisible=c,this.featureSwitchService.featureSwitches.onObject&&c&&!u&&(h[v].isPaneExpanded=!0),c?this.visiblePanesCount++:this.visiblePanesCount--,this.panes$.next(h),c||this.ensureState(),this.notifyPaneVisibilityChanged(v,c),this.logPaneStatus()}},V.prototype.getPaneOptionsSetting=function(v){var c=this.panes$.value,u=null==c?void 0:c[v];return null==u?void 0:u.optionsSetting},V.prototype.isPaneSwitcherSupported=function(){return this.featureSwitchService.featureSwitches.onObject&&1!==this.formFactor.getCurrentLayout()},V.prototype.setAlwaysDockSidebar=function(v){this.alwaysDockSidebar$.next(v)},V.prototype.getAlwaysDockSidebar$=function(){return this.alwaysDockSidebar$.asObservable()},V.prototype.setAlwaysDockBuildPane=function(v){this.alwaysDockBuildPane$.next(v)},V.prototype.getAlwaysDockBuildPane$=function(){return this.alwaysDockBuildPane$.asObservable()},V.prototype.getPaneDropdownItems=function(v,c){var r=[],h=this.isPaneExpanded(v),p=this.localizationService.get(c),D=this.alwaysDockSidebar$.value;return r.push({actionId:"ExpandAndReplace",text:this.localizationService.format("Pane_Switcher_ExpandAndReplace",p),isDisabled:h}),r.push({actionId:"Expand",text:this.localizationService.format("Pane_Switcher_Expand",p),isDisabled:h}),r.push({actionId:"Collapse",text:this.localizationService.get("Collapse"),isDisabled:!h}),r.push({actionId:"Close",text:this.localizationService.get("Close"),isDisabled:!this.allowUserClose(v)}),!this.featureSwitchService.featureSwitches.disableOnObjectPaneSwitcher&&0===v&&r.push({actionId:"UndockBuildPane",text:this.localizationService.get("Pane_Switcher_Remove")}),this.featureSwitchService.featureSwitches.alwaysShowPaneSwitcher&&r.push({actionId:"AlwaysDockSidebar",text:this.localizationService.get("Always_Show_Sidebar"),checkable:!0,checked:D}),r},V.prototype.performPaneAction=function(v,c){var u=this.alwaysDockSidebar$.value;switch(c){case"ExpandAndReplace":case"Collapse":this.togglePaneExpansion(v,!0);break;case"Expand":this.togglePaneExpansion(v,!1);break;case"Close":this.setPaneVisibility(v,!1);break;case"AlwaysDockSidebar":this.setAlwaysDockSidebar(!u);break;case"AlwaysDockBuildPane":this.setAlwaysDockBuildPane(!0);break;case"UndockBuildPane":this.setAlwaysDockBuildPane(!1)}},V.prototype.getPaneExpansion=function(v){return this.panes$.value[v].isPaneExpanded},V.prototype.saveState=function(){if(this.isPaneSwitcherSupported()){var v=this.panes$.value,c=[];for(var u in v)v[u].isPaneExpanded&&v[u].isPaneVisible&&c.push(parseInt(u,10));this.stateToRestore.unshift(c),this.stateToRestore.length>50&&this.stateToRestore.pop()}},V.prototype.ensureState=function(){if(this.isPaneSwitcherSupported()){var v=this.panes$.value;for(var c in v)if(v[c].isPaneVisible&&v[c].isPaneExpanded)return;var u=_.filter(v,function(z){return z.isPaneVisible});if(1===u.length)u[0].isPaneExpanded=!0;else for(;this.stateToRestore.length>0;){var r=this.stateToRestore.shift();if(_.isEmpty(r)||_.some(r,function(z){return v[z].isPaneVisible})){for(var p=0,D=r;p<D.length;p++){var x=D[p];v[x].isPaneVisible&&(v[x].isPaneExpanded=!0)}break}}this.panes$.next(v)}},V.prototype.notifyPaneVisibilityChanged=function(v,c){this.eventBridge.publishToChannel(powerbi.explore.services.events.togglePaneVisibility,{pane:v,show:c})},V.prototype.logPaneStatus=function(){var v=this;setTimeout(function(){var c=document.querySelector(v.paneContainerSelector.selector),u=null==c?void 0:c.getBoundingClientRect().width,r=_.mapValues(v.paneSelectors,function(p){var D,x;return null===(x=null===(D=document.querySelector("".concat(v.paneContainerSelector.selector," ").concat(p.selector)))||void 0===D?void 0:D.getBoundingClientRect())||void 0===x?void 0:x.width}),h=v.panes$.value;v.telemetryService.logEvent(M.$k,{visibleCount:_.filter(h,function(p){return p.isPaneVisible}).length,expandedCount:_.filter(h,function(p){return p.isPaneVisible&&p.isPaneExpanded}).length,paneSwitcherVisible:v.showPaneSwitcher(),windowWidth:u,paneWidths:JSON.stringify(r),canvasZoom:v.canvasZoom.getCurrentZoomLevel()})})},V.\u0275fac=function(c){return new(c||V)(A.\u0275\u0275inject(b.w),A.\u0275\u0275inject(P.J),A.\u0275\u0275inject(y.vZ),A.\u0275\u0275inject(C.F),A.\u0275\u0275inject(d.o),A.\u0275\u0275inject(g.y0),A.\u0275\u0275inject(f.a,8))},V.\u0275prov=A.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}();function w(V){switch(V){case 2:return"Data";case 3:return"Format";case 4:return"Insights";case 5:return"Reflex";case 6:return"QuickMeasures";case 7:return"Performance";case 8:return"Bookmarks";case 9:return"SyncSlicers";case 10:return"CanvasItems";case 0:return"BuildSkittle";case 1:return"ChartElementsSkittle";case 11:return"QuickExplore";case 12:return"AssistedCreation";case 13:return"ReportCreationCopilot";case 14:return"Customize"}}},86942:function(Le,oe,t){t.d(oe,{F:function(){return r}});var e=t(72249),n=t(90289),m=t(76734),i=t(93721),O=t(59189),I=t(79201),T=t(13851),f=t(83022),M=t(20506),A=t(2135),b=t(59214),P=t(87714),y=t(20019),C=t(57111),d=t(22422),g=t(89515),S=t(22994),B=t(64857),w=t(7772),V=powerbi.explore.services.events,c="slowBannerNotificationId",u="refreshVisualNotificationId",r=function(){function h(p,D,x,z,Q,q,de,se,Ie){var fe,pe,ge,re=this;this.eventBridge=p,this.capabilitiesService=D,this.localizationService=x,this.navigationService=z,this.notificationBarService=Q,this.reportRefreshService=q,this.featureSwitchesService=de,this.contextActivityService=se,this.reportViewSettingsService=Ie,this.canDisplayPrompt=!1,this.timeouts={},this.notificationsList=((fe={})[u]="",fe[c]="",fe),this.featureSwitchesService.featureSwitches.optimizeTabRibbon&&(this.capabilitiesSubscription=this.capabilitiesService.capabilities$.pipe((0,n.U)(function(be){return be.allowPauseQueries}),(0,m.x)()).subscribe(function(be){re.allowPauseQueries=be,re.setDisplayPromptStatus()})),this.pauseQueries$=new e.X(!!this.allowPauseQueries&&!(null===(ge=null===(pe=this.navigationService.getCurrentExploration())||void 0===pe?void 0:pe.settings)||void 0===ge||!ge.pauseQueries)),this.channelSubscriptionManager=this.eventBridge.createChannelSubscriptionManager(),this.channelSubscriptionManager.subscribe(V.explorationSettingsLoaded,function(be,ae){var X,le;ae.pauseQueriesChanged&&re.setPauseQueries(!(null===(le=null===(X=re.navigationService.getCurrentExploration())||void 0===X?void 0:X.settings)||void 0===le||!le.pauseQueries))}).subscribe(V.explorationLoaded,function(){var be,ae;re.setPauseQueries(!(null===(ae=null===(be=re.navigationService.getCurrentExploration())||void 0===be?void 0:be.settings)||void 0===ae||!ae.pauseQueries))})}return h.prototype.setDisplayPromptStatus=function(){if(this.reportViewSettingsService){var p=this.reportViewSettingsService.getReportViewSettings({reportSettings:!1,userSettings:!1}).userSettings;this.canDisplayPrompt=!(null==p||!p.showPromptBannerPauseQueries),this.allowPauseQueries&&this.canDisplayPrompt&&this.detectPerformanceForPrompt()}},h.prototype.detectPerformanceForPrompt=function(){var p=this,D=new M.YM(this.localizationService);this.performanceObservable$=this.contextActivityService.getActivityStream().pipe((0,T.l4)(f.TV,f.Gb,f.xq,f.TH),(0,i.h)(function(x){var z=x.properties;return"Visual Container Lifecycle"===z.name||"Execute Change Detection"===z.name||"User Action"===z.name}),(0,n.U)(function(x){return x.properties}),(0,i.h)(function(x){return!!x.visualContainerName}),(0,O.R)(function(x,z){return z?D.logsUpdate({direction:M.wN.Ascending,type:M.aV.Chronological},[z],[]):[]},[]),(0,I.o)(function(){return p.isPromptEnabled()})).subscribe(function(x){if(x.length){var z=x[0],Q=z.performanceLog.visualContainerName;0===z.performanceLog.status?p.timeouts[Q]=setTimeout(function(){p.isPromptEnabled()&&p.showPromptBanner()},5e3):(clearTimeout(p.timeouts[Q]),p.timeouts[Q]=0)}})},h.prototype.isPromptEnabled=function(){return!this.isReportPaused()&&!this.notificationsList[c]&&this.canDisplayPrompt},h.prototype.canPauseQueries=function(){return this.allowPauseQueries},h.prototype.isReportPaused=function(){return this.pauseQueries$.getValue()},h.prototype.isReportPaused$=function(){return this.pauseQueries$.asObservable()},h.prototype.refreshVisuals=function(p,D){this.eventBridge.publishToChannel(V.visualContainerChanged,{affectContainer:function(z){return!p||z.name===p},refreshVisual:!D})},h.prototype.setPauseQueries=function(p){var D=this.navigationService.getCurrentExploration();!this.allowPauseQueries||!D||p===this.isReportPaused()||(D.settings?D.settings.pauseQueries=p:D.settings={pauseQueries:p},this.reportRefreshService.setRefreshPaused(p),this.pauseQueries$.next(p),this.canDisplayPrompt&&(this.clearNotification(c),this.disablePrompt()),p?(this.eventBridge.publishToChannel(V.cancelVisualQuery,{affectContainer:function(){return!0}}),this.showNotificationBar()):(this.refreshVisuals(void 0,!0),this.clearNotification(u)))},h.prototype.ngOnDestroy=function(){var D,p=this;this.channelSubscriptionManager.unsubscribeAll(),null===(D=this.capabilitiesSubscription)||void 0===D||D.unsubscribe(),this.performanceObservable$&&(this.performanceObservable$.unsubscribe(),Object.keys(this.timeouts).forEach(function(x){return p.timeouts[x]&&clearTimeout(p.timeouts[x])}))},h.prototype.clearNotification=function(p){""!==this.notificationsList[p]&&(this.notificationBarService.hide(this.notificationsList[p]),this.notificationsList[p]="")},h.prototype.showNotificationBar=function(){var p=this;this.notificationsList[u]=this.notificationBarService.notify({message:this.localizationService.get("Pause_Visual_Query_Info"),notificationType:6,secondaryLink:{displayText:this.localizationService.get("TenantSetting_AdminApisIncludeExpressions_DescriptionLink"),urlString:"https://go.microsoft.com/fwlink/?linkid=2204703&clcid=0x409"},actions:[{displayText:this.localizationService.get("Refresh"),action:function(){return p.refreshVisuals()}},{displayText:this.localizationService.get("Resume_Visual_Query"),action:function(){p.setPauseQueries(!1)}}]})},h.prototype.showPromptBanner=function(){var p=this;this.notificationsList[c]=this.notificationBarService.notify({message:this.localizationService.get("Paused_Visual_Query_Tip_Details"),notificationType:9,secondaryLink:{displayText:this.localizationService.get("TenantSetting_AdminApisIncludeExpressions_DescriptionLink"),urlString:"https://go.microsoft.com/fwlink/?linkid=2204703&clcid=0x409"},messageLabel:this.localizationService.get("Paused_Visual_Query_Tip"),onDismiss:function(){return p.clearNotification(c)},actions:[{displayText:this.localizationService.get("ReportAppBar_PauseVisual"),action:function(){p.setPauseQueries(!0),p.clearNotification(c)}},{displayText:this.localizationService.get("Paused_Visual_Dont_Show_Again"),action:function(){p.disablePrompt(),p.clearNotification(c)}}]})},h.prototype.disablePrompt=function(){this.reportViewSettingsService.getUserSettingService().setShowPromptBannerPauseQueries(!1),this.canDisplayPrompt=!1},h.\u0275fac=function(D){return new(D||h)(b.\u0275\u0275inject(P.J),b.\u0275\u0275inject(d.U),b.\u0275\u0275inject(g.o),b.\u0275\u0275inject(y.z),b.\u0275\u0275inject(S.S),b.\u0275\u0275inject(C.F),b.\u0275\u0275inject(B.vZ),b.\u0275\u0275inject(w.r),b.\u0275\u0275inject(A.a,8))},h.\u0275prov=b.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac}),h}()},86097:function(Le,oe,t){t.d(oe,{J:function(){return y}});var e=t(7005),n=t(31288),m=t(37946),i=t(59214),O=t(87714),I=t(44536),T=t(64857),f=t(93171),M=t(20010),A=t(26963),b=powerbi.explore.services.events,P=powerbi.host.global.events,y=function(){function C(d,g,S,B,w,V){var v=this;this.eventBridge=d,this.favoriteVisualLoader=g,this.featureSwitchService=S,this.globalEventBridge=B,this.visualPaneSettingsService=w,this.visualPluginService=V,this.destroy$=new n.xQ,this.featureSwitchService.featureSwitches.onObject&&(this.eventBridge.on(b.preparePersonalVisuals).pipe((0,m.R)(this.destroy$)).subscribe(function(c){v.preparePersonalVisualizationPane()}),this.globalEventBridge.on(P.SignInStatusChangedEvent).pipe((0,m.R)(this.destroy$)).subscribe(function(c){v.favoriteVisualLoader.reset(v.visualPluginService),v.visualPaneSettingsService.reset(),v.preparePersonalVisualizationPane()}),this.preparePersonalVisualizationPane())}return C.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},C.prototype.preparePersonalVisualizationPane=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(d){switch(d.label){case 0:if(!this.featureSwitchService.featureSwitches.onObject)return[2];d.label=1;case 1:return d.trys.push([1,,3,4]),[4,this.preparePersonalVisualizationPaneServices()];case 2:return d.sent(),[3,4];case 3:return this.eventBridge.publishToChannel(b.visualPluginsChanged),[7];case 4:return[2]}})})},C.prototype.preparePersonalVisualizationPaneServices=function(){return(0,e.mG)(this,void 0,void 0,function(){var d;return(0,e.Jh)(this,function(g){switch(g.label){case 0:if(d=[],this.featureSwitchService.featureSwitches.userFavoriteResourcePackagesEnabled&&d.push(this.favoriteVisualLoader.ensureFavoriteVisualResources(this.visualPluginService)),this.featureSwitchService.featureSwitches.tenantOutOfBoxVisualsEnabled&&d.push(this.favoriteVisualLoader.ensureOutOfBoxVisuals(this.visualPluginService)),_.isEmpty(d))return[2];g.label=1;case 1:return g.trys.push([1,,3,6]),[4,Promise.allSettled(d)];case 2:return g.sent(),[3,6];case 3:return this.featureSwitchService.featureSwitches.personalVisualizationPaneEnabled?[4,this.visualPaneSettingsService.updateVisuals()]:[3,5];case 4:g.sent(),g.label=5;case 5:return[7];case 6:return[2]}})})},C.\u0275fac=function(g){return new(g||C)(i.\u0275\u0275inject(O.J),i.\u0275\u0275inject(I.W),i.\u0275\u0275inject(T.vZ),i.\u0275\u0275inject(f.Z),i.\u0275\u0275inject(M.R),i.\u0275\u0275inject(A.D))},C.\u0275prov=i.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac}),C}()},16018:function(Le,oe,t){t.d(oe,{k:function(){return y}});var e=t(59214),n=t(78099),m=t(64875),i=t(49470),O=t(48568),I=t(554),T=t(33278),f=t(9266),M=t(26963),A=t(64857),b=powerbi.explore.util.VisualContainerUtils,P=powerbi.data.SQExpr,y=function(){function C(d,g,S,B,w,V,v,c,u){this.visualPluginService=V,this.visualPluginOps=v,this.visualCapabilitiesService=c,this.legacyService=powerbi.explore.services.createPinVisualService(d,g,S.create(),u,B,w,V,v,c)}return C.prototype.setHandler=function(d){this.legacyService.setHandler(d)},C.prototype.pinVisualContainer=function(d,g,S,B,w,V){this.legacyService.pinVisualContainer(d,g,S,B,w,V)},C.prototype.canPinVisualType=function(d){return powerbi.explore.services.canPinVisualType(this.visualPluginService,this.visualPluginOps,this.visualCapabilitiesService,d)},C.prototype.getPinData=function(d,g,S,B,w,V,v,c,u,r){return this.legacyService.getPinData(d,g,S,B,w,V,v,c,u,r)},C.prototype.getPinDataAsync=function(d,g,S,B,w,V){return this.legacyService.getPinDataAsync(d,g,S,B,w,V)},C.prototype.canPin=function(d){if(!d||b.hasGroupByItemsInQuery(d.contract))return!1;var g,S=d.getVisualType();g=this.canPinVisualType(S);var B=b.getSelectExprs(d.contract);return!_.some(B,function(w){return P.isSparklineData(w.expr)})&&g&&!d.showWatermark&&!!d.canPin},C.\u0275fac=function(g){return new(g||C)(e.\u0275\u0275inject(n.i),e.\u0275\u0275inject(i.O),e.\u0275\u0275inject(m.U),e.\u0275\u0275inject(f.o),e.\u0275\u0275inject(O.S),e.\u0275\u0275inject(M.D),e.\u0275\u0275inject(I.f),e.\u0275\u0275inject(T.N),e.\u0275\u0275inject(A.vZ))},C.\u0275prov=e.\u0275\u0275defineInjectable({token:C,factory:C.\u0275fac}),C}()},50512:function(Le,oe,t){t.d(oe,{G:function(){return i}});var e=t(75011),n=t(59214),m=powerbi.explore.contracts.AutoPageRefreshOption,i=function(){function O(I){this.changeDetectionRefreshService=I,this.noopPageRefreshStrategy=new e.$O}return O.prototype.create=function(I){switch(I){case 2:return this.changeDetectionRefreshService;case 0:case 1:return this.noopPageRefreshStrategy;default:return"autoPageRefreshStrategyKind=".concat(I," has not been implemented."),this.noopPageRefreshStrategy}},O.prototype.getActiveAutoRefreshStrategy=function(I){return I.evaluatedObjects&&I.evaluatedObjects.pageRefresh&&I.evaluatedObjects.pageRefresh.show?I.evaluatedObjects.pageRefresh.refreshType?this.toAutoRefreshStrategyKind(I.evaluatedObjects.pageRefresh.refreshType):1:0},O.prototype.toAutoRefreshStrategyKind=function(I){switch(I){case m.CDM:return 2;case m.APR:return 1;default:return"AutoPageRefreshStrategy: ".concat(I," has not been implemented"),0}},O.\u0275fac=function(T){return new(T||O)(n.\u0275\u0275inject(e.c9))},O.\u0275prov=n.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac}),O}()},62095:function(Le,oe,t){t.d(oe,{I:function(){return C}});var e=t(7005),n=t(75011),m=t(59214),i=t(44302),O=t(87714),I=t(20019),T=t(89718),f=t(17663),M=t(39907),A=t(50512),b=powerbi.common.constants,P=powerbi.explore.contracts.DataSource,y=powerbi.explore.services.events,C=function(){function d(g,S,B,w,V,v,c){this.telemetryService=g,this.eventBridge=S,this.explorationNavigation=B,this.dataSourcesService=w,this.dataProxy=V,this.visualTimeSynchronizationService=v,this.autoRefreshStrategyFactory=c,this.visualsRefreshing=!0,this.pageId="-1",this.refreshDelayedCount=0,this.refreshPaused=!1,this.autoRefreshStrategy=new n.$O,this.subscriptionManager=S.createChannelSubscriptionManager()}return d.prototype.init=function(){this.subscribeEvents()},d.prototype.destroy=function(){this.autoRefreshStrategy.stop(),this.subscriptionManager.unsubscribeAll()},d.prototype.refreshData=function(){var g=P.dataReaderDataSources(P.queried(this.dataSourcesService.get(),null));!g||(this.dataProxy.clearCache(b.dsrDataReaderType,g),this.eventBridge.publishToChannel(y.visualContainerChanged,{affectContainer:function(){return!0}}))},d.prototype.setRefreshPaused=function(g){this.refreshPaused=g},d.prototype.getRefreshStats=function(){return this.autoRefreshStrategy.getRefreshStats()},Object.defineProperty(d.prototype,"refreshStrategy",{get:function(){return this.autoRefreshStrategy.autoRefreshKind},enumerable:!1,configurable:!0}),d.prototype.subscribeEvents=function(){var g=this;this.subscriptionManager.subscribe(y.sectionChanged,function(){return g.onSectionChanged()}).subscribe(y.sectionObjectsEvaluated,function(){return g.onSectionsObjectsChanged()}).subscribe(powerbi.common.events.printSectionReady,function(){return g.onVisualsLoaded()}).subscribe(y.autoPageRefreshTriggered,function(){return g.onAutoPageRefreshTriggered()})},d.prototype.onSectionsObjectsChanged=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(g){switch(g.label){case 0:return[4,this.updateRefreshStrategy()];case 1:return g.sent(),[2]}})})},d.prototype.onSectionChanged=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(g){switch(g.label){case 0:return this.lastRefreshTime=void 0,[4,this.updateRefreshStrategy()];case 1:return g.sent(),[2]}})})},d.prototype.onVisualsLoaded=function(){this.visualsRefreshing=!1},d.prototype.onAutoPageRefreshTriggered=function(){this.triggerRefresh()},d.prototype.updateRefreshStrategy=function(){return(0,e.mG)(this,void 0,void 0,function(){var g,S,B;return(0,e.Jh)(this,function(w){switch(w.label){case 0:return(g=this.explorationNavigation.getCurrentSection())?(S=this.autoRefreshStrategy&&this.autoRefreshStrategy.autoRefreshKind,B=this.autoRefreshStrategyFactory.getActiveAutoRefreshStrategy(g),g.objectId!==this.pageId||B!==S?(this.pageId=g.objectId,this.autoRefreshStrategy.stop(),this.autoRefreshStrategy=this.autoRefreshStrategyFactory.create(B),[4,this.autoRefreshStrategy.resumeAsync()]):[3,2]):[2];case 1:w.sent(),w.label=2;case 2:return[2]}})})},d.prototype.calculateEffectiveInterval=function(){return this.lastRefreshTime?(new Date).getTime()-this.lastRefreshTime.getTime():void 0},d.prototype.triggerRefresh=function(){if(this.visualsRefreshing)return++this.refreshDelayedCount,void this.logTriggerRefresh(this.refreshDelayedCount);this.refreshPaused||(this.refreshDelayedCount=0,this.logTriggerRefresh(this.refreshDelayedCount),this.effectiveRefreshInterval=this.calculateEffectiveInterval(),this.lastRefreshTime=new Date,this.visualTimeSynchronizationService.setAnchorTimeToNow(),this.eventBridge.publishToChannel(y.dataRefreshTriggered),this.visualsRefreshing=!0)},d.prototype.logTriggerRefresh=function(g){var S=this.explorationNavigation.getCurrentExploration();if(S){var B=S.report,w=this.explorationNavigation.getExplorationTelemetryData(),V="",v=-1,c="",u="-1",r="-1";if(B&&B.model){var h=B.model;V=h.dbName,c=B.objectId,v=h.id}w&&(u=w.exid,r=w.exsid),this.telemetryService.logEvent(powerbi.telemetry.TriggerRefresh,{reportId:c,pageId:this.pageId,dbName:V,modelId:v,interval:this.effectiveRefreshInterval,delayCount:g,exid:u,exsid:r})}},d.\u0275fac=function(S){return new(S||d)(m.\u0275\u0275inject(i.y0),m.\u0275\u0275inject(O.J),m.\u0275\u0275inject(I.z),m.\u0275\u0275inject(T.D),m.\u0275\u0275inject(M.d),m.\u0275\u0275inject(f.a),m.\u0275\u0275inject(A.G))},d.\u0275prov=m.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac}),d}()},48801:function(Le,oe,t){t.d(oe,{V:function(){return T}});var e=t(64450),n=t(76199),m=t(59214),i=t(64857),O=t(44536),I=t(84855),T=function(){function f(M,A,b,P,y){this.promiseFactory=M,this.managedCustomVisualsService=A,this.featureSwitchService=b,this.favoriteVisualLoader=P,this.resourcePackageHttp=y}return f.prototype.copyResourcePackageIfNeeded=function(M,A,b){var P=this,y=[],C=!1,d=!1;if(this.featureSwitchService.featureSwitches.userFavoriteResourcePackagesEnabled){y.push(this.favoriteVisualLoader.isFavoriteResourcePackage(M).then(function(w){return C=w}));var g=this.promiseFactory.defer();this.managedCustomVisualsService.isOrgVisualByResourcePackageId(M).then(function(w){return g.resolve(w)}).catch(function(){return g.reject()}),y.push(g.promise.then(function(w){return d=w}))}var S=!1;if(this.featureSwitchService.featureSwitches.manageMarketplaceVisuals){var B=this.promiseFactory.defer();this.managedCustomVisualsService.isPublicManagedVisualById(M).then(function(w){return B.resolve(w)}).catch(function(){return B.reject()}),y.push(B.promise.then(function(w){return S=w}))}return this.promiseFactory.all(y).then(function(w){return C&&!d||S?P.resourcePackageHttp.copyResourcePackage(M,A,b):P.promiseFactory.resolve(null)})},f.\u0275fac=function(A){return new(A||f)(m.\u0275\u0275inject(e.t),m.\u0275\u0275inject(n.D),m.\u0275\u0275inject(i.vZ),m.\u0275\u0275inject(O.W),m.\u0275\u0275inject(I.v))},f.\u0275prov=m.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"}),f}()},40717:function(Le,oe,t){t.d(oe,{ed:function(){return f}});var e=t(7005),n=t(59214),m=t(46398),i="__@ngrx/effects_create__",I=function(){function M(A){this.instance=A,this.subscription=new m.w;for(var b=function(M){return Object.getOwnPropertyNames(M).filter(function(b){return M[b]&&M[b].hasOwnProperty(i)}).map(function(b){return(0,e.pi)({propertyName:b},M[b][i])})}(A),y=0,C=b.map(function(g){return A[g.propertyName]});y<C.length;y++)this.subscription.add(C[y].subscribe())}return M.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},M.\u0275fac=function(b){n.\u0275\u0275invalidFactory()},M.\u0275prov=n.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}(),T=new n.InjectionToken("SCOPED_EFFECT_TOKEN");function f(M){return{token:T,providers:[M,{provide:T,useClass:I,deps:[M]}]}}},47704:function(Le,oe,t){t.d(oe,{Eo:function(){return T},v_:function(){return O}});var e=t(59214),n=t(92119),m=t(87714),i={},O=function(){function f(){this.scopes=[]}return f.prototype.addScopedRoot=function(M){var A=_.find(this.scopes,function(b){return b.injector===M});A?++A.count:this.scopes.push({injector:M,count:1})},f.prototype.removeScopedRoot=function(M){var A=_.findIndex(this.scopes,function(b){return b.injector===M});-1!==A&&--this.scopes[A].count<=0&&this.scopes.splice(A,1)},f.prototype.getTheScopedService=function(M){if(this.scopes.length){var y=this.scopes[0].injector.get(M,i);if(y!==i)return y}},f.prototype.sendChannelEvent=function(M,A){var b=this.getTheScopedService(m.J);return!!b&&(b.publishToChannel(M,A),!0)},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac=function(A){return new(A||f)},providedIn:"root"}),f}();function I(f,M){return M.addScopedRoot(f),{update:function(){},destroy:function(){return M.removeScopedRoot(f)}}}function T(f){return(0,n.HZ)(f,{provide:I,useFactory:I,deps:[e.Injector,O]})}},59017:function(Le,oe,t){t.d(oe,{g:function(){return i}});var e=t(72249),n=t(59214),i=function(){function O(){this.settingChangedInternal$=new e.X(void 0),this.showGridlines=!1,this.showGridlinesMobile=!0,this.snapToGrid=!1,this.snapToGridMobile=!0,this.lockObjects=!1,this.lockObjectsMobile=!1}return Object.defineProperty(O.prototype,"settingChanged$",{get:function(){return this.settingChangedInternal$.asObservable()},enumerable:!1,configurable:!0}),O.prototype.getShowGridlines=function(){return this.showGridlines},O.prototype.setShowGridlines=function(I,T){this.setValueAndNotify("ShowGridlines",I)},O.prototype.getShowGridlinesMobile=function(){return this.showGridlinesMobile},O.prototype.setShowGridlinesMobile=function(I,T){this.setValueAndNotify("ShowGridlinesMobile",I)},O.prototype.getShowQnaVisualBanner=function(){return this.showQnaVisualBanner},O.prototype.setShowQnaVisualBanner=function(I){this.setValueAndNotify("ShowQnaVisualBanner",I)},O.prototype.getShowSmartGuides=function(){return this.showSmartGuides},O.prototype.setShowSmartGuides=function(I){this.setValueAndNotify("ShowSmartGuides",I)},O.prototype.getSnapToGrid=function(){return this.snapToGrid},O.prototype.setSnapToGrid=function(I,T){this.setValueAndNotify("SnapToGrid",I)},O.prototype.getSnapToGridMobile=function(){return this.snapToGridMobile},O.prototype.setSnapToGridMobile=function(I,T){this.setValueAndNotify("SnapToGridMobile",I)},O.prototype.getDefaultSectionVerticalAlignment=function(){return this.sectionVerticalAlignment},O.prototype.setDefaultSectionVerticalAlignment=function(I){this.setValueAndNotify("SectionVerticalAlignment",I)},O.prototype.getLockObjects=function(){return this.lockObjects},O.prototype.setLockObjects=function(I){this.setValueAndNotify("LockObjects",I)},O.prototype.getLockObjectsMobile=function(){return this.lockObjectsMobile},O.prototype.setLockObjectsMobile=function(I){this.setValueAndNotify("LockObjectsMobile",I)},O.prototype.getSuggestVisualByDefault=function(){return this.suggestVisualByDefault},O.prototype.setSuggestVisualByDefault=function(I){this.setValueAndNotify("suggestVisualByDefault",I)},O.prototype.getShowAllVisualTypeByDefault=function(){return this.showAllVisualTypeByDefault},O.prototype.setShowAllVisualTypeByDefault=function(I){this.setValueAndNotify("showAllVisualTypeByDefault",I)},O.prototype.setValueAndNotify=function(I,T){var M=I.substr(0,1).toLowerCase().concat(I.substring(1)),b=this[M];this[M]=T,_.isEqual(b,T)||this.settingChangedInternal$.next(I)},O.\u0275prov=n.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac=function(T){return new(T||O)},providedIn:"root"}),O}()},73972:function(Le,oe,t){t.d(oe,{P:function(){return T}});var e=t(64450),n=t(59214),m=t(89515),i=t(44302),O=t(41844),I=t(26963),T=function(){function f(M,A,b,P,y){this.legacyService=powerbi.explore.services.createShowValueAsService(M,A,b,P,y)}return f.prototype.createShowValueAsMenuItems=function(M,A,b){return this.legacyService.createShowValueAsMenuItems(M,A,b)},f.prototype.applyShowValueAs=function(M,A,b){return this.legacyService.applyShowValueAs(M,A,b)},f.\u0275fac=function(A){return new(A||f)(n.\u0275\u0275inject(m.o),n.\u0275\u0275inject(e.t),n.\u0275\u0275inject(i.y0),n.\u0275\u0275inject(O.$),n.\u0275\u0275inject(I.D))},f.\u0275prov=n.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac}),f}()},41359:function(Le,oe,t){t.d(oe,{s:function(){return w}});var e=t(7005),n=t(31970),m=t(14545),i=t(59214),O=t(78099),I=t(70886),T=t(89718),f=t(86718),M=t(14178),A=t(89515),b=t(44302),P=t(41844),y=powerbi.data.services.SemanticQuerySerializer,C=powerbi.data.SQExpr,d=powerbi.data.SQExprBuilder,S=(powerbi,powerbi.explore.util.VisualContainerUtils),w=function(){function V(v,c,u,r,h,p,D,x){this.conceptualSchemaProxy=v,this.dialogService=c,this.dataSources=u,this.localizationService=r,this.selectionService=h,this.telemetryService=p,this.visualAuthoringService=D,this.dataSourcesSerializerService=x}return V.prototype.showCreateDialog=function(v){var c;return(0,e.mG)(this,void 0,void 0,function(){var u,r;return(0,e.Jh)(this,function(p){switch(p.label){case 0:return(u=this.getSingleSelectedVisualContainer())?(r=S.getSelectExprs(u),(null===(c=_.filter(r,function(D){return C.isSparklineData(D.expr)}))||void 0===c?void 0:c.length)<5?[2,this.showDialog(v,void 0,!1)]:[3,1]):[2];case 1:return[4,this.showErrorDialog()];case 2:p.sent(),p.label=3;case 3:return[2]}})})},V.prototype.showEditDialog=function(v){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(c){return C.isSparklineData(v)?[2,this.showDialog(v.measure,_.first(v.grouping),!0)]:[2]})})},V.prototype.addSparklinesToVisual=function(v,c,u){return(0,e.mG)(this,void 0,void 0,function(){var r;return(0,e.Jh)(this,function(h){return r=d.sparklineData(v,[c]),[2,this.visualAuthoringService.addFieldToVisual(r,this.dataSources.get(),u)]})})},V.prototype.updateSparklinesExpr=function(v,c,u,r,h){return(0,e.mG)(this,void 0,void 0,function(){var p;return(0,e.Jh)(this,function(D){return p=d.sparklineData(v,[c]),[2,this.visualAuthoringService.replaceField(p,r,h,u,this.dataSources.get())]})})},V.prototype.showDialog=function(v,c,u){return(0,e.mG)(this,void 0,void 0,function(){var r,h,p,D,x;return(0,e.Jh)(this,function(q){switch(q.label){case 0:r=this.telemetryService.startEvent(m.wJ,{isEdit:u}),q.label=1;case 1:return q.trys.push([1,4,5,7]),p=this.dataSources.get(),D={selectedMeasure:v?y.serializeExpr(v):void 0,selectedGrouping:c?y.serializeExpr(c):void 0,dataSources:this.dataSourcesSerializerService.serializeDataSources(p)},x={title:this.localizationService.get(u?"Sparkline_EditOption":"Sparkline_AddOption"),input:D,hideOkButton:!1,hideCancelButton:!u,okButtonDisabled:!u,okButtonText:u?void 0:this.localizationService.get("Create_ButtonText"),isDraggable:!0,focusInitialCloseButton:!0},[4,this.dialogService.showTemplateDialog(n.nb,x,{width:"452px"})];case 2:return[4,q.sent().afterClosed().toPromise()];case 3:return h=q.sent(),[3,7];case 4:return q.sent(),[3,7];case 5:return[4,this.resolveEvent(r,h)];case 6:return q.sent(),[7];case 7:return[2,h]}})})},V.prototype.showErrorDialog=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(v){return this.telemetryService.logEvent(m.Sw),this.dialogService.showSimpleInfoDialog({title:this.localizationService.get("Sparkline_Dialog_ErrorTitle"),message:this.localizationService.get("Sparkline_Dialog_ErrorMessage"),okButtonText:this.localizationService.get("ModalDialogButtonText_GotIt"),titleIcon:"pbi-glyph-error"}),[2]})})},V.prototype.resolveEvent=function(v,c){return(0,e.mG)(this,void 0,void 0,function(){var u,r,h,p,D,z;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return v.event.info.dialogCloseAction=c?"Apply":"Close",c?[4,this.conceptualSchemaProxy.get(this.dataSources.get())]:[3,2];case 1:u=Q.sent(),r=y.deserializeExpr(c.grouping),h=y.deserializeExpr(c.measure),p=d.sparklineData(h,[r]),D=powerbi.explore.util.SparklinesUtil.getFieldCharacteristics(p,u),z=D.measureType,v.event.info.groupingType=D.groupingType,v.event.info.measureType=z,Q.label=2;case 2:return v.resolve(),[2]}})})},V.prototype.getSingleSelectedVisualContainer=function(){var v=this.selectionService.getSelectedElements();if(1===v.length){var c=v[0].canvasItem;return powerbi.explore.contracts.isVisualContainer(c)?c:void 0}},V.\u0275fac=function(c){return new(c||V)(i.\u0275\u0275inject(O.i),i.\u0275\u0275inject(I.x),i.\u0275\u0275inject(T.D),i.\u0275\u0275inject(A.o),i.\u0275\u0275inject(f.z),i.\u0275\u0275inject(b.y0),i.\u0275\u0275inject(P.$),i.\u0275\u0275inject(M._))},V.\u0275prov=i.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}()},97147:function(Le,oe,t){t.d(oe,{Q:function(){return A},_:function(){return M}});var e=t(61723),n=t(59214),m=t(20019),i=t(11719),O=t(41770),I=t(64857),T=powerbi.explore.util.VisualTooltipStyleUtils,f=powerbi.explore.util.VisualContainerUtils,M=function(){function b(P,y,C,d){this.explorationNavigation=P,this.viewModeState=y,this.themeService=C,this.featureSwitchService=d}return b.prototype.getTooltipStyle=function(P){var y,C,d=this.explorationNavigation.getCurrentExploration(),g=this.viewModeState.getConfig().displayOptions.enableMobileTooltipActions,S=null===(y=null==d?void 0:d.settings)||void 0===y?void 0:y.useEnhancedTooltips,B=this.themeService.getVisualStyle(null==d?void 0:d.themeCollection),w=null===(C=f.getSingleVisualConfig(P))||void 0===C?void 0:C.evaluatedObjects;return!w&&P&&(w=f.evaluateObjectDefinitions((null==d?void 0:d.themeCollection)||{},this.themeService,P,this.featureSwitchService.featureSwitches).dataViewObjects),T.getVisualTooltipStyles(B,S,g,w&&w.visualTooltip,this.featureSwitchService.featureSwitches.newMobileTooltip)},b.\u0275fac=function(y){return new(y||b)(n.\u0275\u0275inject(m.z),n.\u0275\u0275inject(i.kc),n.\u0275\u0275inject(O.f),n.\u0275\u0275inject(I.vZ))},b.\u0275prov=n.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}(),A={provide:e.e,useClass:M}},11719:function(Le,oe,t){t.d(oe,{kc:function(){return f}});var e=t(72249),n=t(59214),m=t(7772),i=jsCommon.FreezeUtility,f=function(){function b(P){this.contextActivityService=P,this.config$=new e.X(void 0),this.viewMode$=new e.X(void 0),this.config={supportsPinning:void 0,supportsDeletion:void 0,enablePenAnnotation:!1,visualDoubleClickEnabled:!1,displayOptions:{canShowCanvasWatermark:!1,showVisualBordersInViewMode:!1,hideVisualizationPane:!1,hideTileMenu:!1,hideNavigationPane:!1,disableFadeout:!1,showExportDataPane:!1,showMobilePane:!1,hideInFocusBar:!1,hideInFocusTileMenu:!1,visualMouseoverDisabled:!1,hideCanvasSwipeHandles:!1,extendBackgroundToWholeCanvas:!1,hideOutspaceFormatting:!1,hideOutspaceImage:!1,hideBackgroundImage:!1,showMobileScorecardVisualBanner:!1,showVisualAccessibleData:!1,showDetailVisualOnFullScreen:!1,disableSpotlight:!1,enableMobileTooltipActions:!1,enableTooltipActions:!0,showDrillthroughFilters:!1,useMobileExplorationFooter:!1,showTooltipAboveClick:!1,showMobileVisualContainerHeader:!1,preserveScrollPositionOnResize:!1,mobileBookmarksMenuDisplay:0,enableMobileFilters:!1,disablePixelValueRounding:!1,scaleBackgroundImageToWidth:!1,enableMobileInsights:!1,showVisualOnSelectFadeOut:!1,hideNewCanvasScrollbar:!1,hideInsightsPane:!1,mobileInsightsDisplayOption:void 0,hideQuickExplorePane:!1,forceCenteredVerticalAlignment:!1,scaleTooltipWithCanvasZoom:!1},touchOptions:{deselectVisualOnCanvasScroll:!1,disableCanvasScrollOnSelectedVisual:!1,disableTouchZoom:!1,isCanvasSwipeable:!0,swipeOnlyFromEdge:!1,swipeEdgeThreshold:void 0,touchEventsOnSelectedVisualOnly:!1,disableCanvasPinch:!0,disableTouchendOnTooltip:!1,dataMultiSelectMode:0},penProperties:{strokeStyle:"#939598",lineWidth:20,opacity:1},printProperties:{useSectionDisplayOption:!1}},this.freeze(),this.syncConfig$(),this.state={},this.formatModeSubject=new e.X(!1),this.formatMode$=this.formatModeSubject}return b.prototype.getViewState=function(){return this.state},b.prototype.getMode=function(){return this.mode},b.prototype.getMode$=function(){return this.viewMode$.asObservable()},b.prototype.setMode=function(P){this.mode=P,this.viewMode$.next(P)},b.prototype.getConfig=function(){return this.frozenConfig},b.prototype.getConfig$=function(){return this.config$.asObservable()},b.prototype.updateConfig=function(P){P&&(P(this.config),this.config.displayOptions.showMobilePane&&(this.state.bookmarkView=void 0),this.freeze()),this.syncConfig$()},b.prototype.getBookmarkViewState=function(){return this.state.bookmarkView},b.prototype.setBookmarkViewState=function(P){this.state.bookmarkView=P},b.prototype.setFormatMode=function(P,y){var d=function(b,P,y){return P.createActivity({name:b,data:{source:y}})}(P?"Switch To Format Mode":"Switch From Format Mode",this.contextActivityService,y);this.formatModeSubject.next(P),d.resolve()},b.prototype.getFormatMode=function(){return this.formatModeSubject.value},b.prototype.freeze=function(){var P=_.cloneDeep(this.config);i.deepFreeze(P),this.frozenConfig=P},b.prototype.syncConfig$=function(){this.config$.next(this.getConfig())},b.\u0275fac=function(y){return new(y||b)(n.\u0275\u0275inject(m.r))},b.\u0275prov=n.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}()},57644:function(Le,oe,t){t.d(oe,{Q:function(){return Ue}});var e=t(7005),n=t(45131),m=t(72606),i=t(59214),O=t(26963),I=t(554),T=t(49470),f=t(20019),M=t(86718),A=t(61123),b=t(45927),P=t(87714),y=t(41738),C=t(61034),d=t(76115),g=t(69255),S=t(42645),B=t(40152),w=t(13922),V=t(25183),v=t(7772),c=t(44302),u=t(64857),r=t(51081),h=t(78381),p=t(89515),D=t(11719),x=t(8576),z=t(22422),Q=t(59017),q=powerbi.visuals.ActionButtonType,de=jsCommon.ArrayExtensions,se=powerbi.explore.util.CanvasVisualsUtility,Ie=powerbi.explore.constants,fe=powerbi.data.DataBoundExprExtractor,re=powerbi.data.DataViewObjectDefinitions,pe=powerbi.data.DataViewRoleWildcard,ge=powerbi.explore.util.DrillUtils,be=powerbi.explore.services.events,ae=powerbi.explore.constants.ExploreCanvasConstants,X=powerbi.data.FieldExprPattern,le=powerbi.explore.contracts.FilterType,ee=powerbi.explore.FilterUtils,N=powerbi.explore.util.getTelemetryFieldKind,F=powerbi.explore.util.HierarchyUtils,E=powerbi.visuals.horizontalAlignment,k=powerbi.ItemGroupingManager,R=powerbi.visuals.plugins,W=powerbi.explore.PodUtils,Z=powerbi.PrimitiveTypeNames,me=powerbi.Prototype,_e=powerbi.data.QueryProjectionsByRole,he=powerbi.contracts.ResourcePackageItemType,G=powerbi.ScriptResultUtil,ce=powerbi.explore.services.selectionUtils,Fe=powerbi.data.SemanticFilter,je=powerbi.visuals.SmallMultiplesUtils,Oe=powerbi.explore.util.SparklinesUtil,J=powerbi.data.SQExpr,ue=powerbi.data.SQExprBuilder,Me=powerbi.data.SQExprConverter,Se=powerbi.data.SQExprHierarchyToHierarchyLevelConverter,Ge=powerbi.data.SQExprUtils,nt=powerbi.data.SQHierarchyExprUtils,st=powerbi.data.SQScopedEvalExpr,yt=powerbi.visuals.TablixProperties,Ae=powerbi.telemetry,Ve=powerbi.ValueType,xe=powerbi.explore.viewModels,Pe=powerbi.explore.contracts.VisualContainer,et=powerbi.explore.contracts.VisualContainerGroup,$e=powerbi.explore.util.VisualContainerUtils,lt=powerbi.VisualDataRoleKind,Pt=powerbi.explore.contracts.VisualLink,Ct=powerbi.explore.contracts.VisualQuery,Ue=function(){function ve(a,o,l,s,L,U,H,ne,te,Ce,ye,we,Te,De,Re,Ze,Ye,qe,at,it,pt,ct,vt,Mt,bt,Tt,Et){void 0===Et&&(Et=new n.I);var Ft=this;this.visualPluginService=a,this.pluginOps=o,this.displayNameService=l,this.contextActivityService=s,this.telemetry=L,this.explorationNavigationService=U,this.selectionService=H,this.geotaggingAnalyzerService=ne,this.explorationSerializer=te,this.eventBridge=Ce,this.featureSwitchService=ye,this.sortService=we,this.visualRelationshipService=Te,this.drill=De,this.expandCollapse=Re,this.filterGenerator=Ze,this.aggrOps=Ye,this.resourceRegistration=qe,this.formFactorProvider=at,this.localizationService=it,this.viewModeState=pt,this.layoutAuthoring=ct,this.explorationCapabilities=vt,this.runningVisualService=Mt,this.visualAuthoringCustomizeOperations=bt,this.settingsService=Tt,this.linguisticSchemaProxy=Et,this.updateFilterState=function(tt,Bt,Ut,Rt,Gt,Qt,jt){var Xt=Ft.core.updateFilterState(tt,Bt,Ut,Rt,Gt,Qt);Xt.clearOrDefault?Ft.notifyVisualContainers([Bt],"UserAction_ChangeFilter",!0,tt):Ft.notifyVisualContainers([Bt],"UserAction_ChangeFilter",Xt.updateAll,tt,void 0,jt)},this.core=powerbi.explore.services.createVisualAuthoringCore(a,ne,Ye,ye,bt,l)}return ve.prototype.logSmallMultiplesTelemetry=function(a,o,l,s,L){var U,H,ne=null===(U=a.config)||void 0===U?void 0:U.singleVisual;if(ne&&s===powerbi.visuals.cartesianRoleNames.rows&&je.supportsSmallMultiplesDataViewMapping(null==l?void 0:l.dataViewMappings)){var te=null===(H=ne.query)||void 0===H?void 0:H.projections;te&&te[powerbi.visuals.cartesianRoleNames.rows]&&1===te[powerbi.visuals.cartesianRoleNames.rows].all().length&&this.telemetry.logEvent(Ae.EXSmallMultiplesFirstField,{source:L,targetVisualType:o,visualName:a.name})}},ve.prototype.updateVisualCalculation=function(a,o,l,s,L){var U,ne=null===(U=a.config.singleVisual)||void 0===U?void 0:U.query;if(!ne)return!1;var te=ne.getQueryRef(l,{fieldIndex:o}),ye=ne.defn.select().withName(te).nativeReferenceName===s?s:m.ND(ne,s);return this.core.updateVisualCalculation(a.config,o,l,ye,L)},ve.prototype.toggleFieldHidden=function(a,o,l,s,L){var H=l.config.singleVisual.query;if(!H)return!1;var ne=H.tryGetExpr(a,o);if(!ne||!Ge.isMeasure(ne))return!1;if(this.core.toggleHidden(H,a,o),this.isVisualRecommendationAllowed(l)){var te=L.updateWithRecommendation(l,void 0,s);null!=te&&l.config.singleVisual.visualType!==te&&(l.config.singleVisual.autoSelectVisualType=!0,l.config.singleVisual.visualType=te)}return!0},ve.prototype.switchQueryParameter=function(a,o,l,s,L){var te,Ce,U=o.config.singleVisual.query,H=U.tryGetFieldExprs(s)[l],ne=H.isFieldParameter;if(ne)te=null==(Ce=U.getParameterByFieldIndex(l,s))?void 0:Ce.expr;else if(J.isAggregation(H.expr)&&(te=H.expr.arg.getTargetColumnRef(a)),te||(te=H.expr),!Ge.shouldUseAsFieldParameter(this.featureSwitchService.featureSwitches.fieldParametersAuthoring,a,te,this.featureSwitchService.featureSwitches.fieldParameterDynamicSlicer||!this.filterGenerator.supportsFilterOutput(o),this.isAnalysisVisual(o)))return!1;return!(!te||!this.removeFieldFromRole({role:s,projOptions:{fieldIndex:l,parameter:Ce}},a,o)||!this.addFieldInRole(a,te,s,o,l,!1,!1,ne?2:3)||(this.isVisualRecommendationAllowed(o)&&(null==L||L.updateWithRecommendation(o,void 0,a)),this.telemetry.logEvent(Ae.EXSwitchQueryParameter,{fromMetadataToData:ne,visualType:$e.getVisualType(o),visualName:o.name,role:s}),0))},ve.prototype.addFieldToVisual=function(a,o,l,s,L,U){var H;if(!l)return!1;var ne=Ge.shouldUseAsFieldParameter(this.featureSwitchService.featureSwitches.fieldParametersAuthoring,a,o,!this.filterGenerator.supportsFilterOutput(l),this.isAnalysisVisual(l)),te=ne?"FieldParameter":N(o),Ce=this.contextActivityService.createActivity({name:"UpdateField",visualName:l.name,data:{fieldKinds:[te],operationType:"Add",source:"CheckboxTickedInFieldList"===L?"FieldList":"DraggedToFieldWell"===L?"FieldWell":"Visual"}});this.core.ensureFiltersArrayIsValid(l.filters);var Re,ye=l.config.singleVisual,we=ye.query,Te=this.visualPluginService.capabilities(ye.visualType),De={visualContainer:l,isFieldParameter:ne,expr:o,capabilities:Te,schema:a,hideOnOverflow:U},Ze=this.core.captureCurrentActiveProjectionsByRole(l);ne?(Re=this.addExpressionToVisual(De),this.isVisualRecommendationAllowed(l)&&Re&&(null==s||s.updateWithRecommendation(l,void 0,a))):Re=this.isVisualRecommendationAllowed(l)?null!=(Ye=null==s?void 0:s.updateWithRecommendation(l,{toAdd:o},a)):this.addHierarchyLevelToExistingHierarchiesInVisual(De)||this.addExpressionToVisualWithoutAggregation(De)||this.addExpressionToVisualForcingAggregation(De)||this.addExpressionToVisual(De);var qe=o.getConceptualProperty(a),at=qe&&qe.measure&&qe.measure.template&&qe.measure.template.name;if(Re){var it=null===(H=ye.query)||void 0===H?void 0:H.getRoleNameForExpr(o);if(void 0===it&&"CheckboxTickedInFieldList"===L&&(it=this.getTargetRoleAndExpressionsForAdd(a,l,o).targetRole),this.runAddFieldValidation(l,a,o,ne,void 0,it,Ze,L),void 0!==L){var Ye=$e.getVisualType(l);this.telemetry.logEvent(Ae.EXAddField,{source:L,targetVisualType:Ye,fieldKind:te,drillToDetailsMode:$e.hasGroupByItemsInQuery(l),success:!0,quickMeasureTemplateName:at,visualName:l.name}),this.logSmallMultiplesTelemetry(l,Ye,Te,it,L)}return Ce.resolve(),!0}return l.config.singleVisual.query=we,void 0!==L&&this.telemetry.logEvent(Ae.EXAddField,{source:L,targetVisualType:$e.getVisualType(l),fieldKind:te,drillToDetailsMode:$e.hasGroupByItemsInQuery(l),success:!1,quickMeasureTemplateName:at,visualName:l.name}),Ce.reject(),!1},ve.prototype.addFieldInRole=function(a,o,l,s,L,U,H,ne,te,Ce){var ye;switch(void 0===ne&&(ne=1),this.core.ensureFiltersArrayIsValid(s.filters),ne){case 1:ye=Ge.shouldUseAsFieldParameter(this.featureSwitchService.featureSwitches.fieldParametersAuthoring,a,o,!this.filterGenerator.supportsFilterOutput(s),this.isAnalysisVisual(s));break;case 2:ye=!1;break;case 3:ye=!0}var De,we=ye?"FieldParameter":N(o),Te=this.contextActivityService.createActivity({name:"UpdateField",visualName:s.name,data:{fieldKinds:[we],operationType:"Add",source:"FieldWell"}}),Re=this.core.captureCurrentActiveProjectionsByRole(s);if(this.isVisualRecommendationAllowed(s)&&null==l)ye?(De=this.addExpressionToVisual({schema:a,visualContainer:s,expr:o,isFieldParameter:ye,hideOnOverflow:Ce}),null==te||te.updateWithRecommendation(s,void 0,a)):De=!(null==te||!te.updateWithRecommendation(s,{toAdd:o},a));else{var Ze=void 0,Ye=this.getVisualDataRole(s,l);!ye&&!this.shouldPreferGroupToAggregate(a,o,ye,s,Ye)&&(U||(o=this.createExprWithAggregate(o,a,!0,Ye),Ze=!0));var qe=void 0;if(ye)qe=o;else{var at=this.canHierarchyLevelJoinExistingGroup(a,s.config.singleVisual.query,l,o,L),it=this.getTargetRoleAndExpressionsForAdd(a,s,o,l,H);qe=Ze||at?o:it&&it.expressions}(De=this.core.add({expr:qe,schema:a,targetRole:l,projOptions:{fieldIndex:L},hideOnOverflow:Ce},s.config,ye))&&($e.getSingleVisualConfig(s).autoSelectVisualType=void 0)}var ct=o.getConceptualProperty(a),vt=ct&&ct.measure&&ct.measure.template&&ct.measure.template.name;if(De){this.runAddFieldValidation(s,a,o,ye,void 0,l,Re);var Mt=$e.getVisualType(s);this.telemetry.logEvent(Ae.EXAddField,{source:"DraggedToFieldWell",targetVisualType:Mt,fieldKind:we,drillToDetailsMode:$e.hasGroupByItemsInQuery(s),success:!0,quickMeasureTemplateName:vt,visualName:s.name});var bt=this.visualPluginService.capabilities(Mt);return this.logSmallMultiplesTelemetry(s,Mt,bt,l,"DraggedToFieldWell"),Te.resolve(),!0}return this.telemetry.logEvent(Ae.EXAddField,{source:"DraggedToFieldWell",targetVisualType:$e.getVisualType(s),fieldKind:we,drillToDetailsMode:$e.hasGroupByItemsInQuery(s),success:!1,quickMeasureTemplateName:vt,visualName:s.name}),Te.reject(),!1},ve.prototype.resolveParameters=function(a,o,l){var s=this.core.resolveParameters(a,o,l,this.drill,this.sortService,this.setDisplayNameAlias.bind(this)),L=s.queryChange,U=s.aliasChange,ne=s.totalAddAttemptCount,te=s.totalAddSuccessCount,Ce=s.totalRemoveAttemptCount,ye=s.totalRemoveSuccessCount,we=s.totalSuccessColumnCount,Te=s.totalSuccessDateHierarchyCount,De=s.totalSuccessMeasureCount;if(L){s.outputFilterChange&&this.notifyVisualContainers([o],void 0,!0,a,2);var Re=$e.getVisualType(o);this.telemetry.logEvent(Ae.EXResolveParameters,{targetVisualType:Re,addSuccessTotalCount:te,addAttemptTotalCount:ne,addSuccessTotalColumnCount:we,addSuccessTotalDateHierarchyCount:Te,addSuccessTotalMeasureCount:De,removeSuccessCount:ye,removeAttemptCount:Ce,visualName:o.name})}return{aliasChange:U,queryChange:L}},ve.prototype.setDisplayNameAlias=function(a,o,l,s){var L=a.config.singleVisual,U=L.query,H=L.columnProperties;if(!U||U.getParameterByFieldIndex(o.fieldIndex,l))return!1;var De,ne=U.getQueryRef(l,o);if(s){var te=U.defn.select(),Ce=te.withName(ne);if("While renaming the target field, ".concat(ne," does not exist in the visual"),Ce&&J.isNativeVisualCalc(Ce.expr)){var ye=Ce.expr,we=ye.name;return!!this.updateVisualCalculation(a,o.fieldIndex,l,s,ye.expression)&&we!==s}L.columnProperties||(L.columnProperties=H={}),(De=H[ne])||(H[ne]=De={});var Re=De.displayName;De.displayName=s;var Ze=De.displayName!==Re;if(null!=(null==Ce?void 0:Ce.nativeReferenceName)&&Ze){var Ye=m.ND(U,s),qe=de.indexWithName(te,ne);U.setNativeReferenceNameAt(qe,Ye)}return Ze}return H?!!(De=H[ne])&&(Re=De.displayName,delete De.displayName,void 0!==Re):void 0},ve.prototype.runAddFieldValidation=function(a,o,l,s,L,U,H,ne){s?this.notifyVisualContainers([a],"UserAction_EditVisual",!1,o,1):this.core.runAddFieldValidation(a,o,l,this.drill,this.sortService,this.updateFilterState,L,U,H,ne)},ve.prototype.expandHierarchy=function(a,o,l,s,L){var U=(o.config.singleVisual.query.tryGetExprs(l)||[]).slice(s,s+L);if(_.isEmpty(U))return!1;var H=U[0];if(J.isHierarchyLevel(H)){var te=nt.expandExpr(a,H.arg);if(_.isArray(te)){var Ce=te.length;if(L<Ce){for(var ye=o.config.singleVisual.query,we=!1,Te=0;Te<Ce;Te++)if(!J.equals(ye.tryGetExpr(l,s+Te),te[Te])){if(!this.core.add({expr:te[Te],schema:a,targetRole:l,projOptions:{fieldIndex:s+Te}},o.config,!1))break;this.core.setMatchingFilterToAuto(te[Te],o),we=!0}return we&&this.notifyVisualContainers([o]),we}}}return!1},ve.prototype.removeFieldFromAllRoles=function(a,o,l,s){var L;L=s||ce.getSelectedVisualContainers(this.selectionService);var U=!1,H=this.tryGetParameterExprs(a,L);if(!_.isEmpty(H))for(var ne=0,te=H;ne<te.length;ne++){var Ce=te[ne];U=this.removeFieldImpl(Ce.exprs,L,o,l,"FieldParameter",Ce.parameter)||U}U=this.removeFieldImpl(a,L,o,l,N(a))||U;var Te=nt.expandExpr(o,a,!0);return _.isArray(Te)&&!_.isEmpty(Te)&&(U=this.removeFieldImpl(Te,L,o,l,"HierarchyLevel")||U),U},ve.prototype.tryGetParameterExprs=function(a,o){for(var l=[],s=o.length-1;s>-1;s--){var H=o[s].config.singleVisual.query;if(H){var ne=H.getParameterProjectionExprs(a);l.push.apply(l,ne)}}return l},ve.prototype.removeFieldFromRole=function(a,o,l,s){var L=l;if(L){var U=a.role,H=L.config.singleVisual.query,ne=a.projOptions,te=ne.fieldIndex,Ce=ne.parameter||H.getParameterByFieldIndex(te,U),ye=!!Ce,we=(0,e.pi)((0,e.pi)({},a),{projOptions:(0,e.pi)((0,e.pi)({},a.projOptions),{parameter:Ce}),shouldRemoveParameter:ye}),Te=void 0;if(ye)Te=["FieldParameter"];else{var De=H.tryGetExpr(U,te);Te=[N(De)]}return this.invokeRemoveOnSelectedVisuals(we,[L],o,s,Te)}return!1},ve.prototype.removeInvalidExpressions=function(a,o,l){var s=o.config.singleVisual;if(!s||!s.query)return!1;for(var L=[],U=s.query.defn.select(),H=0,ne=U;H<ne.length;H++){var Ce=ne[H].expr;_.isEmpty(Ce.validate(a,this.aggrOps))||L.push(Ce)}for(var ye=0,we=L;ye<we.length;ye++)this.removeFiltersWithExpr(we[ye],o);return this.removeFieldImpl(L,[o],a,l,"Other"),this.removeInvalidDataBoundProperty(s.vcObjects,a,U),this.removeInvalidDataBoundProperty(s.objects,a,U),!0},ve.prototype.removeInvalidDataBoundProperty=function(a,o,l){if(a){var L=function(U){var H=function(ye){var we=a[ye];if(!_.isEmpty(we))for(var Te=function(at){var it=at.properties,pt=at.selector,ct=function(Tt){var Ft=fe.getDataBoundExprs(it[Tt],pt,l);if(!_.isEmpty(Ft))for(var tt=0,Bt=Ft;tt<Bt.length;tt++){var Ut=Bt[tt];if(null==Ut.expr||!_.isEmpty(Ut.expr.validate(o,U)))return{value:function(){re.deleteProperty(a,ye,pt,Tt)}}}};for(var vt in it){var Mt=ct(vt);if("object"==typeof Mt)return Mt}},De=0,Re=we;De<Re.length;De++){var Ye=Te(Re[De]);if("object"==typeof Ye)return Ye}};for(var ne in a){var te=H(ne);if("object"==typeof te)return te.value}}(this.aggrOps);L&&(L(),this.eventBridge.publishToChannel(be.visualContainerChanged,{affectContainer:function(){return!0}}))}},ve.prototype.moveField=function(a,o,l,s,L,U,H,ne){var te=H||ce.getSelectedVisual(this.selectionService);if(!te)return!1;var Ce,ye=te.config.singleVisual.query,we=ye.getParameterByFieldIndex(s,o),Te=[];if(null!=we)Te.push("FieldParameter");else for(var De=0;De<U;De++){var Re=ye.tryGetExpr(o,s+De);Te.push(N(Re))}var Ze=this.contextActivityService.createActivity({name:"UpdateField",visualName:te.name,data:{fieldKinds:Te,operationType:"Move",source:"FieldWell"}});if(!we&&o!==l){var Ye=this.getVisualDataRole(te,l),qe=F.getHierarchyReplacementExpressions(te.config,o,s,U,Ye);if(_.isEmpty(qe))return Ze.reject(),!1;Ce=qe}var at={sourceRole:o,targetRole:l,sourceIndex:s,targetIndex:L,sourceCount:U,replacementExpressions:Ce,schema:a,allowPartialReplace:!0,hideOnOverflow:ne},it=ge.getDrillFilterRemovalInfoList(ye,at,1),pt={projOptions:{fieldIndex:s,parameter:we},role:o,count:U},ct=this.core.captureCurrentActiveProjectionsByRole(H);if(this.core.removeAutoFilterFromContract(te,pt),this.core.move(at,te.config)){this.core.setDefaultExpandLevel(te,this.visualPluginService,l,this.drill,ct,1),this.core.ensureValidDrillState(te,it,this.drill),this.core.setDefaultSort(te,a,this.sortService,this.visualPluginService),$e.setQueryKeepProjectionOrder(te),this.updateFilterState(a,te,!0,!0,!0);var Mt=te.config.singleVisual.query.tryGetExpr(l,L);if(this.logReportMeasureMoveTelemetry(a,te,o,l,Mt),Ce&&Ce.length>0)for(var bt=0,Tt=Ce;bt<Tt.length;bt++)this.core.setMatchingFilterToAuto(Re=Tt[bt],te);var Et=$e.getVisualType(te),Ft=this.visualPluginService.capabilities(Et);return this.logSmallMultiplesTelemetry(te,Et,Ft,l,"DraggedToFieldWell"),Ze.resolve(),!0}return Ze.reject(),!1},ve.prototype.drillDownLevel=function(a,o,l){if(o){var s=$e.getVisualType(o),L=this.telemetry.startEvent(Ae.EXInteractionExpand,{sourceVisualType:s,isInlineHierarchyEnabled:2===l,visualName:o.name}),U=o.config.singleVisual,H=_.isEmpty(a)?[]:[a];if(_.isEmpty(H)){var ne=this.visualPluginService.capabilities(U.visualType);H=ge.getDrillableRoles(ne)}if(!_.isEmpty(H))for(var te=function(Ze){if(Ze){var Ye=Ce.core.changeActiveProjection(Ze,U,l);if(Ye)return 2===l&&Ce.expandCollapse.isEnabled(o,[Ze])&&Ce.expandCollapse.expandLevel(o,[Ze],Ye.length-2,!0),Ce.notifyVisualContainers([o],"UserAction_Drill"),L.resolve(),{value:void 0}}},Ce=this,ye=0,we=H;ye<we.length;ye++){var De=te(we[ye]);if("object"==typeof De)return De.value}L.reject()}},ve.prototype.replaceField=function(a,o,l,s,L,U,H){var ne=this.getTargetRoleAndExpressionsForAdd(a,L,o,l).expressions,te=this.contextActivityService.createActivity({name:"UpdateField",visualName:L.name,data:{fieldKinds:_.map(jsCommon.ArrayExtensions.ensureArray(ne),function(Re){return N(Re)}),operationType:"Replace",source:"FieldWell"}}),Ce={sourceRole:l,targetRole:l,sourceIndex:s,targetIndex:s,sourceCount:null!=U?U:1,replacementExpressions:jsCommon.ArrayExtensions.ensureArray(ne),schema:a},we={projOptions:{fieldIndex:s,parameter:L.config.singleVisual.query.getParameterByFieldIndex(s,l)},role:l};this.core.removeAutoFilterFromContract(ce.getSelectedVisual(this.selectionService),we);var Te=this.core.captureCurrentActiveProjectionsByRole(L);if(this.core.move(Ce,L.config)){this.resetSearchProperties(L);var De=Ge.shouldUseAsFieldParameter(this.featureSwitchService.featureSwitches.fieldParametersAuthoring,a,o,this.featureSwitchService.featureSwitches.fieldParameterDynamicSlicer||!this.filterGenerator.supportsFilterOutput(L),this.isAnalysisVisual(L));return this.runAddFieldValidation(L,a,o,De,void 0,l,Te),this.isVisualRecommendationAllowed(L)&&(null==H||H.updateWithRecommendation(L,void 0,a)),te.resolve(),!0}return te.reject(),!1},ve.prototype.drillDown=function(a,o,l,s){var L=$e.getVisualType(l),U=this.telemetry.startEvent(Ae.EXInteractionDrill,{sourceVisualType:L,isDrillDown:!0,visualName:l.name}),H=l.config.singleVisual;if(this.runningVisualService.getVisual(l).clearSelectedDatapoints(),_.isEmpty(o)||_.isEmpty(o[0].dataMap))return!1;l.filters||(l.filters=[]);var te=o[0].dataMap,Ce=H.query,ye=_.isEmpty(s)?[]:[s];if(_.isEmpty(ye)){var we=this.visualPluginService.capabilities(H.visualType);ye=ge.getDrillableRoles(we)}if(!_.isEmpty(ye))for(var Te=function(it){var pt=Ce.projections[it],ct=pt&&pt.activeProjectionRefs,vt=_.filter(te,function(Ut,Rt){return _.includes(ct,Rt)});if(!_.isEmpty(vt)){var Mt=Ce.currentDrillMode(it)||2,bt=De.core.changeActiveProjection(it,H,Mt);if(bt){if(2===Mt&&De.expandCollapse.isEnabled(l,[it])){var Tt=_.uniq(bt);De.expandCollapse.expandLevel(l,[it],Tt.length-2,!0)}for(var Et=0,Ft=vt;Et<Ft.length;Et++)De.core.addDrillFilter(a,l.filters,Ce,ct,ve.chooseRepetitionSelectorForDrill(Ft[Et]));var Bt=De.explorationNavigationService.getCurrentSection();return De.filterGenerator.updateCrossFilterOnDrill(Bt,l),De.notifyVisualContainers([l],"UserAction_Drill"),U.resolve(),{value:!0}}}},De=this,Re=0,Ze=ye;Re<Ze.length;Re++){var qe=Te(Ze[Re]);if("object"==typeof qe)return qe.value}return U.reject(),!1},ve.chooseRepetitionSelectorForDrill=function(a){if(1===(a=de.ensureArray(a)).length)return a[0];for(var o,l=0,s=a;l<s.length;l++){var L=s[l];o||(o=L),L.key.length>o.key.length&&(o=L)}return o},ve.prototype.drillUp=function(a,o){if(o){var l=$e.getVisualType(o),s=this.telemetry.startEvent(Ae.EXInteractionDrill,{sourceVisualType:l,isDrillDown:!1,visualName:o.name}),L=o.config.singleVisual,U=L.query,H=_.isEmpty(a)?[]:[a];if(_.isEmpty(H)){var ne=this.visualPluginService.capabilities(o.config.singleVisual.visualType);H=ge.getDrillableRoles(ne)}if(!_.isEmpty(H))for(var te=0,Ce=H;te<Ce.length;te++){var ye=Ce[te],we=this.core.changeActiveProjection(ye,L,1);if(!_.isEmpty(we)){var Te=_.last(we),De=U.defn.select().withName(Te).expr;if(2===(U.currentDrillMode(ye)||2)&&this.expandCollapse.isEnabled(o,[ye])){var Ze=_.uniq(we);this.expandCollapse.collapseLevel(o,[ye],Ze.length-1)}if(this.core.removeDrillFilter(o.filters,De)){var qe=this.explorationNavigationService.getCurrentSection();this.filterGenerator.updateCrossFilterOnDrill(qe,o)}return this.notifyVisualContainers([o],"UserAction_Drill"),void s.resolve()}}s.reject()}},ve.prototype.setDrillFilterOtherVisualsSetting=function(a){var o=ce.getSelectedVisual(this.selectionService);!o||this.setVisualDrillFilterOtherVisualsSetting(o,a)},ve.prototype.drillToDetails=function(a,o,l,s,L,U){var ne,te,H=l;do{if(!(ne=this.drillToDetailsCore(a,o,H,s,L,U)))return;!ne.targetQueryHasColumns&&H.length>1?(H=H.slice(0,-1),te=!0):te=!1}while(te);return ne.targetVisualContainer},ve.prototype.drillToDetailsCore=function(a,o,l,s,L,U){var H=!1;if(_.some(l)&&(H=J.isAggregation(_.head(l))&&1===l.length||_.every(l,function(it){return J.isMeasure(it)})),H){var ne=Pe.clone(L,this.explorationSerializer);this.addDrillToDetailsFilters(o,ne,s);var te=ne.config.singleVisual,Ce={name:a,config:{singleVisual:te},layouts:L.layouts,filters:ne.filters};if(te.visualType!==powerbi.visuals.plugins.tableEx.name&&!this.convert(o,Ce,powerbi.visuals.plugins.tableEx.name))return;((te=Ce.config.singleVisual).vcObjects=te.vcObjects||{}).stylePreset=[{properties:{name:ue.text("Default")}}];var Te=te.objects={};re.setValue(Te,yt.PropTotalTableExTotals,void 0,ue.boolean(!1));for(var De=te.query,Re=0,Ze=l;Re<Ze.length;Re++){var Ye=Ze[Re],qe=Ye.getTargetEntity();J.isAggregation(Ye)?(this.removeAggregatesAndMeasures(o,Ce,!1),this.removeTableReferences(Ce),this.addDetailTableProperties(o,qe,Ce),De.defn=De.defn.addGroupBy(qe)):(this.addDetailTableProperties(o,qe,Ce,!0,U),this.removeAggregatesAndMeasures(o,Ce,!0),this.removeTableReferences(Ce));var at=$e.getVisualType(L);this.telemetry.logEvent(Ae.EXDrillToDetails,{sourceVisualType:at,targetExprKind:N(Ye),visualName:L.name})}return{targetVisualContainer:Ce,targetQueryHasColumns:De.defn.select().length>0}}},ve.prototype.isAnalysisVisual=function(a){return a&&a.config&&a.config.singleVisual&&this.pluginOps.isAnalysisVisual(a.config.singleVisual.visualType)},ve.prototype.removeAggregatesAndMeasures=function(a,o,l){for(var s=o.config.singleVisual.query,U=function(ye){var we=ye.expr;if(Ge.isMeasure(we)&&!1===l||J.isAggregation(we)&&!0===l){var Te=s.getRoleNameForExpr(we),De=_e.getRole(s.projections,Te),Re=_.findIndex(De.all(),function(Ze){return Ze.queryRef===ye.name});s.removeAggregate(Te,Re)}J.isMeasure(we)&&!1===l&&s.removeExpr(we,!1)},H=0,ne=s.defn.select();H<ne.length;H++)U(ne[H])},ve.prototype.removeTableReferences=function(a){for(var o=a.config.singleVisual.query,s=0,L=o.defn.select();s<L.length;s++){var U=L[s];J.isEntity(U.expr)&&o.removeExpr(U.expr,!1)}},ve.prototype.addDetailTableProperties=function(a,o,l,s,L){for(var U=l.config.singleVisual.query,H=Ge.getConceptualEntity(o,a),te=0,Ce=U.defn.select();te<Ce.length;te++){var we=Ce[te].expr,Te=we.getTargetEntity();_.isEqual(o,Te)||Ge.isRelatedOneToOne(a,o,Te,0)||Ge.isRelatedToMany(a,Te,o,0)||U.removeExpr(we,!1)}for(var qe=0,at=H.properties;qe<at.length;qe++){var it=at[qe];if(!it.hidden&&(1!==it.kind||!L)&&(1!==it.kind&&!it.type.integer&&!it.type.numeric||s)&&(!it.type.dateTime||!it.column||_.isEmpty(it.column.variations))){var pt;pt=1===it.kind?ue.measureRef(o,it.name):ue.columnRef(o,it.name),U.defn.selectNameOf(pt)||this.addFieldToVisual(a,pt,l)}}},ve.prototype.setAggregate=function(a,o,l,s,L,U){var H,ne,Te,te=null===(H=$e.getVisualQuery(L))||void 0===H?void 0:H.tryGetExpr(o,l),Ce=null===(ne=null==te?void 0:te.getMetadata(a))||void 0===ne?void 0:ne.type,ye=this.contextActivityService.createActivity({name:"ChangeAggregation",visualName:L.name,data:{aggregation:s,dataType:Ce?powerbi.ExtendedTypeNames[Ce.extendedType]:void 0}}),we={projOptions:{fieldIndex:l},role:o};return this.core.removeAutoFilterFromContract(ce.getSelectedVisual(this.selectionService),we),this.isVisualRecommendationAllowed(L)?Te=null!=U.updateWithRecommendation(L,{toUpdate:{role:o,index:l,aggregateToUse:s}},a):(Te=this.core.setAggregate({role:o,index:l,newAggregate:s,schema:a},L.config))&&(this.core.setDefaultSort(L,a,this.sortService,this.visualPluginService),$e.setQueryKeepProjectionOrder(L)),Te?(this.notifyVisualContainers([L]),ye.resolve()):ye.reject(),Te},ve.prototype.removeAggregate=function(a,o,l,s,L){var U,H,we,ne=null===(U=$e.getVisualQuery(s))||void 0===U?void 0:U.tryGetExpr(o,l),te=null===(H=null==ne?void 0:ne.getMetadata(a))||void 0===H?void 0:H.type,Ce=this.contextActivityService.createActivity({name:"ChangeAggregation",visualName:s.name,data:{aggregation:void 0,dataType:te?powerbi.ExtendedTypeNames[te.extendedType]:void 0}}),ye={projOptions:{fieldIndex:l},role:o};return this.core.removeAutoFilterFromContract(ce.getSelectedVisual(this.selectionService),ye),this.isVisualRecommendationAllowed(s)?we=null!=L.updateWithRecommendation(s,{toUpdate:{role:o,index:l,aggregateToUse:void 0}},a):(we=this.core.removeAggregate({role:o,index:l,schema:a},s.config))&&(this.core.setDefaultSort(s,a,this.sortService,this.visualPluginService),$e.setQueryKeepProjectionOrder(s)),we?(this.notifyVisualContainers([s]),Ce.resolve()):Ce.reject(),we},ve.prototype.setPercentOfGrandTotal=function(a,o,l,s){var L=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:s.name,data:{operationType:"SetPercentOfGT"}});return this.core.setPercentOfGrandTotal({role:o,index:l,schema:a},s.config)?(this.core.setDefaultSort(s,a,this.sortService,this.visualPluginService),this.core.ensureValidDrillMode(s,this.drill),this.notifyVisualContainers([s]),L.resolve(),!0):(L.reject(),!1)},ve.prototype.removePercentOfGrandTotal=function(a,o,l,s){var L=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:s.name,data:{operationType:"RemovePercentOfGT"}});return this.core.removePercentOfGrandTotal({role:o,index:l,schema:a},s.config)?(this.core.setDefaultSort(s,a,this.sortService,this.visualPluginService),this.notifyVisualContainers([s]),L.resolve(),!0):(L.reject(),!1)},ve.prototype.setPercentOfRoleTotal=function(a,o,l,s,L){var U=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:L.name,data:{operationType:"SetPercentOfRT"}});return this.core.setPercentOfRoleTotal({roleRefs:o,role:l,index:s,schema:a},L.config)?(this.core.setDefaultSort(L,a,this.sortService,this.visualPluginService),this.core.ensureValidDrillMode(L,this.drill),this.notifyVisualContainers([L]),U.resolve(),!0):(U.reject(),!1)},ve.prototype.removePercentOfRoleTotal=function(a,o,l,s){var L=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:s.name,data:{operationType:"RemovePercentOfGT"}});return this.core.removePercentOfRoleTotal({role:o,index:l,schema:a},s.config)?(this.core.setDefaultSort(s,a,this.sortService,this.visualPluginService),this.notifyVisualContainers([s]),L.resolve(),!0):(L.reject(),!1)},ve.prototype.setVariation=function(a,o,l,s,L,U){U=U||1;var H=J.isHierarchy(l),ne=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:o.name,data:{operationType:H?"UseVariations":"RemoveVariations"}});if(L<0)return ne.reject(),!1;for(var te=[],Ce=0;Ce<U;Ce++)if(te[Ce]=o.config.singleVisual.query.tryGetExpr(s,L+Ce),!te[Ce])return ne.reject(),!1;var ye=[l];if(H&&!(ye=Se.convert(l,a)))return ne.reject(),!1;var we=this.getVisualDataRole(o,s),Te=F.getHierarchyReplacementExpressions(o.config,s,L,U,we,ye);if(_.isEmpty(Te))return ne.reject(),!1;var De=Te,Re={sourceRole:s,targetRole:s,sourceIndex:L,targetIndex:L,sourceCount:te.length,replacementExpressions:De,schema:a,allowPartialReplace:!0},Ye=ge.getDrillFilterRemovalInfoList(o.config.singleVisual.query,{count:te.length,projOptions:{fieldIndex:L},role:s},0),qe={count:U,projOptions:{fieldIndex:L},role:s};this.core.removeAutoFilterFromContract(ce.getSelectedVisual(this.selectionService),qe);var at=this.core.captureCurrentActiveProjectionsByRole(o),it=this.core.move(Re,o.config);if(it&&(this.core.setDefaultExpandLevel(o,this.visualPluginService,s,this.drill,at,1),this.core.ensureValidDrillState(o,Ye,this.drill),this.core.setDefaultSort(o,a,this.sortService,this.visualPluginService),$e.setQueryKeepProjectionOrder(o),this.notifyVisualContainers([o]),De&&De.length>0))for(var pt=0,ct=De;pt<ct.length;pt++)this.core.setMatchingFilterToAuto(ct[pt],o);return it?ne.resolve():ne.reject(),it},ve.prototype.toggleShowAll=function(a,o){!o||(this.core.toggleShowAll(a,o.config),$e.setQueryKeepProjectionOrder(o),this.notifyVisualContainers([o]))},ve.prototype.createVisualContainerConfig=function(a,o,l){return this.createVisualContainerConfigCore(o,a,l)},Object.defineProperty(ve.prototype,"featureSwitches",{get:function(){return this.featureSwitchService.featureSwitches},enumerable:!1,configurable:!0}),ve.prototype.addDrillToDetailsFilters=function(a,o,l){if(!_.isEmpty(l)&&l[0]&&!_.isEmpty(l[0].dataMap)){var s=$e.getVisualQuery(o);if(s){var L=[];if(s.projections)for(var U in s.projections)_.isEmpty(s.projections[U].activeProjectionRefs)||L.push(s.projections[U].activeProjectionRefs);var ne,H=l[0].dataMap;for(ne in o.filters=o.filters||[],H){var te=_.find(L,function(Ce){return _.includes(Ce,ne)});this.core.addDrillToDetailsFilter(a,o.filters,s,te||[ne],ve.chooseRepetitionSelectorForDrill(H[ne]))}}}},ve.prototype.findCompatibleRole=function(a,o,l,s){var L=o.config.singleVisual,U=L.query||new Ct(powerbi.data.SemanticQuery.create(),{},[]),H=this.visualPluginService.capabilities(L.visualType),ne=U&&U.projections;if(H&&ne){var te=powerbi.visualCapabilitiesHelperModuleFactory().create(H,this.geotaggingAnalyzerService),Ce=te&&te.findCompatibleRole({queryProjections:ne,schema:a,expr:l,roleToExprMap:new powerbi.explore.utils.SQExprToRoleDictionary(powerbi.explore.util.HierarchyUtils.hierarchyLevelComparer),preferDrillableRoles:!1,isFieldParameter:s});return Ce&&Ce.role}},ve.prototype.getMaxNumberOfExpressionsAllowedInRole=function(a,o,l){var s=o.config.singleVisual,L=s.query||new Ct(powerbi.data.SemanticQuery.create(),{},[]),U=this.visualPluginService.capabilities(s.visualType);if(U&&L&&L.projections){var ne=powerbi.visualCapabilitiesHelperModuleFactory().create(U,this.geotaggingAnalyzerService),te=ge.getDrillableRoles(U);if(_.includes(te,l))return Number.MAX_VALUE;var ye=ne.getNumberRangesForRoles(L)[l];if(ye&&ye.max)return ye.max}return 0},ve.prototype.getTargetRoleAndExpressionsForAdd=function(a,o,l,s,L){var U=l;if(nt.isHierarchyOrVariation(a,l)&&!this.shouldUseOriginalColumn(o,a,l,!1,s)&&(U=nt.expandExpr(a,l,L),_.isArray(U))){var H=U;if(!s){var ne=this.findCompatibleRole(a,o,H[0],!1);ne&&(s=ne.name)}if(s){var te=this.getMaxNumberOfExpressionsAllowedInRole(a,o,s);te!==Number.MAX_VALUE&&(U=1===te&&J.isColumn(l)?l:J.isHierarchy(l)||J.isColumn(l)?H.slice(0,te):H.slice(H.length-te,H.length))}}return{targetRole:s,expressions:U}},ve.prototype.shouldUseOriginalColumn=function(a,o,l,s,L){if(!L){var U=this.findCompatibleRole(o,a,l,s);U&&(L=U.name)}if(!L)return!1;var H=this.getVisualDataRole(a,L);if(H){var ne=l.getConceptualProperty(o);if(ne&&ne.column&&(ne.type===Ve.fromExtendedType(518)||ne.type===Ve.fromExtendedType(519))&&H.preferDateColumn)return!0}return!1},ve.prototype.addExpressionToVisualWithoutAggregation=function(a){var o=a.schema,l=a.expr,s=a.visualContainer,L=a.hideOnOverflow,U=a.capabilities,H=U&&G.findScriptResultMapping(U.dataViewMappings),ne=this.getTargetRoleAndExpressionsForAdd(o,s,l);return(!ne.targetRole||U.dataRoles[ne.targetRole]===lt.Measure)&&(ne.expressions instanceof Array&&(ne.expressions=l),!H&&!this.shouldPreferGroupToAggregate(o,l,!1,s)&&(ne.expressions=this.createExprWithAggregate(ne.expressions,o,!1))),this.core.add({expr:ne.expressions,schema:o,targetRole:ne.targetRole,hideOnOverflow:L},s.config,!1)},ve.prototype.addExpressionToVisualForcingAggregation=function(a){var o=this.createExprWithAggregate(a.expr,a.schema,!0);return this.core.add({expr:o,schema:a.schema,hideOnOverflow:a.hideOnOverflow},a.visualContainer.config,!1)},ve.prototype.addExpressionToVisual=function(a){return this.core.add(a,a.visualContainer.config,a.isFieldParameter)},ve.prototype.createVisualContainerConfigCore=function(a,o,l){var s,H,L=a.expr,U=function(Te){return Te instanceof Array};a.allowAggregate&&!U(L)&&!this.shouldPreferGroupToAggregate(o,L,!1)&&(L=this.createExprWithAggregate(L,o,!1)),H=U(L)?L[0]:L;var ne=this.shouldAutoSelectVisualType(a.visualType);if(ne&&null!=H){var te={name:"dummyContainer",config:{singleVisual:{visualType:void 0,autoSelectVisualType:!0}}};return null==l||l.updateWithRecommendation(te,{toAdd:null!==(s=a.expandedFromExpr)&&void 0!==s?s:H},o),te.config}var Ce=a.visualType||We.getVisualDefaultType(H,o,this.geotaggingAnalyzerService,this.featureSwitches);return this.core.create({expr:L,visualType:Ce,schema:o,autoSelectVisualType:ne,inFilterVisualContainer:a.inFilterVisualContainer})},ve.prototype.addVisualContainerImageFromData=function(a,o,l){var s="data:image/png;base64,".concat(o),L=this.resourceRegistration.add(l,1,he.Image,{content:s});this.addVisualContainerImage(a,L)},ve.prototype.addVisualContainerImage=function(a,o){var l={singleVisual:{visualType:"image",objects:{general:[{properties:{imageUrl:o}}]}}},s=me.inherit(a),L=this.formFactorProvider.getCurrentLayout();s.position=ve.getPositionForAddedVisual(a.exploreCanvas,L,a.position),this.createVisualFromConfig(s,l,void 0,"InsertVisualButton")},ve.prototype.addVisualContainerBasicShapeVisual=function(a,o){var l=me.inherit(a),s=this.formFactorProvider.getCurrentLayout();l.position=ve.getPositionForAddedVisual(a.exploreCanvas,s,a.position);var L={singleVisual:{visualType:R.basicShape.name,objects:{general:[{properties:{shapeType:ue.text(o)}}]}}};this.createVisualFromConfig(l,L,void 0,"InsertVisualButton")},ve.prototype.addVisualContainerShapeVisual=function(a,o){var l,s=me.inherit(a),L=this.formFactorProvider.getCurrentLayout();s.position=ve.getPositionForAddedVisual(a.exploreCanvas,L,a.position);var U={singleVisual:{visualType:R.shape.name,objects:{shape:[{properties:{tileShape:ue.text(o.shapeType)}}],rotation:[{properties:{shapeAngle:ue.integer(null!==(l=o.shapeRotation)&&void 0!==l?l:0)}}]}}};this.createVisualFromConfig(s,U,void 0,"InsertVisualButton")},ve.prototype.addVisualContainerActionButtonVisual=function(a,o){var l=me.inherit(a),s=this.formFactorProvider.getCurrentLayout();if(o===q.applyAllSlicers||o===q.clearAllSlicers){var L=_.cloneDeep(a.position);L.height=50,L.width=200,l.position=ve.getPositionForAddedVisual(a.exploreCanvas,s,L)}else l.position=ve.getPositionForAddedVisual(a.exploreCanvas,s,a.position);var U={icon:[{properties:{shapeType:ue.text(o)},selector:{id:"default"}}]},H={properties:{show:ue.boolean(!0)}};switch(o){case q.back:H.properties.type=ue.text(Pt.Back);break;case q.qna:H.properties.type=ue.text(Pt.Qna);break;case q.bookmarks:H.properties.type=ue.text(Pt.Bookmark);break;case q.applyAllSlicers:H.properties.type=ue.text(Pt.ApplyAllSlicers),H.properties.tooltipPlaceholderText=ue.text(this.localizationService.get("ReportAppBar_ApplyAllSlicers_TooltipDefaultText")),this.setSlicerActionButtonDefaults(U,"ReportAppBar_ApplyAllSlicers");break;case q.clearAllSlicers:H.properties.type=ue.text(Pt.ClearAllSlicers),H.properties.tooltipPlaceholderText=ue.text(this.localizationService.get("ReportAppBar_ClearAllSlicers_TooltipDefaultText")),this.setSlicerActionButtonDefaults(U,"ReportAppBar_ClearAllSlicers");break;default:H=void 0}var ne={singleVisual:{visualType:R.actionButton.name,objects:U}};H&&(ne.singleVisual.vcObjects={},ne.singleVisual.vcObjects.visualLink=[H]),this.createVisualFromConfig(l,ne,void 0,"InsertVisualButton")},ve.prototype.setSlicerActionButtonDefaults=function(a,o){a.icon[1]={properties:{show:ue.boolean(!1)}},a.text=[{properties:{show:ue.boolean(!0)}},{properties:{text:ue.text(this.localizationService.get(o)),horizontalAlignment:ue.text(E.center)},selector:{id:"default"}}]},ve.prototype.addVisualContainerNavigatorVisual=function(a,o){var l=this.formFactorProvider.getCurrentLayout();a.position=ve.getPositionForAddedVisual(a.exploreCanvas,l,a.position);var s={singleVisual:{visualType:void 0}};switch(o){case"page":s.singleVisual.visualType=R.pageNavigator.name;break;case"bookmark":s.singleVisual.visualType=R.bookmarkNavigator.name}this.createVisualFromConfig(a,s,void 0,"InsertVisualButton")},ve.prototype.applyConfigOptions=function(a,o){return a.visualLink&&(o.singleVisual.vcObjects=o.singleVisual.vcObjects||{},o.singleVisual.vcObjects.visualLink=[a.visualLink]),o},ve.prototype.addVisualContainer=function(a,o,l,s,L,U){var H=this.formFactorProvider.getCurrentLayout();U=ve.getPositionForAddedVisual(s,H,U),o=(0,e.pi)((0,e.pi)({},o),{expandedFromExpr:o.expr,expr:nt.expandExpr(a,o.expr)});var ne=this.createVisualContainerConfig(a,o,L);if(ne)return this.createVisualFromConfig({sections:l,exploreCanvas:s,position:U,postProcessing:o.postProcessing,selectedVisualContainers:o.selectedVisualContainers},ne)},ve.prototype.addEmptyVisualContainer=function(a,o,l,s,L,U){var H=this.formFactorProvider.getCurrentLayout();s=ve.getPositionForAddedVisual(o,H,s);var ne=this.shouldAutoSelectVisualType(l),Ce={singleVisual:{visualType:null!=l?l:powerbi.visuals.plugins.columnChart.name}};return ne&&(Ce.singleVisual.autoSelectVisualType=!0),this.createVisualFromConfig({sections:a,exploreCanvas:o,position:s,postProcessing:U,selectedVisualContainers:L},Ce)},ve.prototype.addVisualContainerFromConfig=function(a,o,l,s,L,U,H,ne){return void 0===ne&&(ne=!1),L||(L=ve.getPositionForAddedVisual(s,null)),this.createVisualFromConfig({sections:l,exploreCanvas:s,position:L,select:U},a,o,H,ne)},ve.prototype.shouldAutoSelectVisualType=function(a){if(this.featureSwitchService.featureSwitches.onObject&&this.settingsService.getSuggestVisualByDefault())return null==a},ve.prototype.groupVisualContainers=function(a,o){for(var l=this,s=a.contract.visualContainerGroups,L=1,U=$e.getVisualContainerGroups(s),H=this.formFactorProvider.getCurrentLayout(),ne=a.contract,te=_.isEmpty(ne.visualContainerGroups)?ne.visualContainers:ne.visualContainerGroups,Ce=ve.getDefaultVisualContainerPosition(te,H,ne),ye=this.formFactorProvider.getCurrentLayout();_.some(U,function(Re){return powerbi.explore.contracts.isVisualContainerGroup(Re)&&Re.displayName==="".concat(l.localizationService.get("Group")," ").concat(L)});)L++;var we={name:$e.uniqueName(s),displayName:"".concat(this.localizationService.get("Group")," ").concat(L),groupMode:0,layouts:jsCommon.ArrayExtensions.extendWithId([{id:ye,position:Ce}]),children:o};a.contract.visualContainerGroups=k.group(we,s);var Te=se.findCanvasItemViewModels(a.visualContainerGroups,we.children),De=xe.ViewModelFactory.convertVisualContainerGroup(we,Te,ye);return De&&(a.visualContainerGroups=k.group(De,a.visualContainerGroups),se.syncCanvasItemViewModelsWithContracts(a.visualContainerGroups,a.contract.visualContainerGroups)),ce.selectCanvasItem(we,this.selectionService),De},ve.prototype.ungroupVisualContainers=function(a,o){a.contract.visualContainerGroups=k.ungroup(o,a.contract.visualContainerGroups);var l=k.find(o.name,a.visualContainerGroups);if(xe.isVisualContainerGroup(l))return a.visualContainerGroups=k.ungroup(l,a.visualContainerGroups),se.syncCanvasItemViewModelsWithContracts(a.visualContainerGroups,a.contract.visualContainerGroups),ce.unselectCanvasItem(o,this.selectionService),l},ve.prototype.moveCanvasItemsInTree=function(a,o,l,s,L){void 0===L&&(L=!1),a.contract.visualContainerGroups=k.move(o,l,a.contract.visualContainerGroups,s);var U=se.findCanvasItemViewModels(a.visualContainerGroups,o),H=k.find(l.name,a.visualContainerGroups);if(a.visualContainerGroups=k.move(U,H,a.visualContainerGroups,s),se.syncCanvasItemViewModelsWithContracts(a.visualContainerGroups,a.contract.visualContainerGroups),L){if(l.parentGroup){var ne=k.find(l.parentGroup.name,a.contract.visualContainerGroups);ne?ce.selectCanvasItem(ne,this.selectionService):this.selectionService.clearSelection()}}else ce.selectCanvasItem(o[0],this.selectionService);return U},ve.prototype.updateContainerListOrders=function(a,o,l){for(var s=this.formFactorProvider.getCurrentLayout(),L=[],U=[],H=0,ne=a;H<ne.length;H++){var te=ne[H],Ce=o[te.name];null!=Ce&&(Ce=Math.floor(Ce))!==te.layouts.withId(s).position[l]&&("z"===l?this.setZIndex(te,Ce):this.setTabOrder(te,Ce),powerbi.explore.contracts.isVisualContainer(te)?L.push(te):U.push(te))}_.isEmpty(L)||this.notifyVisualContainers(L),_.isEmpty(U)||this.notifyVisualContainerGroups(U)},ve.prototype.createVisualFilters=function(a,o,l,s){for(var L=xe.ViewModelFactory.createVisualFilters(a,o,s,this.displayNameService,this.visualPluginService,this.pluginOps,this.filterGenerator,this.aggrOps,this.localizationService),U=0,H=L;U<H.length;U++){var ne=H[U];ne.updateFilterProperties(s,this.visualPluginService,this.aggrOps),ne.canVisualize()&&(ne.isInvalid()||this.createFilterVisualContainerConfig(ne.contract,l,s,!1))}return L},ve.prototype.moveFilter=function(a,o,l,s){var L=ee.getFiltersContainer(o,this.selectionService,this.explorationNavigationService);return this.setFilterSortType(a,o,3),!(L&&L.filters&&null!=L.filters[s]||(this.moveFilterContainer(L.filters,s,l),0))},ve.prototype.setFilterSortType=function(a,o,l){var s=ee.getFiltersContainer(o,this.selectionService,this.explorationNavigationService);return s.filterSortOrder!==l&&(this.telemetry.logEvent(Ae.EXToggleFilterCardSort,{sortType:powerbi.explore.util.getTelemetryFilterCardSortType(l)}),3===l?(this.sortFiltersByCurrentSortType(a,s,o),this.updateFilterOrdinal(s.filters)):s.filters&&s.filters.forEach(function(U){null!=U&&(U.ordinal=void 0)}),s.filterSortOrder=l),!0},ve.prototype.sortFiltersByCurrentSortType=function(a,o,l){var s=this;void 0===o.filterSortOrder&&(o.filterSortOrder=1);var L=o.filters.filter(function(te){return ee.getFilterCapabilities(te).canSort}),U=o.filters.filter(function(te){return!ee.getFilterCapabilities(te).canSort});if(1===o.filterSortOrder||2===o.filterSortOrder){var H=ce.getSelectedVisual(this.selectionService),ne=$e.getVisualCapabilities(H,this.visualPluginService);L.sort(function(te,Ce){var ye=te.displayName||s.getDisplayName(te,a,ne,l,H&&H.config.singleVisual)||"",we=Ce.displayName||s.getDisplayName(Ce,a,ne,l,H&&H.config.singleVisual)||"";return ye.localeCompare(we)}),2===o.filterSortOrder&&L.reverse()}else 3===o.filterSortOrder&&L.sort(function(te,Ce){return te.ordinal-Ce.ordinal});o.filters=L.concat(U)},ve.prototype.moveFilterContainer=function(a,o,l){o<l&&(l-=1);var s=a[o];a.splice(o,1),a.splice(l,0,s),this.updateFilterOrdinal(a)},ve.prototype.updateFilterOrdinal=function(a){a.forEach(function(o,l){null!=o&&(o.ordinal=l,null==o.name&&(o.name=ee.getNextFilterName(a)))})},ve.prototype.getDisplayName=function(a,o,l,s,L){var U;if(a.type===le.Include||a.type===le.Exclude){var H=new powerbi.explore.services.IncludeExcludeSQExprVisitor(o,this.displayNameService);U=ee.getDisplayNameForIncludeExcludeFilters(this.localizationService,a.type,H.dataPoints.length)}else if(a.type===le.Passthrough)U=a.restatement;else{var ne=a.expression&&Me.asFieldPattern(a.expression),Ce=void 0,ye=void 0;a.expression&&L&&(Ce=L.query&&L.query.defn.selectNameOf(a.expression),ye=L.columnProperties),U=this.displayNameService.getDisplayName(a.expression,o,l,Ce,0===s?ye:void 0,{includeVariationSource:!0})||(ne?X.getFieldExprName(ne):void 0)}return U},ve.prototype.addFilter=function(a,o,l,s,L,U){var H=ce.getSelectedVisual(this.selectionService);if(ee.canAdd(H,o,a,l,L,this.pluginOps)){this.core.ensureFiltersArrayIsValid(l.container.filters);var we,ne=L?5:1,te=ee.getDefaultFilterType(o,a,ne),Ce={name:ee.getNextFilterName(l.container.filters),expression:o,type:te,howCreated:ne},ye=_.isEmpty(ee.validate(Ce,a,this.aggrOps));if(Ce.expanded=ee.canExpandManually(ne,!1,o,ye,te),powerbi.data.SQExprUtils.isMeasure(o)||this.createFilterVisualContainerConfig(Ce,s,a),ee.add(l.container,Ce),3===l.container.filterSortOrder&&this.moveFilterContainer(l.container.filters,l.container.filters.length-1,U),this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(we=ee.createChangeFilterActivity(this.contextActivityService,"Add Filter")),ee.notifyFilterContainerChangedByUser(this.eventBridge,{filter:Ce,changeType:1,scope:l,changeFilterActivity:we}),we&&we.resolve(),L){powerbi.explore.util.logDrillthroughFilterUpdateTelemetry(this.telemetry,"Add",l.container,void 0);var De=this.explorationNavigationService.getCurrentExploration(),Re=l.container;if(null!=De&&null!=Re){var Ze=ee.determineIsLinkedAsAggregation(Ce,a,this.aggrOps),Ye={filterName:Ce.name,type:0,isCausedByCode:!1,fieldExpr:Ce.expression,asAggregation:Ze,isLegacySingleSelection:!1};W.addParameter(De,Re.name,Ce.name,Ce.expression,Ye.asAggregation,!1,W.determineType(Re,this.featureSwitchService.featureSwitches.onObject)),this.eventBridge.publishToChannel(be.podParameterChanged,Ye)}}else Ge.isMeasure(o)&&this.telemetry.logEvent(Ae.EXAddFilter,{filterType:powerbi.explore.util.getTelemetryFilterType(te),filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(l.scopeType),fieldKind:N(o),drillToDetailsMode:$e.hasGroupByItemsInQuery(H),viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())});return Ce.name}},ve.prototype.addFilterContainers=function(a,o){this.core.ensureFiltersArrayIsValid(a);for(var l=0,s=a;l<s.length;l++){var L=s[l];ee.add(o.container,L);var U=void 0;this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(U=ee.createChangeFilterActivity(this.contextActivityService,"Add Filter")),ee.notifyFilterContainerChangedByUser(this.eventBridge,{filter:L,changeType:1,scope:o,changeFilterActivity:U}),U&&U.resolve()}},ve.prototype.removeFilter=function(a,o,l,s){return this.removeFilterImpl(a,o,l,s)},ve.prototype.toggleSlicerVisualSearch=function(a,o,l){var s=powerbi.explore.util.VisualContainerUtils.getVisualCapabilities(a,l),L=this.filterGenerator.tryGetSelfFilterEnabledProperty(s);if(!L)return!1;var U=a.config.singleVisual;U.objects||(U.objects={});var H=powerbi.data.DataViewObjectDefinitions.getValue(U.objects,L,null);if(H&&H.value){powerbi.data.DataViewObjectDefinitions.deleteProperty(U.objects,L.objectName,null,L.propertyName);var te=o.tryGetSelfFilterProperty(s);te&&powerbi.data.DataViewObjectDefinitions.deleteProperty(U.objects,te.objectName,null,te.propertyName)}else powerbi.data.DataViewObjectDefinitions.setValue(U.objects,L,null,powerbi.data.SQExprBuilder.boolean(!0));return!0},ve.prototype.assignSyncGroup=function(a,o){a.config.singleVisual.syncGroup=(0,e.pi)({},o),a.config.singleVisual.conversionSourceContext=void 0},ve.prototype.clearSyncGroup=function(a){a.config.singleVisual.syncGroup=void 0,a.config.singleVisual.conversionSourceContext=void 0},ve.prototype.enableSearchInFilterCard=function(a,o){var s=this.filterGenerator.tryGetSelfFilterEnabledProperty(R.slicer.capabilities),L=powerbi.visuals.visualStyles.create().colorPalette,U=powerbi.visuals.slicerProps.searchBox,H=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign,ne=H?ae.FilterCardSearchBoxBorderColor:L.foregroundNeutralDark.value,te=H?ae.FilterCardSearchBoxBackgroundColor:L.foregroundNeutralSecondary.value;this.ensureObjectDefinitionProperty(a,o,s,null,powerbi.data.SQExprBuilder.boolean(!0)),this.ensureObjectDefinitionProperty(a,o,U.borderColor,null,{solid:{color:powerbi.data.SQExprBuilder.text(ne)}}),this.featureSwitches.outlineDropdownToCheckboxes?this.ensureObjectDefinitionProperty(a,o,U.outlineStyle,null,powerbi.data.SQExprBuilder.integer(0)):this.ensureObjectDefinitionProperty(a,o,U.outline,null,powerbi.data.SQExprBuilder.text(powerbi.visuals.outline.none)),this.ensureObjectDefinitionProperty(a,o,U.background,null,{solid:{color:powerbi.data.SQExprBuilder.text(te)}})},ve.prototype.createFilterVisualContainerConfig=function(a,o,l,s){var L;void 0===s&&(s=!0);var U=a.expression;if(!J.isTransformOutputRoleRef(U)){var H=Ge.discourageAggregation(U,l),ne=Me.asFieldPattern(U),te=ne.column||ne.groupingColumn||ne.hierarchyLevel,Ce={expr:U,dataSources:o,allowAggregate:!1,visualType:powerbi.visuals.plugins.filterSlicer.name,inFilterVisualContainer:!0};if(!Ge.isMeasure(U)){var ye=s?null===(L=a.config)||void 0===L?void 0:L.singleVisual.objects:void 0,we=this.createVisualContainerConfigCore(Ce,l);if(we){var Te=we.singleVisual.objects;Te||(we.singleVisual.objects=Te={});var Re=5===a.howCreated&&!a.isTransient,Ze=!Re,Ye=powerbi.visuals.slicerProps.selection.selectAllCheckboxEnabled,qe=powerbi.visuals.slicerProps.selection.singleSelect,at=powerbi.visuals.slicerProps.header.show,it=powerbi.visuals.slicerProps.data.mode,pt=powerbi.visuals.slicerProps.general.filter,ct=powerbi.visuals.slicerProps.data.isInvertedSelectionMode;this.ensureObjectDefinitionProperty(Te,ye,it,null,ue.text(powerbi.visuals.slicerMode.basic)),this.ensureObjectDefinitionProperty(Te,ye,Ye,null,ue.boolean(Ze)),this.ensureObjectDefinitionProperty(Te,ye,qe,null,ue.boolean(Re)),this.ensureObjectDefinitionProperty(Te,ye,at,null,ue.boolean(!1)),this.enableSearchInFilterCard(Te,ye);var vt=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign,Mt=powerbi.visuals.visualStyles.create().colorPalette,bt=powerbi.visuals.slicerProps.items.textSize,Tt=powerbi.visuals.slicerProps.items.fontColor,Et=vt?ae.FilterCardFontColor:Mt.foregroundLight.value;if(this.ensureObjectDefinitionProperty(Te,ye,bt,null,ue.integer(Ie.smallFontSizeInPoint)),this.ensureObjectDefinitionProperty(Te,ye,Tt,null,{solid:{color:powerbi.data.SQExprBuilder.text(Et)}}),!H&&te){var Ft=ue.entity(te.schema,te.entity,te.entityVar),tt=ue.aggregate(Ft,2),Bt=powerbi.visuals.slicerProps.general.count,Ut=we.singleVisual.query.getRoleNameForExpr(U),Rt={data:[pe.fromRoles([Ut])]};this.ensureObjectDefinitionProperty(Te,ye,Bt,Rt,tt)}var Gt=0===a.howCreated&&!Fe.isDefaultFilter(a.filter);if(this.core.ensureDefaultFilterApplied(l,we.singleVisual,Gt)&&null==a.filter){var Qt=ne.column||ne.groupingColumn?U.getKeyColumns(l):[U];a.filter=Fe.getDefaultValueFilter(Qt)}a.filter&&this.ensureObjectDefinitionProperty(Te,ye,pt,null,a.filter);var jt=re.getValue(a.objects,{objectName:"general",propertyName:"isInvertedSelectionMode"},void 0);null!=jt&&this.ensureObjectDefinitionProperty(Te,ye,ct,null,jt),a.config=we}}}},ve.prototype.ensureObjectDefinitionProperty=function(a,o,l,s,L){var U=o?re.getValue(o,l,s):void 0;re.setValue(a,l,s,U||L)},ve.prototype.notifyVisualContainers=function(a,o,l,s,L,U){var H=this;void 0===o&&(o="UserAction_EditVisual");var ne=this.explorationNavigationService.getCurrentSection(),te=_.map(a,function(Ce){return l?$e.filterAffects(Ce,ne,H.visualRelationshipService,s):$e.contractEqualityComparator(Ce)});this.eventBridge.publishToChannel(be.visualContainerChanged,{affectContainer:function(ye){return _.some(te,function(we){return we(ye)})},sourceLabelKey:o,visualContainerChangeType:L,fieldSource:U})},ve.prototype.notifyVisualContainerGroups=function(a){this.eventBridge.publishToChannel(be.visualContainerGroupChanged,{affectContainer:function(l){return _.includes(a,l)}})},ve.prototype.convert=function(a,o,l,s,L,U,H,ne){var te=$e.getVisualType(o),Ce=!!$e.isVisualTypeAutoSelect(o),ye=null==l;o.config.singleVisual.autoSelectVisualType=ye;var Te,De,we=this.telemetry.startEvent(Ae.EXInteractionVisualConversion,{sourceVisualType:te,targetVisualType:l,visualName:o.name});if(Te=this.contextActivityService.createActivity(Ce&&te===l||!Ce&&ye?{name:"ChangeAutoVisual",visualName:o.name,data:{initialAutoVisualValue:Ce}}:{name:"ChangeVisualType",visualName:o.name,data:{targetVisualType:l,sourceVisualType:te}}),Ce&&ye||!Ce&&!ye&&te===l)return we.resolve(),Te.resolve(),!1;if(Ce&&!ye&&te===l)return o.config.singleVisual.autoSelectVisualType=void 0,we.resolve(),Te.resolve(),this.eventBridge.publishToChannel(be.visualTypeChanged,{changedItems:[o]}),!0;U&&(o.postProcessing=U({outputVisualContainer:o,selectedVisualContainers:L})),this.visualAuthoringCustomizeOperations.requiresCustomizeConvert(o)&&this.visualAuthoringCustomizeOperations.customizeConvert(o),null!=l&&(De=this.customizeConvertTo(o,l));var Re=o.config.singleVisual.query;if(!ye){var Ze=this.visualPluginService.capabilities(l);Re&&_.isEmpty(Ze.dataRoles)&&(o.config.singleVisual.query=void 0,Re=void 0)}if(Re){if(!ye&&!H){this.resetSearchProperties(o);var Ye=powerbi.explore.contracts.SingleVisualConfig.clone(o.config.singleVisual),qe=this.core.convert({schema:a,source:Ye,target:l,skipRoleMapping:null==De?void 0:De.skipRoleMapping});if(!qe)return Te.reject(),we.reject();o.config.singleVisual=Ye,this.core.ensureFiltersArrayIsValid(o.filters),we.resolve(),Te.resolve();var at=this.visualPluginService.capabilities(te),it=this.filterGenerator.tryGetFilterPropertyIdentifier(at);if(!it){var pt=this.visualPluginService.capabilities(l);it=this.filterGenerator.tryGetFilterPropertyIdentifier(pt)}this.core.ensureValidDrillMode(o,this.drill),this.ensurePercentRoleTotal(o,l),this.updateFilterState(a,o,!1,!0,!0,it);var ct=o.filters;return _.isEmpty(ct)||ee.supportsVisualFilters(o,this.pluginOps)||(o.filters=[]),this.removeUnsupportedDataBoundProperties(o,l),this.core.setDefaultSort(o,a,this.sortService,this.visualPluginService),_.remove(ct,function(Mt){return null==Mt||0===Mt.howCreated&&void 0===Mt.filter}),o.config.singleVisual.autoSelectVisualType=void 0,this.eventBridge.publishToChannel(be.visualTypeChanged,{changedItems:[o]}),qe}null!=(l=null==s?void 0:s.updateWithRecommendation(o,H?{visualType:l}:void 0,a))&&(o.config.singleVisual.autoSelectVisualType=!0)}else ye&&(l=te,o.config.singleVisual.autoSelectVisualType=!0);return o.config.singleVisual.visualType=l,we.resolve(),Te.resolve(),this.notifyVisualContainers([o]),this.eventBridge.publishToChannel(be.visualTypeChanged,{changedItems:[o]}),!0},ve.prototype.setOrderBy=function(a,o){var l=a.config.singleVisual;l.query.orderBy(o),l.hasDefaultSort=_.isEmpty(o),this.notifyVisualContainers([a],"UserAction_Sorting")},ve.prototype.removeOrderBy=function(a,o,l){for(var s=0,L=o;s<L.length;s++)a.config.singleVisual.query.removeOrderBy(L[s]);this.core.setDefaultSort(a,l,this.sortService,this.visualPluginService),this.notifyVisualContainers([a])},ve.prototype.deleteVisualRelationships=function(a,o){_.remove(a.relationships,function(l){return l.source===o||l.target===o})},ve.prototype.addProperty=function(a,o,l,s){var L=a.config.singleVisual,U=L.objects;U||(L.objects=U={}),re.setValue(U,o,l,s)},ve.prototype.removeProperty=function(a,o,l){re.deleteProperty(a.config.singleVisual.objects,o.objectName,l,o.propertyName)>1&&this.telemetry.logEvent(Ae.EXDefnsDuplicateSelector)},ve.prototype.setVisibility=function(a,o,l){if(Pe.setHidden(a.config.singleVisual,o),o){var L=this.explorationNavigationService.getCurrentSection();this.filterGenerator.clearCrossHighlightForVisualContainers(L,[a]),l||ce.unselectCanvasItem(a,this.selectionService)}},ve.prototype.clearCrossHighlightsForGroup=function(a,o,l){var L,s=[];return powerbi.explore.contracts.traverseVisualContainerGroups([a],function(H){powerbi.explore.contracts.isVisualContainer(H)&&_.some(l,function(ne){return ne.sourceVisualContainer===H})&&s.push(H)}),_.isEmpty(s)||(this.filterGenerator.clearCrossHighlightForVisualContainers(o,s),L=this.clearCrossHighlightsForVisuals(s,o)),L||[]},ve.prototype.ensureNativeReferenceName=function(a,o){var l=this,s=o.config.singleVisual,L=s.query;if(null!=L){var U=$e.getVisualCapabilities(o,this.visualPluginService),H=_.partition(L.defn.select(),function(ye){return null!=ye.nativeReferenceName}),ne=H[0];if(!_.isEmpty(H[1])){var Ce=Object.assign.apply(Object,(0,e.ev)([{}],ne.map(function(ye){var we;return(we={})[ye.nativeReferenceName]=!0,we}),!1));_.forEach(L.defn.select(),function(ye,we){if(null==ye.nativeReferenceName){var Te=l.displayNameService.getDisplayName(ye.expr,a,U,ye.name,s.columnProperties,{includeVariationSource:!0,hierarchyNameDelimiter:" "}),De=StringExtensions.findUniqueName(Ce,Te);Ce[De]=!0,L.setNativeReferenceNameAt(we,De)}})}}},ve.prototype.clearCrossHighlightsForVisuals=function(a,o){var l=(0,e.ev)([],a||[],!0);return l.push.apply(l,this.filterGenerator.clearCrossHighlightForVisualContainersOperation(o,a)||[]),_.uniq(l)},ve.prototype.setVisualContainerGroupVisibility=function(a,o,l){if(et.setHidden(a,o),o){var s=this.explorationNavigationService.getCurrentSection();this.clearCrossHighlightsForGroup(a,s,s&&s.crossFilterSource&&s.crossFilterSource.highlight)}l||ce.unselectCanvasItem(a,this.selectionService)},ve.prototype.setVisualContainerGroupDisplayName=function(a,o){et.setDisplayName(a,o)},ve.prototype.setZIndex=function(a,o){var l=this.formFactorProvider.getCurrentLayout();a.layouts.withId(l).position.z=o},ve.prototype.setTabOrder=function(a,o){var l=this.formFactorProvider.getCurrentLayout();a.layouts.withId(l).position.tabOrder=o},ve.prototype.setVisualRelationship=function(a,o,l,s){if(o!==l){a.relationships=a.relationships||[];var L=this.visualRelationshipService.relationship(a,o,l);L?L.type=s:(_.includes(a.visualContainers,o),_.includes(a.visualContainers,l),a.relationships.push({source:o,target:l,type:s}))}},ve.prototype.persistProperties=function(a,o,l){var s=o.objects||{},L=this.visualPluginService.capabilities(o.visualType);return!!powerbi.explore.services.applyPropertyChanges(a,L?L.objects:void 0,s,l)&&(o.objects=s,o.autoSelectVisualType=void 0,!0)},ve.prototype.persistVCProperties=function(a,o){var l=o.vcObjects||{};return!!powerbi.explore.services.applyPropertyChanges(a,Pe.CommonObjectDescriptors,l)&&(o.vcObjects=l,!0)},ve.prototype.removeUnsupportedDataBoundProperties=function(a,o){if(this.visualPluginService.isScriptVisual(o)||this.pluginOps.isAnalysisVisual(o)){var s=a.config.singleVisual.vcObjects;if(s){var L=a.config.singleVisual.query.defn.select(),U=[];_.forEach(s,function(H,ne){_.forEach(H[0].properties,function(Ce,ye){fe.getDataBoundExprs(Ce,null,L).length>0&&U.push(function(){re.deleteProperty(s,ne,null,ye)})})}),_.forEach(U,function(H){H()})}}},ve.prototype.ensurePercentRoleTotal=function(a,o){if(!this.visualPluginService.capabilities(o).dataRoleTotals){var s=new ke,L=new powerbi.explore.schemaRewriterUtils.VisualQueryExprRewriter(s),U=new powerbi.explore.util.VisualContainerRewriter([L]);powerbi.explore.util.traverseVisualContainer(a,U,this.visualPluginService)}},ve.prototype.getVisualDataRole=function(a,o){var l=$e.getDataRolesForVisual(a,this.visualPluginService);if(!_.isEmpty(l))return de.findItemWithName(l,o)},ve.prototype.removeFieldImpl=function(a,o,l,s,L,U){return this.invokeRemoveOnSelectedVisuals({expr:a,ignoreAggregates:!0,fieldParameter:U,shouldRemoveParameter:!0},o,l,s,[L])},ve.prototype.removeFilterImpl=function(a,o,l,s){if(!o||!o.container||!o.container.filters)return!1;for(var L={filter:a,changeType:0,scope:o,parentActivity:l,changeFilterActivity:s},U=0;U<o.container.filters.length;U++)if(o.container.filters[U]===a){if(o.container.filters.splice(U,1),3===o.container.filterSortOrder&&this.updateFilterOrdinal(o.container.filters),ee.notifyFilterContainerChangedByUser(this.eventBridge,L),5===a.howCreated&&!a.isTransient&&1===o.scopeType||W.isPodEnabled(a,o)){var ne=this.explorationNavigationService.getCurrentExploration(),te=o.container;null!=ne&&null!=te&&(W.deleteParameter(ne,te.name,a.name,this.linguisticSchemaProxy),this.eventBridge.publishToChannel(be.podParameterChanged,{filterName:a.name,type:1}))}return!0}return!1},ve.prototype.removeFiltersWithExpr=function(a,o){var l=o.filters;if(!l)return!1;for(var s,L=l.length-1;L>=0;L--){var U=l[L];J.equals(U.expression,a)&&(s=this.removeFilterImpl(U,{scopeType:0,container:o},void 0,void 0))}return s},ve.prototype.invokeRemoveOnSelectedVisuals=function(a,o,l,s,L){for(var U=!1,H=[],ne=o.length-1;ne>-1;ne--){var te=o[ne],ye=te.config.singleVisual.query;if(ye){var we=this.contextActivityService.createActivity({name:"UpdateField",visualName:te.name,data:{fieldKinds:L,operationType:"Remove",source:ze(a)?"FieldList":"FieldWell"}});this.checkSparklineRemovedAndLog(ye,a,l);var Te=ge.getDrillFilterRemovalInfoList(ye,a,0),De=this.core.getRemoveOptionsQueryRefs(a,ye),Ze=this.core.removeWithValidation(ye,De,[a],te,l,Te,this.drill,this.sortService,this.updateFilterState).removeSuccessCount>0;U=U||Ze,Ze&&(H.push(te),this.isVisualRecommendationAllowed(te)&&(null==s||s.updateWithRecommendation(te,void 0,l))),U?we.resolve():we.reject()}}return _.isEmpty(H)||this.notifyVisualContainers(H),U},ve.prototype.buildVisualContainerFromConfig=function(a,o,l){return this.core.ensureFiltersArrayIsValid(l),{name:a,config:o,filters:l||[]}},ve.prototype.createVisualFromConfig=function(a,o,l,s,L){void 0===L&&(L=!0),o=this.applyConfigOptions(a,o);var U=this.formFactorProvider.getCurrentLayout(),H=_.flatMap(a.sections,function(at){return at.visualContainerGroups}),ne=$e.uniqueName(H),te=this.buildVisualContainerFromConfig(ne,o,l);te.layouts=jsCommon.ArrayExtensions.extendWithId([{id:U,position:a.position}]);var Ce=this.explorationNavigationService.getCurrentExploration();Ce.defaultDrillFilterOtherVisuals&&(te.drillFilterOtherVisuals=!0);var ye=a.exploreCanvas,we=ye.contract,Te=ce.getSelectedCanvasItems(this.selectionService),De=Te&&Te[0],Re=Te&&1===Te.length&&powerbi.explore.contracts.isVisualContainerGroup(De);a.postProcessing&&(te.postProcessing=a.postProcessing({outputVisualContainer:te,selectedVisualContainers:a.selectedVisualContainers||we.visualContainers})),we.visualContainers.push(te),we.visualContainerGroups=Re&&powerbi.explore.contracts.isVisualContainerGroup(De)?k.addToGroup(te,De,we.visualContainerGroups):k.add(we.visualContainerGroups,te),L&&this.eventBridge.publishToChannel(be.visualContainerAdded,{visualName:te.name});var Ze=xe.ViewModelFactory.convertVisualContainer(Ce,we,te,U);if(Ze){if(ye.visualContainers.push(Ze),Re){var Ye=k.find(De.name,ye.visualContainerGroups);xe.isVisualContainerGroup(Ye)&&(ye.visualContainerGroups=k.addToGroup(Ze,Ye,ye.visualContainerGroups)),se.syncCanvasItemViewModelsWithContracts(ye.visualContainerGroups,we.visualContainerGroups);var qe=k.find(De.name,ye.visualContainerGroups);xe.isVisualContainerGroup(qe)&&this.layoutAuthoring.addCanvasItemToGroup(qe,Ze,!0)}else ye.visualContainerGroups=k.add(ye.visualContainerGroups,Ze);return!1!==a.select&&ce.selectCanvasItem(te,this.selectionService,0,!0),this.telemetry.logEvent(Ae.EXCreateVisual,{source:s,visualType:$e.getVisualType(te),visualName:te.name}),te}},ve.prototype.createExprWithAggregate=function(a,o,l,s){if(Ge.discourageAggregation(a,o))return a;var L=this.getPreferredAggregate(o,a,s);return this.aggrOps.createExprWithAggregate(a,o,l,s?s.requiredTypes:null,L)},ve.getPositionForAddedVisual=function(a,o,l){var s=a.contract,L=s.visualContainerGroups;if(!l)return ve.getDefaultVisualContainerPosition(L,o,s);if(null!=l.z)return l;var U=_.cloneDeep(l);return U.z=se.getZIndexForNewCanvasItem(L,o),U},ve.getDefaultVisualContainerPosition=function(a,o,l){return{height:0,width:0,x:0,y:0,z:se.getZIndexForNewCanvasItem(a,o),tabOrder:se.getTabOrderForNewVisual(l,!0,o)}},ve.prototype.shouldPreferGroupToAggregate=function(a,o,l,s,L){if(s){var U=L||this.findCompatibleRole(a,s,o,!1);if(U&&U.kind===lt.GroupingOrMeasure&&1===U.kindPreference)return!0}if(L&&L.kind===lt.GroupingOrMeasure){var H=this.isRoleOrExprLatLong(a,o,L);if(H){if(!s)return!0;var ne=$e.getVisualQuery(s);if(ne&&ne.projections){var te=this.visualPluginService.capabilities(s.config.singleVisual.visualType),Ce=powerbi.visualCapabilitiesHelperModuleFactory().create(te,this.geotaggingAnalyzerService),ye=void 0;H&&(ye=Ce.getNonLatLongRoles());for(var we=0,Te=ye;we<Te.length;we++)if(ne.projections[Te[we]])return!1}}else{if(!Ge.isExprValidForAggregation(o)||l)return!0;var Re=o.getMetadata(a);if(We.isNumericMeasure(o,Re,a))return 1===(null==Re?void 0:Re.defaultAggregate)}}return!L&&1===(null==(Re=o.getMetadata(a))?void 0:Re.defaultAggregate)||L&&L.kind!==lt.Measure},ve.prototype.getPreferredAggregate=function(a,o,l){if(this.isRoleOrExprLatLong(a,o,l))return 1},ve.prototype.isRoleOrExprLatLong=function(a,o,l){var s=powerbi.visualCapabilitiesHelperModuleFactory().isValueTypeDescriptorLatLong;if(l){var L=l.preferredTypes;if(s(_.isEmpty(L)?void 0:L[0]))return!0}var H=o.getMetadata(a);return!!s(H?H.type:void 0)},ve.prototype.canHierarchyLevelJoinExistingGroup=function(a,o,l,s,L){var U=o&&o.projections[l];if(J.isHierarchyLevel(s)&&U&&U.all().length>0){var H=s,ne=U.all(),te=nt.expandExpr(a,H.arg),Ce=_.isNumber(L)?L-1:ne.length-1;if(Ce>=0&&nt.areHierarchyLevelsOrdered(te,o.tryGetExpr(l,Ce),H)||_.isNumber(L)&&L<ne.length&&nt.areHierarchyLevelsOrdered(te,H,o.tryGetExpr(l,L)))return!0}return!1},ve.prototype.addHierarchyLevelToExistingHierarchiesInVisual=function(a){var s=a.visualContainer,L=a.hideOnOverflow,H=!1,ne=F.getOptionsToAddHierarchyLevelToExistingHierarchies(a.schema,a.capabilities,s.config.singleVisual.query,a.expr);if(ne)for(var te=0,Ce=ne;te<Ce.length;te++){var ye=Ce[te];ye.hideOnOverflow=L,H=this.core.add(ye,s.config,!1)||H}return H},ve.prototype.resetSearchProperties=function(a){var o=$e.getObjectDefinitions(a);if(o){var l=$e.getVisualCapabilities(a,this.visualPluginService),s=this.filterGenerator.tryGetSelfFilterEnabledProperty(l);s&&re.deleteProperty(o,s.objectName,null,s.propertyName);var L=this.filterGenerator.tryGetSelfFilterProperty(l);L&&re.deleteProperty(o,L.objectName,null,L.propertyName)}},ve.prototype.logReportMeasureMoveTelemetry=function(a,o,l,s,L){if(l!==s){var U=L&&L.getTargetEntity();if(U&&U.schema===Ie.ExplorationSchemaName){var H=L.getConceptualProperty(a);if(H){var ne=this.getVisualDataRole(o,l),te=this.getVisualDataRole(o,s),Ce=JSON.stringify(ne.requiredTypes),ye=JSON.stringify(te.requiredTypes);Ce!==ye&&this.telemetry.logEvent(Ae.EXReportMeasureMoveRoleKind,{dataType:Z[H.type.primitiveType],sourceTypes:Ce,targetTypes:ye})}}}},ve.prototype.setVisualDrillFilterOtherVisualsSetting=function(a,o){a.drillFilterOtherVisuals!==o&&(a.drillFilterOtherVisuals=o,this.eventBridge.publishToChannel(be.visualDrillFilterOtherVisualsSettingChanged,{visualContainer:a,on:o}))},ve.prototype.customizeConvertTo=function(a,o){var l=a.config.singleVisual,s=this.visualPluginService.getCustomizeConvertTo(l.visualType,o,this.featureSwitchService.featureSwitches);if(s&&s.objects){l.objects||(l.objects={});var L=l.objects,U=l.mobileObjects,H=this.visualPluginService.capabilities(l.visualType),ne=this.visualPluginService.capabilities(o);for(var te in s.objects){var Ce=s.objects[te],ye=ne.objects[te];for(var we in"CustomizeConvert: There exists no property ".concat(te),Ce){var Te=Ce[we],De=ye.properties[we];"CustomizeConvert: There exists no property ".concat(te," ").concat(we);var Re=De.type;this.customizeConvertProperty(L,H,Te,Re,{objectName:te,propertyName:we}),U&&this.customizeConvertProperty(U,H,Te,Re,{objectName:te,propertyName:we})}}return s}},ve.prototype.customizeConvertProperty=function(a,o,l,s,L){var U,H=[];if(l.transformArgs)for(var ne=0,te=l.transformArgs;ne<te.length;ne++){var Ce=te[ne],ye=Ce.identifier,we=ye.objectName,Te=ye.propertyName,De=this.getVisualObjectPropertyDefinition(a,Ce.identifier,Ce.selector),Re=o.objects[we].properties[Te].type,Ye=void 0;Re.fill&&Re.fill.solid?Ye=De&&De.solid&&De.solid.color:De instanceof J?Ye=De:null==De||"CustomizeConvert: no implementation for unwrapping arg type, ".concat(we," ").concat(Te),H.push(Ye)}var bt,at=L.objectName,it=L.propertyName,ct=(l.transform||_.identity).apply(void 0,H),vt=s;ct?s.fill&&s.fill.solid?(!J.isConstantText(ct)&&J.isThemeDataColor(ct),U={solid:{color:ct}}):vt.bool||vt.numeric||vt.integer||vt.text||vt.enumeration||vt.formatting?U=ct:"CustomizeConvert: no implementation for wrapping target type,\n                ".concat(at," ").concat(it):U=void 0,void 0!==U?(bt=this.getOrCreateDataViewObjectDefinition(a,L,l.targetSelector)).properties[it]=U:(bt=this.getDataViewObjectDefinition(a[at],l.targetSelector))&&bt.properties[it]&&delete bt.properties[it]},ve.prototype.getVisualObjectPropertyDefinition=function(a,o,l){var L=o.propertyName,H=this.getDataViewObjectDefinition(a[o.objectName]||[],l);return H&&H.properties[L]},ve.prototype.getOrCreateDataViewObjectDefinition=function(a,o,l){var s=o.objectName,L=a[s]=a[s]||[],U=this.getDataViewObjectDefinition(L,l);return U||a[s].push(U=void 0!==l?{properties:{},selector:l}:{properties:{}}),U},ve.prototype.getDataViewObjectDefinition=function(a,o){return _.find(a,function(s){return null==s.selector&&null==o||s.selector&&o&&s.selector.id===o.id})},ve.prototype.checkSparklineRemovedAndLog=function(a,o,l){var s,L;if(o.expr)L=jsCommon.ArrayExtensions.ensureArray(o.expr);else{var H=o;if(H.role&&null!=H.projOptions.fieldIndex){var ne=a.tryGetExprs(H.role);_.isEmpty(ne)||(L=ne.slice(H.projOptions.fieldIndex,H.projOptions.fieldIndex+(null!==(s=H.count)&&void 0!==s?s:1)))}}if(!_.isEmpty(L))for(var te=0,Ce=L;te<Ce.length;te++){var ye=Ce[te];J.isSparklineData(ye)&&this.logSparklineEvent(ye,l)}},ve.prototype.logSparklineEvent=function(a,o){var l=Oe.getFieldCharacteristics(a,o);this.telemetry.logEvent(Ae.SparklinesDelete,{groupingType:l.groupingType,measureType:l.measureType})},ve.prototype.isVisualRecommendationAllowed=function(a){return this.featureSwitchService.featureSwitches.onObject&&$e.isVisualTypeAutoSelect(a)},ve.\u0275fac=function(o){return new(o||ve)(i.\u0275\u0275inject(O.D),i.\u0275\u0275inject(I.f),i.\u0275\u0275inject(T.O),i.\u0275\u0275inject(v.r),i.\u0275\u0275inject(c.y0),i.\u0275\u0275inject(f.z),i.\u0275\u0275inject(M.z),i.\u0275\u0275inject(A.q),i.\u0275\u0275inject(b.L),i.\u0275\u0275inject(P.J),i.\u0275\u0275inject(u.vZ),i.\u0275\u0275inject(y.K),i.\u0275\u0275inject(C.s),i.\u0275\u0275inject(d.s),i.\u0275\u0275inject(g.v),i.\u0275\u0275inject(S.r),i.\u0275\u0275inject(r.C),i.\u0275\u0275inject(B.j),i.\u0275\u0275inject(h.F),i.\u0275\u0275inject(p.o),i.\u0275\u0275inject(D.kc),i.\u0275\u0275inject(x.U),i.\u0275\u0275inject(z.U),i.\u0275\u0275inject(w.s),i.\u0275\u0275inject(V.Q),i.\u0275\u0275inject(Q.g),i.\u0275\u0275inject(n.e,8))},ve.\u0275prov=i.\u0275\u0275defineInjectable({token:ve,factory:ve.\u0275fac}),ve}(),ke=function(ve){function a(){return null!==ve&&ve.apply(this,arguments)||this}return(0,e.ZT)(a,ve),a.prototype.visitScopedEval=function(o){return new st(o.expression,[])},a}(powerbi.data.SQExprRewriter),We=function(){function ve(){}return ve.getVisualDefaultType=function(a,o,l,s){var L=a.getMetadata(o);if(L&&L.type.geography)return R.map.name;var U=Me.asFieldPattern(a);if(l&&U){var H=U.column||U.groupingColumn,ne=H&&H.name,te=U.hierarchyLevel&&U.hierarchyLevel||U.columnHierarchyLevelVariation&&U.columnHierarchyLevelVariation.level;if(te){var Ce=te.level;if(l.isGeographic(Ce))return R.map.name;var ye=nt.getConceptualHierarchyLevel(o,te.schema,te.entity,te.name,Ce);ne=ye&&ye.column&&ye.column.name}if(ne&&l.isGeographic(ne))return R.map.name}var we=U.column,Te=we&&o.schema(we.schema).findProperty(we.entity,we.name).column;return Ge.getWhatIfParameterMetadata(Te)&&1===Te.defaultAggregate?R.slicer.name:ve.isNumericMeasure(a,L,o)&&1!==L.defaultAggregate?R.clusteredColumnChart.name:s&&s.pivotTableVisualEnabled?R.tableEx.name:R.table.name},ve.isNumericMeasure=function(a,o,l){return!!o&&(1===o.kind||o.type.numeric&&!Ge.discourageAggregation(a,l))},ve}();function ze(ve){return null!=ve.expr}},41844:function(Le,oe,t){t.d(oe,{$:function(){return le}});var e=t(7005),n=t(31288),m=t(45131),i=t(709),O=t(59214),I=t(26963),T=t(78099),f=t(7772),M=t(44302),A=t(67613),b=t(86718),P=t(87714),y=t(43801),C=t(42645),d=t(89718),g=t(64857),S=t(11719),B=t(8576),w=t(57644),V=t(56577),v=t(81602),c=powerbi.visuals.ActionButtonType,u=powerbi.explore.contracts,r=powerbi.data,h=powerbi.data.DataViewObjectDefinitions,p=powerbi.explore.services.events,D=powerbi.explore.FilterUtils,x=powerbi.ItemGroupingManager,z=powerbi.visuals.plugins,Q=powerbi.explore.PodUtils,q=powerbi.explore.services.selectionUtils,de=powerbi.data.SemanticFilter,se=r.SQExpr,Ie=r.SQExprBuilder,fe=powerbi.telemetry,re=powerbi.explore.util,pe=powerbi.explore.viewModels,ge=powerbi.explore.util.VisualContainerUtils,be=powerbi.explore.contracts.VisualLink,ae={x:0,y:0,width:100,height:40};function X(ee,N){return!!ee&&!!N&&N.container===ee&&0===N.scopeType}var le=function(ee){function N(F,E,k,R,W,Z,me,_e,he,G,ce,Fe,je,Oe,J,ue,Me){void 0===Me&&(Me=new m.I);var Se=ee.call(this)||this;return Se.visualPluginService=F,Se.conceptualSchemaProxy=E,Se.contextActivityService=k,Se.telemetryService=R,Se.explorationNavigationService=W,Se.selectionService=Z,Se.eventBridge=me,Se.undoRedoService=_e,Se.featureSwitchService=he,Se.filterGenerator=G,Se.viewModeState=ce,Se.dataSource=Fe,Se.layoutAuthoring=je,Se.visualAuthoringOperations=Oe,Se.visualSyncService=J,Se.lazyScoped=ue,Se.linguisticSchemaProxy=Me,Se.canvasItemAddedSubject=new n.xQ,Se.canvasItemAdded$=Se.canvasItemAddedSubject.asObservable(),Se.canvasItemDeletedSubject=new n.xQ,Se.canvasItemDeleted$=Se.canvasItemDeletedSubject.asObservable(),Se}return(0,e.ZT)(N,ee),N.prototype.addFieldToVisual=function(F,E,k,R,W){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var Z,me=this;return(0,e.Jh)(this,function(_e){switch(_e.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return Z=_e.sent(),[2,this.registerUndoableAction(E,function(he){return me.runVisualContainerUpdateAction(function(Fe){return me.visualAuthoringOperations.addFieldToVisual(he,F,Fe,Z,R,W)},[k])},"AddFieldToVisual")]}})})},N.prototype.toggleFieldHidden=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var W,Z,me=this;return(0,e.Jh)(this,function(_e){switch(_e.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return W=_e.sent(),[4,this.getSchema(R)];case 2:return Z=_e.sent(),[2,this.undoRedoService.register("HideField",function(){var he=me.visualAuthoringOperations.toggleFieldHidden(F,E,k,Z,W);return me.raiseVisualContainerChanged(k),he})]}})})},N.prototype.addFieldInRole=function(F,E,k,R,W,Z,me,_e){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var he,G=this;return(0,e.Jh)(this,function(ce){switch(ce.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return he=ce.sent(),[2,this.registerUndoableAction(k,function(Fe){return G.runVisualContainerUpdateAction(function(J){return G.visualAuthoringOperations.addFieldInRole(Fe,F,E,J,W,Z,me,1,he,_e)},[R])},"AddFieldInRole")]}})})},N.prototype.resolveParameters=function(F,E,k){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var R,_e=this;return(0,e.Jh)(this,function(he){switch(he.label){case 0:return[4,this.getSchema(F)];case 1:return R=he.sent(),[2,this.runVisualContainerUpdateActionCustom(function(ce){return _e.visualAuthoringOperations.resolveParameters(R,ce,k)},[E],{aliasChange:!1,queryChange:!1},function(ce){return ce.aliasChange||ce.queryChange})]}})})},N.prototype.updateVisualCalculation=function(F,E,k,R,W){var Z=this;return this.undoRedoService.register("UpdateVisualCalculation",function(){return Z.runVisualContainerUpdateAction(function(he){var G=Z.visualAuthoringOperations.updateVisualCalculation(he,E,k,R,W);return G&&Z.raiseVisualContainerChanged(he),G},[F])})},N.prototype.expandHierarchy=function(F,E,k,R,W){var Z=this;return this.registerUndoableAction(F,function(me){return Z.runVisualContainerUpdateAction(function(G){return Z.visualAuthoringOperations.expandHierarchy(me,G,k,R,W)},[E])},"ExpandHierarchy")},N.prototype.removeFieldFromAllRoles=function(F,E){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var k,R=this;return(0,e.Jh)(this,function(W){switch(W.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return k=W.sent(),[2,this.registerUndoableAction(F,function(Z){var _e=q.getSelectedVisualContainers(R.selectionService);return R.runVisualContainerUpdateAction(function(G){return R.visualAuthoringOperations.removeFieldFromAllRoles(E,Z,k,[G])},_e)},"RemoveFieldFromAllRoles")]}})})},N.prototype.removeFieldFromRole=function(F,E){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var k,R=this;return(0,e.Jh)(this,function(W){switch(W.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return k=W.sent(),[2,this.undoRedoService.register("RemoveFieldFromRole",function(){var me=q.getSelectedVisual(R.selectionService);return R.runVisualContainerUpdateAction(function(he){return R.visualAuthoringOperations.removeFieldFromRole(F,E,he,k)},[me])})]}})})},N.prototype.removeInvalidExpressions=function(F,E){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var k,R=this;return(0,e.Jh)(this,function(W){switch(W.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return k=W.sent(),[2,this.registerUndoableAction(E,function(Z){return R.visualAuthoringOperations.removeInvalidExpressions(Z,F,k)},"RemoveInvalidExpressions")]}})})},N.prototype.moveField=function(F,E,k,R,W,Z,me){var _e=this;return this.registerUndoableAction(Z,function(he){var ce=q.getSelectedVisual(_e.selectionService);return _e.runVisualContainerUpdateAction(function(je){return _e.visualAuthoringOperations.moveField(he,F,E,k,R,W,je,me)},[ce])},"MoveField")},N.prototype.drillDownLevel=function(F,E,k){var R=this;this.undoRedoService.register("DrillDownLevel",function(){return R.visualAuthoringOperations.drillDownLevel(F,E,k)})},N.prototype.replaceField=function(F,E,k,R,W,Z){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var me,_e=this;return(0,e.Jh)(this,function(he){switch(he.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return me=he.sent(),[2,this.registerUndoableAction(W,function(G){return _e.runVisualContainerUpdateAction(function(je){return _e.visualAuthoringOperations.replaceField(G,F,E,k,je,Z,me)},[R])},"ReplaceField")]}})})},N.prototype.drillDown=function(F,E,k,R){var W=this;return this.registerUndoableAction(k,function(Z){return W.visualAuthoringOperations.drillDown(Z,F,E,R)},"DrillDown")},N.prototype.drillUp=function(F,E){var k=this;this.undoRedoService.register("DrillUp",function(){return k.visualAuthoringOperations.drillUp(F,E)})},N.prototype.toggleDrillFilterOtherVisualsSetting=function(){var F=this,E=q.getSelectedVisual(this.selectionService);if(E){var k=!E.drillFilterOtherVisuals;this.undoRedoService.register("SetDrillFilterOtherVisualsSetting",function(){return F.visualAuthoringOperations.setDrillFilterOtherVisualsSetting(k)})}},N.prototype.setDrillFilterOtherVisualsSetting=function(F){var E=this;this.undoRedoService.register("SetDrillFilterOtherVisualsSetting",function(){return E.visualAuthoringOperations.setDrillFilterOtherVisualsSetting(F)})},N.prototype.setAggregate=function(F,E,k,R,W){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var Z,me=this;return(0,e.Jh)(this,function(_e){switch(_e.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return Z=_e.sent(),[2,this.registerUndoableAction(W,function(he){return me.visualAuthoringOperations.setAggregate(he,F,E,k,R,Z)},"SetAggregate")]}})})},N.prototype.removeAggregate=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var W,Z=this;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return W=me.sent(),[2,this.registerUndoableAction(R,function(_e){return Z.visualAuthoringOperations.removeAggregate(_e,F,E,k,W)},"RemoveAggregate")]}})})},N.prototype.setPercentOfGrandTotal=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var W;return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return[4,this.getSchema(R)];case 1:return W=Z.sent(),[2,this.visualAuthoringOperations.setPercentOfGrandTotal(W,F,E,k)]}})})},N.prototype.removePercentOfGrandTotal=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var W;return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return[4,this.getSchema(R)];case 1:return W=Z.sent(),[2,this.visualAuthoringOperations.removePercentOfGrandTotal(W,F,E,k)]}})})},N.prototype.setPercentOfRoleTotal=function(F,E,k,R,W){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var Z;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return[4,this.getSchema(W)];case 1:return Z=me.sent(),[2,this.visualAuthoringOperations.setPercentOfRoleTotal(Z,F,E,k,R)]}})})},N.prototype.removePercentOfRoleTotal=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var W;return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return[4,this.getSchema(R)];case 1:return W=Z.sent(),[2,this.visualAuthoringOperations.removePercentOfRoleTotal(W,F,E,k)]}})})},N.prototype.toggleShowAll=function(F,E){var k=this;this.undoRedoService.register("ToggleShowAll",function(){k.visualAuthoringOperations.toggleShowAll(F,E)})},N.prototype.setVariation=function(F,E,k,R,W,Z){var me=this;return this.registerUndoableAction(F,function(_e){return me.runVisualContainerUpdateAction(function(ce){return me.visualAuthoringOperations.setVariation(_e,ce,k,R,W,Z)},[E])},"SetVariation")},N.prototype.createVisualContainerConfig=function(F){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var E,k;return(0,e.Jh)(this,function(R){switch(R.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return E=R.sent(),[4,this.conceptualSchemaProxy.get(F.dataSources)];case 2:return k=R.sent(),[2,this.visualAuthoringOperations.createVisualContainerConfig(k,F,E)]}})})},N.prototype.addVisualContainerImage=function(F,E,k,R,W,Z,me){var _e=this;this.undoRedoService.register("AddVisualContainerImage",function(){_e.visualAuthoringOperations.addVisualContainerImageFromData({sections:F,exploreCanvas:E,position:me},k,Z),_e.publishVisualContainerAddedEvent()})},N.prototype.addVisualContainerBasicShapeVisual=function(F,E,k){var R=this;this.undoRedoService.register("AddVisualContainerBasicShape",function(){R.visualAuthoringOperations.addVisualContainerBasicShapeVisual({sections:F,exploreCanvas:E,position:void 0},k),R.publishVisualContainerAddedEvent()})},N.prototype.addVisualContainerShapeVisual=function(F,E,k){var R=this;this.undoRedoService.register("AddVisualContainerShape",function(){R.visualAuthoringOperations.addVisualContainerShapeVisual({sections:F,exploreCanvas:E,position:void 0},k),R.publishVisualContainerAddedEvent()})},N.prototype.addVisualContainerActionButtonVisual=function(F,E,k){var R=this;this.undoRedoService.register("AddVisualContainerActionButton",function(){R.visualAuthoringOperations.addVisualContainerActionButtonVisual({sections:F,exploreCanvas:E,position:ae},k),R.publishVisualContainerAddedEvent()})},N.prototype.addVisualContainerNavigatorVisual=function(F,E,k){var R=this;this.undoRedoService.register("addVisualContainerNavigatorVisual_"+k,function(){var W=R.getNavigatorWidth(k);R.visualAuthoringOperations.addVisualContainerNavigatorVisual({sections:F,exploreCanvas:E,position:{x:0,y:0,width:W,height:50}},k),R.publishVisualContainerAddedEvent()})},N.prototype.addVisualContainerTextbox=function(F,E,k,R,W){return this.addEmptyVisualContainer(F,E,z&&z.textbox&&z.textbox.name,k,R,W)},N.prototype.addVisualContainer=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var W,Z=this;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return F.postProcessing=this.getPostProcessing(F.visualType,F.shouldSummarize),[4,this.getAuthoringVisualRecommendationInterop()];case 1:return W=me.sent(),[2,this.registerUndoableAction(F.dataSources,function(_e){var he=Z.visualAuthoringOperations.addVisualContainer(_e,F,E,k,W,R);return Z.publishVisualContainerAddedEvent(he),he},"AddVisualContainer")]}})})},N.prototype.addVisualContainerFromConfig=function(F,E,k,R){var W=this;return this.undoRedoService.register("AddVisualContainerFromConfig",function(){var Z=W.visualAuthoringOperations.addVisualContainerFromConfig(F,E,k,R);return W.publishVisualContainerAddedEvent(Z),Z})},N.prototype.addEmptyVisualContainer=function(F,E,k,R,W,Z){var me=this,_e=this.getPostProcessing(k,W);return this.undoRedoService.register("AddEmptyVisualContainer",function(){var he=me.visualAuthoringOperations.addEmptyVisualContainer(F,E,k,R,Z,_e);return me.publishVisualContainerAddedEvent(he),he})},N.prototype.groupVisualContainers=function(F,E){var k=this;return this.undoRedoService.register("GroupVisualContainers",function(){return k.visualAuthoringOperations.groupVisualContainers(F,E)})},N.prototype.ungroupVisualContainers=function(F,E){var k=this;return this.undoRedoService.register("UngroupVisualContainers",function(){return k.visualAuthoringOperations.ungroupVisualContainers(F,E)})},N.prototype.moveCanvasItemsInTree=function(F,E,k,R,W){var Z=this;return this.undoRedoService.register(W?"MergeCanvasItemContainers":"MoveCanvasItemContainersInTree",function(){return Z.visualAuthoringOperations.moveCanvasItemsInTree(F,E,k,R,W)})},N.prototype.addConfigToCategoricalFilters=function(F,E,k,R){void 0===R&&(R=!0);var W=_.filter(F,function(he){return!he.isInvalid()&&he.canVisualize()});if(W)for(var Z=0,me=W;Z<me.length;Z++)this.createFilterVisualContainerConfig(me[Z].contract,k,E,R)},N.prototype.createVisualFilters=function(F,E,k,R){return this.visualAuthoringOperations.createVisualFilters(F,E,k,R)},N.prototype.setFilterSortType=function(F,E,k){var R=this;return this.registerUndoableAction(F,function(W){return R.visualAuthoringOperations.setFilterSortType(W,E,k)},"setFilterSortType")},N.prototype.moveFilter=function(F,E,k,R){var W=this;return this.registerUndoableAction(F,function(Z){return W.visualAuthoringOperations.moveFilter(Z,E,k,R)},"moveFilter")},N.prototype.addFilter=function(F,E,k,R){var W=this;return this.registerUndoableAction(k,function(Z){return W.visualAuthoringOperations.addFilter(Z,F,E,k,!1,R)},"AddFilter")},N.prototype.addDrillthroughFilter=function(F,E,k){return(0,e.mG)(this,void 0,void 0,function(){var R,W=this;return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return[4,this.lazyScoped.get("explorationAuthoring")];case 1:return R=Z.sent(),[4,this.registerUndoableAction(k,function(me){var _e=W.explorationNavigationService.getCurrentSection();W.featureSwitchService.featureSwitches.onObject&&_e&&!jsCommon.EnumExtensions.hasFlag(_e.type,2)&&R.setSectionType(W.explorationNavigationService.getCurrentExploration(),_e,2,!0);var he=W.visualAuthoringOperations.addFilter(me,F,E,k,!0);if(!_.isEmpty(he)){var G=W.explorationNavigationService.getAllSections();if(!W.shouldAddBackButton(_e))return he;var ce=ae,Fe=W.explorationNavigationService.getCurrentExploreCanvas();return Fe&&W.visualAuthoringOperations.addVisualContainerActionButtonVisual({sections:G,exploreCanvas:Fe,position:ce,select:!1},c.back),he}},"AddDrillthroughFilter")];case 2:return[2,Z.sent()]}})})},N.prototype.shouldAddBackButton=function(F){if(!F)return!1;var k=F.type;return(this.featureSwitchService.featureSwitches.onObject?jsCommon.EnumExtensions.hasFlag(k,2):null==k||0===k)&&!this.hasBackButton(F)},N.prototype.runVisualContainerUpdateActionCustom=function(F,E,k,R){if(_.isEmpty(E))return k;for(var W=k,Z=[],me=0,_e=E;me<_e.length;me++){var he=_e[me];if(he&&-1===_.indexOf(Z,he)){var G=F(he);if(R(G)){Z.push(he);for(var ce=0,Fe=this.visualSyncService.getVisualsAffectByFieldChanges(he);ce<Fe.length;ce++){var je=Fe[ce];F(je),Z.push(je)}W=G}}}return W},N.prototype.runVisualContainerUpdateAction=function(F,E){return this.runVisualContainerUpdateActionCustom(F,E,!1,function(k){return k})},N.prototype.publishVisualContainerAddedEvent=function(F){void 0===F&&(F=null),this.canvasItemAddedSubject.next(null==F?void 0:F.name),this.eventBridge.publishToChannel(p.VisualContainerAdded,F)},N.prototype.publishVisualContainerDeletedEvent=function(F){this.canvasItemDeletedSubject.next(F.name)},N.prototype.hasBackButton=function(F){return _.some(F.visualContainers,function(k){var Z,R=r.DataViewObjectDefinitions.getObjectDefinition(k.config.singleVisual.vcObjects,"visualLink",void 0),W=R&&R.properties;return W&&(Z={show:W.show&&W.show.value,bookmark:W.bookmark&&W.bookmark.value,type:W.type&&W.type.value}),Z&&Z.show&&be.getType(Z)===be.Back})},N.prototype.removeFilter=function(F,E,k,R){var W=this;return this.undoRedoService.register("RemoveFilter",function(){var Z=2===F.howCreated,me=W.visualAuthoringOperations.removeFilter(F,E,k,R);return me&&Z&&X(E.container,E)&&W.updateCrossDrillFromVisualContainer(E.container),5===F.howCreated&&!F.isTransient&&re.logDrillthroughFilterUpdateTelemetry(W.telemetryService,"Delete",E.container,k),W.telemetryService.logChildEvent(k&&k.event,fe.EXRemoveFilter,{filterType:re.getTelemetryFilterType(F.type),filterScopeType:re.getTelemetryFilterScopeType(E.scopeType),fieldKind:F.expression&&re.getTelemetryFieldKind(F.expression),viewMode:re.getTelemetryViewMode(W.viewModeState.getMode())}),me})},N.prototype.clearFilter=function(F,E,k){var R=this;return this.undoRedoService.register("ClearFilter",function(){R.telemetryService.logChildEvent(k.event,fe.EXClearFilter,{filterType:re.getTelemetryFilterType(E.type),filterScopeType:re.getTelemetryFilterScopeType(F.scopeType),fieldKind:re.getTelemetryFieldKind(E.expression),viewMode:re.getTelemetryViewMode(R.viewModeState.getMode())}),R.updateFilter(F,E,void 0)})},N.prototype.toggleFilterVisibility=function(F,E){var k=this;return this.undoRedoService.register("HideFilter",function(){k.telemetryService.logEvent(fe.EXHideFilter,{filterType:re.getTelemetryFilterType(E.type),filterScopeType:re.getTelemetryFilterScopeType(F.scopeType),fieldKind:re.getTelemetryFieldKind(E.expression),isFilterHidden:E.isHiddenInViewMode}),E.isHiddenInViewMode=!E.isHiddenInViewMode,k.updateFilter(F,E,E.filter),D.ensureFilterHasName(E,F)})},N.prototype.toggleFilterLock=function(F,E){var k=this;return this.undoRedoService.register("lockFilter",function(){k.telemetryService.logEvent(fe.EXLockFilter,{filterType:re.getTelemetryFilterType(E.type),filterScopeType:re.getTelemetryFilterScopeType(F.scopeType),fieldKind:re.getTelemetryFieldKind(E.expression),isFilterLocked:E.isLockedInViewMode}),E.isLockedInViewMode=!E.isLockedInViewMode,k.updateFilter(F,E,E.filter),D.ensureFilterHasName(E,F)})},N.prototype.renameFilter=function(F,E,k){var W,R=this;this.undoRedoService.register("renameFilter",function(){k?E.displayName=k:E&&delete E.displayName,R.updateFilter(F,E,E.filter),D.ensureFilterHasName(E,F)}),this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(W=D.createChangeFilterActivity(this.contextActivityService,"Rename Filer")),D.notifyFilterContainerChangedByUser(this.eventBridge,{filter:E,changeType:256,scope:F,changeFilterActivity:W}),W&&W.resolve()},N.prototype.updateFilter=function(F,E,k){var R=2===E.howCreated,W=E.filter;E.filter=k;var Z=E.config&&E.config.singleVisual;if(Z){var me=this.visualPluginService.capabilities(Z.visualType),_e=this.filterGenerator.tryGetFilterPropertyIdentifier(me);_e&&(Z.objects||(Z.objects={}),null==k?h.deleteProperty(Z.objects,_e.objectName,null,_e.propertyName):h.setValue(Z.objects,_e,null,k))}R&&!de.isSameFilter(W,k)&&X(F.container,F)&&this.updateCrossDrillFromVisualContainer(F.container);var he=F.container;null==he.filters&&(he.filters=[]),-1===_.indexOf(he.filters,E)&&he.filters.push(E)},N.prototype.updateTopNFilter=function(F,E,k,R,W,Z){var _e,he,me=this;if(F){var G=ge.getVisualQuery(F);if(G){var ce=G.defn.select();_e=_.some(ce,function(Oe){return se.equals(Oe.expr,E.fieldBeingFiltered,!0,!0)}),he=_.some(ce,function(Oe){return se.equals(Oe.expr,E.orderByField,!0,!0)})}}var Fe=this.telemetryService.startEvent(fe.EXFilterPaneTopNFilterApplied,{isTop:E.isTop,itemCount:E.itemCount,atGrain:_e,onVisualMeasure:he,viewMode:re.getTelemetryViewMode(this.viewModeState.getMode()),isInOutspacePane:W}),je=this.dataSource.get();return this.registerUndoableAction(je,function(Oe){var J=r.TopNFilterPattern.buildFilterFromParameters({fieldBeingFiltered:E.fieldBeingFiltered,isTop:E.isTop,itemCount:E.itemCount,orderByField:E.orderByField});return me.updateFilter(k,R,J),Fe.resolve(),!0},"Apply TopN Filter",Z)},N.prototype.createFilterVisualContainerConfig=function(F,E,k,R){return void 0===R&&(R=!0),this.visualAuthoringOperations.createFilterVisualContainerConfig(F,E,k,R)},N.prototype.raiseVisualContainerChanged=function(F,E){void 0===E&&(E="UserAction_EditVisual"),this.raiseVisualContainersChanged([F],E)},N.prototype.raiseVisualContainersChanged=function(F,E){void 0===E&&(E="UserAction_EditVisual"),this.eventBridge.publishToChannel(p.visualContainerChanged,{affectContainer:function(R){return _.some(F,function(W){return W===R})},sourceLabelKey:E})},N.prototype.raiseVisualContainerGroupChanged=function(F){this.raiseVisualContainerGroupsChanged([F])},N.prototype.raiseVisualContainerGroupsChanged=function(F){this.eventBridge.publishToChannel(p.visualContainerGroupChanged,{affectContainer:function(k){return _.includes(F,k)}})},N.prototype.raiseCanvasItemChanged=function(F,E){void 0===E&&(E="UserAction_EditVisual"),this.raiseCanvasItemsChanged([F],E)},N.prototype.raiseCanvasItemsChanged=function(F,E){void 0===E&&(E="UserAction_EditVisual");var k=[],R=[];u.traverseVisualContainerGroups(F,function(W){u.isVisualContainer(W)?k.push(W):R.push(W)}),_.isEmpty(k)||this.raiseVisualContainersChanged(k,E),_.isEmpty(R)||this.raiseVisualContainerGroupsChanged(R)},N.prototype.convert=function(F,E,k,R,W){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var Z,me=this;return(0,e.Jh)(this,function(_e){switch(_e.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return Z=_e.sent(),[2,this.registerUndoableAction(E,function(he){return me.convertAction(he,F,k,Z,R,W)},"VisualConversion")]}})})},N.prototype.convertMultiple=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var W,Z=this;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return W=me.sent(),[2,this.registerUndoableAction(E,function(_e){return F.reduce(function(he,G){return Z.convertAction(_e,G,k,W,R)&&he},!0)},"MultipleVisualConversion")]}})})},N.prototype.convertAction=function(F,E,k,R,W,Z){var me,_e;if(W){this.filterGenerator.clearFiltersFromVisualContainers(W,[E],"UserAction_EditVisual");var he=this.visualPluginService.getPlugin(k);null!=he&&he.supportsSummarization&&(me=this.getSummarizationPostProcessing(),_e=[_.cloneDeep(E)])}return this.visualAuthoringOperations.convert(F,E,k,R,_e,me,Z)},N.prototype.setOrderBy=function(F,E){var k=F.config.singleVisual;k.query.orderBy(E),k.hasDefaultSort=!1,this.raiseVisualContainerChanged(F)},N.prototype.removeOrderBy=function(F,E){for(var k=0,R=E;k<R.length;k++)F.config.singleVisual.query.removeOrderBy(R[k]);this.raiseVisualContainerChanged(F)},N.prototype.setPropertyDefinition=function(F,E,k,R,W,Z){var me=this,_e=function(){return void 0!==W&&(me.visualAuthoringOperations.removeProperty(F,E,k),k=W),me.visualAuthoringOperations.addProperty(F,E,k,R),me.raiseVisualContainerChanged(F),!0};Z?_e():this.undoRedoService.register("Set Property",_e)},N.prototype.removePropertyDefinition=function(F,E,k){var R=this;this.undoRedoService.register("Removing Property",function(){return R.visualAuthoringOperations.removeProperty(F,E,k),R.raiseVisualContainerChanged(F),!0})},N.prototype.addDataBars=function(F,E,k){var R=this;this.undoRedoService.register("Set Data Bars",function(){return R.visualAuthoringOperations.addProperty(F,E.propertyId,E.selector,k),R.raiseVisualContainerChanged(F),!0})},N.prototype.removeDataBars=function(F,E){var k=this;this.undoRedoService.register("Removing Data Bars",function(){return k.visualAuthoringOperations.removeProperty(F,E.propertyId,E.selector),k.raiseVisualContainerChanged(F),!0})},N.prototype.removeConditionalFormattingAll=function(F,E){var k=this;this.undoRedoService.register("Removing All Conditional Formatting",function(){if(!_.isEmpty(E))for(var R=0,W=E;R<W.length;R++){var Z=W[R];k.visualAuthoringOperations.removeProperty(F,Z.propertyId,Z.selector)}return k.raiseVisualContainerChanged(F),!0})},N.prototype.persistProperties=function(F,E,k,R,W){var Z=this,me=_.isArray(F)?F:[F],_e=E.config.singleVisual,he=function(){var Fe=Z.visualPluginService.capabilities(_e.visualType),je=Z.filterGenerator.tryGetFilterPropertyIdentifier(Fe),Oe=!1,J=function(Ge,nt,st,yt,Ae){je&&Ge===je.objectName&&je.propertyName===st&&(Oe=!0)},ue=_.reduce(me,function(Se,Ge){return Z.visualAuthoringOperations.persistProperties(Ge,_e,J)&&Se},!0);return Oe&&ge.notifyVisualContainersExceptSource(Z.eventBridge,E,"UserAction_ChangeSlicer",R,W),ue?(Z.visualSyncService.syncFilterState(E),ue):ue};return k?he():this.undoRedoService.register("VisualContainerPersistProperties",he)},N.prototype.persistVCProperties=function(F,E){var k=this,R=E.config.singleVisual;return this.undoRedoService.register("VisualContainerPersistVCProperties",function(){var me=_.reduce(F,function(_e,he){return k.visualAuthoringOperations.persistVCProperties(he,R)&&_e},!0);return me&&k.raiseVisualContainerChanged(E),me})},N.prototype.deleteSelectedVisuals=function(F){for(var E=_.map(this.selectionService.getSelectedElements(),function(_e){return _e.canvasItem}),k=!1,R=0,W=E;R<W.length;R++){var Z=W[R];Z&&(k=this.deleteVisualContainerInternal(Z,F)||k)}if(k){var me=_.chain(E).filter(function(_e){return u.isVisualContainer(_e)}).map(function(_e){return _e}).value();this.notifyVisualContainersAndClearSelection(me,F)}},N.prototype.deleteVisualContainer=function(F,E){this.deleteVisualContainerInternal(F,E)&&this.notifyVisualContainersAndClearSelection([F],E)},N.prototype.deleteVisualContainers=function(F,E){var k=this,R=E.sections.filter(function(Z){return Z.selected})[0],W=[];E.contract.sections.forEach(function(Z){F.forEach(Z.name===R.contract.name?function(me){_.some(Z.visualContainers,function(_e){return _e.config.singleVisual.visualType===me.config.singleVisual.visualType})&&W.push(me)}:function(me){_.remove(Z.visualContainers,function(_e){return me.config.singleVisual.visualType===_e.config.singleVisual.visualType}),Z.visualContainerGroups=x.removeBy(Z.visualContainerGroups,function(_e){return u.isVisualContainer(_e)&&me.config.singleVisual.visualType===_e.config.singleVisual.visualType}),k.visualAuthoringOperations.deleteVisualRelationships(Z,me)})}),W.length>0&&(W.forEach(function(Z){k.deleteVisualContainer(Z,E.exploreCanvas)}),this.notifyVisualContainersAndClearSelection(W,E.exploreCanvas))},N.prototype.deleteVisualRelationships=function(F,E){this.visualAuthoringOperations.deleteVisualRelationships(F,E)},N.prototype.setVisualRelationship=function(F,E,k,R){var W=this;this.undoRedoService.register("SetVisualRelationship",function(){return W.visualAuthoringOperations.setVisualRelationship(F,E,k,R)})},N.prototype.setDisplayNameAlias=function(F,E,k,R){var W=this;this.undoRedoService.register("SetDisplayNameAlias",function(){W.visualAuthoringOperations.setDisplayNameAlias(F,E,k,R),W.raiseVisualContainerChanged(F)})},N.prototype.setLinkFieldAsAggregation=function(F,E,k){var R=this;this.undoRedoService.register("Set Link As Aggregation",function(){if(Q.isPodEnabled(F,E)){var W=R.explorationNavigationService.getCurrentExploration(),Z=E.container;null!=W&&null!=Z&&(Q.updateParameter(W,Z.name,F.name,k),R.eventBridge.publishToChannel(p.podParameterChanged,{filter:F,filterName:F.name,type:2,asAggregation:k}))}})},N.prototype.setRequireSingleSelection=function(F,E,k){var R=F.objects,W="requireSingleSelect",Z="general";if(R||(F.objects=R={}),k?h.setValue(R,{objectName:Z,propertyName:W},null,Ie.boolean(k)):h.deleteProperty(R,Z,null,W),Q.isPodEnabled(F,E)){var me=this.explorationNavigationService.getCurrentExploration(),_e=E.container;null!=me&&null!=_e&&this.updatePodParameter(F,me,_e,k)}},N.prototype.updatePodParameter=function(F,E,k,R){var W;R?5===F.howCreated||Q.hasParameter(E,k.name,F.name)||(Q.addParameter(E,k.name,F.name,F.expression,(W={filterName:F.name,type:0,isCausedByCode:!1,fieldExpr:F.expression,asAggregation:!1,isLegacySingleSelection:!0}).asAggregation,!0,Q.determineType(k,this.featureSwitchService.featureSwitches.onObject)),this.eventBridge.publishToChannel(p.podParameterChanged,W)):(Q.deleteParameter(E,k.name,F.name,this.linguisticSchemaProxy),this.eventBridge.publishToChannel(p.podParameterChanged,W={filterName:F.name,type:1}))},N.prototype.setVisibility=function(F,E,k){var R=this;this.undoRedoService.register("Set Visual Containers Visibility",function(){for(var W=0,Z=E;W<Z.length;W++)R.visualAuthoringOperations.setVisibility(Z[W],F,k);R.visualAuthoringOperations.notifyVisualContainers(E),R.eventBridge.publishToChannel(p.canvasItemHiddenChanged,{changedItems:E})})},N.prototype.setVisualContainerGroupVisibility=function(F,E,k){var R=this;this.undoRedoService.register("Set Visual Container Group Visibility",function(){for(var Z=0,me=E;Z<me.length;Z++)R.visualAuthoringOperations.setVisualContainerGroupVisibility(me[Z],F,k)}),this.raiseVisualContainerGroupsChanged(E),this.eventBridge.publishToChannel(p.canvasItemHiddenChanged,{changedItems:E})},N.prototype.setVisualContainerGroupDisplayName=function(F,E){var k=this;this.undoRedoService.register("Set Visual Container Group DisplayName",function(){for(var R=0,W=E;R<W.length;R++)k.visualAuthoringOperations.setVisualContainerGroupDisplayName(W[R],F)}),this.raiseVisualContainerGroupsChanged(E)},N.prototype.setPresentationChangesApplied=function(F){var E=this;return this.undoRedoService.register("setApplyPresentationChanges",function(){var R=q.getSelectedVisual(E.selectionService);return E.runVisualContainerUpdateAction(function(Z){return Z.config.singleVisual.presentationChangesApplied=F},[R])})},N.prototype.updateContainerListOrders=function(F,E,k){var R=this;this.undoRedoService.register("Update Visual Containers for "+k,function(){R.visualAuthoringOperations.updateContainerListOrders(F,E,k)})},N.prototype.applyShowValueAs=function(F,E,k){var R=this;return this.registerUndoableAction(F.dataSources,function(W){if(R.removeShowValueAs(W,F,E))switch(k.kind){case void 0:return!0;case 0:return R.visualAuthoringOperations.setPercentOfGrandTotal(W,F.visualDataRole.name,F.roleIndex,F.visual);case 1:return R.visualAuthoringOperations.setPercentOfRoleTotal(W,k.roles,F.visualDataRole.name,F.roleIndex,F.visual);default:return!1}},"applying quick calc ")},N.prototype.toggleSlicerVisualSearch=function(F,E,k){var R=this;this.undoRedoService.register("ToggleSearchVisualContainer",function(){R.visualAuthoringOperations.toggleSlicerVisualSearch(F,E,k)&&R.raiseVisualContainerChanged(F)})},N.prototype.switchQueryParameter=function(F,E,k){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var R,W=this;return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return R=Z.sent(),[2,this.undoRedoService.register("switchQueryParameter",function(){var _e=q.getSelectedVisual(W.selectionService);return W.runVisualContainerUpdateAction(function(G){return W.visualAuthoringOperations.switchQueryParameter(F,G,E,k,R)},[_e])})]}})})},N.prototype.removeShowValueAs=function(F,E,k){switch(k.kind){case void 0:return!0;case 0:return this.visualAuthoringOperations.removePercentOfGrandTotal(F,E.visualDataRole.name,E.roleIndex,E.visual);case 1:return this.visualAuthoringOperations.removePercentOfRoleTotal(F,E.visualDataRole.name,E.roleIndex,E.visual);default:return!1}},N.prototype.registerUndoableAction=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var W;return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return[4,this.getSchema(F)];case 1:return W=Z.sent(),[2,this.undoRedoService.register(k,function(){return E(W)},R)]}})})},N.prototype.getSchema=function(F){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(E){return[2,this.conceptualSchemaProxy.get(F)]})})},N.prototype.getAuthoringVisualRecommendationInterop=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(F){switch(F.label){case 0:return[4,this.lazyScoped.get("authoringVisualRecommendationInterop")];case 1:return[2,F.sent()]}})})},N.prototype.notifyVisualContainersAndClearSelection=function(F,E){this.filterGenerator.clearFiltersFromVisualContainers(E.contract,F,"UserAction_EditVisual"),this.selectionService.clearSelection()},N.prototype.deleteVisualContainerInternal=function(F,E,k){if(void 0===k&&(k=!1),F){var R=x.find(F.name,E.visualContainerGroups);if(R){var W=E.contract;if(u.isVisualContainer(F)&&pe.isVisualContainer(R)){this.visualAuthoringOperations.deleteVisualRelationships(E.contract,F);var Z=E.visualContainers.indexOf(R);E.visualContainers.splice(Z,1);var me=W.visualContainers.indexOf(F);W.visualContainers.splice(me,1),this.publishVisualContainerDeletedEvent(F)}else if(u.isVisualContainerGroup(F))for(var _e=0,he=F.children;_e<he.length;_e++)this.deleteVisualContainerInternal(he[_e],E,!0);if(!k){W.visualContainerGroups=x.remove(F,W.visualContainerGroups),E.visualContainerGroups=x.remove(R,E.visualContainerGroups),re.CanvasVisualsUtility.syncCanvasItemViewModelsWithContracts(E.visualContainerGroups,W.visualContainerGroups);var ce=R.parentGroup&&x.find(R.parentGroup.name,E.visualContainerGroups);ce&&pe.isVisualContainerGroup(ce)&&this.layoutAuthoring.removeCanvasItemFromGroup(ce,R)}return!0}}},N.prototype.updateCrossDrillFromVisualContainer=function(F){var E=this.explorationNavigationService.getCurrentExploration(),k=_.find(E.sections,function(R){return _.includes(R.visualContainers,F)});k&&this.filterGenerator.updateCrossFilterOnDrill(k,F)},N.prototype.getPostProcessing=function(F,E){var k;if(E){var R=this.visualPluginService.getPlugin(F);R&&R.supportsSummarization&&(k=this.getSummarizationPostProcessing())}return k},N.prototype.getSummarizationPostProcessing=function(){var F=this;return function(E){return(0,e.mG)(F,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(R){switch(R.label){case 0:return[4,this.lazyScoped.get("smartNarrativesSummarization")];case 1:return[4,R.sent().generateSummaries(E.outputVisualContainer,E.selectedVisualContainers)];case 2:return R.sent(),[2]}})})}},N.prototype.getNavigatorWidth=function(F){return"page"===F?Math.min(Math.max(200,200*this.explorationNavigationService.getAllSections().length),1e3):"bookmark"===F?600:void 0},N.\u0275fac=function(E){return new(E||N)(O.\u0275\u0275inject(I.D),O.\u0275\u0275inject(T.i),O.\u0275\u0275inject(f.r),O.\u0275\u0275inject(M.y0),O.\u0275\u0275inject(A.I),O.\u0275\u0275inject(b.z),O.\u0275\u0275inject(P.J),O.\u0275\u0275inject(y.z),O.\u0275\u0275inject(g.vZ),O.\u0275\u0275inject(C.r),O.\u0275\u0275inject(S.kc),O.\u0275\u0275inject(d.D),O.\u0275\u0275inject(B.U),O.\u0275\u0275inject(w.Q),O.\u0275\u0275inject(V.M),O.\u0275\u0275inject(v.H),O.\u0275\u0275inject(m.e,8))},N.\u0275prov=O.\u0275\u0275defineInjectable({token:N,factory:N.\u0275fac}),N}(i.t)},86455:function(Le,oe,t){t.d(oe,{w:function(){return T}});var e=t(59214),n=t(22422),m=t(20019),i=t(16018),O=t(11719),I=powerbi.explore.SectionUtils,T=function(){function f(M,A,b,P){this.explorationCapabilities=M,this.explorationNavigation=A,this.pinVisualService=b,this.viewModeState=P}return f.prototype.showCopyVisualImageOption=function(M,A,b){return this.explorationCapabilities.getCapabilities().showCopyVisualImageButton&&!!M.contract.config.singleVisual.query&&!M.errorInfo&&this.pinVisualService.canPin(M)&&!I.isQuickExploreSection(A)&&this.getCopySource(b)},f.prototype.getActiveSection=function(){var M=this.explorationNavigation.getCurrentExploration();return M.sections[M.activeSectionIndex]},f.prototype.getCopySource=function(M){switch(M){case"ContextMenu":return this.explorationCapabilities.getCapabilities().showCopyImageContextMenuOptions;case"VisualHeader":return 0===this.viewModeState.getMode();default:return!1}},f.\u0275fac=function(A){return new(A||f)(e.\u0275\u0275inject(n.U),e.\u0275\u0275inject(m.z),e.\u0275\u0275inject(i.k),e.\u0275\u0275inject(O.kc))},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac}),f}()},94689:function(Le,oe,t){t.d(oe,{s:function(){return v}});var e=t(7005),n=t(92482),m=t(59214),i=t(51081),O=t(78099),I=t(89718),T=t(87714),f=t(86718),M=t(58962),A=t(64857),b=t(89515),P=t(70886),y=t(15333),C=t(41844),d=t(86942),g=powerbi.explore.services.events,S=powerbi.explore.util.ErrorDetailsUtility,B=powerbi.data.SQExprUtils,w=jsCommon.TraceType,v=function(){function u(r,h,p,D,x,z,Q,q,de,se,Ie,fe,re){this.aggrOps=r,this.commandStore=h,this.conceptualSchemaProxy=p,this.dataSources=D,this.errorService=x,this.eventBridge=z,this.featureSwitchService=Q,this.localizationService=q,this.dialogService=de,this.selection=se,this.telemetryService=Ie,this.visualAuthoring=fe,this.pauseQueriesService=re,this.services={aggrOps:this.aggrOps,commandStore:this.commandStore,conceptualSchemaProxy:this.conceptualSchemaProxy,dataSources:this.dataSources,errorService:this.errorService,eventBridge:this.eventBridge,featureSwitchService:this.featureSwitchService,localizationService:this.localizationService,dialogService:this.dialogService,selection:this.selection,telemetryService:this.telemetryService,visualAuthoring:this.visualAuthoring,pauseQueriesService:this.pauseQueriesService}}return u.prototype.create=function(r,h,p){return new c(r,h,p,this.services)},u.\u0275fac=function(h){return new(h||u)(m.\u0275\u0275inject(i.C),m.\u0275\u0275inject(n.D),m.\u0275\u0275inject(O.i),m.\u0275\u0275inject(I.D),m.\u0275\u0275inject(M.T),m.\u0275\u0275inject(T.J),m.\u0275\u0275inject(A.vZ),m.\u0275\u0275inject(b.o),m.\u0275\u0275inject(P.x),m.\u0275\u0275inject(f.z),m.\u0275\u0275inject(y.y0),m.\u0275\u0275inject(C.$),m.\u0275\u0275inject(d.F))},u.\u0275prov=m.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac}),u}(),c=function(){function u(r,h,p,D){this.viewModel=r,this.getVisualType=h,this.getVisualContract=p,this.services=D}return u.prototype.showErrorDetails=function(){var r,h=this.viewModel;if(h.errorInfo){var p=!(null!==(r=h.errorInfo.details)&&void 0!==r&&r.hideDebugInfo);this.logErrorAndShowDialog(h.errorInfo,this.getVisualType(),"User"!==h.errorInfo.source,p)}},u.prototype.showWarningDetails=function(){var r=this.viewModel,h={details:r.warningInfo?r.warningInfo.details:r.customVisualDeprecatedWarningInfo.details,code:r.warningInfo?r.warningInfo.code:r.customVisualDeprecatedWarningInfo.code,fixableError:0},p=!h.details.hideDebugInfo;this.logErrorAndShowDialog(h,this.getVisualType(),!1,p)},u.prototype.showTransformWarningDetails=function(){var r=this.viewModel;this.logErrorAndShowDialog({details:r.transformWarningInfo.details,code:r.transformWarningInfo.code,fixableError:0},this.getVisualType(),!1,!0)},u.prototype.showInfoDetails=function(){var r=this.viewModel;r.versionsInfo||this.logErrorAndShowDialog({details:r.visualInfo.details,code:r.visualInfo.code,fixableError:0},this.getVisualType(),!1,!1)},u.prototype.showPauseVisualWarning=function(){this.viewModel.visualPausedWarning={iconName:"pbi-glyph-info",bannerType:0,iconTooltip:this.services.localizationService.get("Paused_Visual_Pending_Status"),buttonText:this.services.localizationService.get("Refresh"),buttonTooltip:this.services.localizationService.get("Refresh"),buttonIcon:"refresh",allowDismiss:!1}},u.prototype.clearError=function(){var r=this.viewModel;r.errorInfo=void 0,r.warningInfo=void 0,r.transformWarningInfo=void 0,r.visualInfo=void 0,r.visualPausedWarning=void 0},u.prototype.showErrorOverlay=function(r,h,p,D){var x=this.viewModel,z=this.getVisualType(),Q=this.getVisualContract();if(this.services.telemetryService.logEvent(powerbi.telemetry.VisualError,{errorCode:h,targetVisualType:z,visualName:Q.name,message:r.message}),!x.errorInfo||x.errorInfo.code!==h){var q=S.getErrorOverlayType(h),de=S.shouldHideSeeDetails(h),se=this.services.conceptualSchemaProxy.getLatestCapabilities(this.services.dataSources.get(),void 0),Ie=this.getFixableErrorKind(h,this.services.featureSwitchService.featureSwitches.enableTableToTableRelationship&&se&&se.canEdit);if(7===Ie)return void this.showPauseVisualWarning();x.errorInfo={details:r,code:h,fixableError:Ie,hideSeeDetails:de,overlayType:q,requestId:p,source:D}}},u.prototype.showWarningIcon=function(r,h){var p=this.viewModel,D=this.getVisualType();this.logVisualWarning(D,h,r.message),!p.warningInfo&&(p.warningInfo={details:r,code:h})},u.prototype.showDeprecationWarning=function(){var r=this.viewModel,h=powerbi.common.getLocalize().get("CustomVisuals_DeprecatedMessageWarningKey"),p=powerbi.common.getLocalize().get("CustomVisuals_DeprecatedMessageWarningValue"),D={message:powerbi.common.getLocalize().get("CustomVisuals_DeprecatedMessage"),displayableErrorInfo:[{errorInfoKey:h,errorInfoValue:p}],hideAdditionalErrorInfo:!0};r.customVisualDeprecatedWarningInfo={details:D,code:"CustomVisuals_DeprecatedMessage"}},u.prototype.clearDeprecationWarning=function(){this.viewModel.customVisualDeprecatedWarningInfo=void 0},u.prototype.showTransformWarningIcon=function(r,h,p){var D=this.viewModel,x=this.getVisualType(),z=p?h.concat("|").concat("Sampled"):h;this.logVisualWarning(x,z,r.message),!D.transformWarningInfo&&(D.transformWarningInfo={details:r,code:h})},u.prototype.showInfoIcon=function(r,h){var p=this.viewModel,D=this.getVisualType();this.logVisualWarning(D,h,r.message),!p.visualInfo&&(p.visualInfo={details:r,code:h})},u.prototype.showPublicVersionsInfo=function(r,h){var p=this.viewModel;if(!p.visualInfo&&!p.versionsInfo&&r&&h){var D=this.services.localizationService.format("CustomVisuals_VersionIsNotUpdatedMessage",[r,h]);p.versionsInfo={details:{message:D,displayableErrorInfo:void 0,hideAdditionalErrorInfo:!0},code:D}}},u.prototype.clearPublicVersionsInfo=function(){this.viewModel.versionsInfo=void 0},u.prototype.fixErrors=function(){return(0,e.mG)(this,void 0,void 0,function(){var r,h,D,x;return(0,e.Jh)(this,function(z){switch(z.label){case 0:switch(r=this.viewModel,h=this.getVisualContract(),r.errorInfo.fixableError){case 1:return[3,1];case 2:return[3,2];case 3:return[3,3];case 4:return[3,4];case 5:return[3,5];case 6:return[3,6];case 7:case 0:return[3,9]}return[3,10];case 1:return powerbi.explore.services.selectionUtils.selectCanvasItem(h,this.services.selection),this.services.visualAuthoring.removeInvalidExpressions(h,this.services.dataSources.get()),[3,11];case 2:return D=B.getActiveTablesNames(h.config.singleVisual.query.defn),this.services.eventBridge.publishToChannel(g.missingTableRelationship,{tables:D}),[3,11];case 3:return this.removeBrokenFilters(),[3,11];case 4:return this.services.eventBridge.publishToChannel(g.showEnableScriptVisualsDialog,0),[3,11];case 5:return this.services.eventBridge.publishToChannel(g.showEnableScriptVisualsDialog,1),[3,11];case 6:return[4,(x=this.services.commandStore.DataImport.ShowDataSourceSettingsDialog).canExecuteAsync()];case 7:return z.sent()?[4,x.execute()]:[3,9];case 8:z.sent(),z.label=9;case 9:return[3,11];case 10:z.label=11;case 11:return[2]}})})},u.prototype.clearWarning=function(r){var h=this.viewModel;h.warningInfo&&h.warningInfo.code===r&&(h.warningInfo=void 0)},u.prototype.clearPausedVisualWarning=function(){this.viewModel.visualPausedWarning=void 0},u.prototype.removeBrokenFilters=function(){var r=this,h=this.getVisualContract(),p=h.filters,D={scopeType:0,container:h};this.services.conceptualSchemaProxy.get(this.services.dataSources.get()).then(function(x){for(var z=0,Q=p;z<Q.length;z++){var q=Q[z];q.filter&&!_.isEmpty(q.filter.validate(x,r.services.aggrOps))&&r.services.visualAuthoring.removeFilter(q,D,void 0,void 0)}})},u.prototype.generateShowMoreErrorDetails=function(r){var h=[],p=r.message,D=powerbi.common.getLocalize().get("ServiceError_CannotLoadVisual");if(S.hasAdditionalErrorInfo(r)&&(D=r.displayableErrorInfo[0].errorInfoKey,p=r.displayableErrorInfo[0].errorInfoValue,r.displayableErrorInfo.length>1))for(var x=1;x<r.displayableErrorInfo.length;x++)h.push(r.displayableErrorInfo[x]);return{title:D,message:p,displayableErrorInfo:h,debugErrorInfo:r.debugErrorInfo,source:r.source,hideErrorHelperText:r.hideErrorHelperText}},u.prototype.getFixableErrorKind=function(r,h){switch(r){case"Missing_References":return 1;case"InvalidUnconstrainedJoin":return h?2:0;case"Broken_Filters":return 3;case"ScriptVisualsNotEnabled":return 4;case"PythonVisualsNotEnabled":return 5;case"QueryCacheMissError":return 7;case powerbi.PBID_WindowsAuthImpersonationNotSupported:case powerbi.PBID_WindowsAuthNotSupported:return 6;default:return 0}},u.prototype.logErrorAndShowDialog=function(r,h,p,D){var Q,q,x=this.generateShowMoreErrorDetails(r.details),z=r.code;if(p?(Q="VisualErrorSeeDetails_"+z+"_"+h,q=w.Error):(Q="VisualWarningSeeDetails_"+z+"_"+h,q=w.Warning),D){var de={title:x.title,displayableErrorInfo:x.displayableErrorInfo,debugErrorInfo:x.debugErrorInfo,level:q,source:null!=x.source?x.source:r.source,hideErrorHelperText:!!x.hideErrorHelperText},se=r.details;se&&(de.showAdditionalErrorInfo=!0!==se.hideAdditionalErrorInfo,se.helpLink&&(de.helpLink=se.helpLink,de.displayLearnMoreHelpLink=1===se.helpLinkType)),r.requestId&&(de.requestId=r.requestId),this.services.errorService.error(x.message,Q,de)}else{var Ie=r.details.helpLink;this.services.dialogService.promptSimpleDialog(x.title,x.message,{minWidth:"560px"},Ie?{url:Ie,text:"LearnMore"}:void 0,this.services.localizationService.get("PBI_Button_Label_Close"))}},u.prototype.logVisualWarning=function(r,h,p){var D=this.getVisualContract();this.services.telemetryService.logEvent(powerbi.telemetry.VisualWarning,{targetVisualType:r,visualName:D.name,isError:!1,errorSource:"PowerBI",errorCode:h,activityName:p})},u}()},32584:function(Le,oe,t){t.d(oe,{p:function(){return ae}});var e=t(7005),n=t(32531),m=t(16912),i=t(64450),O=t(59214),I=t(78099),T=t(7772),f=t(99944),M=t(89718),A=t(76115),b=t(69255),P=t(87714),y=t(537),C=t(42645),d=t(554),g=t(43801),S=t(86718),B=t(13922),w=t(15841),V=t(12242),v=t(22422),c=t(67613),u=t(64857),r=t(26286),h=t(63007),p=t(81602),D=t(89515),x=t(41844),z=t(11719),Q=t(44302),q=t(79382),de=t(81092),se=t(26963),Ie=t(8576),fe=t(26231),re=t(51387),pe=t(86455),ge=t(75811),be=powerbi.explore.components.VisualContainerContextMenu,ae=function(){function X(le,ee,N,F,E,k,R,W,Z,me,_e,he,G,ce,Fe,je,Oe,J,ue,Me,Se,Ge,nt,st,yt,Ae,Ve,xe,Pe,et,$e,lt,Pt,Ct){this.localizationService=je,this.pbiMenuService=$e,this.service=powerbi.explore.services.createVisualContainerMenuFactoryService(le,ee,N,F,E,k,R,W,Z,me,_e,he,G,ce,function(Ue){return Fe.get(Ue)},Oe,J,ue,Me,Se,Ge,nt,st,yt,Ae,Ve,xe,Pe,et,lt,Ct,Pt)}return X.prototype.createDrillthroughCommands=function(le,ee,N){return this.service.createDrillthroughCommands(le,ee,N)},X.prototype.createOptionsCommands=function(le,ee,N){return this.service.createOptionsCommands(le,ee,N)},X.prototype.createCommands=function(le,ee,N,F,E,k,R,W){return this.service.createCommands(le,ee,N,F,E,k,R,W)},X.prototype.createMenu=function(le,ee,N,F,E,k,R,W,Z){return(0,e.mG)(this,void 0,void 0,function(){var me,_e,he;return(0,e.Jh)(this,function(G){switch(G.label){case 0:return me=this,[4,this.createCommands(le,ee,N,F,E,k,W,Z)];case 1:return me.commands=G.sent(),_e=new be(this.localizationService),he=(0,e.pi)({element:R},ee.position),[2,this.drawContextMenu(_e,he,!0,!0)]}})})},X.prototype.createDrillthroughMenu=function(le,ee,N,F,E){return(0,e.mG)(this,void 0,void 0,function(){var k,R,W;return(0,e.Jh)(this,function(Z){switch(Z.label){case 0:return k=this,[4,this.createDrillthroughCommands(le,ee,F)];case 1:return k.commands=[Z.sent()],R=new be(this.localizationService),W=(0,e.pi)({element:E},N),[2,this.drawContextMenu(R,W)]}})})},X.prototype.createOptionsMenu=function(le,ee,N,F){return(0,e.mG)(this,void 0,void 0,function(){var E,k;return(0,e.Jh)(this,function(R){return this.commands=this.createOptionsCommands(le,ee,N),E=new be(this.localizationService,!0),k=(0,e.pi)({element:F.anchorElement.get(0)},F.position),[2,this.drawContextMenu(E,k,!0,!0,F)]})})},X.getPbiMenuConfig=function(le,ee,N,F,E){return void 0===N&&(N=!1),void 0===F&&(F=!1),{menu:X.createPbiMenu(le.items,N,E),origin:ee,closeOnButtonClick:!0,menuMode:m.Kb.Compact,ignoreOverlayMaxDimensions:F}},X.prototype.drawContextMenu=function(le,ee,N,F,E){return void 0===N&&(N=!1),void 0===F&&(F=!1),(0,e.mG)(this,void 0,powerbi.Promise,function(){var k;return(0,e.Jh)(this,function(W){switch(W.label){case 0:return[4,le.createItems(this.commands)];case 1:return k=W.sent(),this.pbiMenuService.open(X.getPbiMenuConfig(k,ee,N,F,E)).onButtonClick$.pipe((0,n.q)(1)).subscribe(function(Z){X.menuItemClick(Z.id,le)}),[2,le]}})})},X.menuItemClick=function(le,ee){ee.getCommandByIndex(le).execute()},X.convertItemType=function(le){var ee;return((ee={})[0]=m.iB.Button,ee[1]=m.iB.Divider,ee[2]=m.iB.Header,ee)[le]},X.createPbiMenu=function(le,ee,N){var F,E,k=[],R=null===(F=null==N?void 0:N.backgroundStyle)||void 0===F?void 0:F.getCss(),W=null===(E=null==N?void 0:N.foregroundStyle)||void 0===E?void 0:E.getCss(),Z=null!=N&&N.foregroundStyle?{color:W.color}:void 0,me={color:W?W.color:void 0,"background-color":"transparent",":hover":R?{"background-color":R[":hover"]}:void 0};return le.forEach(function(_e){var he,G,ce=(null===(he=_e.children)||void 0===he?void 0:he.length)>0;k.push({id:_e.key,type:ce?m.iB.SubMenu:X.convertItemType(_e.type),text:_e.text,tooltip:null!==(G=_e.tooltip)&&void 0!==G?G:_e.text,checkable:null!=_e.selected||null!=_e.checked,checked:_e.selected||_e.checked,disabled:_e.disabled,styles:me,icon:ee?{type:0,glyph:_e.icon,styles:Z}:void 0,menu:ce?X.createPbiMenu(_e.children,ee,N):void 0})}),{items:k,styles:R?{"background-color":R["background-color"],"border-color":R["background-color"]}:void 0}},X.prototype.getSortCommands=function(le,ee,N){return this.service.getSortCommands(le,ee,N)},X.\u0275fac=function(ee){return new(ee||X)(O.\u0275\u0275inject(I.i),O.\u0275\u0275inject(T.r),O.\u0275\u0275inject(f.Yv),O.\u0275\u0275inject(M.D),O.\u0275\u0275inject(A.s),O.\u0275\u0275inject(b.v),O.\u0275\u0275inject(w.W),O.\u0275\u0275inject(V.M),O.\u0275\u0275inject(P.J),O.\u0275\u0275inject(v.U),O.\u0275\u0275inject(c.I),O.\u0275\u0275inject(u.vZ),O.\u0275\u0275inject(r.RD),O.\u0275\u0275inject(h.Y),O.\u0275\u0275inject(p.H),O.\u0275\u0275inject(D.o),O.\u0275\u0275inject(y.w),O.\u0275\u0275inject(i.t),O.\u0275\u0275inject(x.$),O.\u0275\u0275inject(z.kc),O.\u0275\u0275inject(C.r),O.\u0275\u0275inject(Q.y0),O.\u0275\u0275inject(q.r),O.\u0275\u0275inject(d.f),O.\u0275\u0275inject(de.F),O.\u0275\u0275inject(g.z),O.\u0275\u0275inject(se.D),O.\u0275\u0275inject(S.z),O.\u0275\u0275inject(Ie.U),O.\u0275\u0275inject(B.s),O.\u0275\u0275inject(fe.o),O.\u0275\u0275inject(re.e),O.\u0275\u0275inject(pe.w),O.\u0275\u0275inject(ge.w))},X.\u0275prov=O.\u0275\u0275defineInjectable({token:X,factory:X.\u0275fac}),X}()},37687:function(Le,oe,t){t.d(oe,{K:function(){return m}});var e=t(59214),n=powerbi.explore.util.VisualContainerUtils,m=function(){function i(){}return i.prototype.updateVisual=function(O,I,T,f,M,A){n.updateVisual(O,I,T,f,M,A)},i.prototype.wrapRunningVisual=function(O,I,T,f,M,A,b,P,y,C){return n.wrapRunningVisual(O,I,T,f,M,A,b,P,y,C)},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac=function(I){return new(I||i)}}),i}()},85999:function(Le,oe,t){t.d(oe,{k:function(){return m}});var e=t(59214),n=t(20019),m=function(){function i(O){this.explorationNavigationService=O}return i.prototype.getReportId=function(){var O=this.explorationNavigationService.getCurrentExploration();return O&&O.report&&O.report.objectId},i.\u0275fac=function(I){return new(I||i)(e.\u0275\u0275inject(n.z))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i}()},1426:function(Le,oe,t){t.d(oe,{S:function(){return O}});var e=t(59214),n=t(44302),m=powerbi.extensibility.convertVisualEventType,i=powerbi.telemetry,O=function(){function f(M){this.telemetryService=M}return f.prototype.create=function(M,A,b){return new T(this.telemetryService,M,A,b)},f.\u0275fac=function(A){return new(A||f)(e.\u0275\u0275inject(n.y0))},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"}),f}(),T=function(){function f(M,A,b,P){this.telemetryService=M,this.visualType=A,this.visualName=b,this.instanceId=P}return f.prototype.trace=function(M,A){var b=m(M);if(b){var P=function(f){switch(f){case"VisualEventError":return i.VisualEventError;case"VisualEventTrace":return i.VisualEventTrace;case"VisualEventRenderStarted":return i.VisualEventRenderStarted;case"VisualEventRenderCompleted":return i.VisualEventRenderCompleted;default:return}}(b);P&&this.telemetryService.logEvent(P,{visualType:this.visualType,instanceId:this.instanceId,payload:A})}},f.prototype.traceCustom=function(M){M&&this.telemetryService.logCustomEvent(M)},f}()},17107:function(Le,oe,t){t.d(oe,{z:function(){return I}});var e=t(72249),n=t(14204),m=t(59214),i=t(93997),O=t(94312),I=function(){function T(f,M){this.overlay=f,this.rtl=M,this.containers={},this.registeredVisualContainersSubject=new e.X([]),this.registeredVisualContainers$=this.registeredVisualContainersSubject.asObservable()}return T.prototype.getOrigin=function(f){var M=this.containers[f.name];if(M)return M.get(0)},T.prototype.getElement=function(f){return this.containers[f.name]},T.prototype.getRelativeOffsets=function(f,M){var A=this.containers[f.name];if(A){var b=this.rtl.isRtlLayout,P=(0,n.V)({origin:A.get(0),globalPoint:M,offset:M.offset}),y=P.right,C=P.left;if(b){var S=C;C=y,y=S}return{startX:C,endX:y,startY:P.top,endY:P.bottom}}},T.prototype.flexibleConnectedTo=function(f){var M=this.getOrigin(f);if(M)return this.overlay.position().flexibleConnectedTo(M)},T.prototype.registerVisualContainer=function(f,M){this.containers[f.name]=M;var b=this.registeredVisualContainersSubject.value;b.push(f),this.registeredVisualContainersSubject.next(b)},T.prototype.unregisterVisualContainer=function(f){delete this.containers[f.name];var A=this.registeredVisualContainersSubject.value;_.remove(A,function(b){return b.name===f.name}),this.registeredVisualContainersSubject.next(A)},T.\u0275fac=function(M){return new(M||T)(m.\u0275\u0275inject(i._c),m.\u0275\u0275inject(O.q))},T.\u0275prov=m.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T}()},20010:function(Le,oe,t){t.d(oe,{R:function(){return T}});var e=t(44302),n=t(82653),m=t(3019),i=t(64450),O=t(59214),I=function(){function f(M){var A=M&&JSON.parse(M);this.unpinnedVisuals=A&&A.unpinnedVisuals||[],this.favoritePublicCustomVisuals=A&&A.favoritePublicCustomVisuals||[]}return f.prototype.addUnpinnedVisual=function(M){this.isUnpinned(M)||this.unpinnedVisuals.push(M)},f.prototype.getFavoritePublicCustomVisuals=function(){return this.favoritePublicCustomVisuals},f.prototype.addFavoritePublicCustomVisual=function(M){this.isFavoritePublicCustomVisual(M)||this.favoritePublicCustomVisuals.push(M)},f.prototype.isFavoritePublicCustomVisual=function(M){return _.includes(this.favoritePublicCustomVisuals,M)},f.prototype.removeFavoritePublicCustomVisual=function(M){_.remove(this.favoritePublicCustomVisuals,function(A){return A===M})},f.prototype.isUnpinned=function(M){return _.includes(this.unpinnedVisuals,M)},f.prototype.removeUnpinnedVisual=function(M){_.remove(this.unpinnedVisuals,function(A){return A===M})},f.prototype.reset=function(){this.unpinnedVisuals=[]},f.prototype.toString=function(){return JSON.stringify(this)},f}(),T=function(){function f(M,A,b,P){this.visualPaneSettingsLoader=M,this.featureSwitchService=A,this.promiseFactory=b,this.telemetryService=P,this.reset()}return f.prototype.reset=function(){this.visualPaneSettings=null,this.userSettingsLoadInProgress=!1,this.userSettingsLoaded=!1,this.exlorationVisualTypes={},this.featureSwitchService.personalVisualizationPaneEnabled&&this.ensureUserSettingsLoaded(!1)},f.prototype.updateVisuals=function(){return this.ensureUserSettingsLoaded(!1)},f.prototype.getFavoritePublicCustomVisuals=function(){var M=this;return this.ensureUserSettingsLoaded(!1).then(function(){return M.visualPaneSettings.getFavoritePublicCustomVisuals()})},f.prototype.unpinVisual=function(M){var A=this;return this.ensureUserSettingsLoaded(!0).then(function(){return A.visualPaneSettings.addUnpinnedVisual(M.name),A.saveVisualPaneSettings("Unpin",M.name)})},f.prototype.addFavoritePublicCustomVisual=function(M){var A=this;return this.ensureUserSettingsLoaded(!0).then(function(){return A.visualPaneSettings.addFavoritePublicCustomVisual(M.name),A.saveVisualPaneSettings("AddFavoritePublicCustomVisual",M.name)})},f.prototype.removeFavoritePublicCustomVisual=function(M){var A=this;return this.ensureUserSettingsLoaded(!0).then(function(){return A.visualPaneSettings.removeFavoritePublicCustomVisual(M.name),A.saveVisualPaneSettings("RemoveFavoritePublicCustomVisual",M.name)})},f.prototype.restoreVisual=function(M){var A=this;return this.ensureUserSettingsLoaded(!1).then(function(){return A.visualPaneSettings.removeUnpinnedVisual(M.name),A.saveVisualPaneSettings("Restore",M.name)})},f.prototype.restoreAllVisuals=function(){var M=this;return this.ensureUserSettingsLoaded(!1).then(function(){return M.visualPaneSettings.reset(),M.saveVisualPaneSettings("RestoreAll")})},f.prototype.resetExplorationVisuals=function(){this.exlorationVisualTypes={}},f.prototype.addExplorationVisual=function(M){this.exlorationVisualTypes[M]=!0},f.prototype.isExplorationVisual=function(M){return this.exlorationVisualTypes[M]},f.prototype.isUnpinnedVisual=function(M){return!!this.visualPaneSettings&&this.visualPaneSettings.isUnpinned(M)},f.prototype.isFavoritePublicCustomVisual=function(M){return!!this.visualPaneSettings&&this.visualPaneSettings.isFavoritePublicCustomVisual(M)},f.prototype.ensureUserSettingsLoaded=function(M){var A=this;return this.userSettingsLoaded||this.userSettingsLoadInProgress||(this.userSettingsPromise=this.promiseFactory.defer(),this.visualPaneSettingsLoader.getVisualPaneSettings(M).then(function(b){A.visualPaneSettings=new I(b),A.telemetryService.logEvent(powerbi.telemetry.SettingsVisualPane,{visualPaneAction:"Get",visualPaneActionPayload:b}),A.userSettingsLoaded=!0,A.userSettingsPromise.resolve()}).catch(function(){A.userSettingsLoaded=!1,A.userSettingsPromise.reject()}).finally(function(){A.userSettingsLoadInProgress=!1}),this.userSettingsLoadInProgress=!0),this.userSettingsPromise.promise},f.prototype.saveVisualPaneSettings=function(M,A){void 0===A&&(A=null);var b=this.telemetryService.startEvent(powerbi.telemetry.SettingsVisualPane,{visualPaneAction:M,visualPaneActionPayload:A});return this.visualPaneSettingsLoader.updateVisualPaneSettings(this.visualPaneSettings.toString(),b)},f.\u0275fac=function(A){return new(A||f)(O.\u0275\u0275inject(n.Y),O.\u0275\u0275inject(m.h),O.\u0275\u0275inject(i.t),O.\u0275\u0275inject(e.y0))},f.\u0275prov=O.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"}),f}()},56577:function(Le,oe,t){t.d(oe,{M:function(){return b}});var e=t(59214),n=t(20019),m=t(45927),i=t(99593),O=t(89718),I=t(49470),T=t(64857),f=t(26963),M=t(78099),A=t(57644),b=function(){function P(y,C,d,g,S,B,w,V,v){this.service=powerbi.visualSyncServiceModuleFactory().create(d,y,C,g,S,B,w,V,v)}return P.prototype.syncFilterState=function(y,C){return this.service.syncFilterState(y,C)},P.prototype.getVisualsAffectByFieldChanges=function(y){return this.service.getVisualsAffectByFieldChanges(y)},P.prototype.generateUniqueGroupName=function(y,C,d){return this.service.generateUniqueGroupName(y,C,d)},P.prototype.syncVisualFiltersState=function(y){return this.service.syncVisualFiltersState(y)},P.\u0275fac=function(C){return new(C||P)(e.\u0275\u0275inject(n.z),e.\u0275\u0275inject(m.L),e.\u0275\u0275inject(i.J),e.\u0275\u0275inject(T.vZ),e.\u0275\u0275inject(f.D),e.\u0275\u0275inject(M.i),e.\u0275\u0275inject(O.D),e.\u0275\u0275inject(I.O),e.\u0275\u0275inject(A.Q))},P.\u0275prov=e.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},14545:function(Le,oe,t){t.d(oe,{$:function(){return D},$R:function(){return T},$k:function(){return w},$s:function(){return v},Cc:function(){return z},Iw:function(){return y},Sw:function(){return S},iD:function(){return O},nb:function(){return q},o_:function(){return u},qd:function(){return d},tJ:function(){return b},wJ:function(){return M},zc:function(){return h}});var e=powerbi.generateTelemetryEvent,n=powerbi.telemetry.EventFactories,m=powerbi.telemetryEventFactory,i="PBI.PersonalizeVisual.ResetVisual",O=window.updatedTelemetryFunction?e(i):n[i]=function(de){return m({name:i,info:de})},I="PBI.ExploreUI.ChangeDetection",T=window.updatedTelemetryFunction?e(I):n[I]=function(de){return m({name:I,info:de})},f="PBI.Sparklines.OpenDialog",M=window.updatedTelemetryFunction?e(f):n[f]=function(de){return m({name:f,info:de})},A="PBI.LoadProgressNotification.ModifyCounter",b=window.updatedTelemetryFunction?e(A):n[A]=function(de){return m({name:A,info:de})},P="PBI.LoadProgressNotification.Reset",y=window.updatedTelemetryFunction?e(P):n[P]=function(de){return m({name:P,info:de})},C="PBI.LoadProgressNotification.Cancel",d=window.updatedTelemetryFunction?e(C):n[C]=function(de){return m({name:C,info:de})},g="PBI.Sparklines.OpenWithMaxSparklines",S=window.updatedTelemetryFunction?e(g):n[g]=function(de){return m({name:g,info:de})},B="PBI.EX.Panes",w=window.updatedTelemetryFunction?e(B):n[B]=function(de){return m({name:B,info:de})},V="PBI.ApplyAllSlicersButton.Create",v=window.updatedTelemetryFunction?e(V):n[V]=function(de){return m({name:V,info:de})},c="PBI.ApplyAllSlicersButton.Click",u=window.updatedTelemetryFunction?e(c):n[c]=function(de){return m({name:c,info:de})},r="PBI.ClearAllSlicersButton.Create",h=window.updatedTelemetryFunction?e(r):n[r]=function(de){return m({name:r,info:de})},p="PBI.ClearAllSlicersButton.Click",D=window.updatedTelemetryFunction?e(p):n[p]=function(de){return m({name:p,info:de})},x="PBI.EX.AddVisualToCanvas",z=window.updatedTelemetryFunction?e(x):n[x]=function(de){return m({name:x,info:de})},Q="PBI.EX.AboutVisualDialog",q=window.updatedTelemetryFunction?e(Q):n[Q]=function(de){return m({name:Q,info:de})}},31120:function(Le,oe,t){t.d(oe,{l:function(){return O}});var e=powerbi.generateTelemetryEvent,n=powerbi.telemetry.EventFactories,m=powerbi.telemetryEventFactory,i="PBI.PersonalizeVisual.OpenOverlay",O=window.updatedTelemetryFunction?e(i,{logExpAssignment:!0}):n[i]=function(I){return m({name:i,info:I,logExpAssignment:!0})}},23583:function(Le,oe,t){t.d(oe,{H:function(){return O}});var e=t(7005),n=powerbi.visualHost.ResourcePackageReferenceResolver,m=powerbi.explore.contracts.VisualContainer,i=powerbi.explore.util.VisualContainerUtils;function O(I,T,f,M,A,b){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var P,y,C,g,S;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return P=i.getVisualType(I),y=i.getObjectDefinitions(I),C=f.capabilities(P),[4,n.loadAndResolveFromDataViewObjects(y,C&&C.objects,T.resourcePackages,M,A,!0)];case 1:return g=B.sent(),(S=m.clone(I,b)).config.singleVisual.objects=g,[2,S]}})})}},59863:function(Le,oe,t){t.d(oe,{Dp:function(){return e},I$:function(){return i},Oq:function(){return I},Y2:function(){return O}});var e={UnitLength:96,UnitDivisions:12},n=[12,6,4,3,2,1];function i(f,M){return f===M||f&&M&&f.UnitLength===M.UnitLength&&f.UnitDivisions===M.UnitDivisions}function O(f,M){var A=f/(M/e.UnitLength);A=Math.floor(A);var b=_.find(n,function(P){return 1===P||A/P>=8});return{UnitLength:A,UnitDivisions:b}}function I(f,M){return{x:T(f.x,M.width),y:T(f.y,M.height)}}function T(f,M){var A=O(f*M,M);return O(A.UnitLength/e.UnitLength*M,M).UnitLength/e.UnitLength}},86390:function(Le,oe,t){t.d(oe,{h:function(){return e}});var e=function(){function n(m){this.formGroup=m}return n.prototype.setDirty=function(){this.formGroup.markAsDirty()},n.prototype.setPristine=function(){this.formGroup.markAsPristine()},n.prototype.isDirty=function(){return this.formGroup.dirty},n.prototype.isValid=function(){return this.formGroup.valid},n}()},55279:function(Le,oe,t){function m(I,T){var f=!1;if(I){var M=I.sections;if(M)for(var A=0,b=M.length;A<b;A++){var y=M[A].visualContainers;if(y)for(var C=function(w,V){var c=y[w].config.singleVisual.visualType;if(c&&!T.getPlugin(c)){if(I.resourcePackages){if(I.resourcePackages.some(function(u){return u.name===c}))return"continue";if(powerbi.visualHost.CustomVisualsUtils.isOrganizationalCustomVisual(c))return"continue"}return f=!0,"break"}},d=0,g=y.length;d<g&&"break"!==C(d);d++);}}return f}function O(I){return I===powerbi.DMTS_NoGatewayWithAllDatasourcesToBindError||I===powerbi.DMTS_MultipleGatewaysWithAllDatasourcesToBindError||I===powerbi.DMTS_DatasourceHasNoCredentialError||I===powerbi.DM_GWPipeline_Client_GatewayUnreachable||I===powerbi.DM_GWPipeline_Client_OAuthTokenRefreshFailedError||I===powerbi.DMTS_UserLostPermissionToDatasourceError||I===powerbi.DMTS_UserNotFoundInADGraphError||I===powerbi.DM_GWPipeline_Gateway_DataSourceAccessError||I===powerbi.DM_GWPipeline_Gateway_GatewayOverloadedMemory||I===powerbi.DM_GWPipeline_Gateway_GatewayOverloadedConcurrency||I===powerbi.DM_GWPipeline_Gateway_ServerUnreachable||I===powerbi.DM_GWPipeline_Gateway_GatewayOverloadedProcessor||I===powerbi.DM_GWPipeline_Gateway_ImpersonationError||I===powerbi.DM_GWPipeline_Gateway_InvalidMashupConnectionString||I===powerbi.DM_GWPipeline_Gateway_DatabaseLoginError||I===powerbi.DM_GWPipeline_Gateway_SqlTimeoutException||I===powerbi.DM_GWPipeline_Gateway_AdomdTimeoutException||I===powerbi.DM_GWPipeline_Gateway_InvalidObjectNameException||I===powerbi.DM_GWPipeline_Gateway_ConnectionBrokenException||I===powerbi.DM_GWPipeline_Gateway_MemoryError||I===powerbi.DM_GWPipeline_Gateway_MissingStructureError||I===powerbi.DM_GWPipeline_Gateway_UnprocessedStructureError||I===powerbi.DM_GWPipeline_Gateway_ModelLoadError||I===powerbi.DM_GWPipeline_Gateway_CancellationError||I===powerbi.DM_GWPipeline_Gateway_QueryExecutionError||I===powerbi.DM_GWPipeline_Gateway_RecalculationRequiredError||I===powerbi.DM_GWPipeline_Gateway_AdomdConnectError||I===powerbi.DM_GWPipeline_Gateway_MashupDataAccessError||I===powerbi.RS_CannotRetrieveModel||I===powerbi.RS_AccessDeniedDueToRLSGroup||I===powerbi.RLSNotAuthorizedForModel||I===powerbi.RS_AccessDenied}t.d(oe,{$V:function(){return m},Uy:function(){return O}}),powerbi}}]);